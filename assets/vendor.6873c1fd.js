var fl=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},k={exports:{}},Se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wa=Symbol.for("react.element"),OC=Symbol.for("react.portal"),LC=Symbol.for("react.fragment"),DC=Symbol.for("react.strict_mode"),IC=Symbol.for("react.profiler"),FC=Symbol.for("react.provider"),NC=Symbol.for("react.context"),zC=Symbol.for("react.forward_ref"),jC=Symbol.for("react.suspense"),HC=Symbol.for("react.memo"),VC=Symbol.for("react.lazy"),Pv=Symbol.iterator;function $C(r){return r===null||typeof r!="object"?null:(r=Pv&&r[Pv]||r["@@iterator"],typeof r=="function"?r:null)}var $y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Gy=Object.assign,By={};function yo(r,t,n){this.props=r,this.context=t,this.refs=By,this.updater=n||$y}yo.prototype.isReactComponent={};yo.prototype.setState=function(r,t){if(typeof r!="object"&&typeof r!="function"&&r!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,r,t,"setState")};yo.prototype.forceUpdate=function(r){this.updater.enqueueForceUpdate(this,r,"forceUpdate")};function Wy(){}Wy.prototype=yo.prototype;function Rd(r,t,n){this.props=r,this.context=t,this.refs=By,this.updater=n||$y}var Ad=Rd.prototype=new Wy;Ad.constructor=Rd;Gy(Ad,yo.prototype);Ad.isPureReactComponent=!0;var Sv=Array.isArray,Zy=Object.prototype.hasOwnProperty,Od={current:null},Uy={key:!0,ref:!0,__self:!0,__source:!0};function qy(r,t,n){var i,e={},o=null,a=null;if(t!=null)for(i in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(o=""+t.key),t)Zy.call(t,i)&&!Uy.hasOwnProperty(i)&&(e[i]=t[i]);var s=arguments.length-2;if(s===1)e.children=n;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];e.children=l}if(r&&r.defaultProps)for(i in s=r.defaultProps,s)e[i]===void 0&&(e[i]=s[i]);return{$$typeof:Wa,type:r,key:o,ref:a,props:e,_owner:Od.current}}function GC(r,t){return{$$typeof:Wa,type:r.type,key:t,ref:r.ref,props:r.props,_owner:r._owner}}function Ld(r){return typeof r=="object"&&r!==null&&r.$$typeof===Wa}function BC(r){var t={"=":"=0",":":"=2"};return"$"+r.replace(/[=:]/g,function(n){return t[n]})}var Ev=/\/+/g;function mh(r,t){return typeof r=="object"&&r!==null&&r.key!=null?BC(""+r.key):t.toString(36)}function dl(r,t,n,i,e){var o=typeof r;(o==="undefined"||o==="boolean")&&(r=null);var a=!1;if(r===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(r.$$typeof){case Wa:case OC:a=!0}}if(a)return a=r,e=e(a),r=i===""?"."+mh(a,0):i,Sv(e)?(n="",r!=null&&(n=r.replace(Ev,"$&/")+"/"),dl(e,t,n,"",function(u){return u})):e!=null&&(Ld(e)&&(e=GC(e,n+(!e.key||a&&a.key===e.key?"":(""+e.key).replace(Ev,"$&/")+"/")+r)),t.push(e)),1;if(a=0,i=i===""?".":i+":",Sv(r))for(var s=0;s<r.length;s++){o=r[s];var l=i+mh(o,s);a+=dl(o,t,n,l,e)}else if(l=$C(r),typeof l=="function")for(r=l.call(r),s=0;!(o=r.next()).done;)o=o.value,l=i+mh(o,s++),a+=dl(o,t,n,l,e);else if(o==="object")throw t=String(r),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function ps(r,t,n){if(r==null)return r;var i=[],e=0;return dl(r,i,"","",function(o){return t.call(n,o,e++)}),i}function WC(r){if(r._status===-1){var t=r._result;t=t(),t.then(function(n){(r._status===0||r._status===-1)&&(r._status=1,r._result=n)},function(n){(r._status===0||r._status===-1)&&(r._status=2,r._result=n)}),r._status===-1&&(r._status=0,r._result=t)}if(r._status===1)return r._result.default;throw r._result}var Rt={current:null},gl={transition:null},ZC={ReactCurrentDispatcher:Rt,ReactCurrentBatchConfig:gl,ReactCurrentOwner:Od};Se.Children={map:ps,forEach:function(r,t,n){ps(r,function(){t.apply(this,arguments)},n)},count:function(r){var t=0;return ps(r,function(){t++}),t},toArray:function(r){return ps(r,function(t){return t})||[]},only:function(r){if(!Ld(r))throw Error("React.Children.only expected to receive a single React element child.");return r}};Se.Component=yo;Se.Fragment=LC;Se.Profiler=IC;Se.PureComponent=Rd;Se.StrictMode=DC;Se.Suspense=jC;Se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZC;Se.cloneElement=function(r,t,n){if(r==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+r+".");var i=Gy({},r.props),e=r.key,o=r.ref,a=r._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,a=Od.current),t.key!==void 0&&(e=""+t.key),r.type&&r.type.defaultProps)var s=r.type.defaultProps;for(l in t)Zy.call(t,l)&&!Uy.hasOwnProperty(l)&&(i[l]=t[l]===void 0&&s!==void 0?s[l]:t[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){s=Array(l);for(var u=0;u<l;u++)s[u]=arguments[u+2];i.children=s}return{$$typeof:Wa,type:r.type,key:e,ref:o,props:i,_owner:a}};Se.createContext=function(r){return r={$$typeof:NC,_currentValue:r,_currentValue2:r,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},r.Provider={$$typeof:FC,_context:r},r.Consumer=r};Se.createElement=qy;Se.createFactory=function(r){var t=qy.bind(null,r);return t.type=r,t};Se.createRef=function(){return{current:null}};Se.forwardRef=function(r){return{$$typeof:zC,render:r}};Se.isValidElement=Ld;Se.lazy=function(r){return{$$typeof:VC,_payload:{_status:-1,_result:r},_init:WC}};Se.memo=function(r,t){return{$$typeof:HC,type:r,compare:t===void 0?null:t}};Se.startTransition=function(r){var t=gl.transition;gl.transition={};try{r()}finally{gl.transition=t}};Se.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Se.useCallback=function(r,t){return Rt.current.useCallback(r,t)};Se.useContext=function(r){return Rt.current.useContext(r)};Se.useDebugValue=function(){};Se.useDeferredValue=function(r){return Rt.current.useDeferredValue(r)};Se.useEffect=function(r,t){return Rt.current.useEffect(r,t)};Se.useId=function(){return Rt.current.useId()};Se.useImperativeHandle=function(r,t,n){return Rt.current.useImperativeHandle(r,t,n)};Se.useInsertionEffect=function(r,t){return Rt.current.useInsertionEffect(r,t)};Se.useLayoutEffect=function(r,t){return Rt.current.useLayoutEffect(r,t)};Se.useMemo=function(r,t){return Rt.current.useMemo(r,t)};Se.useReducer=function(r,t,n){return Rt.current.useReducer(r,t,n)};Se.useRef=function(r){return Rt.current.useRef(r)};Se.useState=function(r){return Rt.current.useState(r)};Se.useSyncExternalStore=function(r,t,n){return Rt.current.useSyncExternalStore(r,t,n)};Se.useTransition=function(){return Rt.current.useTransition()};Se.version="18.0.0-rc.3-de516ca5a-20220321";k.exports=Se;var or=k.exports,Dd={exports:{}},Jt={},Yy={exports:{}},Jy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(r){function t(E,T){var L=E.length;E.push(T);e:for(;0<L;){var V=L-1>>>1,F=E[V];if(0<e(F,T))E[V]=T,E[L]=F,L=V;else break e}}function n(E){return E.length===0?null:E[0]}function i(E){if(E.length===0)return null;var T=E[0],L=E.pop();if(L!==T){E[0]=L;e:for(var V=0,F=E.length,H=F>>>1;V<H;){var $=2*(V+1)-1,G=E[$],b=$+1,ee=E[b];if(0>e(G,L))b<F&&0>e(ee,G)?(E[V]=ee,E[b]=L,V=b):(E[V]=G,E[$]=L,V=$);else if(b<F&&0>e(ee,L))E[V]=ee,E[b]=L,V=b;else break e}}return T}function e(E,T){var L=E.sortIndex-T.sortIndex;return L!==0?L:E.id-T.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;r.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();r.unstable_now=function(){return a.now()-s}}var l=[],u=[],h=1,c=null,f=3,d=!1,g=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(E){for(var T=n(u);T!==null;){if(T.callback===null)i(u);else if(T.startTime<=E)i(u),T.sortIndex=T.expirationTime,t(l,T);else break;T=n(u)}}function x(E){if(v=!1,_(E),!g)if(n(l)!==null)g=!0,B(C);else{var T=n(u);T!==null&&W(x,T.startTime-E)}}function C(E,T){g=!1,v&&(v=!1,p(S),S=-1),d=!0;var L=f;try{for(_(T),c=n(l);c!==null&&(!(c.expirationTime>T)||E&&!j());){var V=c.callback;if(typeof V=="function"){c.callback=null,f=c.priorityLevel;var F=V(c.expirationTime<=T);T=r.unstable_now(),typeof F=="function"?c.callback=F:c===n(l)&&i(l),_(T)}else i(l);c=n(l)}if(c!==null)var H=!0;else{var $=n(u);$!==null&&W(x,$.startTime-T),H=!1}return H}finally{c=null,f=L,d=!1}}var w=!1,P=null,S=-1,M=5,R=-1;function j(){return!(r.unstable_now()-R<M)}function A(){if(P!==null){var E=r.unstable_now();R=E;var T=!0;try{T=P(!0,E)}finally{T?z():(w=!1,P=null)}}else w=!1}var z;if(typeof m=="function")z=function(){m(A)};else if(typeof MessageChannel!="undefined"){var D=new MessageChannel,I=D.port2;D.port1.onmessage=A,z=function(){I.postMessage(null)}}else z=function(){y(A,0)};function B(E){P=E,w||(w=!0,z())}function W(E,T){S=y(function(){E(r.unstable_now())},T)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(E){E.callback=null},r.unstable_continueExecution=function(){g||d||(g=!0,B(C))},r.unstable_forceFrameRate=function(E){0>E||125<E?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<E?Math.floor(1e3/E):5},r.unstable_getCurrentPriorityLevel=function(){return f},r.unstable_getFirstCallbackNode=function(){return n(l)},r.unstable_next=function(E){switch(f){case 1:case 2:case 3:var T=3;break;default:T=f}var L=f;f=T;try{return E()}finally{f=L}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(E,T){switch(E){case 1:case 2:case 3:case 4:case 5:break;default:E=3}var L=f;f=E;try{return T()}finally{f=L}},r.unstable_scheduleCallback=function(E,T,L){var V=r.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?V+L:V):L=V,E){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=L+F,E={id:h++,callback:T,priorityLevel:E,startTime:L,expirationTime:F,sortIndex:-1},L>V?(E.sortIndex=L,t(u,E),n(l)===null&&E===n(u)&&(v?(p(S),S=-1):v=!0,W(x,L-V))):(E.sortIndex=F,t(l,E),g||d||(g=!0,B(C))),E},r.unstable_shouldYield=j,r.unstable_wrapCallback=function(E){var T=f;return function(){var L=f;f=T;try{return E.apply(this,arguments)}finally{f=L}}}})(Jy);Yy.exports=Jy;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xy=k.exports,Yt=Yy.exports;function X(r){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+r,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+r+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ky=new Set,xa={};function oi(r,t){eo(r,t),eo(r+"Capture",t)}function eo(r,t){for(xa[r]=t,r=0;r<t.length;r++)Ky.add(t[r])}var Ur=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),$c=Object.prototype.hasOwnProperty,UC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Mv={},Tv={};function qC(r){return $c.call(Tv,r)?!0:$c.call(Mv,r)?!1:UC.test(r)?Tv[r]=!0:(Mv[r]=!0,!1)}function YC(r,t,n,i){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function JC(r,t,n,i){if(t===null||typeof t=="undefined"||YC(r,t,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function At(r,t,n,i,e,o,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=e,this.mustUseProperty=n,this.propertyName=r,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var vt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){vt[r]=new At(r,0,!1,r,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var t=r[0];vt[t]=new At(t,1,!1,r[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(r){vt[r]=new At(r,2,!1,r.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){vt[r]=new At(r,2,!1,r,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){vt[r]=new At(r,3,!1,r.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(r){vt[r]=new At(r,3,!0,r,null,!1,!1)});["capture","download"].forEach(function(r){vt[r]=new At(r,4,!1,r,null,!1,!1)});["cols","rows","size","span"].forEach(function(r){vt[r]=new At(r,6,!1,r,null,!1,!1)});["rowSpan","start"].forEach(function(r){vt[r]=new At(r,5,!1,r.toLowerCase(),null,!1,!1)});var Id=/[\-:]([a-z])/g;function Fd(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var t=r.replace(Id,Fd);vt[t]=new At(t,1,!1,r,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var t=r.replace(Id,Fd);vt[t]=new At(t,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(r){var t=r.replace(Id,Fd);vt[t]=new At(t,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(r){vt[r]=new At(r,1,!1,r.toLowerCase(),null,!1,!1)});vt.xlinkHref=new At("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(r){vt[r]=new At(r,1,!1,r.toLowerCase(),null,!0,!0)});function Nd(r,t,n,i){var e=vt.hasOwnProperty(t)?vt[t]:null;(e!==null?e.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(JC(t,n,e,i)&&(n=null),i||e===null?qC(t)&&(n===null?r.removeAttribute(t):r.setAttribute(t,""+n)):e.mustUseProperty?r[e.propertyName]=n===null?e.type===3?!1:"":n:(t=e.attributeName,i=e.attributeNamespace,n===null?r.removeAttribute(t):(e=e.type,n=e===3||e===4&&n===!0?"":""+n,i?r.setAttributeNS(i,t,n):r.setAttribute(t,n))))}var Qr=Xy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ms=Symbol.for("react.element"),Pi=Symbol.for("react.portal"),Si=Symbol.for("react.fragment"),zd=Symbol.for("react.strict_mode"),Gc=Symbol.for("react.profiler"),Qy=Symbol.for("react.provider"),e_=Symbol.for("react.context"),jd=Symbol.for("react.forward_ref"),Bc=Symbol.for("react.suspense"),Wc=Symbol.for("react.suspense_list"),Hd=Symbol.for("react.memo"),an=Symbol.for("react.lazy"),t_=Symbol.for("react.offscreen"),kv=Symbol.iterator;function ko(r){return r===null||typeof r!="object"?null:(r=kv&&r[kv]||r["@@iterator"],typeof r=="function"?r:null)}var He=Object.assign,yh;function Xo(r){if(yh===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);yh=t&&t[1]||""}return`
`+yh+r}var _h=!1;function xh(r,t){if(!r||_h)return"";_h=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var i=u}Reflect.construct(r,[],t)}else{try{t.call()}catch(u){i=u}r.call(t.prototype)}else{try{throw Error()}catch(u){i=u}r()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var e=u.stack.split(`
`),o=i.stack.split(`
`),a=e.length-1,s=o.length-1;1<=a&&0<=s&&e[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(e[a]!==o[s]){if(a!==1||s!==1)do if(a--,s--,0>s||e[a]!==o[s]){var l=`
`+e[a].replace(" at new "," at ");return r.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",r.displayName)),l}while(1<=a&&0<=s);break}}}finally{_h=!1,Error.prepareStackTrace=n}return(r=r?r.displayName||r.name:"")?Xo(r):""}function XC(r){switch(r.tag){case 5:return Xo(r.type);case 16:return Xo("Lazy");case 13:return Xo("Suspense");case 19:return Xo("SuspenseList");case 0:case 2:case 15:return r=xh(r.type,!1),r;case 11:return r=xh(r.type.render,!1),r;case 1:return r=xh(r.type,!0),r;default:return""}}function Zc(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case Si:return"Fragment";case Pi:return"Portal";case Gc:return"Profiler";case zd:return"StrictMode";case Bc:return"Suspense";case Wc:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case e_:return(r.displayName||"Context")+".Consumer";case Qy:return(r._context.displayName||"Context")+".Provider";case jd:var t=r.render;return r=r.displayName,r||(r=t.displayName||t.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case Hd:return t=r.displayName||null,t!==null?t:Zc(r.type)||"Memo";case an:t=r._payload,r=r._init;try{return Zc(r(t))}catch{}}return null}function KC(r){var t=r.type;switch(r.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=t.render,r=r.displayName||r.name||"",t.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Zc(t);case 8:return t===zd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function En(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function r_(r){var t=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function QC(r){var t=r_(r)?"checked":"value",n=Object.getOwnPropertyDescriptor(r.constructor.prototype,t),i=""+r[t];if(!r.hasOwnProperty(t)&&typeof n!="undefined"&&typeof n.get=="function"&&typeof n.set=="function"){var e=n.get,o=n.set;return Object.defineProperty(r,t,{configurable:!0,get:function(){return e.call(this)},set:function(a){i=""+a,o.call(this,a)}}),Object.defineProperty(r,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){r._valueTracker=null,delete r[t]}}}}function ys(r){r._valueTracker||(r._valueTracker=QC(r))}function n_(r){if(!r)return!1;var t=r._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return r&&(i=r_(r)?r.checked?"true":"false":r.value),r=i,r!==n?(t.setValue(r),!0):!1}function Ll(r){if(r=r||(typeof document!="undefined"?document:void 0),typeof r=="undefined")return null;try{return r.activeElement||r.body}catch{return r.body}}function Uc(r,t){var n=t.checked;return He({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:r._wrapperState.initialChecked})}function bv(r,t){var n=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;n=En(t.value!=null?t.value:n),r._wrapperState={initialChecked:i,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function i_(r,t){t=t.checked,t!=null&&Nd(r,"checked",t,!1)}function qc(r,t){i_(r,t);var n=En(t.value),i=t.type;if(n!=null)i==="number"?(n===0&&r.value===""||r.value!=n)&&(r.value=""+n):r.value!==""+n&&(r.value=""+n);else if(i==="submit"||i==="reset"){r.removeAttribute("value");return}t.hasOwnProperty("value")?Yc(r,t.type,n):t.hasOwnProperty("defaultValue")&&Yc(r,t.type,En(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(r.defaultChecked=!!t.defaultChecked)}function Rv(r,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+r._wrapperState.initialValue,n||t===r.value||(r.value=t),r.defaultValue=t}n=r.name,n!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,n!==""&&(r.name=n)}function Yc(r,t,n){(t!=="number"||Ll(r.ownerDocument)!==r)&&(n==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+n&&(r.defaultValue=""+n))}var Ko=Array.isArray;function ji(r,t,n,i){if(r=r.options,t){t={};for(var e=0;e<n.length;e++)t["$"+n[e]]=!0;for(n=0;n<r.length;n++)e=t.hasOwnProperty("$"+r[n].value),r[n].selected!==e&&(r[n].selected=e),e&&i&&(r[n].defaultSelected=!0)}else{for(n=""+En(n),t=null,e=0;e<r.length;e++){if(r[e].value===n){r[e].selected=!0,i&&(r[e].defaultSelected=!0);return}t!==null||r[e].disabled||(t=r[e])}t!==null&&(t.selected=!0)}}function Jc(r,t){if(t.dangerouslySetInnerHTML!=null)throw Error(X(91));return He({},t,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function Av(r,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(X(92));if(Ko(n)){if(1<n.length)throw Error(X(93));n=n[0]}t=n}t==null&&(t=""),n=t}r._wrapperState={initialValue:En(n)}}function o_(r,t){var n=En(t.value),i=En(t.defaultValue);n!=null&&(n=""+n,n!==r.value&&(r.value=n),t.defaultValue==null&&r.defaultValue!==n&&(r.defaultValue=n)),i!=null&&(r.defaultValue=""+i)}function Ov(r){var t=r.textContent;t===r._wrapperState.initialValue&&t!==""&&t!==null&&(r.value=t)}function a_(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Xc(r,t){return r==null||r==="http://www.w3.org/1999/xhtml"?a_(t):r==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var _s,s_=function(r){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(t,n,i,e){MSApp.execUnsafeLocalFunction(function(){return r(t,n,i,e)})}:r}(function(r,t){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=t;else{for(_s=_s||document.createElement("div"),_s.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=_s.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;t.firstChild;)r.appendChild(t.firstChild)}});function wa(r,t){if(t){var n=r.firstChild;if(n&&n===r.lastChild&&n.nodeType===3){n.nodeValue=t;return}}r.textContent=t}var sa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},eP=["Webkit","ms","Moz","O"];Object.keys(sa).forEach(function(r){eP.forEach(function(t){t=t+r.charAt(0).toUpperCase()+r.substring(1),sa[t]=sa[r]})});function l_(r,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||sa.hasOwnProperty(r)&&sa[r]?(""+t).trim():t+"px"}function u_(r,t){r=r.style;for(var n in t)if(t.hasOwnProperty(n)){var i=n.indexOf("--")===0,e=l_(n,t[n],i);n==="float"&&(n="cssFloat"),i?r.setProperty(n,e):r[n]=e}}var tP=He({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Kc(r,t){if(t){if(tP[r]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(X(137,r));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(X(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(X(61))}if(t.style!=null&&typeof t.style!="object")throw Error(X(62))}}function Qc(r,t){if(r.indexOf("-")===-1)return typeof t.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ef=null;function Vd(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var tf=null,Hi=null,Vi=null;function Lv(r){if(r=qa(r)){if(typeof tf!="function")throw Error(X(280));var t=r.stateNode;t&&(t=Ru(t),tf(r.stateNode,r.type,t))}}function h_(r){Hi?Vi?Vi.push(r):Vi=[r]:Hi=r}function c_(){if(Hi){var r=Hi,t=Vi;if(Vi=Hi=null,Lv(r),t)for(r=0;r<t.length;r++)Lv(t[r])}}function f_(r,t){return r(t)}function d_(){}var wh=!1;function g_(r,t,n){if(wh)return r(t,n);wh=!0;try{return f_(r,t,n)}finally{wh=!1,(Hi!==null||Vi!==null)&&(d_(),c_())}}function Ca(r,t){var n=r.stateNode;if(n===null)return null;var i=Ru(n);if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(r=r.type,i=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!i;break e;default:r=!1}if(r)return null;if(n&&typeof n!="function")throw Error(X(231,t,typeof n));return n}var rf=!1;if(Ur)try{var bo={};Object.defineProperty(bo,"passive",{get:function(){rf=!0}}),window.addEventListener("test",bo,bo),window.removeEventListener("test",bo,bo)}catch{rf=!1}function rP(r,t,n,i,e,o,a,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(h){this.onError(h)}}var la=!1,Dl=null,Il=!1,nf=null,nP={onError:function(r){la=!0,Dl=r}};function iP(r,t,n,i,e,o,a,s,l){la=!1,Dl=null,rP.apply(nP,arguments)}function oP(r,t,n,i,e,o,a,s,l){if(iP.apply(this,arguments),la){if(la){var u=Dl;la=!1,Dl=null}else throw Error(X(198));Il||(Il=!0,nf=u)}}function ai(r){var t=r,n=r;if(r.alternate)for(;t.return;)t=t.return;else{r=t;do t=r,(t.flags&4098)!==0&&(n=t.return),r=t.return;while(r)}return t.tag===3?n:null}function v_(r){if(r.tag===13){var t=r.memoizedState;if(t===null&&(r=r.alternate,r!==null&&(t=r.memoizedState)),t!==null)return t.dehydrated}return null}function Dv(r){if(ai(r)!==r)throw Error(X(188))}function aP(r){var t=r.alternate;if(!t){if(t=ai(r),t===null)throw Error(X(188));return t!==r?null:r}for(var n=r,i=t;;){var e=n.return;if(e===null)break;var o=e.alternate;if(o===null){if(i=e.return,i!==null){n=i;continue}break}if(e.child===o.child){for(o=e.child;o;){if(o===n)return Dv(e),r;if(o===i)return Dv(e),t;o=o.sibling}throw Error(X(188))}if(n.return!==i.return)n=e,i=o;else{for(var a=!1,s=e.child;s;){if(s===n){a=!0,n=e,i=o;break}if(s===i){a=!0,i=e,n=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===n){a=!0,n=o,i=e;break}if(s===i){a=!0,i=o,n=e;break}s=s.sibling}if(!a)throw Error(X(189))}}if(n.alternate!==i)throw Error(X(190))}if(n.tag!==3)throw Error(X(188));return n.stateNode.current===n?r:t}function p_(r){return r=aP(r),r!==null?m_(r):null}function m_(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var t=m_(r);if(t!==null)return t;r=r.sibling}return null}var y_=Yt.unstable_scheduleCallback,Iv=Yt.unstable_cancelCallback,sP=Yt.unstable_shouldYield,lP=Yt.unstable_requestPaint,Ue=Yt.unstable_now,uP=Yt.unstable_getCurrentPriorityLevel,$d=Yt.unstable_ImmediatePriority,__=Yt.unstable_UserBlockingPriority,Fl=Yt.unstable_NormalPriority,hP=Yt.unstable_LowPriority,x_=Yt.unstable_IdlePriority,Mu=null,kr=null;function cP(r){if(kr&&typeof kr.onCommitFiberRoot=="function")try{kr.onCommitFiberRoot(Mu,r,void 0,(r.current.flags&128)===128)}catch{}}var pr=Math.clz32?Math.clz32:gP,fP=Math.log,dP=Math.LN2;function gP(r){return r>>>=0,r===0?32:31-(fP(r)/dP|0)|0}var xs=64,ws=4194304;function Qo(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Nl(r,t){var n=r.pendingLanes;if(n===0)return 0;var i=0,e=r.suspendedLanes,o=r.pingedLanes,a=n&268435455;if(a!==0){var s=a&~e;s!==0?i=Qo(s):(o&=a,o!==0&&(i=Qo(o)))}else a=n&~e,a!==0?i=Qo(a):o!==0&&(i=Qo(o));if(i===0)return 0;if(t!==0&&t!==i&&(t&e)===0&&(e=i&-i,o=t&-t,e>=o||e===16&&(o&4194240)!==0))return t;if((i&4)!==0&&(i|=n&16),t=r.entangledLanes,t!==0)for(r=r.entanglements,t&=i;0<t;)n=31-pr(t),e=1<<n,i|=r[n],t&=~e;return i}function vP(r,t){switch(r){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pP(r,t){for(var n=r.suspendedLanes,i=r.pingedLanes,e=r.expirationTimes,o=r.pendingLanes;0<o;){var a=31-pr(o),s=1<<a,l=e[a];l===-1?((s&n)===0||(s&i)!==0)&&(e[a]=vP(s,t)):l<=t&&(r.expiredLanes|=s),o&=~s}}function of(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function Ch(r){for(var t=[],n=0;31>n;n++)t.push(r);return t}function Za(r,t,n){r.pendingLanes|=t,t!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,t=31-pr(t),r[t]=n}function mP(r,t){var n=r.pendingLanes&~t;r.pendingLanes=t,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=t,r.mutableReadLanes&=t,r.entangledLanes&=t,t=r.entanglements;var i=r.eventTimes;for(r=r.expirationTimes;0<n;){var e=31-pr(n),o=1<<e;t[e]=0,i[e]=-1,r[e]=-1,n&=~o}}function Gd(r,t){var n=r.entangledLanes|=t;for(r=r.entanglements;n;){var i=31-pr(n),e=1<<i;e&t|r[i]&t&&(r[i]|=t),n&=~e}}var Te=0;function w_(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var C_,Bd,P_,S_,E_,af=!1,Cs=[],mn=null,yn=null,_n=null,Pa=new Map,Sa=new Map,hn=[],yP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fv(r,t){switch(r){case"focusin":case"focusout":mn=null;break;case"dragenter":case"dragleave":yn=null;break;case"mouseover":case"mouseout":_n=null;break;case"pointerover":case"pointerout":Pa.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sa.delete(t.pointerId)}}function Ro(r,t,n,i,e,o){return r===null||r.nativeEvent!==o?(r={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[e]},t!==null&&(t=qa(t),t!==null&&Bd(t)),r):(r.eventSystemFlags|=i,t=r.targetContainers,e!==null&&t.indexOf(e)===-1&&t.push(e),r)}function _P(r,t,n,i,e){switch(t){case"focusin":return mn=Ro(mn,r,t,n,i,e),!0;case"dragenter":return yn=Ro(yn,r,t,n,i,e),!0;case"mouseover":return _n=Ro(_n,r,t,n,i,e),!0;case"pointerover":var o=e.pointerId;return Pa.set(o,Ro(Pa.get(o)||null,r,t,n,i,e)),!0;case"gotpointercapture":return o=e.pointerId,Sa.set(o,Ro(Sa.get(o)||null,r,t,n,i,e)),!0}return!1}function M_(r){var t=Bn(r.target);if(t!==null){var n=ai(t);if(n!==null){if(t=n.tag,t===13){if(t=v_(n),t!==null){r.blockedOn=t,E_(r.priority,function(){P_(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){r.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}r.blockedOn=null}function vl(r){if(r.blockedOn!==null)return!1;for(var t=r.targetContainers;0<t.length;){var n=sf(r.domEventName,r.eventSystemFlags,t[0],r.nativeEvent);if(n===null){n=r.nativeEvent;var i=new n.constructor(n.type,n);ef=i,n.target.dispatchEvent(i),ef=null}else return t=qa(n),t!==null&&Bd(t),r.blockedOn=n,!1;t.shift()}return!0}function Nv(r,t,n){vl(r)&&n.delete(t)}function xP(){af=!1,mn!==null&&vl(mn)&&(mn=null),yn!==null&&vl(yn)&&(yn=null),_n!==null&&vl(_n)&&(_n=null),Pa.forEach(Nv),Sa.forEach(Nv)}function Ao(r,t){r.blockedOn===t&&(r.blockedOn=null,af||(af=!0,Yt.unstable_scheduleCallback(Yt.unstable_NormalPriority,xP)))}function Ea(r){function t(e){return Ao(e,r)}if(0<Cs.length){Ao(Cs[0],r);for(var n=1;n<Cs.length;n++){var i=Cs[n];i.blockedOn===r&&(i.blockedOn=null)}}for(mn!==null&&Ao(mn,r),yn!==null&&Ao(yn,r),_n!==null&&Ao(_n,r),Pa.forEach(t),Sa.forEach(t),n=0;n<hn.length;n++)i=hn[n],i.blockedOn===r&&(i.blockedOn=null);for(;0<hn.length&&(n=hn[0],n.blockedOn===null);)M_(n),n.blockedOn===null&&hn.shift()}var $i=Qr.ReactCurrentBatchConfig,zl=!0;function wP(r,t,n,i){var e=Te,o=$i.transition;$i.transition=null;try{Te=1,Wd(r,t,n,i)}finally{Te=e,$i.transition=o}}function CP(r,t,n,i){var e=Te,o=$i.transition;$i.transition=null;try{Te=4,Wd(r,t,n,i)}finally{Te=e,$i.transition=o}}function Wd(r,t,n,i){if(zl){var e=sf(r,t,n,i);if(e===null)Oh(r,t,i,jl,n),Fv(r,i);else if(_P(e,r,t,n,i))i.stopPropagation();else if(Fv(r,i),t&4&&-1<yP.indexOf(r)){for(;e!==null;){var o=qa(e);if(o!==null&&C_(o),o=sf(r,t,n,i),o===null&&Oh(r,t,i,jl,n),o===e)break;e=o}e!==null&&i.stopPropagation()}else Oh(r,t,i,null,n)}}var jl=null;function sf(r,t,n,i){if(jl=null,r=Vd(i),r=Bn(r),r!==null)if(t=ai(r),t===null)r=null;else if(n=t.tag,n===13){if(r=v_(t),r!==null)return r;r=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;r=null}else t!==r&&(r=null);return jl=r,null}function T_(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(uP()){case $d:return 1;case __:return 4;case Fl:case hP:return 16;case x_:return 536870912;default:return 16}default:return 16}}var gn=null,Zd=null,pl=null;function k_(){if(pl)return pl;var r,t=Zd,n=t.length,i,e="value"in gn?gn.value:gn.textContent,o=e.length;for(r=0;r<n&&t[r]===e[r];r++);var a=n-r;for(i=1;i<=a&&t[n-i]===e[o-i];i++);return pl=e.slice(r,1<i?1-i:void 0)}function ml(r){var t=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&t===13&&(r=13)):r=t,r===10&&(r=13),32<=r||r===13?r:0}function Ps(){return!0}function zv(){return!1}function Xt(r){function t(n,i,e,o,a){this._reactName=n,this._targetInst=e,this.type=i,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var s in r)r.hasOwnProperty(s)&&(n=r[s],this[s]=n?n(o):o[s]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Ps:zv,this.isPropagationStopped=zv,this}return He(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ps)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ps)},persist:function(){},isPersistent:Ps}),t}var _o={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ud=Xt(_o),Ua=He({},_o,{view:0,detail:0}),PP=Xt(Ua),Ph,Sh,Oo,Tu=He({},Ua,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qd,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Oo&&(Oo&&r.type==="mousemove"?(Ph=r.screenX-Oo.screenX,Sh=r.screenY-Oo.screenY):Sh=Ph=0,Oo=r),Ph)},movementY:function(r){return"movementY"in r?r.movementY:Sh}}),jv=Xt(Tu),SP=He({},Tu,{dataTransfer:0}),EP=Xt(SP),MP=He({},Ua,{relatedTarget:0}),Eh=Xt(MP),TP=He({},_o,{animationName:0,elapsedTime:0,pseudoElement:0}),kP=Xt(TP),bP=He({},_o,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),RP=Xt(bP),AP=He({},_o,{data:0}),Hv=Xt(AP),OP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},LP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},DP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function IP(r){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(r):(r=DP[r])?!!t[r]:!1}function qd(){return IP}var FP=He({},Ua,{key:function(r){if(r.key){var t=OP[r.key]||r.key;if(t!=="Unidentified")return t}return r.type==="keypress"?(r=ml(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?LP[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qd,charCode:function(r){return r.type==="keypress"?ml(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?ml(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),NP=Xt(FP),zP=He({},Tu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vv=Xt(zP),jP=He({},Ua,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qd}),HP=Xt(jP),VP=He({},_o,{propertyName:0,elapsedTime:0,pseudoElement:0}),$P=Xt(VP),GP=He({},Tu,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),BP=Xt(GP),WP=[9,13,27,32],Yd=Ur&&"CompositionEvent"in window,ua=null;Ur&&"documentMode"in document&&(ua=document.documentMode);var ZP=Ur&&"TextEvent"in window&&!ua,b_=Ur&&(!Yd||ua&&8<ua&&11>=ua),$v=String.fromCharCode(32),Gv=!1;function R_(r,t){switch(r){case"keyup":return WP.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function A_(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Ei=!1;function UP(r,t){switch(r){case"compositionend":return A_(t);case"keypress":return t.which!==32?null:(Gv=!0,$v);case"textInput":return r=t.data,r===$v&&Gv?null:r;default:return null}}function qP(r,t){if(Ei)return r==="compositionend"||!Yd&&R_(r,t)?(r=k_(),pl=Zd=gn=null,Ei=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return b_&&t.locale!=="ko"?null:t.data;default:return null}}var YP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bv(r){var t=r&&r.nodeName&&r.nodeName.toLowerCase();return t==="input"?!!YP[r.type]:t==="textarea"}function O_(r,t,n,i){h_(i),t=Hl(t,"onChange"),0<t.length&&(n=new Ud("onChange","change",null,n,i),r.push({event:n,listeners:t}))}var ha=null,Ma=null;function JP(r){G_(r,0)}function ku(r){var t=ki(r);if(n_(t))return r}function XP(r,t){if(r==="change")return t}var L_=!1;if(Ur){var Mh;if(Ur){var Th="oninput"in document;if(!Th){var Wv=document.createElement("div");Wv.setAttribute("oninput","return;"),Th=typeof Wv.oninput=="function"}Mh=Th}else Mh=!1;L_=Mh&&(!document.documentMode||9<document.documentMode)}function Zv(){ha&&(ha.detachEvent("onpropertychange",D_),Ma=ha=null)}function D_(r){if(r.propertyName==="value"&&ku(Ma)){var t=[];O_(t,Ma,r,Vd(r)),g_(JP,t)}}function KP(r,t,n){r==="focusin"?(Zv(),ha=t,Ma=n,ha.attachEvent("onpropertychange",D_)):r==="focusout"&&Zv()}function QP(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return ku(Ma)}function eS(r,t){if(r==="click")return ku(t)}function tS(r,t){if(r==="input"||r==="change")return ku(t)}function rS(r,t){return r===t&&(r!==0||1/r===1/t)||r!==r&&t!==t}var Ar=typeof Object.is=="function"?Object.is:rS;function Ta(r,t){if(Ar(r,t))return!0;if(typeof r!="object"||r===null||typeof t!="object"||t===null)return!1;var n=Object.keys(r),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var e=n[i];if(!$c.call(t,e)||!Ar(r[e],t[e]))return!1}return!0}function Uv(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function qv(r,t){var n=Uv(r);r=0;for(var i;n;){if(n.nodeType===3){if(i=r+n.textContent.length,r<=t&&i>=t)return{node:n,offset:t-r};r=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Uv(n)}}function I_(r,t){return r&&t?r===t?!0:r&&r.nodeType===3?!1:t&&t.nodeType===3?I_(r,t.parentNode):"contains"in r?r.contains(t):r.compareDocumentPosition?!!(r.compareDocumentPosition(t)&16):!1:!1}function F_(){for(var r=window,t=Ll();t instanceof r.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)r=t.contentWindow;else break;t=Ll(r.document)}return t}function Jd(r){var t=r&&r.nodeName&&r.nodeName.toLowerCase();return t&&(t==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||t==="textarea"||r.contentEditable==="true")}function nS(r){var t=F_(),n=r.focusedElem,i=r.selectionRange;if(t!==n&&n&&n.ownerDocument&&I_(n.ownerDocument.documentElement,n)){if(i!==null&&Jd(n)){if(t=i.start,r=i.end,r===void 0&&(r=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(r,n.value.length);else if(r=(t=n.ownerDocument||document)&&t.defaultView||window,r.getSelection){r=r.getSelection();var e=n.textContent.length,o=Math.min(i.start,e);i=i.end===void 0?o:Math.min(i.end,e),!r.extend&&o>i&&(e=i,i=o,o=e),e=qv(n,o);var a=qv(n,i);e&&a&&(r.rangeCount!==1||r.anchorNode!==e.node||r.anchorOffset!==e.offset||r.focusNode!==a.node||r.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(e.node,e.offset),r.removeAllRanges(),o>i?(r.addRange(t),r.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),r.addRange(t)))}}for(t=[],r=n;r=r.parentNode;)r.nodeType===1&&t.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)r=t[n],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var iS=Ur&&"documentMode"in document&&11>=document.documentMode,Mi=null,lf=null,ca=null,uf=!1;function Yv(r,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;uf||Mi==null||Mi!==Ll(i)||(i=Mi,"selectionStart"in i&&Jd(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),ca&&Ta(ca,i)||(ca=i,i=Hl(lf,"onSelect"),0<i.length&&(t=new Ud("onSelect","select",null,t,n),r.push({event:t,listeners:i}),t.target=Mi)))}function Ss(r,t){var n={};return n[r.toLowerCase()]=t.toLowerCase(),n["Webkit"+r]="webkit"+t,n["Moz"+r]="moz"+t,n}var Ti={animationend:Ss("Animation","AnimationEnd"),animationiteration:Ss("Animation","AnimationIteration"),animationstart:Ss("Animation","AnimationStart"),transitionend:Ss("Transition","TransitionEnd")},kh={},N_={};Ur&&(N_=document.createElement("div").style,"AnimationEvent"in window||(delete Ti.animationend.animation,delete Ti.animationiteration.animation,delete Ti.animationstart.animation),"TransitionEvent"in window||delete Ti.transitionend.transition);function bu(r){if(kh[r])return kh[r];if(!Ti[r])return r;var t=Ti[r],n;for(n in t)if(t.hasOwnProperty(n)&&n in N_)return kh[r]=t[n];return r}var z_=bu("animationend"),j_=bu("animationiteration"),H_=bu("animationstart"),V_=bu("transitionend"),$_=new Map,Jv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function An(r,t){$_.set(r,t),oi(t,[r])}for(var bh=0;bh<Jv.length;bh++){var Rh=Jv[bh],oS=Rh.toLowerCase(),aS=Rh[0].toUpperCase()+Rh.slice(1);An(oS,"on"+aS)}An(z_,"onAnimationEnd");An(j_,"onAnimationIteration");An(H_,"onAnimationStart");An("dblclick","onDoubleClick");An("focusin","onFocus");An("focusout","onBlur");An(V_,"onTransitionEnd");eo("onMouseEnter",["mouseout","mouseover"]);eo("onMouseLeave",["mouseout","mouseover"]);eo("onPointerEnter",["pointerout","pointerover"]);eo("onPointerLeave",["pointerout","pointerover"]);oi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));oi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));oi("onBeforeInput",["compositionend","keypress","textInput","paste"]);oi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));oi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));oi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ea="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sS=new Set("cancel close invalid load scroll toggle".split(" ").concat(ea));function Xv(r,t,n){var i=r.type||"unknown-event";r.currentTarget=n,oP(i,t,void 0,r),r.currentTarget=null}function G_(r,t){t=(t&4)!==0;for(var n=0;n<r.length;n++){var i=r[n],e=i.event;i=i.listeners;e:{var o=void 0;if(t)for(var a=i.length-1;0<=a;a--){var s=i[a],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==o&&e.isPropagationStopped())break e;Xv(e,s,u),o=l}else for(a=0;a<i.length;a++){if(s=i[a],l=s.instance,u=s.currentTarget,s=s.listener,l!==o&&e.isPropagationStopped())break e;Xv(e,s,u),o=l}}}if(Il)throw r=nf,Il=!1,nf=null,r}function De(r,t){var n=t[gf];n===void 0&&(n=t[gf]=new Set);var i=r+"__bubble";n.has(i)||(B_(t,r,2,!1),n.add(i))}function Ah(r,t,n){var i=0;t&&(i|=4),B_(n,r,i,t)}var Es="_reactListening"+Math.random().toString(36).slice(2);function ka(r){if(!r[Es]){r[Es]=!0,Ky.forEach(function(n){n!=="selectionchange"&&(sS.has(n)||Ah(n,!1,r),Ah(n,!0,r))});var t=r.nodeType===9?r:r.ownerDocument;t===null||t[Es]||(t[Es]=!0,Ah("selectionchange",!1,t))}}function B_(r,t,n,i){switch(T_(t)){case 1:var e=wP;break;case 4:e=CP;break;default:e=Wd}n=e.bind(null,t,n,r),e=void 0,!rf||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(e=!0),i?e!==void 0?r.addEventListener(t,n,{capture:!0,passive:e}):r.addEventListener(t,n,!0):e!==void 0?r.addEventListener(t,n,{passive:e}):r.addEventListener(t,n,!1)}function Oh(r,t,n,i,e){var o=i;if((t&1)===0&&(t&2)===0&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var s=i.stateNode.containerInfo;if(s===e||s.nodeType===8&&s.parentNode===e)break;if(a===4)for(a=i.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===e||l.nodeType===8&&l.parentNode===e))return;a=a.return}for(;s!==null;){if(a=Bn(s),a===null)return;if(l=a.tag,l===5||l===6){i=o=a;continue e}s=s.parentNode}}i=i.return}g_(function(){var u=o,h=Vd(n),c=[];e:{var f=$_.get(r);if(f!==void 0){var d=Ud,g=r;switch(r){case"keypress":if(ml(n)===0)break e;case"keydown":case"keyup":d=NP;break;case"focusin":g="focus",d=Eh;break;case"focusout":g="blur",d=Eh;break;case"beforeblur":case"afterblur":d=Eh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=jv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=EP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=HP;break;case z_:case j_:case H_:d=kP;break;case V_:d=$P;break;case"scroll":d=PP;break;case"wheel":d=BP;break;case"copy":case"cut":case"paste":d=RP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=Vv}var v=(t&4)!==0,y=!v&&r==="scroll",p=v?f!==null?f+"Capture":null:f;v=[];for(var m=u,_;m!==null;){_=m;var x=_.stateNode;if(_.tag===5&&x!==null&&(_=x,p!==null&&(x=Ca(m,p),x!=null&&v.push(ba(m,x,_)))),y)break;m=m.return}0<v.length&&(f=new d(f,g,null,n,h),c.push({event:f,listeners:v}))}}if((t&7)===0){e:{if(f=r==="mouseover"||r==="pointerover",d=r==="mouseout"||r==="pointerout",f&&n!==ef&&(g=n.relatedTarget||n.fromElement)&&(Bn(g)||g[qr]))break e;if((d||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,d?(g=n.relatedTarget||n.toElement,d=u,g=g?Bn(g):null,g!==null&&(y=ai(g),g!==y||g.tag!==5&&g.tag!==6)&&(g=null)):(d=null,g=u),d!==g)){if(v=jv,x="onMouseLeave",p="onMouseEnter",m="mouse",(r==="pointerout"||r==="pointerover")&&(v=Vv,x="onPointerLeave",p="onPointerEnter",m="pointer"),y=d==null?f:ki(d),_=g==null?f:ki(g),f=new v(x,m+"leave",d,n,h),f.target=y,f.relatedTarget=_,x=null,Bn(h)===u&&(v=new v(p,m+"enter",g,n,h),v.target=_,v.relatedTarget=y,x=v),y=x,d&&g)t:{for(v=d,p=g,m=0,_=v;_;_=ci(_))m++;for(_=0,x=p;x;x=ci(x))_++;for(;0<m-_;)v=ci(v),m--;for(;0<_-m;)p=ci(p),_--;for(;m--;){if(v===p||p!==null&&v===p.alternate)break t;v=ci(v),p=ci(p)}v=null}else v=null;d!==null&&Kv(c,f,d,v,!1),g!==null&&y!==null&&Kv(c,y,g,v,!0)}}e:{if(f=u?ki(u):window,d=f.nodeName&&f.nodeName.toLowerCase(),d==="select"||d==="input"&&f.type==="file")var C=XP;else if(Bv(f))if(L_)C=tS;else{C=QP;var w=KP}else(d=f.nodeName)&&d.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(C=eS);if(C&&(C=C(r,u))){O_(c,C,n,h);break e}w&&w(r,f,u),r==="focusout"&&(w=f._wrapperState)&&w.controlled&&f.type==="number"&&Yc(f,"number",f.value)}switch(w=u?ki(u):window,r){case"focusin":(Bv(w)||w.contentEditable==="true")&&(Mi=w,lf=u,ca=null);break;case"focusout":ca=lf=Mi=null;break;case"mousedown":uf=!0;break;case"contextmenu":case"mouseup":case"dragend":uf=!1,Yv(c,n,h);break;case"selectionchange":if(iS)break;case"keydown":case"keyup":Yv(c,n,h)}var P;if(Yd)e:{switch(r){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Ei?R_(r,n)&&(S="onCompositionEnd"):r==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(b_&&n.locale!=="ko"&&(Ei||S!=="onCompositionStart"?S==="onCompositionEnd"&&Ei&&(P=k_()):(gn=h,Zd="value"in gn?gn.value:gn.textContent,Ei=!0)),w=Hl(u,S),0<w.length&&(S=new Hv(S,r,null,n,h),c.push({event:S,listeners:w}),P?S.data=P:(P=A_(n),P!==null&&(S.data=P)))),(P=ZP?UP(r,n):qP(r,n))&&(u=Hl(u,"onBeforeInput"),0<u.length&&(h=new Hv("onBeforeInput","beforeinput",null,n,h),c.push({event:h,listeners:u}),h.data=P))}G_(c,t)})}function ba(r,t,n){return{instance:r,listener:t,currentTarget:n}}function Hl(r,t){for(var n=t+"Capture",i=[];r!==null;){var e=r,o=e.stateNode;e.tag===5&&o!==null&&(e=o,o=Ca(r,n),o!=null&&i.unshift(ba(r,o,e)),o=Ca(r,t),o!=null&&i.push(ba(r,o,e))),r=r.return}return i}function ci(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Kv(r,t,n,i,e){for(var o=t._reactName,a=[];n!==null&&n!==i;){var s=n,l=s.alternate,u=s.stateNode;if(l!==null&&l===i)break;s.tag===5&&u!==null&&(s=u,e?(l=Ca(n,o),l!=null&&a.unshift(ba(n,l,s))):e||(l=Ca(n,o),l!=null&&a.push(ba(n,l,s)))),n=n.return}a.length!==0&&r.push({event:t,listeners:a})}var lS=/\r\n?/g,uS=/\u0000|\uFFFD/g;function Qv(r){return(typeof r=="string"?r:""+r).replace(lS,`
`).replace(uS,"")}function Ms(r,t,n){if(t=Qv(t),Qv(r)!==t&&n)throw Error(X(425))}function Vl(){}var hf=null,cf=null;function ff(r,t){return r==="textarea"||r==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var df=typeof setTimeout=="function"?setTimeout:void 0,hS=typeof clearTimeout=="function"?clearTimeout:void 0,ep=typeof Promise=="function"?Promise:void 0,cS=typeof queueMicrotask=="function"?queueMicrotask:typeof ep!="undefined"?function(r){return ep.resolve(null).then(r).catch(fS)}:df;function fS(r){setTimeout(function(){throw r})}function Lh(r,t){var n=t,i=0;do{var e=n.nextSibling;if(r.removeChild(n),e&&e.nodeType===8)if(n=e.data,n==="/$"){if(i===0){r.removeChild(e),Ea(t);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=e}while(n);Ea(t)}function $r(r){for(;r!=null;r=r.nextSibling){var t=r.nodeType;if(t===1||t===3)break;if(t===8){if(t=r.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return r}function tp(r){r=r.previousSibling;for(var t=0;r;){if(r.nodeType===8){var n=r.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return r;t--}else n==="/$"&&t++}r=r.previousSibling}return null}var xo=Math.random().toString(36).slice(2),Sr="__reactFiber$"+xo,Ra="__reactProps$"+xo,qr="__reactContainer$"+xo,gf="__reactEvents$"+xo,dS="__reactListeners$"+xo,gS="__reactHandles$"+xo;function Bn(r){var t=r[Sr];if(t)return t;for(var n=r.parentNode;n;){if(t=n[qr]||n[Sr]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(r=tp(r);r!==null;){if(n=r[Sr])return n;r=tp(r)}return t}r=n,n=r.parentNode}return null}function qa(r){return r=r[Sr]||r[qr],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function ki(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(X(33))}function Ru(r){return r[Ra]||null}var vf=[],bi=-1;function On(r){return{current:r}}function Ie(r){0>bi||(r.current=vf[bi],vf[bi]=null,bi--)}function Oe(r,t){bi++,vf[bi]=r.current,r.current=t}var Mn={},Ct=On(Mn),Nt=On(!1),Qn=Mn;function to(r,t){var n=r.type.contextTypes;if(!n)return Mn;var i=r.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var e={},o;for(o in n)e[o]=t[o];return i&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=t,r.__reactInternalMemoizedMaskedChildContext=e),e}function zt(r){return r=r.childContextTypes,r!=null}function $l(){Ie(Nt),Ie(Ct)}function rp(r,t,n){if(Ct.current!==Mn)throw Error(X(168));Oe(Ct,t),Oe(Nt,n)}function W_(r,t,n){var i=r.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var e in i)if(!(e in t))throw Error(X(108,KC(r)||"Unknown",e));return He({},n,i)}function Gl(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||Mn,Qn=Ct.current,Oe(Ct,r),Oe(Nt,Nt.current),!0}function np(r,t,n){var i=r.stateNode;if(!i)throw Error(X(169));n?(r=W_(r,t,Qn),i.__reactInternalMemoizedMergedChildContext=r,Ie(Nt),Ie(Ct),Oe(Ct,r)):Ie(Nt),Oe(Nt,n)}var Hr=null,Au=!1,Dh=!1;function Z_(r){Hr===null?Hr=[r]:Hr.push(r)}function vS(r){Au=!0,Z_(r)}function Ln(){if(!Dh&&Hr!==null){Dh=!0;var r=0,t=Te;try{var n=Hr;for(Te=1;r<n.length;r++){var i=n[r];do i=i(!0);while(i!==null)}Hr=null,Au=!1}catch(e){throw Hr!==null&&(Hr=Hr.slice(r+1)),y_($d,Ln),e}finally{Te=t,Dh=!1}}return null}var pS=Qr.ReactCurrentBatchConfig;function gr(r,t){if(r&&r.defaultProps){t=He({},t),r=r.defaultProps;for(var n in r)t[n]===void 0&&(t[n]=r[n]);return t}return t}var Bl=On(null),Wl=null,Ri=null,Xd=null;function Kd(){Xd=Ri=Wl=null}function Qd(r){var t=Bl.current;Ie(Bl),r._currentValue=t}function pf(r,t,n){for(;r!==null;){var i=r.alternate;if((r.childLanes&t)!==t?(r.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),r===n)break;r=r.return}}function Gi(r,t){Wl=r,Xd=Ri=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&t)!==0&&(Wt=!0),r.firstContext=null)}function cr(r){var t=r._currentValue;if(Xd!==r)if(r={context:r,memoizedValue:t,next:null},Ri===null){if(Wl===null)throw Error(X(308));Ri=r,Wl.dependencies={lanes:0,firstContext:r}}else Ri=Ri.next=r;return t}var Er=null,sn=!1;function eg(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function U_(r,t){r=r.updateQueue,t.updateQueue===r&&(t.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Zr(r,t){return{eventTime:r,lane:t,tag:0,payload:null,callback:null,next:null}}function xn(r,t){var n=r.updateQueue;n!==null&&(n=n.shared,rt!==null&&(r.mode&1)!==0&&(Ee&2)===0?(r=n.interleaved,r===null?(t.next=t,Er===null?Er=[n]:Er.push(n)):(t.next=r.next,r.next=t),n.interleaved=t):(r=n.pending,r===null?t.next=t:(t.next=r.next,r.next=t),n.pending=t))}function yl(r,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var i=t.lanes;i&=r.pendingLanes,n|=i,t.lanes=n,Gd(r,n)}}function ip(r,t){var n=r.updateQueue,i=r.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var e=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?e=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?e=o=t:o=o.next=t}else e=o=t;n={baseState:i.baseState,firstBaseUpdate:e,lastBaseUpdate:o,shared:i.shared,effects:i.effects},r.updateQueue=n;return}r=n.lastBaseUpdate,r===null?n.firstBaseUpdate=t:r.next=t,n.lastBaseUpdate=t}function Zl(r,t,n,i){var e=r.updateQueue;sn=!1;var o=e.firstBaseUpdate,a=e.lastBaseUpdate,s=e.shared.pending;if(s!==null){e.shared.pending=null;var l=s,u=l.next;l.next=null,a===null?o=u:a.next=u,a=l;var h=r.alternate;h!==null&&(h=h.updateQueue,s=h.lastBaseUpdate,s!==a&&(s===null?h.firstBaseUpdate=u:s.next=u,h.lastBaseUpdate=l))}if(o!==null){var c=e.baseState;a=0,h=u=l=null,s=o;do{var f=s.lane,d=s.eventTime;if((i&f)===f){h!==null&&(h=h.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var g=r,v=s;switch(f=t,d=n,v.tag){case 1:if(g=v.payload,typeof g=="function"){c=g.call(d,c,f);break e}c=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,f=typeof g=="function"?g.call(d,c,f):g,f==null)break e;c=He({},c,f);break e;case 2:sn=!0}}s.callback!==null&&s.lane!==0&&(r.flags|=64,f=e.effects,f===null?e.effects=[s]:f.push(s))}else d={eventTime:d,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},h===null?(u=h=d,l=c):h=h.next=d,a|=f;if(s=s.next,s===null){if(s=e.shared.pending,s===null)break;f=s,s=f.next,f.next=null,e.lastBaseUpdate=f,e.shared.pending=null}}while(1);if(h===null&&(l=c),e.baseState=l,e.firstBaseUpdate=u,e.lastBaseUpdate=h,t=e.shared.interleaved,t!==null){e=t;do a|=e.lane,e=e.next;while(e!==t)}else o===null&&(e.shared.lanes=0);ao|=a,r.lanes=a,r.memoizedState=c}}function op(r,t,n){if(r=t.effects,t.effects=null,r!==null)for(t=0;t<r.length;t++){var i=r[t],e=i.callback;if(e!==null){if(i.callback=null,i=n,typeof e!="function")throw Error(X(191,e));e.call(i)}}}var q_=new Xy.Component().refs;function mf(r,t,n,i){t=r.memoizedState,n=n(i,t),n=n==null?t:He({},t,n),r.memoizedState=n,r.lanes===0&&(r.updateQueue.baseState=n)}var Ou={isMounted:function(r){return(r=r._reactInternals)?ai(r)===r:!1},enqueueSetState:function(r,t,n){r=r._reactInternals;var i=bt(),e=Cn(r),o=Zr(i,e);o.payload=t,n!=null&&(o.callback=n),xn(r,o),t=hr(r,e,i),t!==null&&yl(t,r,e)},enqueueReplaceState:function(r,t,n){r=r._reactInternals;var i=bt(),e=Cn(r),o=Zr(i,e);o.tag=1,o.payload=t,n!=null&&(o.callback=n),xn(r,o),t=hr(r,e,i),t!==null&&yl(t,r,e)},enqueueForceUpdate:function(r,t){r=r._reactInternals;var n=bt(),i=Cn(r),e=Zr(n,i);e.tag=2,t!=null&&(e.callback=t),xn(r,e),t=hr(r,i,n),t!==null&&yl(t,r,i)}};function ap(r,t,n,i,e,o,a){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(i,o,a):t.prototype&&t.prototype.isPureReactComponent?!Ta(n,i)||!Ta(e,o):!0}function Y_(r,t,n){var i=!1,e=Mn,o=t.contextType;return typeof o=="object"&&o!==null?o=cr(o):(e=zt(t)?Qn:Ct.current,i=t.contextTypes,o=(i=i!=null)?to(r,e):Mn),t=new t(n,o),r.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ou,r.stateNode=t,t._reactInternals=r,i&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=e,r.__reactInternalMemoizedMaskedChildContext=o),t}function sp(r,t,n,i){r=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==r&&Ou.enqueueReplaceState(t,t.state,null)}function yf(r,t,n,i){var e=r.stateNode;e.props=n,e.state=r.memoizedState,e.refs=q_,eg(r);var o=t.contextType;typeof o=="object"&&o!==null?e.context=cr(o):(o=zt(t)?Qn:Ct.current,e.context=to(r,o)),e.state=r.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(mf(r,t,o,n),e.state=r.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof e.getSnapshotBeforeUpdate=="function"||typeof e.UNSAFE_componentWillMount!="function"&&typeof e.componentWillMount!="function"||(t=e.state,typeof e.componentWillMount=="function"&&e.componentWillMount(),typeof e.UNSAFE_componentWillMount=="function"&&e.UNSAFE_componentWillMount(),t!==e.state&&Ou.enqueueReplaceState(e,e.state,null),Zl(r,n,e,i),e.state=r.memoizedState),typeof e.componentDidMount=="function"&&(r.flags|=4194308)}var Ai=[],Oi=0,Ul=null,ql=0,nr=[],ir=0,ei=null,Gr=1,Br="";function Hn(r,t){Ai[Oi++]=ql,Ai[Oi++]=Ul,Ul=r,ql=t}function J_(r,t,n){nr[ir++]=Gr,nr[ir++]=Br,nr[ir++]=ei,ei=r;var i=Gr;r=Br;var e=32-pr(i)-1;i&=~(1<<e),n+=1;var o=32-pr(t)+e;if(30<o){var a=e-e%5;o=(i&(1<<a)-1).toString(32),i>>=a,e-=a,Gr=1<<32-pr(t)+e|n<<e|i,Br=o+r}else Gr=1<<o|n<<e|i,Br=r}function tg(r){r.return!==null&&(Hn(r,1),J_(r,1,0))}function rg(r){for(;r===Ul;)Ul=Ai[--Oi],Ai[Oi]=null,ql=Ai[--Oi],Ai[Oi]=null;for(;r===ei;)ei=nr[--ir],nr[ir]=null,Br=nr[--ir],nr[ir]=null,Gr=nr[--ir],nr[ir]=null}var Ut=null,It=null,Ne=!1,vr=null;function X_(r,t){var n=sr(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=r,t=r.deletions,t===null?(r.deletions=[n],r.flags|=16):t.push(n)}function lp(r,t){switch(r.tag){case 5:var n=r.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(r.stateNode=t,Ut=r,It=$r(t.firstChild),!0):!1;case 6:return t=r.pendingProps===""||t.nodeType!==3?null:t,t!==null?(r.stateNode=t,Ut=r,It=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=ei!==null?{id:Gr,overflow:Br}:null,r.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=sr(18,null,null,0),n.stateNode=t,n.return=r,r.child=n,Ut=r,It=null,!0):!1;default:return!1}}function _f(r){return(r.mode&1)!==0&&(r.flags&128)===0}function xf(r){if(Ne){var t=It;if(t){var n=t;if(!lp(r,t)){if(_f(r))throw Error(X(418));t=$r(n.nextSibling);var i=Ut;t&&lp(r,t)?X_(i,n):(r.flags=r.flags&-4097|2,Ne=!1,Ut=r)}}else{if(_f(r))throw Error(X(418));r.flags=r.flags&-4097|2,Ne=!1,Ut=r}}}function up(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Ut=r}function Lo(r){if(r!==Ut)return!1;if(!Ne)return up(r),Ne=!0,!1;var t;if((t=r.tag!==3)&&!(t=r.tag!==5)&&(t=r.type,t=t!=="head"&&t!=="body"&&!ff(r.type,r.memoizedProps)),t&&(t=It)){if(_f(r)){for(r=It;r;)r=$r(r.nextSibling);throw Error(X(418))}for(;t;)X_(r,t),t=$r(t.nextSibling)}if(up(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(X(317));e:{for(r=r.nextSibling,t=0;r;){if(r.nodeType===8){var n=r.data;if(n==="/$"){if(t===0){It=$r(r.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}r=r.nextSibling}It=null}}else It=Ut?$r(r.stateNode.nextSibling):null;return!0}function ro(){It=Ut=null,Ne=!1}function ng(r){vr===null?vr=[r]:vr.push(r)}function Do(r,t,n){if(r=n.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(X(309));var i=n.stateNode}if(!i)throw Error(X(147,r));var e=i,o=""+r;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(a){var s=e.refs;s===q_&&(s=e.refs={}),a===null?delete s[o]:s[o]=a},t._stringRef=o,t)}if(typeof r!="string")throw Error(X(284));if(!n._owner)throw Error(X(290,r))}return r}function Ts(r,t){throw r=Object.prototype.toString.call(t),Error(X(31,r==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":r))}function hp(r){var t=r._init;return t(r._payload)}function K_(r){function t(p,m){if(r){var _=p.deletions;_===null?(p.deletions=[m],p.flags|=16):_.push(m)}}function n(p,m){if(!r)return null;for(;m!==null;)t(p,m),m=m.sibling;return null}function i(p,m){for(p=new Map;m!==null;)m.key!==null?p.set(m.key,m):p.set(m.index,m),m=m.sibling;return p}function e(p,m){return p=Tn(p,m),p.index=0,p.sibling=null,p}function o(p,m,_){return p.index=_,r?(_=p.alternate,_!==null?(_=_.index,_<m?(p.flags|=2,m):_):(p.flags|=2,m)):(p.flags|=1048576,m)}function a(p){return r&&p.alternate===null&&(p.flags|=2),p}function s(p,m,_,x){return m===null||m.tag!==6?(m=Hh(_,p.mode,x),m.return=p,m):(m=e(m,_),m.return=p,m)}function l(p,m,_,x){var C=_.type;return C===Si?h(p,m,_.props.children,x,_.key):m!==null&&(m.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===an&&hp(C)===m.type)?(x=e(m,_.props),x.ref=Do(p,m,_),x.return=p,x):(x=Pl(_.type,_.key,_.props,null,p.mode,x),x.ref=Do(p,m,_),x.return=p,x)}function u(p,m,_,x){return m===null||m.tag!==4||m.stateNode.containerInfo!==_.containerInfo||m.stateNode.implementation!==_.implementation?(m=Vh(_,p.mode,x),m.return=p,m):(m=e(m,_.children||[]),m.return=p,m)}function h(p,m,_,x,C){return m===null||m.tag!==7?(m=Xn(_,p.mode,x,C),m.return=p,m):(m=e(m,_),m.return=p,m)}function c(p,m,_){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Hh(""+m,p.mode,_),m.return=p,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case ms:return _=Pl(m.type,m.key,m.props,null,p.mode,_),_.ref=Do(p,null,m),_.return=p,_;case Pi:return m=Vh(m,p.mode,_),m.return=p,m;case an:var x=m._init;return c(p,x(m._payload),_)}if(Ko(m)||ko(m))return m=Xn(m,p.mode,_,null),m.return=p,m;Ts(p,m)}return null}function f(p,m,_,x){var C=m!==null?m.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return C!==null?null:s(p,m,""+_,x);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ms:return _.key===C?l(p,m,_,x):null;case Pi:return _.key===C?u(p,m,_,x):null;case an:return C=_._init,f(p,m,C(_._payload),x)}if(Ko(_)||ko(_))return C!==null?null:h(p,m,_,x,null);Ts(p,_)}return null}function d(p,m,_,x,C){if(typeof x=="string"&&x!==""||typeof x=="number")return p=p.get(_)||null,s(m,p,""+x,C);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ms:return p=p.get(x.key===null?_:x.key)||null,l(m,p,x,C);case Pi:return p=p.get(x.key===null?_:x.key)||null,u(m,p,x,C);case an:var w=x._init;return d(p,m,_,w(x._payload),C)}if(Ko(x)||ko(x))return p=p.get(_)||null,h(m,p,x,C,null);Ts(m,x)}return null}function g(p,m,_,x){for(var C=null,w=null,P=m,S=m=0,M=null;P!==null&&S<_.length;S++){P.index>S?(M=P,P=null):M=P.sibling;var R=f(p,P,_[S],x);if(R===null){P===null&&(P=M);break}r&&P&&R.alternate===null&&t(p,P),m=o(R,m,S),w===null?C=R:w.sibling=R,w=R,P=M}if(S===_.length)return n(p,P),Ne&&Hn(p,S),C;if(P===null){for(;S<_.length;S++)P=c(p,_[S],x),P!==null&&(m=o(P,m,S),w===null?C=P:w.sibling=P,w=P);return Ne&&Hn(p,S),C}for(P=i(p,P);S<_.length;S++)M=d(P,p,S,_[S],x),M!==null&&(r&&M.alternate!==null&&P.delete(M.key===null?S:M.key),m=o(M,m,S),w===null?C=M:w.sibling=M,w=M);return r&&P.forEach(function(j){return t(p,j)}),Ne&&Hn(p,S),C}function v(p,m,_,x){var C=ko(_);if(typeof C!="function")throw Error(X(150));if(_=C.call(_),_==null)throw Error(X(151));for(var w=C=null,P=m,S=m=0,M=null,R=_.next();P!==null&&!R.done;S++,R=_.next()){P.index>S?(M=P,P=null):M=P.sibling;var j=f(p,P,R.value,x);if(j===null){P===null&&(P=M);break}r&&P&&j.alternate===null&&t(p,P),m=o(j,m,S),w===null?C=j:w.sibling=j,w=j,P=M}if(R.done)return n(p,P),Ne&&Hn(p,S),C;if(P===null){for(;!R.done;S++,R=_.next())R=c(p,R.value,x),R!==null&&(m=o(R,m,S),w===null?C=R:w.sibling=R,w=R);return Ne&&Hn(p,S),C}for(P=i(p,P);!R.done;S++,R=_.next())R=d(P,p,S,R.value,x),R!==null&&(r&&R.alternate!==null&&P.delete(R.key===null?S:R.key),m=o(R,m,S),w===null?C=R:w.sibling=R,w=R);return r&&P.forEach(function(A){return t(p,A)}),Ne&&Hn(p,S),C}function y(p,m,_,x){if(typeof _=="object"&&_!==null&&_.type===Si&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case ms:e:{for(var C=_.key,w=m;w!==null;){if(w.key===C){if(C=_.type,C===Si){if(w.tag===7){n(p,w.sibling),m=e(w,_.props.children),m.return=p,p=m;break e}}else if(w.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===an&&hp(C)===w.type){n(p,w.sibling),m=e(w,_.props),m.ref=Do(p,w,_),m.return=p,p=m;break e}n(p,w);break}else t(p,w);w=w.sibling}_.type===Si?(m=Xn(_.props.children,p.mode,x,_.key),m.return=p,p=m):(x=Pl(_.type,_.key,_.props,null,p.mode,x),x.ref=Do(p,m,_),x.return=p,p=x)}return a(p);case Pi:e:{for(w=_.key;m!==null;){if(m.key===w)if(m.tag===4&&m.stateNode.containerInfo===_.containerInfo&&m.stateNode.implementation===_.implementation){n(p,m.sibling),m=e(m,_.children||[]),m.return=p,p=m;break e}else{n(p,m);break}else t(p,m);m=m.sibling}m=Vh(_,p.mode,x),m.return=p,p=m}return a(p);case an:return w=_._init,y(p,m,w(_._payload),x)}if(Ko(_))return g(p,m,_,x);if(ko(_))return v(p,m,_,x);Ts(p,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,m!==null&&m.tag===6?(n(p,m.sibling),m=e(m,_),m.return=p,p=m):(n(p,m),m=Hh(_,p.mode,x),m.return=p,p=m),a(p)):n(p,m)}return y}var no=K_(!0),Q_=K_(!1),Ya={},br=On(Ya),Aa=On(Ya),Oa=On(Ya);function Wn(r){if(r===Ya)throw Error(X(174));return r}function ig(r,t){switch(Oe(Oa,t),Oe(Aa,r),Oe(br,Ya),r=t.nodeType,r){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Xc(null,"");break;default:r=r===8?t.parentNode:t,t=r.namespaceURI||null,r=r.tagName,t=Xc(t,r)}Ie(br),Oe(br,t)}function io(){Ie(br),Ie(Aa),Ie(Oa)}function e0(r){Wn(Oa.current);var t=Wn(br.current),n=Xc(t,r.type);t!==n&&(Oe(Aa,r),Oe(br,n))}function og(r){Aa.current===r&&(Ie(br),Ie(Aa))}var je=On(0);function Yl(r){for(var t=r;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break;for(;t.sibling===null;){if(t.return===null||t.return===r)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ih=[];function ag(){for(var r=0;r<Ih.length;r++)Ih[r]._workInProgressVersionPrimary=null;Ih.length=0}var _l=Qr.ReactCurrentDispatcher,lr=Qr.ReactCurrentBatchConfig,oo=0,Ze=null,xt=null,st=null,Jl=!1,fa=!1,La=0,mS=0;function yt(){throw Error(X(321))}function sg(r,t){if(t===null)return!1;for(var n=0;n<t.length&&n<r.length;n++)if(!Ar(r[n],t[n]))return!1;return!0}function lg(r,t,n,i,e,o){if(oo=o,Ze=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,_l.current=r===null||r.memoizedState===null?wS:CS,r=n(i,e),fa){o=0;do{if(fa=!1,La=0,25<=o)throw Error(X(301));o+=1,st=xt=null,t.updateQueue=null,_l.current=PS,r=n(i,e)}while(fa)}if(_l.current=Xl,t=xt!==null&&xt.next!==null,oo=0,st=xt=Ze=null,Jl=!1,t)throw Error(X(300));return r}function ug(){var r=La!==0;return La=0,r}function jr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return st===null?Ze.memoizedState=st=r:st=st.next=r,st}function Lr(){if(xt===null){var r=Ze.alternate;r=r!==null?r.memoizedState:null}else r=xt.next;var t=st===null?Ze.memoizedState:st.next;if(t!==null)st=t,xt=r;else{if(r===null)throw Error(X(310));xt=r,r={memoizedState:xt.memoizedState,baseState:xt.baseState,baseQueue:xt.baseQueue,queue:xt.queue,next:null},st===null?Ze.memoizedState=st=r:st=st.next=r}return st}function Yn(r,t){return typeof t=="function"?t(r):t}function ks(r){var t=Lr(),n=t.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=r;var i=xt,e=i.baseQueue,o=n.pending;if(o!==null){if(e!==null){var a=e.next;e.next=o.next,o.next=a}i.baseQueue=e=o,n.pending=null}if(e!==null){o=e.next,i=i.baseState;var s=a=null,l=null,u=o;do{var h=u.lane;if((oo&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:r(i,u.action);else{var c={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(s=l=c,a=i):l=l.next=c,Ze.lanes|=h,ao|=h}u=u.next}while(u!==null&&u!==o);l===null?a=i:l.next=s,Ar(i,t.memoizedState)||(Wt=!0),t.memoizedState=i,t.baseState=a,t.baseQueue=l,n.lastRenderedState=i}if(r=n.interleaved,r!==null){e=r;do o=e.lane,Ze.lanes|=o,ao|=o,e=e.next;while(e!==r)}else e===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function bs(r){var t=Lr(),n=t.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=r;var i=n.dispatch,e=n.pending,o=t.memoizedState;if(e!==null){n.pending=null;var a=e=e.next;do o=r(o,a.action),a=a.next;while(a!==e);Ar(o,t.memoizedState)||(Wt=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,i]}function t0(){}function r0(r,t){var n=Ze,i=Lr(),e=t(),o=!Ar(i.memoizedState,e);if(o&&(i.memoizedState=e,Wt=!0),i=i.queue,Ia(o0.bind(null,n,i,r),[r]),i.getSnapshot!==t||o||st!==null&&st.memoizedState.tag&1){if(n.flags|=2048,Da(9,i0.bind(null,n,i,e,t),void 0,null),rt===null)throw Error(X(349));(oo&30)!==0||n0(n,t,e)}return e}function n0(r,t,n){r.flags|=16384,r={getSnapshot:t,value:n},t=Ze.updateQueue,t===null?(t={lastEffect:null,stores:null},Ze.updateQueue=t,t.stores=[r]):(n=t.stores,n===null?t.stores=[r]:n.push(r))}function i0(r,t,n,i){t.value=n,t.getSnapshot=i,a0(t)&&hr(r,1,-1)}function o0(r,t,n){return n(function(){a0(t)&&hr(r,1,-1)})}function a0(r){var t=r.getSnapshot;r=r.value;try{var n=t();return!Ar(r,n)}catch{return!0}}function Fh(r){var t=jr();return typeof r=="function"&&(r=r()),t.memoizedState=t.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Yn,lastRenderedState:r},t.queue=r,r=r.dispatch=xS.bind(null,Ze,r),[t.memoizedState,r]}function Da(r,t,n,i){return r={tag:r,create:t,destroy:n,deps:i,next:null},t=Ze.updateQueue,t===null?(t={lastEffect:null,stores:null},Ze.updateQueue=t,t.lastEffect=r.next=r):(n=t.lastEffect,n===null?t.lastEffect=r.next=r:(i=n.next,n.next=r,r.next=i,t.lastEffect=r)),r}function s0(){return Lr().memoizedState}function xl(r,t,n,i){var e=jr();Ze.flags|=r,e.memoizedState=Da(1|t,n,void 0,i===void 0?null:i)}function Lu(r,t,n,i){var e=Lr();i=i===void 0?null:i;var o=void 0;if(xt!==null){var a=xt.memoizedState;if(o=a.destroy,i!==null&&sg(i,a.deps)){e.memoizedState=Da(t,n,o,i);return}}Ze.flags|=r,e.memoizedState=Da(1|t,n,o,i)}function Nh(r,t){return xl(8390656,8,r,t)}function Ia(r,t){return Lu(2048,8,r,t)}function l0(r,t){return Lu(4,2,r,t)}function u0(r,t){return Lu(4,4,r,t)}function h0(r,t){if(typeof t=="function")return r=r(),t(r),function(){t(null)};if(t!=null)return r=r(),t.current=r,function(){t.current=null}}function c0(r,t,n){return n=n!=null?n.concat([r]):null,Lu(4,4,h0.bind(null,t,r),n)}function hg(){}function f0(r,t){var n=Lr();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&sg(t,i[1])?i[0]:(n.memoizedState=[r,t],r)}function d0(r,t){var n=Lr();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&sg(t,i[1])?i[0]:(r=r(),n.memoizedState=[r,t],r)}function yS(r,t){var n=Te;Te=n!==0&&4>n?n:4,r(!0);var i=lr.transition;lr.transition={};try{r(!1),t()}finally{Te=n,lr.transition=i}}function g0(){return Lr().memoizedState}function _S(r,t,n){var i=Cn(r);n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},v0(r)?p0(t,n):(m0(r,t,n),n=bt(),r=hr(r,i,n),r!==null&&y0(r,t,i))}function xS(r,t,n){var i=Cn(r),e={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(v0(r))p0(t,e);else{m0(r,t,e);var o=r.alternate;if(r.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var a=t.lastRenderedState,s=o(a,n);if(e.hasEagerState=!0,e.eagerState=s,Ar(s,a))return}catch{}finally{}n=bt(),r=hr(r,i,n),r!==null&&y0(r,t,i)}}function v0(r){var t=r.alternate;return r===Ze||t!==null&&t===Ze}function p0(r,t){fa=Jl=!0;var n=r.pending;n===null?t.next=t:(t.next=n.next,n.next=t),r.pending=t}function m0(r,t,n){rt!==null&&(r.mode&1)!==0&&(Ee&2)===0?(r=t.interleaved,r===null?(n.next=n,Er===null?Er=[t]:Er.push(t)):(n.next=r.next,r.next=n),t.interleaved=n):(r=t.pending,r===null?n.next=n:(n.next=r.next,r.next=n),t.pending=n)}function y0(r,t,n){if((n&4194240)!==0){var i=t.lanes;i&=r.pendingLanes,n|=i,t.lanes=n,Gd(r,n)}}var Xl={readContext:cr,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useInsertionEffect:yt,useLayoutEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useMutableSource:yt,useSyncExternalStore:yt,useId:yt,unstable_isNewReconciler:!1},wS={readContext:cr,useCallback:function(r,t){return jr().memoizedState=[r,t===void 0?null:t],r},useContext:cr,useEffect:Nh,useImperativeHandle:function(r,t,n){return n=n!=null?n.concat([r]):null,xl(4194308,4,h0.bind(null,t,r),n)},useLayoutEffect:function(r,t){return xl(4194308,4,r,t)},useInsertionEffect:function(r,t){return xl(4,2,r,t)},useMemo:function(r,t){var n=jr();return t=t===void 0?null:t,r=r(),n.memoizedState=[r,t],r},useReducer:function(r,t,n){var i=jr();return t=n!==void 0?n(t):t,i.memoizedState=i.baseState=t,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:t},i.queue=r,r=r.dispatch=_S.bind(null,Ze,r),[i.memoizedState,r]},useRef:function(r){var t=jr();return r={current:r},t.memoizedState=r},useState:Fh,useDebugValue:hg,useDeferredValue:function(r){var t=Fh(r),n=t[0],i=t[1];return Nh(function(){var e=lr.transition;lr.transition={};try{i(r)}finally{lr.transition=e}},[r]),n},useTransition:function(){var r=Fh(!1),t=r[0];return r=yS.bind(null,r[1]),jr().memoizedState=r,[t,r]},useMutableSource:function(){},useSyncExternalStore:function(r,t,n){var i=Ze,e=jr();if(Ne){if(n===void 0)throw Error(X(407));n=n()}else{if(n=t(),rt===null)throw Error(X(349));(oo&30)!==0||n0(i,t,n)}e.memoizedState=n;var o={value:n,getSnapshot:t};return e.queue=o,Nh(o0.bind(null,i,o,r),[r]),i.flags|=2048,Da(9,i0.bind(null,i,o,n,t),void 0,null),n},useId:function(){var r=jr(),t=rt.identifierPrefix;if(Ne){var n=Br,i=Gr;n=(i&~(1<<32-pr(i)-1)).toString(32)+n,t=":"+t+"R"+n,n=La++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=mS++,t=":"+t+"r"+n.toString(32)+":";return r.memoizedState=t},unstable_isNewReconciler:!1},CS={readContext:cr,useCallback:f0,useContext:cr,useEffect:Ia,useImperativeHandle:c0,useInsertionEffect:l0,useLayoutEffect:u0,useMemo:d0,useReducer:ks,useRef:s0,useState:function(){return ks(Yn)},useDebugValue:hg,useDeferredValue:function(r){var t=ks(Yn),n=t[0],i=t[1];return Ia(function(){var e=lr.transition;lr.transition={};try{i(r)}finally{lr.transition=e}},[r]),n},useTransition:function(){var r=ks(Yn)[0],t=Lr().memoizedState;return[r,t]},useMutableSource:t0,useSyncExternalStore:r0,useId:g0,unstable_isNewReconciler:!1},PS={readContext:cr,useCallback:f0,useContext:cr,useEffect:Ia,useImperativeHandle:c0,useInsertionEffect:l0,useLayoutEffect:u0,useMemo:d0,useReducer:bs,useRef:s0,useState:function(){return bs(Yn)},useDebugValue:hg,useDeferredValue:function(r){var t=bs(Yn),n=t[0],i=t[1];return Ia(function(){var e=lr.transition;lr.transition={};try{i(r)}finally{lr.transition=e}},[r]),n},useTransition:function(){var r=bs(Yn)[0],t=Lr().memoizedState;return[r,t]},useMutableSource:t0,useSyncExternalStore:r0,useId:g0,unstable_isNewReconciler:!1};function cg(r,t){try{var n="",i=t;do n+=XC(i),i=i.return;while(i);var e=n}catch(o){e=`
Error generating stack: `+o.message+`
`+o.stack}return{value:r,source:t,stack:e}}function wf(r,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var SS=typeof WeakMap=="function"?WeakMap:Map;function _0(r,t,n){n=Zr(-1,n),n.tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){eu||(eu=!0,Rf=i),wf(r,t)},n}function x0(r,t,n){n=Zr(-1,n),n.tag=3;var i=r.type.getDerivedStateFromError;if(typeof i=="function"){var e=t.value;n.payload=function(){return i(e)},n.callback=function(){wf(r,t)}}var o=r.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){wf(r,t),typeof i!="function"&&(wn===null?wn=new Set([this]):wn.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function cp(r,t,n){var i=r.pingCache;if(i===null){i=r.pingCache=new SS;var e=new Set;i.set(t,e)}else e=i.get(t),e===void 0&&(e=new Set,i.set(t,e));e.has(n)||(e.add(n),r=zS.bind(null,r,t,n),t.then(r,r))}function fp(r){do{var t;if((t=r.tag===13)&&(t=r.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return r;r=r.return}while(r!==null);return null}function dp(r,t,n,i,e){return(r.mode&1)===0?(r===t?r.flags|=65536:(r.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Zr(-1,1),t.tag=2,xn(n,t))),n.lanes|=1),r):(r.flags|=65536,r.lanes=e,r)}var w0,Cf,C0,P0;w0=function(r,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)r.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Cf=function(){};C0=function(r,t,n,i){var e=r.memoizedProps;if(e!==i){r=t.stateNode,Wn(br.current);var o=null;switch(n){case"input":e=Uc(r,e),i=Uc(r,i),o=[];break;case"select":e=He({},e,{value:void 0}),i=He({},i,{value:void 0}),o=[];break;case"textarea":e=Jc(r,e),i=Jc(r,i),o=[];break;default:typeof e.onClick!="function"&&typeof i.onClick=="function"&&(r.onclick=Vl)}Kc(n,i);var a;n=null;for(u in e)if(!i.hasOwnProperty(u)&&e.hasOwnProperty(u)&&e[u]!=null)if(u==="style"){var s=e[u];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(xa.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in i){var l=i[u];if(s=e!=null?e[u]:void 0,i.hasOwnProperty(u)&&l!==s&&(l!=null||s!=null))if(u==="style")if(s){for(a in s)!s.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&s[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(o||(o=[]),o.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(o=o||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(xa.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&De("scroll",r),o||s===l||(o=[])):(o=o||[]).push(u,l))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};P0=function(r,t,n,i){n!==i&&(t.flags|=4)};function Io(r,t){if(!Ne)switch(r.tailMode){case"hidden":t=r.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?r.tail=null:n.sibling=null;break;case"collapsed":n=r.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||r.tail===null?r.tail=null:r.tail.sibling=null:i.sibling=null}}function _t(r){var t=r.alternate!==null&&r.alternate.child===r.child,n=0,i=0;if(t)for(var e=r.child;e!==null;)n|=e.lanes|e.childLanes,i|=e.subtreeFlags&14680064,i|=e.flags&14680064,e.return=r,e=e.sibling;else for(e=r.child;e!==null;)n|=e.lanes|e.childLanes,i|=e.subtreeFlags,i|=e.flags,e.return=r,e=e.sibling;return r.subtreeFlags|=i,r.childLanes=n,t}function ES(r,t,n){var i=t.pendingProps;switch(rg(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _t(t),null;case 1:return zt(t.type)&&$l(),_t(t),null;case 3:return i=t.stateNode,io(),Ie(Nt),Ie(Ct),ag(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(r===null||r.child===null)&&(Lo(t)?t.flags|=4:r===null||r.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,vr!==null&&(Lf(vr),vr=null))),Cf(r,t),_t(t),null;case 5:og(t);var e=Wn(Oa.current);if(n=t.type,r!==null&&t.stateNode!=null)C0(r,t,n,i,e),r.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(X(166));return _t(t),null}if(r=Wn(br.current),Lo(t)){i=t.stateNode,n=t.type;var o=t.memoizedProps;switch(i[Sr]=t,i[Ra]=o,r=(t.mode&1)!==0,n){case"dialog":De("cancel",i),De("close",i);break;case"iframe":case"object":case"embed":De("load",i);break;case"video":case"audio":for(e=0;e<ea.length;e++)De(ea[e],i);break;case"source":De("error",i);break;case"img":case"image":case"link":De("error",i),De("load",i);break;case"details":De("toggle",i);break;case"input":bv(i,o),De("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},De("invalid",i);break;case"textarea":Av(i,o),De("invalid",i)}Kc(n,o),e=null;for(var a in o)if(o.hasOwnProperty(a)){var s=o[a];a==="children"?typeof s=="string"?i.textContent!==s&&(Ms(i.textContent,s,r),e=["children",s]):typeof s=="number"&&i.textContent!==""+s&&(Ms(i.textContent,s,r),e=["children",""+s]):xa.hasOwnProperty(a)&&s!=null&&a==="onScroll"&&De("scroll",i)}switch(n){case"input":ys(i),Rv(i,o,!0);break;case"textarea":ys(i),Ov(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=Vl)}i=e,t.updateQueue=i,i!==null&&(t.flags|=4)}else{a=e.nodeType===9?e:e.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=a_(n)),r==="http://www.w3.org/1999/xhtml"?n==="script"?(r=a.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof i.is=="string"?r=a.createElement(n,{is:i.is}):(r=a.createElement(n),n==="select"&&(a=r,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):r=a.createElementNS(r,n),r[Sr]=t,r[Ra]=i,w0(r,t,!1,!1),t.stateNode=r;e:{switch(a=Qc(n,i),n){case"dialog":De("cancel",r),De("close",r),e=i;break;case"iframe":case"object":case"embed":De("load",r),e=i;break;case"video":case"audio":for(e=0;e<ea.length;e++)De(ea[e],r);e=i;break;case"source":De("error",r),e=i;break;case"img":case"image":case"link":De("error",r),De("load",r),e=i;break;case"details":De("toggle",r),e=i;break;case"input":bv(r,i),e=Uc(r,i),De("invalid",r);break;case"option":e=i;break;case"select":r._wrapperState={wasMultiple:!!i.multiple},e=He({},i,{value:void 0}),De("invalid",r);break;case"textarea":Av(r,i),e=Jc(r,i),De("invalid",r);break;default:e=i}Kc(n,e),s=e;for(o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="style"?u_(r,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&s_(r,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&wa(r,l):typeof l=="number"&&wa(r,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(xa.hasOwnProperty(o)?l!=null&&o==="onScroll"&&De("scroll",r):l!=null&&Nd(r,o,l,a))}switch(n){case"input":ys(r),Rv(r,i,!1);break;case"textarea":ys(r),Ov(r);break;case"option":i.value!=null&&r.setAttribute("value",""+En(i.value));break;case"select":r.multiple=!!i.multiple,o=i.value,o!=null?ji(r,!!i.multiple,o,!1):i.defaultValue!=null&&ji(r,!!i.multiple,i.defaultValue,!0);break;default:typeof e.onClick=="function"&&(r.onclick=Vl)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return _t(t),null;case 6:if(r&&t.stateNode!=null)P0(r,t,r.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(X(166));if(n=Wn(Oa.current),Wn(br.current),Lo(t)){if(i=t.stateNode,n=t.memoizedProps,i[Sr]=t,(o=i.nodeValue!==n)&&(r=Ut,r!==null))switch(a=(r.mode&1)!==0,r.tag){case 3:Ms(i.nodeValue,n,a);break;case 5:r.memoizedProps[void 0]!==!0&&Ms(i.nodeValue,n,a)}o&&(t.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Sr]=t,t.stateNode=i}return _t(t),null;case 13:if(Ie(je),i=t.memoizedState,Ne&&It!==null&&(t.mode&1)!==0&&(t.flags&128)===0){for(i=It;i;)i=$r(i.nextSibling);return ro(),t.flags|=98560,t}if(i!==null&&i.dehydrated!==null){if(i=Lo(t),r===null){if(!i)throw Error(X(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(X(317));i[Sr]=t}else ro(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;return _t(t),null}return vr!==null&&(Lf(vr),vr=null),(t.flags&128)!==0?(t.lanes=n,t):(i=i!==null,n=!1,r===null?Lo(t):n=r.memoizedState!==null,i&&!n&&(t.child.flags|=8192,(t.mode&1)!==0&&(r===null||(je.current&1)!==0?nt===0&&(nt=3):mg())),t.updateQueue!==null&&(t.flags|=4),_t(t),null);case 4:return io(),Cf(r,t),r===null&&ka(t.stateNode.containerInfo),_t(t),null;case 10:return Qd(t.type._context),_t(t),null;case 17:return zt(t.type)&&$l(),_t(t),null;case 19:if(Ie(je),o=t.memoizedState,o===null)return _t(t),null;if(i=(t.flags&128)!==0,a=o.rendering,a===null)if(i)Io(o,!1);else{if(nt!==0||r!==null&&(r.flags&128)!==0)for(r=t.child;r!==null;){if(a=Yl(r),a!==null){for(t.flags|=128,Io(o,!1),i=a.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;n!==null;)o=n,r=i,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=r,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,r=a.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),n=n.sibling;return Oe(je,je.current&1|2),t.child}r=r.sibling}o.tail!==null&&Ue()>so&&(t.flags|=128,i=!0,Io(o,!1),t.lanes=4194304)}else{if(!i)if(r=Yl(a),r!==null){if(t.flags|=128,i=!0,n=r.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Io(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Ne)return _t(t),null}else 2*Ue()-o.renderingStartTime>so&&n!==1073741824&&(t.flags|=128,i=!0,Io(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(n=o.last,n!==null?n.sibling=a:t.child=a,o.last=a)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ue(),t.sibling=null,n=je.current,Oe(je,i?n&1|2:n&1),t):(_t(t),null);case 22:case 23:return pg(),i=t.memoizedState!==null,r!==null&&r.memoizedState!==null!==i&&(t.flags|=8192),i&&(t.mode&1)!==0?(Bt&1073741824)!==0&&(_t(t),t.subtreeFlags&6&&(t.flags|=8192)):_t(t),null;case 24:return null;case 25:return null}throw Error(X(156,t.tag))}var MS=Qr.ReactCurrentOwner,Wt=!1;function Mt(r,t,n,i){t.child=r===null?Q_(t,null,n,i):no(t,r.child,n,i)}function gp(r,t,n,i,e){n=n.render;var o=t.ref;return Gi(t,e),i=lg(r,t,n,i,o,e),n=ug(),r!==null&&!Wt?(t.updateQueue=r.updateQueue,t.flags&=-2053,r.lanes&=~e,Yr(r,t,e)):(Ne&&n&&tg(t),t.flags|=1,Mt(r,t,i,e),t.child)}function vp(r,t,n,i,e){if(r===null){var o=n.type;return typeof o=="function"&&!yg(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,S0(r,t,o,i,e)):(r=Pl(n.type,null,i,t,t.mode,e),r.ref=t.ref,r.return=t,t.child=r)}if(o=r.child,(r.lanes&e)===0){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:Ta,n(a,i)&&r.ref===t.ref)return Yr(r,t,e)}return t.flags|=1,r=Tn(o,i),r.ref=t.ref,r.return=t,t.child=r}function S0(r,t,n,i,e){if(r!==null&&Ta(r.memoizedProps,i)&&r.ref===t.ref)if(Wt=!1,(r.lanes&e)!==0)(r.flags&131072)!==0&&(Wt=!0);else return t.lanes=r.lanes,Yr(r,t,e);return Pf(r,t,n,i,e)}function E0(r,t,n){var i=t.pendingProps,e=i.children,o=r!==null?r.memoizedState:null;if(i.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null},Oe(Li,Bt),Bt|=n;else if((n&1073741824)!==0)t.memoizedState={baseLanes:0,cachePool:null},i=o!==null?o.baseLanes:n,Oe(Li,Bt),Bt|=i;else return r=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:r,cachePool:null},t.updateQueue=null,Oe(Li,Bt),Bt|=r,null;else o!==null?(i=o.baseLanes|n,t.memoizedState=null):i=n,Oe(Li,Bt),Bt|=i;return Mt(r,t,e,n),t.child}function M0(r,t){var n=t.ref;(r===null&&n!==null||r!==null&&r.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Pf(r,t,n,i,e){var o=zt(n)?Qn:Ct.current;return o=to(t,o),Gi(t,e),n=lg(r,t,n,i,o,e),i=ug(),r!==null&&!Wt?(t.updateQueue=r.updateQueue,t.flags&=-2053,r.lanes&=~e,Yr(r,t,e)):(Ne&&i&&tg(t),t.flags|=1,Mt(r,t,n,e),t.child)}function pp(r,t,n,i,e){if(zt(n)){var o=!0;Gl(t)}else o=!1;if(Gi(t,e),t.stateNode===null)r!==null&&(r.alternate=null,t.alternate=null,t.flags|=2),Y_(t,n,i),yf(t,n,i,e),i=!0;else if(r===null){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=cr(u):(u=zt(n)?Qn:Ct.current,u=to(t,u));var h=n.getDerivedStateFromProps,c=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";c||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==i||l!==u)&&sp(t,a,i,u),sn=!1;var f=t.memoizedState;a.state=f,Zl(t,i,a,e),l=t.memoizedState,s!==i||f!==l||Nt.current||sn?(typeof h=="function"&&(mf(t,n,h,i),l=t.memoizedState),(s=sn||ap(t,n,s,i,f,l,u))?(c||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),a.props=i,a.state=l,a.context=u,i=s):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{a=t.stateNode,U_(r,t),s=t.memoizedProps,u=t.type===t.elementType?s:gr(t.type,s),a.props=u,c=t.pendingProps,f=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=cr(l):(l=zt(n)?Qn:Ct.current,l=to(t,l));var d=n.getDerivedStateFromProps;(h=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==c||f!==l)&&sp(t,a,i,l),sn=!1,f=t.memoizedState,a.state=f,Zl(t,i,a,e);var g=t.memoizedState;s!==c||f!==g||Nt.current||sn?(typeof d=="function"&&(mf(t,n,d,i),g=t.memoizedState),(u=sn||ap(t,n,u,i,f,g,l)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,g,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,g,l)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===r.memoizedProps&&f===r.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===r.memoizedProps&&f===r.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=g),a.props=i,a.state=g,a.context=l,i=u):(typeof a.componentDidUpdate!="function"||s===r.memoizedProps&&f===r.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===r.memoizedProps&&f===r.memoizedState||(t.flags|=1024),i=!1)}return Sf(r,t,n,i,o,e)}function Sf(r,t,n,i,e,o){M0(r,t);var a=(t.flags&128)!==0;if(!i&&!a)return e&&np(t,n,!1),Yr(r,t,o);i=t.stateNode,MS.current=t;var s=a&&typeof n.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,r!==null&&a?(t.child=no(t,r.child,null,o),t.child=no(t,null,s,o)):Mt(r,t,s,o),t.memoizedState=i.state,e&&np(t,n,!0),t.child}function T0(r){var t=r.stateNode;t.pendingContext?rp(r,t.pendingContext,t.pendingContext!==t.context):t.context&&rp(r,t.context,!1),ig(r,t.containerInfo)}function mp(r,t,n,i,e){return ro(),ng(e),t.flags|=256,Mt(r,t,n,i),t.child}var Rs={dehydrated:null,treeContext:null,retryLane:0};function As(r){return{baseLanes:r,cachePool:null}}function k0(r,t,n){var i=t.pendingProps,e=je.current,o=!1,a=(t.flags&128)!==0,s;if((s=a)||(s=r!==null&&r.memoizedState===null?!1:(e&2)!==0),s?(o=!0,t.flags&=-129):(r===null||r.memoizedState!==null)&&(e|=1),Oe(je,e&1),r===null)return xf(t),r=t.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((t.mode&1)===0?t.lanes=1:r.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(e=i.children,r=i.fallback,o?(i=t.mode,o=t.child,e={mode:"hidden",children:e},(i&1)===0&&o!==null?(o.childLanes=0,o.pendingProps=e):o=nu(e,i,0,null),r=Xn(r,i,n,null),o.return=t,r.return=t,o.sibling=r,t.child=o,t.child.memoizedState=As(n),t.memoizedState=Rs,r):Ef(t,e));if(e=r.memoizedState,e!==null){if(s=e.dehydrated,s!==null){if(a)return t.flags&256?(t.flags&=-257,Os(r,t,n,Error(X(422)))):t.memoizedState!==null?(t.child=r.child,t.flags|=128,null):(o=i.fallback,e=t.mode,i=nu({mode:"visible",children:i.children},e,0,null),o=Xn(o,e,n,null),o.flags|=2,i.return=t,o.return=t,i.sibling=o,t.child=i,(t.mode&1)!==0&&no(t,r.child,null,n),t.child.memoizedState=As(n),t.memoizedState=Rs,o);if((t.mode&1)===0)t=Os(r,t,n,null);else if(s.data==="$!")t=Os(r,t,n,Error(X(419)));else if(i=(n&r.childLanes)!==0,Wt||i){if(i=rt,i!==null){switch(n&-n){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}i=(o&(i.suspendedLanes|n))!==0?0:o,i!==0&&i!==e.retryLane&&(e.retryLane=i,hr(r,i,-1))}mg(),t=Os(r,t,n,Error(X(421)))}else s.data==="$?"?(t.flags|=128,t.child=r.child,t=jS.bind(null,r),s._reactRetry=t,t=null):(n=e.treeContext,It=$r(s.nextSibling),Ut=t,Ne=!0,vr=null,n!==null&&(nr[ir++]=Gr,nr[ir++]=Br,nr[ir++]=ei,Gr=n.id,Br=n.overflow,ei=t),t=Ef(t,t.pendingProps.children),t.flags|=4096);return t}return o?(i=_p(r,t,i.children,i.fallback,n),o=t.child,e=r.child.memoizedState,o.memoizedState=e===null?As(n):{baseLanes:e.baseLanes|n,cachePool:null},o.childLanes=r.childLanes&~n,t.memoizedState=Rs,i):(n=yp(r,t,i.children,n),t.memoizedState=null,n)}return o?(i=_p(r,t,i.children,i.fallback,n),o=t.child,e=r.child.memoizedState,o.memoizedState=e===null?As(n):{baseLanes:e.baseLanes|n,cachePool:null},o.childLanes=r.childLanes&~n,t.memoizedState=Rs,i):(n=yp(r,t,i.children,n),t.memoizedState=null,n)}function Ef(r,t){return t=nu({mode:"visible",children:t},r.mode,0,null),t.return=r,r.child=t}function yp(r,t,n,i){var e=r.child;return r=e.sibling,n=Tn(e,{mode:"visible",children:n}),(t.mode&1)===0&&(n.lanes=i),n.return=t,n.sibling=null,r!==null&&(i=t.deletions,i===null?(t.deletions=[r],t.flags|=16):i.push(r)),t.child=n}function _p(r,t,n,i,e){var o=t.mode;r=r.child;var a=r.sibling,s={mode:"hidden",children:n};return(o&1)===0&&t.child!==r?(n=t.child,n.childLanes=0,n.pendingProps=s,t.deletions=null):(n=Tn(r,s),n.subtreeFlags=r.subtreeFlags&14680064),a!==null?i=Tn(a,i):(i=Xn(i,o,e,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,i}function Os(r,t,n,i){return i!==null&&ng(i),no(t,r.child,null,n),r=Ef(t,t.pendingProps.children),r.flags|=2,t.memoizedState=null,r}function xp(r,t,n){r.lanes|=t;var i=r.alternate;i!==null&&(i.lanes|=t),pf(r.return,t,n)}function zh(r,t,n,i,e){var o=r.memoizedState;o===null?r.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:e}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=e)}function b0(r,t,n){var i=t.pendingProps,e=i.revealOrder,o=i.tail;if(Mt(r,t,i.children,n),i=je.current,(i&2)!==0)i=i&1|2,t.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=t.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&xp(r,n,t);else if(r.tag===19)xp(r,n,t);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}i&=1}if(Oe(je,i),(t.mode&1)===0)t.memoizedState=null;else switch(e){case"forwards":for(n=t.child,e=null;n!==null;)r=n.alternate,r!==null&&Yl(r)===null&&(e=n),n=n.sibling;n=e,n===null?(e=t.child,t.child=null):(e=n.sibling,n.sibling=null),zh(t,!1,e,n,o);break;case"backwards":for(n=null,e=t.child,t.child=null;e!==null;){if(r=e.alternate,r!==null&&Yl(r)===null){t.child=e;break}r=e.sibling,e.sibling=n,n=e,e=r}zh(t,!0,n,null,o);break;case"together":zh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Yr(r,t,n){if(r!==null&&(t.dependencies=r.dependencies),ao|=t.lanes,(n&t.childLanes)===0)return null;if(r!==null&&t.child!==r.child)throw Error(X(153));if(t.child!==null){for(r=t.child,n=Tn(r,r.pendingProps),t.child=n,n.return=t;r.sibling!==null;)r=r.sibling,n=n.sibling=Tn(r,r.pendingProps),n.return=t;n.sibling=null}return t.child}function TS(r,t,n){switch(t.tag){case 3:T0(t),ro();break;case 5:e0(t);break;case 1:zt(t.type)&&Gl(t);break;case 4:ig(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,e=t.memoizedProps.value;Oe(Bl,i._currentValue),i._currentValue=e;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(Oe(je,je.current&1),t.flags|=128,null):(n&t.child.childLanes)!==0?k0(r,t,n):(Oe(je,je.current&1),r=Yr(r,t,n),r!==null?r.sibling:null);Oe(je,je.current&1);break;case 19:if(i=(n&t.childLanes)!==0,(r.flags&128)!==0){if(i)return b0(r,t,n);t.flags|=128}if(e=t.memoizedState,e!==null&&(e.rendering=null,e.tail=null,e.lastEffect=null),Oe(je,je.current),i)break;return null;case 22:case 23:return t.lanes=0,E0(r,t,n)}return Yr(r,t,n)}function kS(r,t){switch(rg(t),t.tag){case 1:return zt(t.type)&&$l(),r=t.flags,r&65536?(t.flags=r&-65537|128,t):null;case 3:return io(),Ie(Nt),Ie(Ct),ag(),r=t.flags,(r&65536)!==0&&(r&128)===0?(t.flags=r&-65537|128,t):null;case 5:return og(t),null;case 13:if(Ie(je),r=t.memoizedState,r!==null&&r.dehydrated!==null){if(t.alternate===null)throw Error(X(340));ro()}return r=t.flags,r&65536?(t.flags=r&-65537|128,t):null;case 19:return Ie(je),null;case 4:return io(),null;case 10:return Qd(t.type._context),null;case 22:case 23:return pg(),null;case 24:return null;default:return null}}var Ls=!1,Zn=!1,bS=typeof WeakSet=="function"?WeakSet:Set,ne=null;function Kl(r,t){var n=r.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Ft(r,t,i)}else n.current=null}function Mf(r,t,n){try{n()}catch(i){Ft(r,t,i)}}var wp=!1;function RS(r,t){if(hf=zl,r=F_(),Jd(r)){if("selectionStart"in r)var n={start:r.selectionStart,end:r.selectionEnd};else e:{n=(n=r.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var e=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,s=-1,l=-1,u=0,h=0,c=r,f=null;t:for(;;){for(var d;c!==n||e!==0&&c.nodeType!==3||(s=a+e),c!==o||i!==0&&c.nodeType!==3||(l=a+i),c.nodeType===3&&(a+=c.nodeValue.length),(d=c.firstChild)!==null;)f=c,c=d;for(;;){if(c===r)break t;if(f===n&&++u===e&&(s=a),f===o&&++h===i&&(l=a),(d=c.nextSibling)!==null)break;c=f,f=c.parentNode}c=d}n=s===-1||l===-1?null:{start:s,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(cf={focusedElem:r,selectionRange:n},zl=!1,ne=t;ne!==null;)if(t=ne,r=t.child,(t.subtreeFlags&1028)!==0&&r!==null)r.return=t,ne=r;else for(;ne!==null;){t=ne;try{var g=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,y=g.memoizedState,p=t.stateNode,m=p.getSnapshotBeforeUpdate(t.elementType===t.type?v:gr(t.type,v),y);p.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var _=t.stateNode.containerInfo;if(_.nodeType===1)_.textContent="";else if(_.nodeType===9){var x=_.body;x!=null&&(x.textContent="")}break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(C){Ft(t,t.return,C)}if(r=t.sibling,r!==null){r.return=t.return,ne=r;break}ne=t.return}return g=wp,wp=!1,g}function Fa(r,t,n){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var e=i=i.next;do{if((e.tag&r)===r){var o=e.destroy;e.destroy=void 0,o!==void 0&&Mf(t,n,o)}e=e.next}while(e!==i)}}function Du(r,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&r)===r){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function Tf(r){var t=r.ref;if(t!==null){var n=r.stateNode;switch(r.tag){case 5:r=n;break;default:r=n}typeof t=="function"?t(r):t.current=r}}function Cp(r,t,n){if(kr&&typeof kr.onCommitFiberUnmount=="function")try{kr.onCommitFiberUnmount(Mu,t)}catch{}switch(t.tag){case 0:case 11:case 14:case 15:if(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null)){var i=r=r.next;do{var e=i,o=e.destroy;e=e.tag,o!==void 0&&((e&2)!==0||(e&4)!==0)&&Mf(t,n,o),i=i.next}while(i!==r)}break;case 1:if(Kl(t,n),r=t.stateNode,typeof r.componentWillUnmount=="function")try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){Ft(t,n,a)}break;case 5:Kl(t,n);break;case 4:O0(r,t,n)}}function R0(r){var t=r.alternate;t!==null&&(r.alternate=null,R0(t)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(t=r.stateNode,t!==null&&(delete t[Sr],delete t[Ra],delete t[gf],delete t[dS],delete t[gS])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function A0(r){return r.tag===5||r.tag===3||r.tag===4}function Pp(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||A0(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Sp(r){e:{for(var t=r.return;t!==null;){if(A0(t))break e;t=t.return}throw Error(X(160))}var n=t;switch(n.tag){case 5:t=n.stateNode,n.flags&32&&(wa(t,""),n.flags&=-33),n=Pp(r),bf(r,n,t);break;case 3:case 4:t=n.stateNode.containerInfo,n=Pp(r),kf(r,n,t);break;default:throw Error(X(161))}}function kf(r,t,n){var i=r.tag;if(i===5||i===6)r=r.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(r,t):n.insertBefore(r,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(r,n)):(t=n,t.appendChild(r)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Vl));else if(i!==4&&(r=r.child,r!==null))for(kf(r,t,n),r=r.sibling;r!==null;)kf(r,t,n),r=r.sibling}function bf(r,t,n){var i=r.tag;if(i===5||i===6)r=r.stateNode,t?n.insertBefore(r,t):n.appendChild(r);else if(i!==4&&(r=r.child,r!==null))for(bf(r,t,n),r=r.sibling;r!==null;)bf(r,t,n),r=r.sibling}function O0(r,t,n){for(var i=t,e=!1,o,a;;){if(!e){e=i.return;e:for(;;){if(e===null)throw Error(X(160));switch(o=e.stateNode,e.tag){case 5:a=!1;break e;case 3:o=o.containerInfo,a=!0;break e;case 4:o=o.containerInfo,a=!0;break e}e=e.return}e=!0}if(i.tag===5||i.tag===6){e:for(var s=r,l=i,u=n,h=l;;)if(Cp(s,h,u),h.child!==null&&h.tag!==4)h.child.return=h,h=h.child;else{if(h===l)break e;for(;h.sibling===null;){if(h.return===null||h.return===l)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}a?(s=o,l=i.stateNode,s.nodeType===8?s.parentNode.removeChild(l):s.removeChild(l)):o.removeChild(i.stateNode)}else if(i.tag===18)a?(s=o,l=i.stateNode,s.nodeType===8?Lh(s.parentNode,l):s.nodeType===1&&Lh(s,l),Ea(s)):Lh(o,i.stateNode);else if(i.tag===4){if(i.child!==null){o=i.stateNode.containerInfo,a=!0,i.child.return=i,i=i.child;continue}}else if(Cp(r,i,n),i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return,i.tag===4&&(e=!1)}i.sibling.return=i.return,i=i.sibling}}function jh(r,t){switch(t.tag){case 0:case 11:case 14:case 15:Fa(3,t,t.return),Du(3,t),Fa(5,t,t.return);return;case 1:return;case 5:var n=t.stateNode;if(n!=null){var i=t.memoizedProps,e=r!==null?r.memoizedProps:i;r=t.type;var o=t.updateQueue;if(t.updateQueue=null,o!==null){for(r==="input"&&i.type==="radio"&&i.name!=null&&i_(n,i),Qc(r,e),t=Qc(r,i),e=0;e<o.length;e+=2){var a=o[e],s=o[e+1];a==="style"?u_(n,s):a==="dangerouslySetInnerHTML"?s_(n,s):a==="children"?wa(n,s):Nd(n,a,s,t)}switch(r){case"input":qc(n,i);break;case"textarea":o_(n,i);break;case"select":r=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!i.multiple,o=i.value,o!=null?ji(n,!!i.multiple,o,!1):r!==!!i.multiple&&(i.defaultValue!=null?ji(n,!!i.multiple,i.defaultValue,!0):ji(n,!!i.multiple,i.multiple?[]:"",!1))}n[Ra]=i}}return;case 6:if(t.stateNode===null)throw Error(X(162));t.stateNode.nodeValue=t.memoizedProps;return;case 3:r!==null&&r.memoizedState.isDehydrated&&Ea(t.stateNode.containerInfo);return;case 12:return;case 13:Ep(t);return;case 19:Ep(t);return;case 17:return}throw Error(X(163))}function Ep(r){var t=r.updateQueue;if(t!==null){r.updateQueue=null;var n=r.stateNode;n===null&&(n=r.stateNode=new bS),t.forEach(function(i){var e=HS.bind(null,r,i);n.has(i)||(n.add(i),i.then(e,e))})}}function AS(r,t){for(ne=t;ne!==null;){t=ne;var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var e=n[i];try{O0(r,e,t);var o=e.alternate;o!==null&&(o.return=null),e.return=null}catch(S){Ft(e,t,S)}}if(n=t.child,(t.subtreeFlags&12854)!==0&&n!==null)n.return=t,ne=n;else for(;ne!==null;){t=ne;try{var a=t.flags;if(a&32&&wa(t.stateNode,""),a&512){var s=t.alternate;if(s!==null){var l=s.ref;l!==null&&(typeof l=="function"?l(null):l.current=null)}}if(a&8192)switch(t.tag){case 13:if(t.memoizedState!==null){var u=t.alternate;(u===null||u.memoizedState===null)&&(gg=Ue())}break;case 22:var h=t.memoizedState!==null,c=t.alternate,f=c!==null&&c.memoizedState!==null;n=t;e:{i=n,e=h;for(var d=null,g=i;;){if(g.tag===5){if(d===null){d=g;var v=g.stateNode;if(e){var y=v.style;typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"}else{var p=g.stateNode,m=g.memoizedProps.style,_=m!=null&&m.hasOwnProperty("display")?m.display:null;p.style.display=l_("display",_)}}}else if(g.tag===6)d===null&&(g.stateNode.nodeValue=e?"":g.memoizedProps);else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===i)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===i)break;for(;g.sibling===null;){if(g.return===null||g.return===i)break e;d===g&&(d=null),g=g.return}d===g&&(d=null),g.sibling.return=g.return,g=g.sibling}}if(h&&!f&&(n.mode&1)!==0){ne=n;for(var x=n.child;x!==null;){for(n=ne=x;ne!==null;){i=ne;var C=i.child;switch(i.tag){case 0:case 11:case 14:case 15:Fa(4,i,i.return);break;case 1:Kl(i,i.return);var w=i.stateNode;if(typeof w.componentWillUnmount=="function"){var P=i.return;try{w.props=i.memoizedProps,w.state=i.memoizedState,w.componentWillUnmount()}catch(S){Ft(i,P,S)}}break;case 5:Kl(i,i.return);break;case 22:if(i.memoizedState!==null){Tp(n);continue}}C!==null?(C.return=i,ne=C):Tp(n)}x=x.sibling}}}switch(a&4102){case 2:Sp(t),t.flags&=-3;break;case 6:Sp(t),t.flags&=-3,jh(t.alternate,t);break;case 4096:t.flags&=-4097;break;case 4100:t.flags&=-4097,jh(t.alternate,t);break;case 4:jh(t.alternate,t)}}catch(S){Ft(t,t.return,S)}if(n=t.sibling,n!==null){n.return=t.return,ne=n;break}ne=t.return}}}function OS(r,t,n){ne=r,L0(r)}function L0(r,t,n){for(var i=(r.mode&1)!==0;ne!==null;){var e=ne,o=e.child;if(e.tag===22&&i){var a=e.memoizedState!==null||Ls;if(!a){var s=e.alternate,l=s!==null&&s.memoizedState!==null||Zn;s=Ls;var u=Zn;if(Ls=a,(Zn=l)&&!u)for(ne=e;ne!==null;)a=ne,l=a.child,a.tag===22&&a.memoizedState!==null?kp(e):l!==null?(l.return=a,ne=l):kp(e);for(;o!==null;)ne=o,L0(o),o=o.sibling;ne=e,Ls=s,Zn=u}Mp(r)}else(e.subtreeFlags&8772)!==0&&o!==null?(o.return=e,ne=o):Mp(r)}}function Mp(r){for(;ne!==null;){var t=ne;if((t.flags&8772)!==0){var n=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:Zn||Du(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!Zn)if(n===null)i.componentDidMount();else{var e=t.elementType===t.type?n.memoizedProps:gr(t.type,n.memoizedProps);i.componentDidUpdate(e,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&op(t,o,i);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}op(t,a,n)}break;case 5:var s=t.stateNode;if(n===null&&t.flags&4){n=s;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var c=h.dehydrated;c!==null&&Ea(c)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(X(163))}Zn||t.flags&512&&Tf(t)}catch(f){Ft(t,t.return,f)}}if(t===r){ne=null;break}if(n=t.sibling,n!==null){n.return=t.return,ne=n;break}ne=t.return}}function Tp(r){for(;ne!==null;){var t=ne;if(t===r){ne=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ne=n;break}ne=t.return}}function kp(r){for(;ne!==null;){var t=ne;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Du(4,t)}catch(l){Ft(t,n,l)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var e=t.return;try{i.componentDidMount()}catch(l){Ft(t,e,l)}}var o=t.return;try{Tf(t)}catch(l){Ft(t,o,l)}break;case 5:var a=t.return;try{Tf(t)}catch(l){Ft(t,a,l)}}}catch(l){Ft(t,t.return,l)}if(t===r){ne=null;break}var s=t.sibling;if(s!==null){s.return=t.return,ne=s;break}ne=t.return}}var LS=Math.ceil,Ql=Qr.ReactCurrentDispatcher,fg=Qr.ReactCurrentOwner,ur=Qr.ReactCurrentBatchConfig,Ee=0,rt=null,tt=null,dt=0,Bt=0,Li=On(0),nt=0,Na=null,ao=0,Iu=0,dg=0,da=null,Dt=null,gg=0,so=1/0,eu=!1,Rf=null,wn=null,Ds=!1,vn=null,tu=0,ga=0,Af=null,wl=-1,Cl=0;function bt(){return(Ee&6)!==0?Ue():wl!==-1?wl:wl=Ue()}function Cn(r){return(r.mode&1)===0?1:(Ee&2)!==0&&dt!==0?dt&-dt:pS.transition!==null?(Cl===0&&(r=xs,xs<<=1,(xs&4194240)===0&&(xs=64),Cl=r),Cl):(r=Te,r!==0||(r=window.event,r=r===void 0?16:T_(r.type)),r)}function hr(r,t,n){if(50<ga)throw ga=0,Af=null,Error(X(185));var i=Fu(r,t);return i===null?null:(Za(i,t,n),((Ee&2)===0||i!==rt)&&(i===rt&&((Ee&2)===0&&(Iu|=t),nt===4&&cn(i,dt)),jt(i,n),t===1&&Ee===0&&(r.mode&1)===0&&(so=Ue()+500,Au&&Ln())),i)}function Fu(r,t){r.lanes|=t;var n=r.alternate;for(n!==null&&(n.lanes|=t),n=r,r=r.return;r!==null;)r.childLanes|=t,n=r.alternate,n!==null&&(n.childLanes|=t),n=r,r=r.return;return n.tag===3?n.stateNode:null}function jt(r,t){var n=r.callbackNode;pP(r,t);var i=Nl(r,r===rt?dt:0);if(i===0)n!==null&&Iv(n),r.callbackNode=null,r.callbackPriority=0;else if(t=i&-i,r.callbackPriority!==t){if(n!=null&&Iv(n),t===1)r.tag===0?vS(bp.bind(null,r)):Z_(bp.bind(null,r)),cS(function(){Ee===0&&Ln()}),n=null;else{switch(w_(i)){case 1:n=$d;break;case 4:n=__;break;case 16:n=Fl;break;case 536870912:n=x_;break;default:n=Fl}n=V0(n,D0.bind(null,r))}r.callbackPriority=t,r.callbackNode=n}}function D0(r,t){if(wl=-1,Cl=0,(Ee&6)!==0)throw Error(X(327));var n=r.callbackNode;if(Bi()&&r.callbackNode!==n)return null;var i=Nl(r,r===rt?dt:0);if(i===0)return null;if((i&30)!==0||(i&r.expiredLanes)!==0||t)t=ru(r,i);else{t=i;var e=Ee;Ee|=2;var o=F0();(rt!==r||dt!==t)&&(so=Ue()+500,Jn(r,t));do try{FS();break}catch(s){I0(r,s)}while(1);Kd(),Ql.current=o,Ee=e,tt!==null?t=0:(rt=null,dt=0,t=nt)}if(t!==0){if(t===2&&(e=of(r),e!==0&&(i=e,t=Of(r,e))),t===1)throw n=Na,Jn(r,0),cn(r,i),jt(r,Ue()),n;if(t===6)cn(r,i);else{if(e=r.current.alternate,(i&30)===0&&!DS(e)&&(t=ru(r,i),t===2&&(o=of(r),o!==0&&(i=o,t=Of(r,o))),t===1))throw n=Na,Jn(r,0),cn(r,i),jt(r,Ue()),n;switch(r.finishedWork=e,r.finishedLanes=i,t){case 0:case 1:throw Error(X(345));case 2:Vn(r,Dt);break;case 3:if(cn(r,i),(i&130023424)===i&&(t=gg+500-Ue(),10<t)){if(Nl(r,0)!==0)break;if(e=r.suspendedLanes,(e&i)!==i){bt(),r.pingedLanes|=r.suspendedLanes&e;break}r.timeoutHandle=df(Vn.bind(null,r,Dt),t);break}Vn(r,Dt);break;case 4:if(cn(r,i),(i&4194240)===i)break;for(t=r.eventTimes,e=-1;0<i;){var a=31-pr(i);o=1<<a,a=t[a],a>e&&(e=a),i&=~o}if(i=e,i=Ue()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*LS(i/1960))-i,10<i){r.timeoutHandle=df(Vn.bind(null,r,Dt),i);break}Vn(r,Dt);break;case 5:Vn(r,Dt);break;default:throw Error(X(329))}}}return jt(r,Ue()),r.callbackNode===n?D0.bind(null,r):null}function Of(r,t){var n=da;return r.current.memoizedState.isDehydrated&&(Jn(r,t).flags|=256),r=ru(r,t),r!==2&&(t=Dt,Dt=n,t!==null&&Lf(t)),r}function Lf(r){Dt===null?Dt=r:Dt.push.apply(Dt,r)}function DS(r){for(var t=r;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var e=n[i],o=e.getSnapshot;e=e.value;try{if(!Ar(o(),e))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===r)break;for(;t.sibling===null;){if(t.return===null||t.return===r)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function cn(r,t){for(t&=~dg,t&=~Iu,r.suspendedLanes|=t,r.pingedLanes&=~t,r=r.expirationTimes;0<t;){var n=31-pr(t),i=1<<n;r[n]=-1,t&=~i}}function bp(r){if((Ee&6)!==0)throw Error(X(327));Bi();var t=Nl(r,0);if((t&1)===0)return jt(r,Ue()),null;var n=ru(r,t);if(r.tag!==0&&n===2){var i=of(r);i!==0&&(t=i,n=Of(r,i))}if(n===1)throw n=Na,Jn(r,0),cn(r,t),jt(r,Ue()),n;if(n===6)throw Error(X(345));return r.finishedWork=r.current.alternate,r.finishedLanes=t,Vn(r,Dt),jt(r,Ue()),null}function vg(r,t){var n=Ee;Ee|=1;try{return r(t)}finally{Ee=n,Ee===0&&(so=Ue()+500,Au&&Ln())}}function ti(r){vn!==null&&vn.tag===0&&(Ee&6)===0&&Bi();var t=Ee;Ee|=1;var n=ur.transition,i=Te;try{if(ur.transition=null,Te=1,r)return r()}finally{Te=i,ur.transition=n,Ee=t,(Ee&6)===0&&Ln()}}function pg(){Bt=Li.current,Ie(Li)}function Jn(r,t){r.finishedWork=null,r.finishedLanes=0;var n=r.timeoutHandle;if(n!==-1&&(r.timeoutHandle=-1,hS(n)),tt!==null)for(n=tt.return;n!==null;){var i=n;switch(rg(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&$l();break;case 3:io(),Ie(Nt),Ie(Ct),ag();break;case 5:og(i);break;case 4:io();break;case 13:Ie(je);break;case 19:Ie(je);break;case 10:Qd(i.type._context);break;case 22:case 23:pg()}n=n.return}if(rt=r,tt=r=Tn(r.current,null),dt=Bt=t,nt=0,Na=null,dg=Iu=ao=0,Dt=da=null,Er!==null){for(t=0;t<Er.length;t++)if(n=Er[t],i=n.interleaved,i!==null){n.interleaved=null;var e=i.next,o=n.pending;if(o!==null){var a=o.next;o.next=e,i.next=a}n.pending=i}Er=null}return r}function I0(r,t){do{var n=tt;try{if(Kd(),_l.current=Xl,Jl){for(var i=Ze.memoizedState;i!==null;){var e=i.queue;e!==null&&(e.pending=null),i=i.next}Jl=!1}if(oo=0,st=xt=Ze=null,fa=!1,La=0,fg.current=null,n===null||n.return===null){nt=1,Na=t,tt=null;break}e:{var o=r,a=n.return,s=n,l=t;if(t=dt,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=s,c=h.tag;if((h.mode&1)===0&&(c===0||c===11||c===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var d=fp(a);if(d!==null){d.flags&=-257,dp(d,a,s,o,t),d.mode&1&&cp(o,u,t),t=d,l=u;var g=t.updateQueue;if(g===null){var v=new Set;v.add(l),t.updateQueue=v}else g.add(l);break e}else{if((t&1)===0){cp(o,u,t),mg();break e}l=Error(X(426))}}else if(Ne&&s.mode&1){var y=fp(a);if(y!==null){(y.flags&65536)===0&&(y.flags|=256),dp(y,a,s,o,t),ng(l);break e}}o=l,nt!==4&&(nt=2),da===null?da=[o]:da.push(o),l=cg(l,s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var p=_0(s,l,t);ip(s,p);break e;case 1:o=l;var m=s.type,_=s.stateNode;if((s.flags&128)===0&&(typeof m.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(wn===null||!wn.has(_)))){s.flags|=65536,t&=-t,s.lanes|=t;var x=x0(s,o,t);ip(s,x);break e}}s=s.return}while(s!==null)}z0(n)}catch(C){t=C,tt===n&&n!==null&&(tt=n=n.return);continue}break}while(1)}function F0(){var r=Ql.current;return Ql.current=Xl,r===null?Xl:r}function mg(){(nt===0||nt===3||nt===2)&&(nt=4),rt===null||(ao&268435455)===0&&(Iu&268435455)===0||cn(rt,dt)}function ru(r,t){var n=Ee;Ee|=2;var i=F0();rt===r&&dt===t||Jn(r,t);do try{IS();break}catch(e){I0(r,e)}while(1);if(Kd(),Ee=n,Ql.current=i,tt!==null)throw Error(X(261));return rt=null,dt=0,nt}function IS(){for(;tt!==null;)N0(tt)}function FS(){for(;tt!==null&&!sP();)N0(tt)}function N0(r){var t=H0(r.alternate,r,Bt);r.memoizedProps=r.pendingProps,t===null?z0(r):tt=t,fg.current=null}function z0(r){var t=r;do{var n=t.alternate;if(r=t.return,(t.flags&32768)===0){if(n=ES(n,t,Bt),n!==null){tt=n;return}}else{if(n=kS(n,t),n!==null){n.flags&=32767,tt=n;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{nt=6,tt=null;return}}if(t=t.sibling,t!==null){tt=t;return}tt=t=r}while(t!==null);nt===0&&(nt=5)}function Vn(r,t){var n=Te,i=ur.transition;try{ur.transition=null,Te=1,NS(r,t,n)}finally{ur.transition=i,Te=n}return null}function NS(r,t,n){do Bi();while(vn!==null);if((Ee&6)!==0)throw Error(X(327));var i=r.finishedWork,e=r.finishedLanes;if(i===null)return null;if(r.finishedWork=null,r.finishedLanes=0,i===r.current)throw Error(X(177));r.callbackNode=null,r.callbackPriority=0;var o=i.lanes|i.childLanes;if(mP(r,o),r===rt&&(tt=rt=null,dt=0),(i.subtreeFlags&2064)===0&&(i.flags&2064)===0||Ds||(Ds=!0,V0(Fl,function(){return Bi(),null})),o=(i.flags&15990)!==0,(i.subtreeFlags&15990)!==0||o){o=ur.transition,ur.transition=null;var a=Te;Te=1;var s=Ee;Ee|=4,fg.current=null,RS(r,i),AS(r,i),nS(cf),zl=!!hf,cf=hf=null,r.current=i,OS(i),lP(),Ee=s,Te=a,ur.transition=o}else r.current=i;if(Ds&&(Ds=!1,vn=r,tu=e),o=r.pendingLanes,o===0&&(wn=null),cP(i.stateNode),jt(r,Ue()),t!==null)for(n=r.onRecoverableError,i=0;i<t.length;i++)n(t[i]);if(eu)throw eu=!1,r=Rf,Rf=null,r;return(tu&1)!==0&&r.tag!==0&&Bi(),o=r.pendingLanes,(o&1)!==0?r===Af?ga++:(ga=0,Af=r):ga=0,Ln(),null}function Bi(){if(vn!==null){var r=w_(tu),t=ur.transition,n=Te;try{if(ur.transition=null,Te=16>r?16:r,vn===null)var i=!1;else{if(r=vn,vn=null,tu=0,(Ee&6)!==0)throw Error(X(331));var e=Ee;for(Ee|=4,ne=r.current;ne!==null;){var o=ne,a=o.child;if((ne.flags&16)!==0){var s=o.deletions;if(s!==null){for(var l=0;l<s.length;l++){var u=s[l];for(ne=u;ne!==null;){var h=ne;switch(h.tag){case 0:case 11:case 15:Fa(8,h,o)}var c=h.child;if(c!==null)c.return=h,ne=c;else for(;ne!==null;){h=ne;var f=h.sibling,d=h.return;if(R0(h),h===u){ne=null;break}if(f!==null){f.return=d,ne=f;break}ne=d}}}var g=o.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var y=v.sibling;v.sibling=null,v=y}while(v!==null)}}ne=o}}if((o.subtreeFlags&2064)!==0&&a!==null)a.return=o,ne=a;else e:for(;ne!==null;){if(o=ne,(o.flags&2048)!==0)switch(o.tag){case 0:case 11:case 15:Fa(9,o,o.return)}var p=o.sibling;if(p!==null){p.return=o.return,ne=p;break e}ne=o.return}}var m=r.current;for(ne=m;ne!==null;){a=ne;var _=a.child;if((a.subtreeFlags&2064)!==0&&_!==null)_.return=a,ne=_;else e:for(a=m;ne!==null;){if(s=ne,(s.flags&2048)!==0)try{switch(s.tag){case 0:case 11:case 15:Du(9,s)}}catch(C){Ft(s,s.return,C)}if(s===a){ne=null;break e}var x=s.sibling;if(x!==null){x.return=s.return,ne=x;break e}ne=s.return}}if(Ee=e,Ln(),kr&&typeof kr.onPostCommitFiberRoot=="function")try{kr.onPostCommitFiberRoot(Mu,r)}catch{}i=!0}return i}finally{Te=n,ur.transition=t}}return!1}function Rp(r,t,n){t=cg(n,t),t=_0(r,t,1),xn(r,t),t=bt(),r=Fu(r,1),r!==null&&(Za(r,1,t),jt(r,t))}function Ft(r,t,n){if(r.tag===3)Rp(r,r,n);else for(;t!==null;){if(t.tag===3){Rp(t,r,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(wn===null||!wn.has(i))){r=cg(n,r),r=x0(t,r,1),xn(t,r),r=bt(),t=Fu(t,1),t!==null&&(Za(t,1,r),jt(t,r));break}}t=t.return}}function zS(r,t,n){var i=r.pingCache;i!==null&&i.delete(t),t=bt(),r.pingedLanes|=r.suspendedLanes&n,rt===r&&(dt&n)===n&&(nt===4||nt===3&&(dt&130023424)===dt&&500>Ue()-gg?Jn(r,0):dg|=n),jt(r,t)}function j0(r,t){t===0&&((r.mode&1)===0?t=1:(t=ws,ws<<=1,(ws&130023424)===0&&(ws=4194304)));var n=bt();r=Fu(r,t),r!==null&&(Za(r,t,n),jt(r,n))}function jS(r){var t=r.memoizedState,n=0;t!==null&&(n=t.retryLane),j0(r,n)}function HS(r,t){var n=0;switch(r.tag){case 13:var i=r.stateNode,e=r.memoizedState;e!==null&&(n=e.retryLane);break;case 19:i=r.stateNode;break;default:throw Error(X(314))}i!==null&&i.delete(t),j0(r,n)}var H0;H0=function(r,t,n){if(r!==null)if(r.memoizedProps!==t.pendingProps||Nt.current)Wt=!0;else{if((r.lanes&n)===0&&(t.flags&128)===0)return Wt=!1,TS(r,t,n);Wt=(r.flags&131072)!==0}else Wt=!1,Ne&&(t.flags&1048576)!==0&&J_(t,ql,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;r!==null&&(r.alternate=null,t.alternate=null,t.flags|=2),r=t.pendingProps;var e=to(t,Ct.current);Gi(t,n),e=lg(null,t,i,r,e,n);var o=ug();return t.flags|=1,typeof e=="object"&&e!==null&&typeof e.render=="function"&&e.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,zt(i)?(o=!0,Gl(t)):o=!1,t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,eg(t),e.updater=Ou,t.stateNode=e,e._reactInternals=t,yf(t,i,r,n),t=Sf(null,t,i,!0,o,n)):(t.tag=0,Ne&&o&&tg(t),Mt(null,t,e,n),t=t.child),t;case 16:i=t.elementType;e:{switch(r!==null&&(r.alternate=null,t.alternate=null,t.flags|=2),r=t.pendingProps,e=i._init,i=e(i._payload),t.type=i,e=t.tag=$S(i),r=gr(i,r),e){case 0:t=Pf(null,t,i,r,n);break e;case 1:t=pp(null,t,i,r,n);break e;case 11:t=gp(null,t,i,r,n);break e;case 14:t=vp(null,t,i,gr(i.type,r),n);break e}throw Error(X(306,i,""))}return t;case 0:return i=t.type,e=t.pendingProps,e=t.elementType===i?e:gr(i,e),Pf(r,t,i,e,n);case 1:return i=t.type,e=t.pendingProps,e=t.elementType===i?e:gr(i,e),pp(r,t,i,e,n);case 3:e:{if(T0(t),r===null)throw Error(X(387));i=t.pendingProps,o=t.memoizedState,e=o.element,U_(r,t),Zl(t,i,null,n);var a=t.memoizedState;if(i=a.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:a.cache,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){e=Error(X(423)),t=mp(r,t,i,n,e);break e}else if(i!==e){e=Error(X(424)),t=mp(r,t,i,n,e);break e}else for(It=$r(t.stateNode.containerInfo.firstChild),Ut=t,Ne=!0,vr=null,n=Q_(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ro(),i===e){t=Yr(r,t,n);break e}Mt(r,t,i,n)}t=t.child}return t;case 5:return e0(t),r===null&&xf(t),i=t.type,e=t.pendingProps,o=r!==null?r.memoizedProps:null,a=e.children,ff(i,e)?a=null:o!==null&&ff(i,o)&&(t.flags|=32),M0(r,t),Mt(r,t,a,n),t.child;case 6:return r===null&&xf(t),null;case 13:return k0(r,t,n);case 4:return ig(t,t.stateNode.containerInfo),i=t.pendingProps,r===null?t.child=no(t,null,i,n):Mt(r,t,i,n),t.child;case 11:return i=t.type,e=t.pendingProps,e=t.elementType===i?e:gr(i,e),gp(r,t,i,e,n);case 7:return Mt(r,t,t.pendingProps,n),t.child;case 8:return Mt(r,t,t.pendingProps.children,n),t.child;case 12:return Mt(r,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,e=t.pendingProps,o=t.memoizedProps,a=e.value,Oe(Bl,i._currentValue),i._currentValue=a,o!==null)if(Ar(o.value,a)){if(o.children===e.children&&!Nt.current){t=Yr(r,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var s=o.dependencies;if(s!==null){a=o.child;for(var l=s.firstContext;l!==null;){if(l.context===i){if(o.tag===1){l=Zr(-1,n&-n),l.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),pf(o.return,n,t),s.lanes|=n;break}l=l.next}}else if(o.tag===10)a=o.type===t.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(X(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),pf(a,n,t),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===t){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Mt(r,t,e.children,n),t=t.child}return t;case 9:return e=t.type,i=t.pendingProps.children,Gi(t,n),e=cr(e),i=i(e),t.flags|=1,Mt(r,t,i,n),t.child;case 14:return i=t.type,e=gr(i,t.pendingProps),e=gr(i.type,e),vp(r,t,i,e,n);case 15:return S0(r,t,t.type,t.pendingProps,n);case 17:return i=t.type,e=t.pendingProps,e=t.elementType===i?e:gr(i,e),r!==null&&(r.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,zt(i)?(r=!0,Gl(t)):r=!1,Gi(t,n),Y_(t,i,e),yf(t,i,e,n),Sf(null,t,i,!0,r,n);case 19:return b0(r,t,n);case 22:return E0(r,t,n)}throw Error(X(156,t.tag))};function V0(r,t){return y_(r,t)}function VS(r,t,n,i){this.tag=r,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sr(r,t,n,i){return new VS(r,t,n,i)}function yg(r){return r=r.prototype,!(!r||!r.isReactComponent)}function $S(r){if(typeof r=="function")return yg(r)?1:0;if(r!=null){if(r=r.$$typeof,r===jd)return 11;if(r===Hd)return 14}return 2}function Tn(r,t){var n=r.alternate;return n===null?(n=sr(r.tag,t,r.key,r.mode),n.elementType=r.elementType,n.type=r.type,n.stateNode=r.stateNode,n.alternate=r,r.alternate=n):(n.pendingProps=t,n.type=r.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=r.flags&14680064,n.childLanes=r.childLanes,n.lanes=r.lanes,n.child=r.child,n.memoizedProps=r.memoizedProps,n.memoizedState=r.memoizedState,n.updateQueue=r.updateQueue,t=r.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=r.sibling,n.index=r.index,n.ref=r.ref,n}function Pl(r,t,n,i,e,o){var a=2;if(i=r,typeof r=="function")yg(r)&&(a=1);else if(typeof r=="string")a=5;else e:switch(r){case Si:return Xn(n.children,e,o,t);case zd:a=8,e|=8;break;case Gc:return r=sr(12,n,t,e|2),r.elementType=Gc,r.lanes=o,r;case Bc:return r=sr(13,n,t,e),r.elementType=Bc,r.lanes=o,r;case Wc:return r=sr(19,n,t,e),r.elementType=Wc,r.lanes=o,r;case t_:return nu(n,e,o,t);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case Qy:a=10;break e;case e_:a=9;break e;case jd:a=11;break e;case Hd:a=14;break e;case an:a=16,i=null;break e}throw Error(X(130,r==null?r:typeof r,""))}return t=sr(a,n,t,e),t.elementType=r,t.type=i,t.lanes=o,t}function Xn(r,t,n,i){return r=sr(7,r,i,t),r.lanes=n,r}function nu(r,t,n,i){return r=sr(22,r,i,t),r.elementType=t_,r.lanes=n,r.stateNode={},r}function Hh(r,t,n){return r=sr(6,r,null,t),r.lanes=n,r}function Vh(r,t,n){return t=sr(4,r.children!==null?r.children:[],r.key,t),t.lanes=n,t.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},t}function GS(r,t,n,i,e){this.tag=t,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ch(0),this.expirationTimes=Ch(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ch(0),this.identifierPrefix=i,this.onRecoverableError=e,this.mutableSourceEagerHydrationData=null}function _g(r,t,n,i,e,o,a,s,l){return r=new GS(r,t,n,s,l),t===1?(t=1,o===!0&&(t|=8)):t=0,o=sr(3,null,null,t),r.current=o,o.stateNode=r,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null},eg(o),r}function BS(r,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Pi,key:i==null?null:""+i,children:r,containerInfo:t,implementation:n}}function $0(r){if(!r)return Mn;r=r._reactInternals;e:{if(ai(r)!==r||r.tag!==1)throw Error(X(170));var t=r;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(zt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(X(171))}if(r.tag===1){var n=r.type;if(zt(n))return W_(r,n,t)}return t}function G0(r,t,n,i,e,o,a,s,l){return r=_g(n,i,!0,r,e,o,a,s,l),r.context=$0(null),n=r.current,i=bt(),e=Cn(n),o=Zr(i,e),o.callback=t!=null?t:null,xn(n,o),r.current.lanes=e,Za(r,e,i),jt(r,i),r}function Nu(r,t,n,i){var e=t.current,o=bt(),a=Cn(e);return n=$0(n),t.context===null?t.context=n:t.pendingContext=n,t=Zr(o,a),t.payload={element:r},i=i===void 0?null:i,i!==null&&(t.callback=i),xn(e,t),r=hr(e,a,o),r!==null&&yl(r,e,a),a}function iu(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function Ap(r,t){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var n=r.retryLane;r.retryLane=n!==0&&n<t?n:t}}function xg(r,t){Ap(r,t),(r=r.alternate)&&Ap(r,t)}function WS(){return null}var B0=typeof reportError=="function"?reportError:function(r){console.error(r)};function wg(r){this._internalRoot=r}zu.prototype.render=wg.prototype.render=function(r){var t=this._internalRoot;if(t===null)throw Error(X(409));Nu(r,t,null,null)};zu.prototype.unmount=wg.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var t=r.containerInfo;ti(function(){Nu(null,r,null,null)}),t[qr]=null}};function zu(r){this._internalRoot=r}zu.prototype.unstable_scheduleHydration=function(r){if(r){var t=S_();r={blockedOn:null,target:r,priority:t};for(var n=0;n<hn.length&&t!==0&&t<hn[n].priority;n++);hn.splice(n,0,r),n===0&&M_(r)}};function Cg(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function ju(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function Op(){}function ZS(r,t,n,i,e){if(e){if(typeof i=="function"){var o=i;i=function(){var u=iu(a);o.call(u)}}var a=G0(t,i,r,0,null,!1,!1,"",Op);return r._reactRootContainer=a,r[qr]=a.current,ka(r.nodeType===8?r.parentNode:r),ti(),a}for(;e=r.lastChild;)r.removeChild(e);if(typeof i=="function"){var s=i;i=function(){var u=iu(l);s.call(u)}}var l=_g(r,0,!1,null,null,!1,!1,"",Op);return r._reactRootContainer=l,r[qr]=l.current,ka(r.nodeType===8?r.parentNode:r),ti(function(){Nu(t,l,n,i)}),l}function Hu(r,t,n,i,e){var o=n._reactRootContainer;if(o){var a=o;if(typeof e=="function"){var s=e;e=function(){var l=iu(a);s.call(l)}}Nu(t,a,r,e)}else a=ZS(n,t,r,e,i);return iu(a)}C_=function(r){switch(r.tag){case 3:var t=r.stateNode;if(t.current.memoizedState.isDehydrated){var n=Qo(t.pendingLanes);n!==0&&(Gd(t,n|1),jt(t,Ue()),(Ee&6)===0&&(so=Ue()+500,Ln()))}break;case 13:var i=bt();ti(function(){return hr(r,1,i)}),xg(r,1)}};Bd=function(r){if(r.tag===13){var t=bt();hr(r,134217728,t),xg(r,134217728)}};P_=function(r){if(r.tag===13){var t=bt(),n=Cn(r);hr(r,n,t),xg(r,n)}};S_=function(){return Te};E_=function(r,t){var n=Te;try{return Te=r,t()}finally{Te=n}};tf=function(r,t,n){switch(t){case"input":if(qc(r,n),t=n.name,n.type==="radio"&&t!=null){for(n=r;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==r&&i.form===r.form){var e=Ru(i);if(!e)throw Error(X(90));n_(i),qc(i,e)}}}break;case"textarea":o_(r,n);break;case"select":t=n.value,t!=null&&ji(r,!!n.multiple,t,!1)}};f_=vg;d_=ti;var US={usingClientEntryPoint:!1,Events:[qa,ki,Ru,h_,c_,vg]},Fo={findFiberByHostInstance:Bn,bundleType:0,version:"18.0.0-rc.3-de516ca5a-20220321",rendererPackageName:"react-dom"},qS={bundleType:Fo.bundleType,version:Fo.version,rendererPackageName:Fo.rendererPackageName,rendererConfig:Fo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qr.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=p_(r),r===null?null:r.stateNode},findFiberByHostInstance:Fo.findFiberByHostInstance||WS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-rc.3-de516ca5a-20220321"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var Is=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Is.isDisabled&&Is.supportsFiber)try{Mu=Is.inject(qS),kr=Is}catch{}}Jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=US;Jt.createPortal=function(r,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Cg(t))throw Error(X(200));return BS(r,t,null,n)};Jt.createRoot=function(r,t){if(!Cg(r))throw Error(X(299));var n=!1,i="",e=B0;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(e=t.onRecoverableError)),t=_g(r,1,!1,null,null,n,!1,i,e),r[qr]=t.current,ka(r.nodeType===8?r.parentNode:r),new wg(t)};Jt.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var t=r._reactInternals;if(t===void 0)throw typeof r.render=="function"?Error(X(188)):(r=Object.keys(r).join(","),Error(X(268,r)));return r=p_(t),r=r===null?null:r.stateNode,r};Jt.flushSync=function(r){return ti(r)};Jt.hydrate=function(r,t,n){if(!ju(t))throw Error(X(200));return Hu(null,r,t,!0,n)};Jt.hydrateRoot=function(r,t,n){if(!Cg(r))throw Error(X(405));var i=n!=null&&n.hydratedSources||null,e=!1,o="",a=B0;if(n!=null&&(n.unstable_strictMode===!0&&(e=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=G0(t,null,r,1,n!=null?n:null,e,!1,o,a),r[qr]=t.current,ka(r),i)for(r=0;r<i.length;r++)n=i[r],e=n._getVersion,e=e(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,e]:t.mutableSourceEagerHydrationData.push(n,e);return new zu(t)};Jt.render=function(r,t,n){if(!ju(t))throw Error(X(200));return Hu(null,r,t,!1,n)};Jt.unmountComponentAtNode=function(r){if(!ju(r))throw Error(X(40));return r._reactRootContainer?(ti(function(){Hu(null,null,r,!1,function(){r._reactRootContainer=null,r[qr]=null})}),!0):!1};Jt.unstable_batchedUpdates=vg;Jt.unstable_renderSubtreeIntoContainer=function(r,t,n,i){if(!ju(n))throw Error(X(200));if(r==null||r._reactInternals===void 0)throw Error(X(38));return Hu(r,t,n,!1,i)};Jt.version="18.0.0-rc.3-de516ca5a-20220321";function W0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(W0)}catch(r){console.error(r)}}W0(),Dd.exports=Jt;var ou=Dd.exports,YS,JS=Dd.exports;YS=JS.createRoot;function ge(){return ge=Object.assign||function(r){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},ge.apply(this,arguments)}function ve(r,t,n){return t in r?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n,r}function yr(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function Lp(r,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,i.key,i)}}function _r(r,t,n){return t&&Lp(r.prototype,t),n&&Lp(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function Df(r,t){return Df=Object.setPrototypeOf||function(i,e){return i.__proto__=e,i},Df(r,t)}function Dn(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),t&&Df(r,t)}function au(r){return au=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},au(r)}function XS(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function pt(r){return pt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pt(r)}function Pg(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function KS(r,t){if(t&&(pt(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Pg(r)}function In(r){var t=XS();return function(){var i=au(r),e;if(t){var o=au(this).constructor;e=Reflect.construct(i,arguments,o)}else e=i.apply(this,arguments);return KS(this,e)}}var Z0={exports:{}};/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(r){(function(){var t={}.hasOwnProperty;function n(){for(var i=[],e=0;e<arguments.length;e++){var o=arguments[e];if(!!o){var a=typeof o;if(a==="string"||a==="number")i.push(o);else if(Array.isArray(o)){if(o.length){var s=n.apply(null,o);s&&i.push(s)}}else if(a==="object")if(o.toString===Object.prototype.toString)for(var l in o)t.call(o,l)&&o[l]&&i.push(l);else i.push(o.toString())}}return i.join(" ")}r.exports?(n.default=n,r.exports=n):window.classNames=n})()})(Z0);var Ht=Z0.exports;function Dp(r,t){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);t&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})),n.push.apply(n,i)}return n}function J(r){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Dp(Object(n),!0).forEach(function(i){ve(r,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Dp(Object(n)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(n,i))})}return r}function U0(r,t){var n=J({},r);return Array.isArray(t)&&t.forEach(function(i){delete n[i]}),n}var Vu={exports:{}},ke={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lt=typeof Symbol=="function"&&Symbol.for,Sg=lt?Symbol.for("react.element"):60103,Eg=lt?Symbol.for("react.portal"):60106,$u=lt?Symbol.for("react.fragment"):60107,Gu=lt?Symbol.for("react.strict_mode"):60108,Bu=lt?Symbol.for("react.profiler"):60114,Wu=lt?Symbol.for("react.provider"):60109,Zu=lt?Symbol.for("react.context"):60110,Mg=lt?Symbol.for("react.async_mode"):60111,Uu=lt?Symbol.for("react.concurrent_mode"):60111,qu=lt?Symbol.for("react.forward_ref"):60112,Yu=lt?Symbol.for("react.suspense"):60113,QS=lt?Symbol.for("react.suspense_list"):60120,Ju=lt?Symbol.for("react.memo"):60115,Xu=lt?Symbol.for("react.lazy"):60116,eE=lt?Symbol.for("react.block"):60121,tE=lt?Symbol.for("react.fundamental"):60117,rE=lt?Symbol.for("react.responder"):60118,nE=lt?Symbol.for("react.scope"):60119;function Kt(r){if(typeof r=="object"&&r!==null){var t=r.$$typeof;switch(t){case Sg:switch(r=r.type,r){case Mg:case Uu:case $u:case Bu:case Gu:case Yu:return r;default:switch(r=r&&r.$$typeof,r){case Zu:case qu:case Xu:case Ju:case Wu:return r;default:return t}}case Eg:return t}}}function q0(r){return Kt(r)===Uu}ke.AsyncMode=Mg;ke.ConcurrentMode=Uu;ke.ContextConsumer=Zu;ke.ContextProvider=Wu;ke.Element=Sg;ke.ForwardRef=qu;ke.Fragment=$u;ke.Lazy=Xu;ke.Memo=Ju;ke.Portal=Eg;ke.Profiler=Bu;ke.StrictMode=Gu;ke.Suspense=Yu;ke.isAsyncMode=function(r){return q0(r)||Kt(r)===Mg};ke.isConcurrentMode=q0;ke.isContextConsumer=function(r){return Kt(r)===Zu};ke.isContextProvider=function(r){return Kt(r)===Wu};ke.isElement=function(r){return typeof r=="object"&&r!==null&&r.$$typeof===Sg};ke.isForwardRef=function(r){return Kt(r)===qu};ke.isFragment=function(r){return Kt(r)===$u};ke.isLazy=function(r){return Kt(r)===Xu};ke.isMemo=function(r){return Kt(r)===Ju};ke.isPortal=function(r){return Kt(r)===Eg};ke.isProfiler=function(r){return Kt(r)===Bu};ke.isStrictMode=function(r){return Kt(r)===Gu};ke.isSuspense=function(r){return Kt(r)===Yu};ke.isValidElementType=function(r){return typeof r=="string"||typeof r=="function"||r===$u||r===Uu||r===Bu||r===Gu||r===Yu||r===QS||typeof r=="object"&&r!==null&&(r.$$typeof===Xu||r.$$typeof===Ju||r.$$typeof===Wu||r.$$typeof===Zu||r.$$typeof===qu||r.$$typeof===tE||r.$$typeof===rE||r.$$typeof===nE||r.$$typeof===eE)};ke.typeOf=Kt;Vu.exports=ke;function If(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=[];return or.Children.forEach(r,function(i){i==null&&!t.keepEmpty||(Array.isArray(i)?n=n.concat(If(i)):Vu.exports.isFragment(i)&&i.props?n=n.concat(If(i.props.children,t)):n.push(i))}),n}var Ip={};function iE(r,t){}function oE(r,t,n){!t&&!Ip[n]&&(r(!1,n),Ip[n]=!0)}function Rr(r,t){oE(iE,r,t)}function aE(r,t,n){var i=k.exports.useRef({});return(!("value"in i.current)||n(i.current.condition,t))&&(i.current.value=r(),i.current.condition=t),i.current.value}function Y0(r,t){typeof r=="function"?r(t):pt(r)==="object"&&r&&"current"in r&&(r.current=t)}function sE(){for(var r=arguments.length,t=new Array(r),n=0;n<r;n++)t[n]=arguments[n];var i=t.filter(function(e){return e});return i.length<=1?i[0]:function(e){t.forEach(function(o){Y0(o,e)})}}function lE(r){var t,n,i=Vu.exports.isMemo(r)?r.type.type:r.type;return!(typeof i=="function"&&!(!((t=i.prototype)===null||t===void 0)&&t.render)||typeof r=="function"&&!(!((n=r.prototype)===null||n===void 0)&&n.render))}function uE(r){return r instanceof HTMLElement?r:ou.findDOMNode(r)}var hE=k.exports.createContext({}),Tg=hE;function cE(r,t){if(r==null)return{};var n={},i=Object.keys(r),e,o;for(o=0;o<i.length;o++)e=i[o],!(t.indexOf(e)>=0)&&(n[e]=r[e]);return n}function kn(r,t){if(r==null)return{};var n=cE(r,t),i,e;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(e=0;e<o.length;e++)i=o[e],!(t.indexOf(i)>=0)&&(!Object.prototype.propertyIsEnumerable.call(r,i)||(n[i]=r[i]))}return n}function Ff(r,t){(t==null||t>r.length)&&(t=r.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=r[n];return i}function fE(r){if(Array.isArray(r))return Ff(r)}function J0(r){if(typeof Symbol!="undefined"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function kg(r,t){if(!!r){if(typeof r=="string")return Ff(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ff(r,t)}}function dE(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function we(r){return fE(r)||J0(r)||kg(r)||dE()}var Di="RC_FORM_INTERNAL_HOOKS",Le=function(){Rr(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},za=k.exports.createContext({getFieldValue:Le,getFieldsValue:Le,getFieldError:Le,getFieldWarning:Le,getFieldsError:Le,isFieldsTouched:Le,isFieldTouched:Le,isFieldValidating:Le,isFieldsValidating:Le,resetFields:Le,setFields:Le,setFieldsValue:Le,validateFields:Le,submit:Le,getInternalHooks:function(){return Le(),{dispatch:Le,initEntityValue:Le,registerField:Le,useSubscribe:Le,setInitialValues:Le,setCallbacks:Le,getFields:Le,setValidateMessages:Le,setPreserve:Le,getInitialValue:Le}}});function Nf(r){return r==null?[]:Array.isArray(r)?r:[r]}var X0={exports:{}};(function(r){var t=function(n){var i=Object.prototype,e=i.hasOwnProperty,o,a=typeof Symbol=="function"?Symbol:{},s=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function h(E,T,L){return Object.defineProperty(E,T,{value:L,enumerable:!0,configurable:!0,writable:!0}),E[T]}try{h({},"")}catch{h=function(T,L,V){return T[L]=V}}function c(E,T,L,V){var F=T&&T.prototype instanceof m?T:m,H=Object.create(F.prototype),$=new I(V||[]);return H._invoke=j(E,L,$),H}n.wrap=c;function f(E,T,L){try{return{type:"normal",arg:E.call(T,L)}}catch(V){return{type:"throw",arg:V}}}var d="suspendedStart",g="suspendedYield",v="executing",y="completed",p={};function m(){}function _(){}function x(){}var C={};h(C,s,function(){return this});var w=Object.getPrototypeOf,P=w&&w(w(B([])));P&&P!==i&&e.call(P,s)&&(C=P);var S=x.prototype=m.prototype=Object.create(C);_.prototype=x,h(S,"constructor",x),h(x,"constructor",_),_.displayName=h(x,u,"GeneratorFunction");function M(E){["next","throw","return"].forEach(function(T){h(E,T,function(L){return this._invoke(T,L)})})}n.isGeneratorFunction=function(E){var T=typeof E=="function"&&E.constructor;return T?T===_||(T.displayName||T.name)==="GeneratorFunction":!1},n.mark=function(E){return Object.setPrototypeOf?Object.setPrototypeOf(E,x):(E.__proto__=x,h(E,u,"GeneratorFunction")),E.prototype=Object.create(S),E},n.awrap=function(E){return{__await:E}};function R(E,T){function L(H,$,G,b){var ee=f(E[H],E,$);if(ee.type==="throw")b(ee.arg);else{var q=ee.arg,te=q.value;return te&&typeof te=="object"&&e.call(te,"__await")?T.resolve(te.__await).then(function(ie){L("next",ie,G,b)},function(ie){L("throw",ie,G,b)}):T.resolve(te).then(function(ie){q.value=ie,G(q)},function(ie){return L("throw",ie,G,b)})}}var V;function F(H,$){function G(){return new T(function(b,ee){L(H,$,b,ee)})}return V=V?V.then(G,G):G()}this._invoke=F}M(R.prototype),h(R.prototype,l,function(){return this}),n.AsyncIterator=R,n.async=function(E,T,L,V,F){F===void 0&&(F=Promise);var H=new R(c(E,T,L,V),F);return n.isGeneratorFunction(T)?H:H.next().then(function($){return $.done?$.value:H.next()})};function j(E,T,L){var V=d;return function(H,$){if(V===v)throw new Error("Generator is already running");if(V===y){if(H==="throw")throw $;return W()}for(L.method=H,L.arg=$;;){var G=L.delegate;if(G){var b=A(G,L);if(b){if(b===p)continue;return b}}if(L.method==="next")L.sent=L._sent=L.arg;else if(L.method==="throw"){if(V===d)throw V=y,L.arg;L.dispatchException(L.arg)}else L.method==="return"&&L.abrupt("return",L.arg);V=v;var ee=f(E,T,L);if(ee.type==="normal"){if(V=L.done?y:g,ee.arg===p)continue;return{value:ee.arg,done:L.done}}else ee.type==="throw"&&(V=y,L.method="throw",L.arg=ee.arg)}}}function A(E,T){var L=E.iterator[T.method];if(L===o){if(T.delegate=null,T.method==="throw"){if(E.iterator.return&&(T.method="return",T.arg=o,A(E,T),T.method==="throw"))return p;T.method="throw",T.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var V=f(L,E.iterator,T.arg);if(V.type==="throw")return T.method="throw",T.arg=V.arg,T.delegate=null,p;var F=V.arg;if(!F)return T.method="throw",T.arg=new TypeError("iterator result is not an object"),T.delegate=null,p;if(F.done)T[E.resultName]=F.value,T.next=E.nextLoc,T.method!=="return"&&(T.method="next",T.arg=o);else return F;return T.delegate=null,p}M(S),h(S,u,"Generator"),h(S,s,function(){return this}),h(S,"toString",function(){return"[object Generator]"});function z(E){var T={tryLoc:E[0]};1 in E&&(T.catchLoc=E[1]),2 in E&&(T.finallyLoc=E[2],T.afterLoc=E[3]),this.tryEntries.push(T)}function D(E){var T=E.completion||{};T.type="normal",delete T.arg,E.completion=T}function I(E){this.tryEntries=[{tryLoc:"root"}],E.forEach(z,this),this.reset(!0)}n.keys=function(E){var T=[];for(var L in E)T.push(L);return T.reverse(),function V(){for(;T.length;){var F=T.pop();if(F in E)return V.value=F,V.done=!1,V}return V.done=!0,V}};function B(E){if(E){var T=E[s];if(T)return T.call(E);if(typeof E.next=="function")return E;if(!isNaN(E.length)){var L=-1,V=function F(){for(;++L<E.length;)if(e.call(E,L))return F.value=E[L],F.done=!1,F;return F.value=o,F.done=!0,F};return V.next=V}}return{next:W}}n.values=B;function W(){return{value:o,done:!0}}return I.prototype={constructor:I,reset:function(E){if(this.prev=0,this.next=0,this.sent=this._sent=o,this.done=!1,this.delegate=null,this.method="next",this.arg=o,this.tryEntries.forEach(D),!E)for(var T in this)T.charAt(0)==="t"&&e.call(this,T)&&!isNaN(+T.slice(1))&&(this[T]=o)},stop:function(){this.done=!0;var E=this.tryEntries[0],T=E.completion;if(T.type==="throw")throw T.arg;return this.rval},dispatchException:function(E){if(this.done)throw E;var T=this;function L(b,ee){return H.type="throw",H.arg=E,T.next=b,ee&&(T.method="next",T.arg=o),!!ee}for(var V=this.tryEntries.length-1;V>=0;--V){var F=this.tryEntries[V],H=F.completion;if(F.tryLoc==="root")return L("end");if(F.tryLoc<=this.prev){var $=e.call(F,"catchLoc"),G=e.call(F,"finallyLoc");if($&&G){if(this.prev<F.catchLoc)return L(F.catchLoc,!0);if(this.prev<F.finallyLoc)return L(F.finallyLoc)}else if($){if(this.prev<F.catchLoc)return L(F.catchLoc,!0)}else if(G){if(this.prev<F.finallyLoc)return L(F.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(E,T){for(var L=this.tryEntries.length-1;L>=0;--L){var V=this.tryEntries[L];if(V.tryLoc<=this.prev&&e.call(V,"finallyLoc")&&this.prev<V.finallyLoc){var F=V;break}}F&&(E==="break"||E==="continue")&&F.tryLoc<=T&&T<=F.finallyLoc&&(F=null);var H=F?F.completion:{};return H.type=E,H.arg=T,F?(this.method="next",this.next=F.finallyLoc,p):this.complete(H)},complete:function(E,T){if(E.type==="throw")throw E.arg;return E.type==="break"||E.type==="continue"?this.next=E.arg:E.type==="return"?(this.rval=this.arg=E.arg,this.method="return",this.next="end"):E.type==="normal"&&T&&(this.next=T),p},finish:function(E){for(var T=this.tryEntries.length-1;T>=0;--T){var L=this.tryEntries[T];if(L.finallyLoc===E)return this.complete(L.completion,L.afterLoc),D(L),p}},catch:function(E){for(var T=this.tryEntries.length-1;T>=0;--T){var L=this.tryEntries[T];if(L.tryLoc===E){var V=L.completion;if(V.type==="throw"){var F=V.arg;D(L)}return F}}throw new Error("illegal catch attempt")},delegateYield:function(E,T,L){return this.delegate={iterator:B(E),resultName:T,nextLoc:L},this.method==="next"&&(this.arg=o),p}},n}(r.exports);try{regeneratorRuntime=t}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}})(X0);var bn=X0.exports;function Fp(r,t,n,i,e,o,a){try{var s=r[o](a),l=s.value}catch(u){n(u);return}s.done?t(l):Promise.resolve(l).then(i,e)}function Ku(r){return function(){var t=this,n=arguments;return new Promise(function(i,e){var o=r.apply(t,n);function a(l){Fp(o,i,e,a,s,"next",l)}function s(l){Fp(o,i,e,a,s,"throw",l)}a(void 0)})}}function Un(){return Un=Object.assign||function(r){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},Un.apply(this,arguments)}function gE(r,t){r.prototype=Object.create(t.prototype),r.prototype.constructor=r,ja(r,t)}function zf(r){return zf=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},zf(r)}function ja(r,t){return ja=Object.setPrototypeOf||function(i,e){return i.__proto__=e,i},ja(r,t)}function vE(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Sl(r,t,n){return vE()?Sl=Reflect.construct:Sl=function(e,o,a){var s=[null];s.push.apply(s,o);var l=Function.bind.apply(e,s),u=new l;return a&&ja(u,a.prototype),u},Sl.apply(null,arguments)}function pE(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function jf(r){var t=typeof Map=="function"?new Map:void 0;return jf=function(i){if(i===null||!pE(i))return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t!="undefined"){if(t.has(i))return t.get(i);t.set(i,e)}function e(){return Sl(i,arguments,zf(this).constructor)}return e.prototype=Object.create(i.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),ja(e,i)},jf(r)}var mE=/%[sdj%]/g,yE=function(){};typeof process!="undefined"&&process.env;function Hf(r){if(!r||!r.length)return null;var t={};return r.forEach(function(n){var i=n.field;t[i]=t[i]||[],t[i].push(n)}),t}function Zt(r){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var e=0,o=n.length;if(typeof r=="function")return r.apply(null,n);if(typeof r=="string"){var a=r.replace(mE,function(s){if(s==="%%")return"%";if(e>=o)return s;switch(s){case"%s":return String(n[e++]);case"%d":return Number(n[e++]);case"%j":try{return JSON.stringify(n[e++])}catch{return"[Circular]"}break;default:return s}});return a}return r}function _E(r){return r==="string"||r==="url"||r==="hex"||r==="email"||r==="date"||r==="pattern"}function at(r,t){return!!(r==null||t==="array"&&Array.isArray(r)&&!r.length||_E(t)&&typeof r=="string"&&!r)}function xE(r,t,n){var i=[],e=0,o=r.length;function a(s){i.push.apply(i,s||[]),e++,e===o&&n(i)}r.forEach(function(s){t(s,a)})}function Np(r,t,n){var i=0,e=r.length;function o(a){if(a&&a.length){n(a);return}var s=i;i=i+1,s<e?t(r[s],o):n([])}o([])}function wE(r){var t=[];return Object.keys(r).forEach(function(n){t.push.apply(t,r[n]||[])}),t}var zp=function(r){gE(t,r);function t(n,i){var e;return e=r.call(this,"Async Validation Error")||this,e.errors=n,e.fields=i,e}return t}(jf(Error));function CE(r,t,n,i,e){if(t.first){var o=new Promise(function(f,d){var g=function(p){return i(p),p.length?d(new zp(p,Hf(p))):f(e)},v=wE(r);Np(v,n,g)});return o.catch(function(f){return f}),o}var a=t.firstFields===!0?Object.keys(r):t.firstFields||[],s=Object.keys(r),l=s.length,u=0,h=[],c=new Promise(function(f,d){var g=function(y){if(h.push.apply(h,y),u++,u===l)return i(h),h.length?d(new zp(h,Hf(h))):f(e)};s.length||(i(h),f(e)),s.forEach(function(v){var y=r[v];a.indexOf(v)!==-1?Np(y,n,g):xE(y,n,g)})});return c.catch(function(f){return f}),c}function PE(r){return!!(r&&r.message!==void 0)}function SE(r,t){for(var n=r,i=0;i<t.length;i++){if(n==null)return n;n=n[t[i]]}return n}function jp(r,t){return function(n){var i;return r.fullFields?i=SE(t,r.fullFields):i=t[n.field||r.fullField],PE(n)?(n.field=n.field||r.fullField,n.fieldValue=i,n):{message:typeof n=="function"?n():n,fieldValue:i,field:n.field||r.fullField}}}function Hp(r,t){if(t){for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];typeof i=="object"&&typeof r[n]=="object"?r[n]=Un({},r[n],i):r[n]=i}}return r}var K0=function(t,n,i,e,o,a){t.required&&(!i.hasOwnProperty(t.field)||at(n,a||t.type))&&e.push(Zt(o.messages.required,t.fullField))},EE=function(t,n,i,e,o){(/^\s+$/.test(n)||n==="")&&e.push(Zt(o.messages.whitespace,t.fullField))},$h={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,url:new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},ta={integer:function(t){return ta.number(t)&&parseInt(t,10)===t},float:function(t){return ta.number(t)&&!ta.integer(t)},array:function(t){return Array.isArray(t)},regexp:function(t){if(t instanceof RegExp)return!0;try{return!!new RegExp(t)}catch{return!1}},date:function(t){return typeof t.getTime=="function"&&typeof t.getMonth=="function"&&typeof t.getYear=="function"&&!isNaN(t.getTime())},number:function(t){return isNaN(t)?!1:typeof t=="number"},object:function(t){return typeof t=="object"&&!ta.array(t)},method:function(t){return typeof t=="function"},email:function(t){return typeof t=="string"&&t.length<=320&&!!t.match($h.email)},url:function(t){return typeof t=="string"&&t.length<=2048&&!!t.match($h.url)},hex:function(t){return typeof t=="string"&&!!t.match($h.hex)}},ME=function(t,n,i,e,o){if(t.required&&n===void 0){K0(t,n,i,e,o);return}var a=["integer","float","array","regexp","object","method","email","number","date","url","hex"],s=t.type;a.indexOf(s)>-1?ta[s](n)||e.push(Zt(o.messages.types[s],t.fullField,t.type)):s&&typeof n!==t.type&&e.push(Zt(o.messages.types[s],t.fullField,t.type))},TE=function(t,n,i,e,o){var a=typeof t.len=="number",s=typeof t.min=="number",l=typeof t.max=="number",u=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,h=n,c=null,f=typeof n=="number",d=typeof n=="string",g=Array.isArray(n);if(f?c="number":d?c="string":g&&(c="array"),!c)return!1;g&&(h=n.length),d&&(h=n.replace(u,"_").length),a?h!==t.len&&e.push(Zt(o.messages[c].len,t.fullField,t.len)):s&&!l&&h<t.min?e.push(Zt(o.messages[c].min,t.fullField,t.min)):l&&!s&&h>t.max?e.push(Zt(o.messages[c].max,t.fullField,t.max)):s&&l&&(h<t.min||h>t.max)&&e.push(Zt(o.messages[c].range,t.fullField,t.min,t.max))},fi="enum",kE=function(t,n,i,e,o){t[fi]=Array.isArray(t[fi])?t[fi]:[],t[fi].indexOf(n)===-1&&e.push(Zt(o.messages[fi],t.fullField,t[fi].join(", ")))},bE=function(t,n,i,e,o){if(t.pattern){if(t.pattern instanceof RegExp)t.pattern.lastIndex=0,t.pattern.test(n)||e.push(Zt(o.messages.pattern.mismatch,t.fullField,n,t.pattern));else if(typeof t.pattern=="string"){var a=new RegExp(t.pattern);a.test(n)||e.push(Zt(o.messages.pattern.mismatch,t.fullField,n,t.pattern))}}},Pe={required:K0,whitespace:EE,type:ME,range:TE,enum:kE,pattern:bE},RE=function(t,n,i,e,o){var a=[],s=t.required||!t.required&&e.hasOwnProperty(t.field);if(s){if(at(n,"string")&&!t.required)return i();Pe.required(t,n,e,a,o,"string"),at(n,"string")||(Pe.type(t,n,e,a,o),Pe.range(t,n,e,a,o),Pe.pattern(t,n,e,a,o),t.whitespace===!0&&Pe.whitespace(t,n,e,a,o))}i(a)},AE=function(t,n,i,e,o){var a=[],s=t.required||!t.required&&e.hasOwnProperty(t.field);if(s){if(at(n)&&!t.required)return i();Pe.required(t,n,e,a,o),n!==void 0&&Pe.type(t,n,e,a,o)}i(a)},OE=function(t,n,i,e,o){var a=[],s=t.required||!t.required&&e.hasOwnProperty(t.field);if(s){if(n===""&&(n=void 0),at(n)&&!t.required)return i();Pe.required(t,n,e,a,o),n!==void 0&&(Pe.type(t,n,e,a,o),Pe.range(t,n,e,a,o))}i(a)},LE=function(t,n,i,e,o){var a=[],s=t.required||!t.required&&e.hasOwnProperty(t.field);if(s){if(at(n)&&!t.required)return i();Pe.required(t,n,e,a,o),n!==void 0&&Pe.type(t,n,e,a,o)}i(a)},DE=function(t,n,i,e,o){var a=[],s=t.required||!t.required&&e.hasOwnProperty(t.field);if(s){if(at(n)&&!t.required)return i();Pe.required(t,n,e,a,o),at(n)||Pe.type(t,n,e,a,o)}i(a)},IE=function(t,n,i,e,o){var a=[],s=t.required||!t.required&&e.hasOwnProperty(t.field);if(s){if(at(n)&&!t.required)return i();Pe.required(t,n,e,a,o),n!==void 0&&(Pe.type(t,n,e,a,o),Pe.range(t,n,e,a,o))}i(a)},FE=function(t,n,i,e,o){var a=[],s=t.required||!t.required&&e.hasOwnProperty(t.field);if(s){if(at(n)&&!t.required)return i();Pe.required(t,n,e,a,o),n!==void 0&&(Pe.type(t,n,e,a,o),Pe.range(t,n,e,a,o))}i(a)},NE=function(t,n,i,e,o){var a=[],s=t.required||!t.required&&e.hasOwnProperty(t.field);if(s){if(n==null&&!t.required)return i();Pe.required(t,n,e,a,o,"array"),n!=null&&(Pe.type(t,n,e,a,o),Pe.range(t,n,e,a,o))}i(a)},zE=function(t,n,i,e,o){var a=[],s=t.required||!t.required&&e.hasOwnProperty(t.field);if(s){if(at(n)&&!t.required)return i();Pe.required(t,n,e,a,o),n!==void 0&&Pe.type(t,n,e,a,o)}i(a)},jE="enum",HE=function(t,n,i,e,o){var a=[],s=t.required||!t.required&&e.hasOwnProperty(t.field);if(s){if(at(n)&&!t.required)return i();Pe.required(t,n,e,a,o),n!==void 0&&Pe[jE](t,n,e,a,o)}i(a)},VE=function(t,n,i,e,o){var a=[],s=t.required||!t.required&&e.hasOwnProperty(t.field);if(s){if(at(n,"string")&&!t.required)return i();Pe.required(t,n,e,a,o),at(n,"string")||Pe.pattern(t,n,e,a,o)}i(a)},$E=function(t,n,i,e,o){var a=[],s=t.required||!t.required&&e.hasOwnProperty(t.field);if(s){if(at(n,"date")&&!t.required)return i();if(Pe.required(t,n,e,a,o),!at(n,"date")){var l;n instanceof Date?l=n:l=new Date(n),Pe.type(t,l,e,a,o),l&&Pe.range(t,l.getTime(),e,a,o)}}i(a)},GE=function(t,n,i,e,o){var a=[],s=Array.isArray(n)?"array":typeof n;Pe.required(t,n,e,a,o,s),i(a)},Gh=function(t,n,i,e,o){var a=t.type,s=[],l=t.required||!t.required&&e.hasOwnProperty(t.field);if(l){if(at(n,a)&&!t.required)return i();Pe.required(t,n,e,s,o,a),at(n,a)||Pe.type(t,n,e,s,o)}i(s)},BE=function(t,n,i,e,o){var a=[],s=t.required||!t.required&&e.hasOwnProperty(t.field);if(s){if(at(n)&&!t.required)return i();Pe.required(t,n,e,a,o)}i(a)},va={string:RE,method:AE,number:OE,boolean:LE,regexp:DE,integer:IE,float:FE,array:NE,object:zE,enum:HE,pattern:VE,date:$E,url:Gh,hex:Gh,email:Gh,required:GE,any:BE};function Vf(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var t=JSON.parse(JSON.stringify(this));return t.clone=this.clone,t}}}var $f=Vf(),Ja=function(){function r(n){this.rules=null,this._messages=$f,this.define(n)}var t=r.prototype;return t.define=function(i){var e=this;if(!i)throw new Error("Cannot configure a schema with no rules");if(typeof i!="object"||Array.isArray(i))throw new Error("Rules must be an object");this.rules={},Object.keys(i).forEach(function(o){var a=i[o];e.rules[o]=Array.isArray(a)?a:[a]})},t.messages=function(i){return i&&(this._messages=Hp(Vf(),i)),this._messages},t.validate=function(i,e,o){var a=this;e===void 0&&(e={}),o===void 0&&(o=function(){});var s=i,l=e,u=o;if(typeof l=="function"&&(u=l,l={}),!this.rules||Object.keys(this.rules).length===0)return u&&u(null,s),Promise.resolve(s);function h(v){var y=[],p={};function m(x){if(Array.isArray(x)){var C;y=(C=y).concat.apply(C,x)}else y.push(x)}for(var _=0;_<v.length;_++)m(v[_]);y.length?(p=Hf(y),u(y,p)):u(null,s)}if(l.messages){var c=this.messages();c===$f&&(c=Vf()),Hp(c,l.messages),l.messages=c}else l.messages=this.messages();var f={},d=l.keys||Object.keys(this.rules);d.forEach(function(v){var y=a.rules[v],p=s[v];y.forEach(function(m){var _=m;typeof _.transform=="function"&&(s===i&&(s=Un({},s)),p=s[v]=_.transform(p)),typeof _=="function"?_={validator:_}:_=Un({},_),_.validator=a.getValidationMethod(_),_.validator&&(_.field=v,_.fullField=_.fullField||v,_.type=a.getType(_),f[v]=f[v]||[],f[v].push({rule:_,value:p,source:s,field:v}))})});var g={};return CE(f,l,function(v,y){var p=v.rule,m=(p.type==="object"||p.type==="array")&&(typeof p.fields=="object"||typeof p.defaultField=="object");m=m&&(p.required||!p.required&&v.value),p.field=v.field;function _(w,P){return Un({},P,{fullField:p.fullField+"."+w,fullFields:p.fullFields?[].concat(p.fullFields,[w]):[w]})}function x(w){w===void 0&&(w=[]);var P=Array.isArray(w)?w:[w];!l.suppressWarning&&P.length&&r.warning("async-validator:",P),P.length&&p.message!==void 0&&(P=[].concat(p.message));var S=P.map(jp(p,s));if(l.first&&S.length)return g[p.field]=1,y(S);if(!m)y(S);else{if(p.required&&!v.value)return p.message!==void 0?S=[].concat(p.message).map(jp(p,s)):l.error&&(S=[l.error(p,Zt(l.messages.required,p.field))]),y(S);var M={};p.defaultField&&Object.keys(v.value).map(function(A){M[A]=p.defaultField}),M=Un({},M,v.rule.fields);var R={};Object.keys(M).forEach(function(A){var z=M[A],D=Array.isArray(z)?z:[z];R[A]=D.map(_.bind(null,A))});var j=new r(R);j.messages(l.messages),v.rule.options&&(v.rule.options.messages=l.messages,v.rule.options.error=l.error),j.validate(v.value,v.rule.options||l,function(A){var z=[];S&&S.length&&z.push.apply(z,S),A&&A.length&&z.push.apply(z,A),y(z.length?z:null)})}}var C;p.asyncValidator?C=p.asyncValidator(p,v.value,x,v.source,l):p.validator&&(C=p.validator(p,v.value,x,v.source,l),C===!0?x():C===!1?x(typeof p.message=="function"?p.message(p.fullField||p.field):p.message||(p.fullField||p.field)+" fails"):C instanceof Array?x(C):C instanceof Error&&x(C.message)),C&&C.then&&C.then(function(){return x()},function(w){return x(w)})},function(v){h(v)},s)},t.getType=function(i){if(i.type===void 0&&i.pattern instanceof RegExp&&(i.type="pattern"),typeof i.validator!="function"&&i.type&&!va.hasOwnProperty(i.type))throw new Error(Zt("Unknown rule type %s",i.type));return i.type||"string"},t.getValidationMethod=function(i){if(typeof i.validator=="function")return i.validator;var e=Object.keys(i),o=e.indexOf("message");return o!==-1&&e.splice(o,1),e.length===1&&e[0]==="required"?va.required:va[this.getType(i)]||void 0},r}();Ja.register=function(t,n){if(typeof n!="function")throw new Error("Cannot register a validator by type, validator is not a function");va[t]=n};Ja.warning=yE;Ja.messages=$f;Ja.validators=va;var Vt="'${name}' is not a valid ${type}",Q0={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:Vt,method:Vt,array:Vt,object:Vt,number:Vt,date:Vt,boolean:Vt,integer:Vt,float:Vt,regexp:Vt,email:Vt,url:Vt,hex:Vt},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}};function ex(r,t){for(var n=r,i=0;i<t.length;i+=1){if(n==null)return;n=n[t[i]]}return n}function tx(r){if(Array.isArray(r))return r}function rx(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WE(r){return tx(r)||J0(r)||kg(r)||rx()}function nx(r,t,n,i){if(!t.length)return n;var e=WE(t),o=e[0],a=e.slice(1),s;return!r&&typeof o=="number"?s=[]:Array.isArray(r)?s=we(r):s=J({},r),i&&n===void 0&&a.length===1?delete s[o][a[0]]:s[o]=nx(s[o],a,n,i),s}function ZE(r,t,n){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return t.length&&i&&n===void 0&&!ex(r,t.slice(0,-1))?r:nx(r,t,n,i)}function Qu(r){return Array.isArray(r)?qE(r):pt(r)==="object"&&r!==null?UE(r):r}function UE(r){if(Object.getPrototypeOf(r)===Object.prototype){var t={};for(var n in r)t[n]=Qu(r[n]);return t}return r}function qE(r){return r.map(function(t){return Qu(t)})}function et(r){return Nf(r)}function pa(r,t){var n=ex(r,t);return n}function $n(r,t,n){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,e=ZE(r,t,n,i);return e}function Vp(r,t){var n={};return t.forEach(function(i){var e=pa(r,i);n=$n(n,i,e)}),n}function ma(r,t){return r&&r.some(function(n){return ox(n,t)})}function $p(r){return pt(r)==="object"&&r!==null&&Object.getPrototypeOf(r)===Object.prototype}function ix(r,t){var n=Array.isArray(r)?we(r):J({},r);return t&&Object.keys(t).forEach(function(i){var e=n[i],o=t[i],a=$p(e)&&$p(o);n[i]=a?ix(e,o||{}):Qu(o)}),n}function El(r){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return n.reduce(function(e,o){return ix(e,o)},r)}function ox(r,t){return!r||!t||r.length!==t.length?!1:r.every(function(n,i){return t[i]===n})}function YE(r,t){if(r===t)return!0;if(!r&&t||r&&!t||!r||!t||pt(r)!=="object"||pt(t)!=="object")return!1;var n=Object.keys(r),i=Object.keys(t),e=new Set([].concat(we(n),we(i)));return we(e).every(function(o){var a=r[o],s=t[o];return typeof a=="function"&&typeof s=="function"?!0:a===s})}function JE(r){var t=arguments.length<=1?void 0:arguments[1];return t&&t.target&&pt(t.target)==="object"&&r in t.target?t.target[r]:t}function Gp(r,t,n){var i=r.length;if(t<0||t>=i||n<0||n>=i)return r;var e=r[t],o=t-n;return o>0?[].concat(we(r.slice(0,n)),[e],we(r.slice(n,t)),we(r.slice(t+1,i))):o<0?[].concat(we(r.slice(0,t)),we(r.slice(t+1,n+1)),[e],we(r.slice(n+1,i))):r}var XE=Ja;function KE(r,t){return r.replace(/\$\{\w+\}/g,function(n){var i=n.slice(2,-1);return t[i]})}function Gf(r,t,n,i,e){return Bf.apply(this,arguments)}function Bf(){return Bf=Ku(bn.mark(function r(t,n,i,e,o){var a,s,l,u,h,c,f,d;return bn.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return a=J({},i),delete a.ruleIndex,s=null,a&&a.type==="array"&&a.defaultField&&(s=a.defaultField,delete a.defaultField),l=new XE(ve({},t,[a])),u=El({},Q0,e.validateMessages),l.messages(u),h=[],v.prev=8,v.next=11,Promise.resolve(l.validate(ve({},t,n),J({},e)));case 11:v.next=16;break;case 13:v.prev=13,v.t0=v.catch(8),v.t0.errors?h=v.t0.errors.map(function(y,p){var m=y.message;return k.exports.isValidElement(m)?k.exports.cloneElement(m,{key:"error_".concat(p)}):m}):(console.error(v.t0),h=[u.default]);case 16:if(!(!h.length&&s)){v.next=21;break}return v.next=19,Promise.all(n.map(function(y,p){return Gf("".concat(t,".").concat(p),y,s,e,o)}));case 19:return c=v.sent,v.abrupt("return",c.reduce(function(y,p){return[].concat(we(y),we(p))},[]));case 21:return f=J(J({},i),{},{name:t,enum:(i.enum||[]).join(", ")},o),d=h.map(function(y){return typeof y=="string"?KE(y,f):y}),v.abrupt("return",d);case 24:case"end":return v.stop()}},r,null,[[8,13]])})),Bf.apply(this,arguments)}function QE(r,t,n,i,e,o){var a=r.join("."),s=n.map(function(h,c){var f=h.validator,d=J(J({},h),{},{ruleIndex:c});return f&&(d.validator=function(g,v,y){var p=!1,m=function(){for(var C=arguments.length,w=new Array(C),P=0;P<C;P++)w[P]=arguments[P];Promise.resolve().then(function(){Rr(!p,"Your validator function has already return a promise. `callback` will be ignored."),p||y.apply(void 0,w)})},_=f(g,v,m);p=_&&typeof _.then=="function"&&typeof _.catch=="function",Rr(p,"`callback` is deprecated. Please return a promise instead."),p&&_.then(function(){y()}).catch(function(x){y(x||" ")})}),d}).sort(function(h,c){var f=h.warningOnly,d=h.ruleIndex,g=c.warningOnly,v=c.ruleIndex;return!!f==!!g?d-v:f?1:-1}),l;if(e===!0)l=new Promise(function(){var h=Ku(bn.mark(function c(f,d){var g,v,y;return bn.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:g=0;case 1:if(!(g<s.length)){m.next=12;break}return v=s[g],m.next=5,Gf(a,t,v,i,o);case 5:if(y=m.sent,!y.length){m.next=9;break}return d([{errors:y,rule:v}]),m.abrupt("return");case 9:g+=1,m.next=1;break;case 12:f([]);case 13:case"end":return m.stop()}},c)}));return function(c,f){return h.apply(this,arguments)}}());else{var u=s.map(function(h){return Gf(a,t,h,i,o).then(function(c){return{errors:c,rule:h}})});l=(e?tM(u):eM(u)).then(function(h){return Promise.reject(h)})}return l.catch(function(h){return h}),l}function eM(r){return Wf.apply(this,arguments)}function Wf(){return Wf=Ku(bn.mark(function r(t){return bn.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Promise.all(t).then(function(e){var o,a=(o=[]).concat.apply(o,we(e));return a}));case 1:case"end":return i.stop()}},r)})),Wf.apply(this,arguments)}function tM(r){return Zf.apply(this,arguments)}function Zf(){return Zf=Ku(bn.mark(function r(t){var n;return bn.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=0,e.abrupt("return",new Promise(function(o){t.forEach(function(a){a.then(function(s){s.errors.length&&o([s]),n+=1,n===t.length&&o([])})})}));case 2:case"end":return e.stop()}},r)})),Zf.apply(this,arguments)}var rM=["name"],Qt=[];function Bp(r,t,n,i,e,o){return typeof r=="function"?r(t,n,"source"in o?{source:o.source}:{}):i!==e}var bg=function(r){Dn(n,r);var t=In(n);function n(i){var e;if(yr(this,n),e=t.call(this,i),e.state={resetCount:0},e.cancelRegisterFunc=null,e.mounted=!1,e.touched=!1,e.dirty=!1,e.validatePromise=null,e.prevValidating=void 0,e.errors=Qt,e.warnings=Qt,e.cancelRegister=function(){var l=e.props,u=l.preserve,h=l.isListField,c=l.name;e.cancelRegisterFunc&&e.cancelRegisterFunc(h,u,et(c)),e.cancelRegisterFunc=null},e.getNamePath=function(){var l=e.props,u=l.name,h=l.fieldContext,c=h.prefixName,f=c===void 0?[]:c;return u!==void 0?[].concat(we(f),we(u)):[]},e.getRules=function(){var l=e.props,u=l.rules,h=u===void 0?[]:u,c=l.fieldContext;return h.map(function(f){return typeof f=="function"?f(c):f})},e.refresh=function(){!e.mounted||e.setState(function(l){var u=l.resetCount;return{resetCount:u+1}})},e.triggerMetaEvent=function(l){var u=e.props.onMetaChange;u==null||u(J(J({},e.getMeta()),{},{destroy:l}))},e.onStoreChange=function(l,u,h){var c=e.props,f=c.shouldUpdate,d=c.dependencies,g=d===void 0?[]:d,v=c.onReset,y=h.store,p=e.getNamePath(),m=e.getValue(l),_=e.getValue(y),x=u&&ma(u,p);switch(h.type==="valueUpdate"&&h.source==="external"&&m!==_&&(e.touched=!0,e.dirty=!0,e.validatePromise=null,e.errors=Qt,e.warnings=Qt,e.triggerMetaEvent()),h.type){case"reset":if(!u||x){e.touched=!1,e.dirty=!1,e.validatePromise=null,e.errors=Qt,e.warnings=Qt,e.triggerMetaEvent(),v==null||v(),e.refresh();return}break;case"remove":{if(f){e.reRender();return}break}case"setField":{if(x){var C=h.data;"touched"in C&&(e.touched=C.touched),"validating"in C&&!("originRCField"in C)&&(e.validatePromise=C.validating?Promise.resolve([]):null),"errors"in C&&(e.errors=C.errors||Qt),"warnings"in C&&(e.warnings=C.warnings||Qt),e.dirty=!0,e.triggerMetaEvent(),e.reRender();return}if(f&&!p.length&&Bp(f,l,y,m,_,h)){e.reRender();return}break}case"dependenciesUpdate":{var w=g.map(et);if(w.some(function(P){return ma(h.relatedFields,P)})){e.reRender();return}break}default:if(x||(!g.length||p.length||f)&&Bp(f,l,y,m,_,h)){e.reRender();return}break}f===!0&&e.reRender()},e.validateRules=function(l){var u=e.getNamePath(),h=e.getValue(),c=Promise.resolve().then(function(){if(!e.mounted)return[];var f=e.props,d=f.validateFirst,g=d===void 0?!1:d,v=f.messageVariables,y=l||{},p=y.triggerName,m=e.getRules();p&&(m=m.filter(function(x){var C=x.validateTrigger;if(!C)return!0;var w=Nf(C);return w.includes(p)}));var _=QE(u,h,m,l,g,v);return _.catch(function(x){return x}).then(function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Qt;if(e.validatePromise===c){e.validatePromise=null;var C=[],w=[];x.forEach(function(P){var S=P.rule.warningOnly,M=P.errors,R=M===void 0?Qt:M;S?w.push.apply(w,we(R)):C.push.apply(C,we(R))}),e.errors=C,e.warnings=w,e.triggerMetaEvent(),e.reRender()}}),_});return e.validatePromise=c,e.dirty=!0,e.errors=Qt,e.warnings=Qt,e.triggerMetaEvent(),e.reRender(),c},e.isFieldValidating=function(){return!!e.validatePromise},e.isFieldTouched=function(){return e.touched},e.isFieldDirty=function(){if(e.dirty||e.props.initialValue!==void 0)return!0;var l=e.props.fieldContext,u=l.getInternalHooks(Di),h=u.getInitialValue;return h(e.getNamePath())!==void 0},e.getErrors=function(){return e.errors},e.getWarnings=function(){return e.warnings},e.isListField=function(){return e.props.isListField},e.isList=function(){return e.props.isList},e.isPreserve=function(){return e.props.preserve},e.getMeta=function(){e.prevValidating=e.isFieldValidating();var l={touched:e.isFieldTouched(),validating:e.prevValidating,errors:e.errors,warnings:e.warnings,name:e.getNamePath()};return l},e.getOnlyChild=function(l){if(typeof l=="function"){var u=e.getMeta();return J(J({},e.getOnlyChild(l(e.getControlled(),u,e.props.fieldContext))),{},{isFunction:!0})}var h=If(l);return h.length!==1||!k.exports.isValidElement(h[0])?{child:h,isFunction:!1}:{child:h[0],isFunction:!1}},e.getValue=function(l){var u=e.props.fieldContext.getFieldsValue,h=e.getNamePath();return pa(l||u(!0),h)},e.getControlled=function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=e.props,h=u.trigger,c=u.validateTrigger,f=u.getValueFromEvent,d=u.normalize,g=u.valuePropName,v=u.getValueProps,y=u.fieldContext,p=c!==void 0?c:y.validateTrigger,m=e.getNamePath(),_=y.getInternalHooks,x=y.getFieldsValue,C=_(Di),w=C.dispatch,P=e.getValue(),S=v||function(A){return ve({},g,A)},M=l[h],R=J(J({},l),S(P));R[h]=function(){e.touched=!0,e.dirty=!0,e.triggerMetaEvent();for(var A,z=arguments.length,D=new Array(z),I=0;I<z;I++)D[I]=arguments[I];f?A=f.apply(void 0,D):A=JE.apply(void 0,[g].concat(D)),d&&(A=d(A,P,x(!0))),w({type:"updateValue",namePath:m,value:A}),M&&M.apply(void 0,D)};var j=Nf(p||[]);return j.forEach(function(A){var z=R[A];R[A]=function(){z&&z.apply(void 0,arguments);var D=e.props.rules;D&&D.length&&w({type:"validateField",namePath:m,triggerName:A})}}),R},i.fieldContext){var o=i.fieldContext.getInternalHooks,a=o(Di),s=a.initEntityValue;s(Pg(e))}return e}return _r(n,[{key:"componentDidMount",value:function(){var e=this.props,o=e.shouldUpdate,a=e.fieldContext;if(this.mounted=!0,a){var s=a.getInternalHooks,l=s(Di),u=l.registerField;this.cancelRegisterFunc=u(this)}o===!0&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){!this.mounted||this.forceUpdate()}},{key:"render",value:function(){var e=this.state.resetCount,o=this.props.children,a=this.getOnlyChild(o),s=a.child,l=a.isFunction,u;return l?u=s:k.exports.isValidElement(s)?u=k.exports.cloneElement(s,this.getControlled(s.props)):(Rr(!s,"`children` of Field is not validate ReactElement."),u=s),k.exports.createElement(k.exports.Fragment,{key:e},u)}}]),n}(k.exports.Component);bg.contextType=za;bg.defaultProps={trigger:"onChange",valuePropName:"value"};function ax(r){var t=r.name,n=kn(r,rM),i=k.exports.useContext(za),e=t!==void 0?et(t):void 0,o="keep";return n.isListField||(o="_".concat((e||[]).join("_"))),k.exports.createElement(bg,ge({key:o,name:e},n,{fieldContext:i}))}var nM=k.exports.createContext(null),iM=function(t){var n=t.name,i=t.initialValue,e=t.children,o=t.rules,a=t.validateTrigger,s=k.exports.useContext(za),l=k.exports.useRef({keys:[],id:0}),u=l.current,h=k.exports.useMemo(function(){var g=et(s.prefixName)||[];return[].concat(we(g),we(et(n)))},[s.prefixName,n]),c=k.exports.useMemo(function(){return J(J({},s),{},{prefixName:h})},[s,h]),f=k.exports.useMemo(function(){return{getKey:function(v){var y=h.length,p=v[y];return[u.keys[p],v.slice(y+1)]}}},[h]);if(typeof e!="function")return Rr(!1,"Form.List only accepts function as children."),null;var d=function(v,y,p){var m=p.source;return m==="internal"?!1:v!==y};return k.exports.createElement(nM.Provider,{value:f},k.exports.createElement(za.Provider,{value:c},k.exports.createElement(ax,{name:[],shouldUpdate:d,rules:o,validateTrigger:a,initialValue:i,isList:!0},function(g,v){var y=g.value,p=y===void 0?[]:y,m=g.onChange,_=s.getFieldValue,x=function(){var S=_(h||[]);return S||[]},C={add:function(S,M){var R=x();M>=0&&M<=R.length?(u.keys=[].concat(we(u.keys.slice(0,M)),[u.id],we(u.keys.slice(M))),m([].concat(we(R.slice(0,M)),[S],we(R.slice(M))))):(u.keys=[].concat(we(u.keys),[u.id]),m([].concat(we(R),[S]))),u.id+=1},remove:function(S){var M=x(),R=new Set(Array.isArray(S)?S:[S]);R.size<=0||(u.keys=u.keys.filter(function(j,A){return!R.has(A)}),m(M.filter(function(j,A){return!R.has(A)})))},move:function(S,M){if(S!==M){var R=x();S<0||S>=R.length||M<0||M>=R.length||(u.keys=Gp(u.keys,S,M),m(Gp(R,S,M)))}}},w=p||[];return Array.isArray(w)||(w=[]),e(w.map(function(P,S){var M=u.keys[S];return M===void 0&&(u.keys[S]=u.id,M=u.keys[S],u.id+=1),{name:S,key:M,isListField:!0}}),C,v)})))};function oM(r,t){var n=r==null?null:typeof Symbol!="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var i=[],e=!0,o=!1,a,s;try{for(n=n.call(r);!(e=(a=n.next()).done)&&(i.push(a.value),!(t&&i.length===t));e=!0);}catch(l){o=!0,s=l}finally{try{!e&&n.return!=null&&n.return()}finally{if(o)throw s}}return i}}function qe(r,t){return tx(r)||oM(r,t)||kg(r,t)||rx()}function aM(r){var t=!1,n=r.length,i=[];return r.length?new Promise(function(e,o){r.forEach(function(a,s){a.catch(function(l){return t=!0,l}).then(function(l){n-=1,i[s]=l,!(n>0)&&(t&&o(i),e(i))})})}):Promise.resolve([])}var sx="__@field_split__";function Bh(r){return r.map(function(t){return"".concat(pt(t),":").concat(t)}).join(sx)}var No=function(){function r(){yr(this,r),this.kvs=new Map}return _r(r,[{key:"set",value:function(n,i){this.kvs.set(Bh(n),i)}},{key:"get",value:function(n){return this.kvs.get(Bh(n))}},{key:"update",value:function(n,i){var e=this.get(n),o=i(e);o?this.set(n,o):this.delete(n)}},{key:"delete",value:function(n){this.kvs.delete(Bh(n))}},{key:"map",value:function(n){return we(this.kvs.entries()).map(function(i){var e=qe(i,2),o=e[0],a=e[1],s=o.split(sx);return n({key:s.map(function(l){var u=l.match(/^([^:]*):(.*)$/),h=qe(u,3),c=h[1],f=h[2];return c==="number"?Number(f):f}),value:a})})}},{key:"toJSON",value:function(){var n={};return this.map(function(i){var e=i.key,o=i.value;return n[e.join(".")]=o,null}),n}}]),r}(),sM=["name","errors"],lM=_r(function r(t){var n=this;yr(this,r),this.formHooked=!1,this.forceRootUpdate=void 0,this.subscribable=!0,this.store={},this.fieldEntities=[],this.initialValues={},this.callbacks={},this.validateMessages=null,this.preserve=null,this.lastValidatePromise=null,this.getForm=function(){return{getFieldValue:n.getFieldValue,getFieldsValue:n.getFieldsValue,getFieldError:n.getFieldError,getFieldWarning:n.getFieldWarning,getFieldsError:n.getFieldsError,isFieldsTouched:n.isFieldsTouched,isFieldTouched:n.isFieldTouched,isFieldValidating:n.isFieldValidating,isFieldsValidating:n.isFieldsValidating,resetFields:n.resetFields,setFields:n.setFields,setFieldsValue:n.setFieldsValue,validateFields:n.validateFields,submit:n.submit,getInternalHooks:n.getInternalHooks}},this.getInternalHooks=function(i){return i===Di?(n.formHooked=!0,{dispatch:n.dispatch,initEntityValue:n.initEntityValue,registerField:n.registerField,useSubscribe:n.useSubscribe,setInitialValues:n.setInitialValues,setCallbacks:n.setCallbacks,setValidateMessages:n.setValidateMessages,getFields:n.getFields,setPreserve:n.setPreserve,getInitialValue:n.getInitialValue}):(Rr(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)},this.useSubscribe=function(i){n.subscribable=i},this.setInitialValues=function(i,e){n.initialValues=i||{},e&&(n.store=El({},n.store,i))},this.getInitialValue=function(i){return Qu(pa(n.initialValues,i))},this.setCallbacks=function(i){n.callbacks=i},this.setValidateMessages=function(i){n.validateMessages=i},this.setPreserve=function(i){n.preserve=i},this.timeoutId=null,this.warningUnhooked=function(){},this.getFieldEntities=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return i?n.fieldEntities.filter(function(e){return e.getNamePath().length}):n.fieldEntities},this.getFieldsMap=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=new No;return n.getFieldEntities(i).forEach(function(o){var a=o.getNamePath();e.set(a,o)}),e},this.getFieldEntitiesForNamePathList=function(i){if(!i)return n.getFieldEntities(!0);var e=n.getFieldsMap(!0);return i.map(function(o){var a=et(o);return e.get(a)||{INVALIDATE_NAME_PATH:et(o)}})},this.getFieldsValue=function(i,e){if(n.warningUnhooked(),i===!0&&!e)return n.store;var o=n.getFieldEntitiesForNamePathList(Array.isArray(i)?i:null),a=[];return o.forEach(function(s){var l,u="INVALIDATE_NAME_PATH"in s?s.INVALIDATE_NAME_PATH:s.getNamePath();if(!(!i&&((l=s.isListField)===null||l===void 0?void 0:l.call(s))))if(!e)a.push(u);else{var h="getMeta"in s?s.getMeta():null;e(h)&&a.push(u)}}),Vp(n.store,a.map(et))},this.getFieldValue=function(i){n.warningUnhooked();var e=et(i);return pa(n.store,e)},this.getFieldsError=function(i){n.warningUnhooked();var e=n.getFieldEntitiesForNamePathList(i);return e.map(function(o,a){return o&&!("INVALIDATE_NAME_PATH"in o)?{name:o.getNamePath(),errors:o.getErrors(),warnings:o.getWarnings()}:{name:et(i[a]),errors:[],warnings:[]}})},this.getFieldError=function(i){n.warningUnhooked();var e=et(i),o=n.getFieldsError([e])[0];return o.errors},this.getFieldWarning=function(i){n.warningUnhooked();var e=et(i),o=n.getFieldsError([e])[0];return o.warnings},this.isFieldsTouched=function(){n.warningUnhooked();for(var i=arguments.length,e=new Array(i),o=0;o<i;o++)e[o]=arguments[o];var a=e[0],s=e[1],l,u=!1;e.length===0?l=null:e.length===1?Array.isArray(a)?(l=a.map(et),u=!1):(l=null,u=a):(l=a.map(et),u=s);var h=n.getFieldEntities(!0),c=function(y){return y.isFieldTouched()};if(!l)return u?h.every(c):h.some(c);var f=new No;l.forEach(function(v){f.set(v,[])}),h.forEach(function(v){var y=v.getNamePath();l.forEach(function(p){p.every(function(m,_){return y[_]===m})&&f.update(p,function(m){return[].concat(we(m),[v])})})});var d=function(y){return y.some(c)},g=f.map(function(v){var y=v.value;return y});return u?g.every(d):g.some(d)},this.isFieldTouched=function(i){return n.warningUnhooked(),n.isFieldsTouched([i])},this.isFieldsValidating=function(i){n.warningUnhooked();var e=n.getFieldEntities();if(!i)return e.some(function(a){return a.isFieldValidating()});var o=i.map(et);return e.some(function(a){var s=a.getNamePath();return ma(o,s)&&a.isFieldValidating()})},this.isFieldValidating=function(i){return n.warningUnhooked(),n.isFieldsValidating([i])},this.resetWithFieldInitialValue=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=new No,o=n.getFieldEntities(!0);o.forEach(function(l){var u=l.props.initialValue,h=l.getNamePath();if(u!==void 0){var c=e.get(h)||new Set;c.add({entity:l,value:u}),e.set(h,c)}});var a=function(u){u.forEach(function(h){var c=h.props.initialValue;if(c!==void 0){var f=h.getNamePath(),d=n.getInitialValue(f);if(d!==void 0)Rr(!1,"Form already set 'initialValues' with path '".concat(f.join("."),"'. Field can not overwrite it."));else{var g=e.get(f);if(g&&g.size>1)Rr(!1,"Multiple Field with path '".concat(f.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(g){var v=n.getFieldValue(f);(!i.skipExist||v===void 0)&&(n.store=$n(n.store,f,we(g)[0].value))}}}})},s;i.entities?s=i.entities:i.namePathList?(s=[],i.namePathList.forEach(function(l){var u=e.get(l);if(u){var h;(h=s).push.apply(h,we(we(u).map(function(c){return c.entity})))}})):s=o,a(s)},this.resetFields=function(i){n.warningUnhooked();var e=n.store;if(!i){n.store=El({},n.initialValues),n.resetWithFieldInitialValue(),n.notifyObservers(e,null,{type:"reset"});return}var o=i.map(et);o.forEach(function(a){var s=n.getInitialValue(a);n.store=$n(n.store,a,s)}),n.resetWithFieldInitialValue({namePathList:o}),n.notifyObservers(e,o,{type:"reset"})},this.setFields=function(i){n.warningUnhooked();var e=n.store;i.forEach(function(o){var a=o.name;o.errors;var s=kn(o,sM),l=et(a);"value"in s&&(n.store=$n(n.store,l,s.value)),n.notifyObservers(e,[l],{type:"setField",data:o})})},this.getFields=function(){var i=n.getFieldEntities(!0),e=i.map(function(o){var a=o.getNamePath(),s=o.getMeta(),l=J(J({},s),{},{name:a,value:n.getFieldValue(a)});return Object.defineProperty(l,"originRCField",{value:!0}),l});return e},this.initEntityValue=function(i){var e=i.props.initialValue;if(e!==void 0){var o=i.getNamePath(),a=pa(n.store,o);a===void 0&&(n.store=$n(n.store,o,e))}},this.registerField=function(i){if(n.fieldEntities.push(i),i.props.initialValue!==void 0){var e=n.store;n.resetWithFieldInitialValue({entities:[i],skipExist:!0}),n.notifyObservers(e,[i.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(o,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];n.fieldEntities=n.fieldEntities.filter(function(f){return f!==i});var l=a!==void 0?a:n.preserve;if(l===!1&&(!o||s.length>1)){var u=i.getNamePath(),h=o?void 0:n.getInitialValue(u);if(u.length&&n.getFieldValue(u)!==h&&n.fieldEntities.every(function(f){return!ox(f.getNamePath(),u)})){var c=n.store;n.store=$n(c,u,h,!0),n.notifyObservers(c,[u],{type:"remove"}),n.triggerDependenciesUpdate(c,u)}}}},this.dispatch=function(i){switch(i.type){case"updateValue":{var e=i.namePath,o=i.value;n.updateValue(e,o);break}case"validateField":{var a=i.namePath,s=i.triggerName;n.validateFields([a],{triggerName:s});break}}},this.notifyObservers=function(i,e,o){if(n.subscribable){var a=J(J({},o),{},{store:n.getFieldsValue(!0)});n.getFieldEntities().forEach(function(s){var l=s.onStoreChange;l(i,e,a)})}else n.forceRootUpdate()},this.triggerDependenciesUpdate=function(i,e){var o=n.getDependencyChildrenFields(e);return o.length&&n.validateFields(o),n.notifyObservers(i,o,{type:"dependenciesUpdate",relatedFields:[e].concat(we(o))}),o},this.updateValue=function(i,e){var o=et(i),a=n.store;n.store=$n(n.store,o,e),n.notifyObservers(a,[o],{type:"valueUpdate",source:"internal"});var s=n.triggerDependenciesUpdate(a,o),l=n.callbacks.onValuesChange;if(l){var u=Vp(n.store,[o]);l(u,n.getFieldsValue())}n.triggerOnFieldsChange([o].concat(we(s)))},this.setFieldsValue=function(i){n.warningUnhooked();var e=n.store;i&&(n.store=El(n.store,i)),n.notifyObservers(e,null,{type:"valueUpdate",source:"external"})},this.getDependencyChildrenFields=function(i){var e=new Set,o=[],a=new No;n.getFieldEntities().forEach(function(l){var u=l.props.dependencies;(u||[]).forEach(function(h){var c=et(h);a.update(c,function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Set;return f.add(l),f})})});var s=function l(u){var h=a.get(u)||new Set;h.forEach(function(c){if(!e.has(c)){e.add(c);var f=c.getNamePath();c.isFieldDirty()&&f.length&&(o.push(f),l(f))}})};return s(i),o},this.triggerOnFieldsChange=function(i,e){var o=n.callbacks.onFieldsChange;if(o){var a=n.getFields();if(e){var s=new No;e.forEach(function(u){var h=u.name,c=u.errors;s.set(h,c)}),a.forEach(function(u){u.errors=s.get(u.name)||u.errors})}var l=a.filter(function(u){var h=u.name;return ma(i,h)});o(l,a)}},this.validateFields=function(i,e){n.warningUnhooked();var o=!!i,a=o?i.map(et):[],s=[];n.getFieldEntities(!0).forEach(function(h){if(o||a.push(h.getNamePath()),(e==null?void 0:e.recursive)&&o){var c=h.getNamePath();c.every(function(g,v){return i[v]===g||i[v]===void 0})&&a.push(c)}if(!(!h.props.rules||!h.props.rules.length)){var f=h.getNamePath();if(!o||ma(a,f)){var d=h.validateRules(J({validateMessages:J(J({},Q0),n.validateMessages)},e));s.push(d.then(function(){return{name:f,errors:[],warnings:[]}}).catch(function(g){var v=[],y=[];return g.forEach(function(p){var m=p.rule.warningOnly,_=p.errors;m?y.push.apply(y,we(_)):v.push.apply(v,we(_))}),v.length?Promise.reject({name:f,errors:v,warnings:y}):{name:f,errors:v,warnings:y}}))}}});var l=aM(s);n.lastValidatePromise=l,l.catch(function(h){return h}).then(function(h){var c=h.map(function(f){var d=f.name;return d});n.notifyObservers(n.store,c,{type:"validateFinish"}),n.triggerOnFieldsChange(c,h)});var u=l.then(function(){return n.lastValidatePromise===l?Promise.resolve(n.getFieldsValue(a)):Promise.reject([])}).catch(function(h){var c=h.filter(function(f){return f&&f.errors.length});return Promise.reject({values:n.getFieldsValue(a),errorFields:c,outOfDate:n.lastValidatePromise!==l})});return u.catch(function(h){return h}),u},this.submit=function(){n.warningUnhooked(),n.validateFields().then(function(i){var e=n.callbacks.onFinish;if(e)try{e(i)}catch(o){console.error(o)}}).catch(function(i){var e=n.callbacks.onFinishFailed;e&&e(i)})},this.forceRootUpdate=t});function lx(r){var t=k.exports.useRef(),n=k.exports.useState({}),i=qe(n,2),e=i[1];if(!t.current)if(r)t.current=r;else{var o=function(){e({})},a=new lM(o);t.current=a.getForm()}return[t.current]}var Uf=k.exports.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),ux=function(t){var n=t.validateMessages,i=t.onFormChange,e=t.onFormFinish,o=t.children,a=k.exports.useContext(Uf),s=k.exports.useRef({});return k.exports.createElement(Uf.Provider,{value:J(J({},a),{},{validateMessages:J(J({},a.validateMessages),n),triggerFormChange:function(u,h){i&&i(u,{changedFields:h,forms:s.current}),a.triggerFormChange(u,h)},triggerFormFinish:function(u,h){e&&e(u,{values:h,forms:s.current}),a.triggerFormFinish(u,h)},registerForm:function(u,h){u&&(s.current=J(J({},s.current),{},ve({},u,h))),a.registerForm(u,h)},unregisterForm:function(u){var h=J({},s.current);delete h[u],s.current=h,a.unregisterForm(u)}})},o)},uM=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed"],hM=function(t,n){var i=t.name,e=t.initialValues,o=t.fields,a=t.form,s=t.preserve,l=t.children,u=t.component,h=u===void 0?"form":u,c=t.validateMessages,f=t.validateTrigger,d=f===void 0?"onChange":f,g=t.onValuesChange,v=t.onFieldsChange,y=t.onFinish,p=t.onFinishFailed,m=kn(t,uM),_=k.exports.useContext(Uf),x=lx(a),C=qe(x,1),w=C[0],P=w.getInternalHooks(Di),S=P.useSubscribe,M=P.setInitialValues,R=P.setCallbacks,j=P.setValidateMessages,A=P.setPreserve;k.exports.useImperativeHandle(n,function(){return w}),k.exports.useEffect(function(){return _.registerForm(i,w),function(){_.unregisterForm(i)}},[_,w,i]),j(J(J({},_.validateMessages),c)),R({onValuesChange:g,onFieldsChange:function(V){if(_.triggerFormChange(i,V),v){for(var F=arguments.length,H=new Array(F>1?F-1:0),$=1;$<F;$++)H[$-1]=arguments[$];v.apply(void 0,[V].concat(H))}},onFinish:function(V){_.triggerFormFinish(i,V),y&&y(V)},onFinishFailed:p}),A(s);var z=k.exports.useRef(null);M(e,!z.current),z.current||(z.current=!0);var D=l,I=typeof l=="function";if(I){var B=w.getFieldsValue(!0);D=l(B,w)}S(!I);var W=k.exports.useRef();k.exports.useEffect(function(){YE(W.current||[],o||[])||w.setFields(o||[]),W.current=o},[o,w]);var E=k.exports.useMemo(function(){return J(J({},w),{},{validateTrigger:d})},[w,d]),T=k.exports.createElement(za.Provider,{value:E},D);return h===!1?T:k.exports.createElement(h,ge({},m,{onSubmit:function(V){V.preventDefault(),V.stopPropagation(),w.submit()},onReset:function(V){var F;V.preventDefault(),w.resetFields(),(F=m.onReset)===null||F===void 0||F.call(m,V)}}),T)},cM=k.exports.forwardRef(hM),eh=cM;eh.FormProvider=ux;eh.Field=ax;eh.List=iM;eh.useForm=lx;var Wp=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function fM(r,t){return!!(r===t||Wp(r)&&Wp(t))}function dM(r,t){if(r.length!==t.length)return!1;for(var n=0;n<r.length;n++)if(!fM(r[n],t[n]))return!1;return!0}function gM(r,t){t===void 0&&(t=dM);var n=null;function i(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];if(n&&n.lastThis===this&&t(e,n.lastArgs))return n.lastResult;var a=r.apply(this,e);return n={lastResult:a,lastArgs:e,lastThis:this},a}return i.clear=function(){n=null},i}var su=function(r,t,n){Rr(r,"[antd: ".concat(t,"] ").concat(n))},vM={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"},pM={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"Ok",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"},mM={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},hx=mM,yM={lang:ge({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},pM),timePickerLocale:ge({},hx)},Zp=yM,$t="${label} is not a valid ${type}",_M={locale:"en",Pagination:vM,DatePicker:Zp,TimePicker:hx,Calendar:Zp,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No Data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:$t,method:$t,array:$t,object:$t,number:$t,date:$t,boolean:$t,integer:$t,float:$t,regexp:$t,email:$t,url:$t,hex:$t},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"}},Ha=_M,Wh=ge({},Ha.Modal);function Fs(r){r?Wh=ge(ge({},Wh),r):Wh=ge({},Ha.Modal)}var xM=k.exports.createContext(void 0),cx=xM,fx="internalMark",dx=function(r){Dn(n,r);var t=In(n);function n(i){var e;return yr(this,n),e=t.call(this,i),e.getMemoizedContextValue=gM(function(o){return ge(ge({},o),{exist:!0})}),Fs(i.locale&&i.locale.Modal),su(i._ANT_MARK__===fx,"LocaleProvider","`LocaleProvider` is deprecated. Please use `locale` with `ConfigProvider` instead: http://u.ant.design/locale"),e}return _r(n,[{key:"componentDidMount",value:function(){Fs(this.props.locale&&this.props.locale.Modal)}},{key:"componentDidUpdate",value:function(e){var o=this.props.locale;e.locale!==o&&Fs(o&&o.Modal)}},{key:"componentWillUnmount",value:function(){Fs()}},{key:"render",value:function(){var e=this.props,o=e.locale,a=e.children,s=this.getMemoizedContextValue(o);return k.exports.createElement(cx.Provider,{value:s},a)}}]),n}(k.exports.Component);dx.defaultProps={locale:{}};var th=function(r){Dn(n,r);var t=In(n);function n(){return yr(this,n),t.apply(this,arguments)}return _r(n,[{key:"getLocale",value:function(){var e=this.props,o=e.componentName,a=e.defaultLocale,s=a||Ha[o!=null?o:"global"],l=this.context,u=o&&l?l[o]:{};return ge(ge({},s instanceof Function?s():s),u||{})}},{key:"getLocaleCode",value:function(){var e=this.context,o=e&&e.locale;return e&&e.exist&&!o?Ha.locale:o}},{key:"render",value:function(){return this.props.children(this.getLocale(),this.getLocaleCode(),this.context)}}]),n}(k.exports.Component);th.defaultProps={componentName:"global"};th.contextType=cx;var wM=function(){var t=k.exports.useContext(Dr),n=t.getPrefixCls,i=n("empty-img-default");return k.exports.createElement("svg",{className:i,width:"184",height:"152",viewBox:"0 0 184 152",xmlns:"http://www.w3.org/2000/svg"},k.exports.createElement("g",{fill:"none",fillRule:"evenodd"},k.exports.createElement("g",{transform:"translate(24 31.67)"},k.exports.createElement("ellipse",{className:"".concat(i,"-ellipse"),cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),k.exports.createElement("path",{className:"".concat(i,"-path-1"),d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z"}),k.exports.createElement("path",{className:"".concat(i,"-path-2"),d:"M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z",transform:"translate(13.56)"}),k.exports.createElement("path",{className:"".concat(i,"-path-3"),d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z"}),k.exports.createElement("path",{className:"".concat(i,"-path-4"),d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z"})),k.exports.createElement("path",{className:"".concat(i,"-path-5"),d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z"}),k.exports.createElement("g",{className:"".concat(i,"-g"),transform:"translate(149.65 15.383)"},k.exports.createElement("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),k.exports.createElement("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"}))))},CM=wM,PM=function(){var t=k.exports.useContext(Dr),n=t.getPrefixCls,i=n("empty-img-simple");return k.exports.createElement("svg",{className:i,width:"64",height:"41",viewBox:"0 0 64 41",xmlns:"http://www.w3.org/2000/svg"},k.exports.createElement("g",{transform:"translate(0 1)",fill:"none",fillRule:"evenodd"},k.exports.createElement("ellipse",{className:"".concat(i,"-ellipse"),cx:"32",cy:"33",rx:"32",ry:"7"}),k.exports.createElement("g",{className:"".concat(i,"-g"),fillRule:"nonzero"},k.exports.createElement("path",{d:"M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"}),k.exports.createElement("path",{d:"M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z",className:"".concat(i,"-path")}))))},SM=PM,EM=globalThis&&globalThis.__rest||function(r,t){var n={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.indexOf(i)<0&&(n[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,i=Object.getOwnPropertySymbols(r);e<i.length;e++)t.indexOf(i[e])<0&&Object.prototype.propertyIsEnumerable.call(r,i[e])&&(n[i[e]]=r[i[e]]);return n},gx=k.exports.createElement(CM,null),vx=k.exports.createElement(SM,null),Rg=function(t){var n=t.className,i=t.prefixCls,e=t.image,o=e===void 0?gx:e,a=t.description,s=t.children,l=t.imageStyle,u=EM(t,["className","prefixCls","image","description","children","imageStyle"]),h=k.exports.useContext(Dr),c=h.getPrefixCls,f=h.direction;return k.exports.createElement(th,{componentName:"Empty"},function(d){var g,v=c("empty",i),y=typeof a!="undefined"?a:d.description,p=typeof y=="string"?y:"empty",m=null;return typeof o=="string"?m=k.exports.createElement("img",{alt:p,src:o}):m=o,k.exports.createElement("div",ge({className:Ht(v,(g={},ve(g,"".concat(v,"-normal"),o===vx),ve(g,"".concat(v,"-rtl"),f==="rtl"),g),n)},u),k.exports.createElement("div",{className:"".concat(v,"-image"),style:l},m),y&&k.exports.createElement("div",{className:"".concat(v,"-description")},y),s&&k.exports.createElement("div",{className:"".concat(v,"-footer")},s))})};Rg.PRESENTED_IMAGE_DEFAULT=gx;Rg.PRESENTED_IMAGE_SIMPLE=vx;var zo=Rg,MM=function(t){return k.exports.createElement(wo,null,function(n){var i=n.getPrefixCls,e=i("empty");switch(t){case"Table":case"List":return k.exports.createElement(zo,{image:zo.PRESENTED_IMAGE_SIMPLE});case"Select":case"TreeSelect":case"Cascader":case"Transfer":case"Mentions":return k.exports.createElement(zo,{image:zo.PRESENTED_IMAGE_SIMPLE,className:"".concat(e,"-small")});default:return k.exports.createElement(zo,null)}})},TM=MM,kM=function(t,n){return n||(t?"ant-".concat(t):"ant")},Dr=k.exports.createContext({getPrefixCls:kM,renderEmpty:TM}),wo=Dr.Consumer,qf=k.exports.createContext(void 0),bM=function(t){var n=t.children,i=t.size;return k.exports.createElement(qf.Consumer,null,function(e){return k.exports.createElement(qf.Provider,{value:i||e},n)})},px=qf;function Xa(){return!!(typeof window!="undefined"&&window.document&&window.document.createElement)}function Up(r,t){var n={};return n[r.toLowerCase()]=t.toLowerCase(),n["Webkit".concat(r)]="webkit".concat(t),n["Moz".concat(r)]="moz".concat(t),n["ms".concat(r)]="MS".concat(t),n["O".concat(r)]="o".concat(t.toLowerCase()),n}function RM(r,t){var n={animationend:Up("Animation","AnimationEnd"),transitionend:Up("Transition","TransitionEnd")};return r&&("AnimationEvent"in t||delete n.animationend.animation,"TransitionEvent"in t||delete n.transitionend.transition),n}var AM=RM(Xa(),typeof window!="undefined"?window:{}),mx={};if(Xa()){var OM=document.createElement("div");mx=OM.style}var Ns={};function yx(r){if(Ns[r])return Ns[r];var t=AM[r];if(t)for(var n=Object.keys(t),i=n.length,e=0;e<i;e+=1){var o=n[e];if(Object.prototype.hasOwnProperty.call(t,o)&&o in mx)return Ns[r]=t[o],Ns[r]}return""}var _x=yx("animationend"),xx=yx("transitionend"),wx=!!(_x&&xx),qp=_x||"animationend",Yp=xx||"transitionend";function Jp(r,t){if(!r)return null;if(pt(r)==="object"){var n=t.replace(/-\w/g,function(i){return i[1].toUpperCase()});return r[n]}return"".concat(r,"-").concat(t)}var ra="none",zs="appear",js="enter",Hs="leave",Xp="none",Vr="prepare",Ii="start",Fi="active",Ag="end";function Ml(r){var t=k.exports.useRef(!1),n=k.exports.useState(r),i=qe(n,2),e=i[0],o=i[1];k.exports.useEffect(function(){return function(){t.current=!0}},[]);function a(s,l){l&&t.current||o(s)}return[e,a]}var Cx=Xa()?k.exports.useLayoutEffect:k.exports.useEffect,Px=function(t){return+setTimeout(t,16)},Sx=function(t){return clearTimeout(t)};typeof window!="undefined"&&"requestAnimationFrame"in window&&(Px=function(t){return window.requestAnimationFrame(t)},Sx=function(t){return window.cancelAnimationFrame(t)});var Kp=0,Og=new Map;function Ex(r){Og.delete(r)}function lo(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;Kp+=1;var n=Kp;function i(e){if(e===0)Ex(n),r();else{var o=Px(function(){i(e-1)});Og.set(n,o)}}return i(t),n}lo.cancel=function(r){var t=Og.get(r);return Ex(t),Sx(t)};var LM=function(){var r=k.exports.useRef(null);function t(){lo.cancel(r.current)}function n(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;t();var o=lo(function(){e<=1?i({isCanceled:function(){return o!==r.current}}):n(i,e-1)});r.current=o}return k.exports.useEffect(function(){return function(){t()}},[]),[n,t]},Qp=[Vr,Ii,Fi,Ag],Mx=!1,DM=!0;function Tx(r){return r===Fi||r===Ag}var IM=function(r,t){var n=Ml(Xp),i=qe(n,2),e=i[0],o=i[1],a=LM(),s=qe(a,2),l=s[0],u=s[1];function h(){o(Vr,!0)}return Cx(function(){if(e!==Xp&&e!==Ag){var c=Qp.indexOf(e),f=Qp[c+1],d=t(e);d===Mx?o(f,!0):l(function(g){function v(){g.isCanceled()||o(f,!0)}d===!0?v():Promise.resolve(d).then(v)})}},[r,e]),k.exports.useEffect(function(){return function(){u()}},[]),[h,e]},FM=function(r){var t=k.exports.useRef(),n=k.exports.useRef(r);n.current=r;var i=k.exports.useCallback(function(a){n.current(a)},[]);function e(a){a&&(a.removeEventListener(Yp,i),a.removeEventListener(qp,i))}function o(a){t.current&&t.current!==a&&e(t.current),a&&a!==t.current&&(a.addEventListener(Yp,i),a.addEventListener(qp,i),t.current=a)}return k.exports.useEffect(function(){return function(){e(t.current)}},[]),[o,e]};function NM(r,t,n,i){var e=i.motionEnter,o=e===void 0?!0:e,a=i.motionAppear,s=a===void 0?!0:a,l=i.motionLeave,u=l===void 0?!0:l,h=i.motionDeadline,c=i.motionLeaveImmediately,f=i.onAppearPrepare,d=i.onEnterPrepare,g=i.onLeavePrepare,v=i.onAppearStart,y=i.onEnterStart,p=i.onLeaveStart,m=i.onAppearActive,_=i.onEnterActive,x=i.onLeaveActive,C=i.onAppearEnd,w=i.onEnterEnd,P=i.onLeaveEnd,S=i.onVisibleChanged,M=Ml(),R=qe(M,2),j=R[0],A=R[1],z=Ml(ra),D=qe(z,2),I=D[0],B=D[1],W=Ml(null),E=qe(W,2),T=E[0],L=E[1],V=k.exports.useRef(!1),F=k.exports.useRef(null),H=k.exports.useRef(null);function $(){var Q=n();return Q||H.current}var G=k.exports.useRef(!1);function b(Q){var he=$();if(!(Q&&!Q.deadline&&Q.target!==he)){var Fe;I===zs&&G.current?Fe=C==null?void 0:C(he,Q):I===js&&G.current?Fe=w==null?void 0:w(he,Q):I===Hs&&G.current&&(Fe=P==null?void 0:P(he,Q)),Fe!==!1&&(B(ra,!0),L(null,!0))}}var ee=FM(b),q=qe(ee,1),te=q[0],ie=k.exports.useMemo(function(){var Q,he,Fe;switch(I){case zs:return Q={},ve(Q,Vr,f),ve(Q,Ii,v),ve(Q,Fi,m),Q;case js:return he={},ve(he,Vr,d),ve(he,Ii,y),ve(he,Fi,_),he;case Hs:return Fe={},ve(Fe,Vr,g),ve(Fe,Ii,p),ve(Fe,Fi,x),Fe;default:return{}}},[I]),ue=IM(I,function(Q){if(Q===Vr){var he=ie[Vr];return he?he($()):Mx}if(Ce in ie){var Fe;L(((Fe=ie[Ce])===null||Fe===void 0?void 0:Fe.call(ie,$(),null))||null)}return Ce===Fi&&(te($()),h>0&&(clearTimeout(F.current),F.current=setTimeout(function(){b({deadline:!0})},h))),DM}),re=qe(ue,2),xe=re[0],Ce=re[1],ae=Tx(Ce);G.current=ae,Cx(function(){A(t);var Q=V.current;if(V.current=!0,!!r){var he;!Q&&t&&s&&(he=zs),Q&&t&&o&&(he=js),(Q&&!t&&u||!Q&&c&&!t&&u)&&(he=Hs),he&&(B(he),xe())}},[t]),k.exports.useEffect(function(){(I===zs&&!s||I===js&&!o||I===Hs&&!u)&&B(ra)},[s,o,u]),k.exports.useEffect(function(){return function(){clearTimeout(F.current)}},[]),k.exports.useEffect(function(){j!==void 0&&I===ra&&(S==null||S(j))},[j,I]);var me=T;return ie[Vr]&&Ce===Ii&&(me=J({transition:"none"},me)),[I,Ce,me,j!=null?j:t]}var zM=function(r){Dn(n,r);var t=In(n);function n(){return yr(this,n),t.apply(this,arguments)}return _r(n,[{key:"render",value:function(){return this.props.children}}]),n}(k.exports.Component);function jM(r){var t=r;pt(r)==="object"&&(t=r.transitionSupport);function n(e){return!!(e.motionName&&t)}var i=k.exports.forwardRef(function(e,o){var a=e.visible,s=a===void 0?!0:a,l=e.removeOnLeave,u=l===void 0?!0:l,h=e.forceRender,c=e.children,f=e.motionName,d=e.leavedClassName,g=e.eventProps,v=n(e),y=k.exports.useRef(),p=k.exports.useRef();function m(){try{return y.current instanceof HTMLElement?y.current:uE(p.current)}catch{return null}}var _=NM(v,s,m,e),x=qe(_,4),C=x[0],w=x[1],P=x[2],S=x[3],M=k.exports.useRef(S);S&&(M.current=!0);var R=k.exports.useCallback(function(I){y.current=I,Y0(o,I)},[]),j,A=J(J({},g),{},{visible:s});if(!c)j=null;else if(C===ra||!n(e))S?j=c(J({},A),R):!u&&M.current?j=c(J(J({},A),{},{className:d}),R):h?j=c(J(J({},A),{},{style:{display:"none"}}),R):j=null;else{var z,D;w===Vr?D="prepare":Tx(w)?D="active":w===Ii&&(D="start"),j=c(J(J({},A),{},{className:Ht(Jp(f,C),(z={},ve(z,Jp(f,"".concat(C,"-").concat(D)),D),ve(z,f,typeof f=="string"),z)),style:P}),R)}return k.exports.createElement(zM,{ref:p},j)});return i.displayName="CSSMotion",i}var kx=jM(wx),Yf="add",Jf="keep",Xf="remove",em="removed";function HM(r){var t;return r&&pt(r)==="object"&&"key"in r?t=r:t={key:r},J(J({},t),{},{key:String(t.key)})}function Kf(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return r.map(HM)}function VM(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=[],i=0,e=t.length,o=Kf(r),a=Kf(t);o.forEach(function(u){for(var h=!1,c=i;c<e;c+=1){var f=a[c];if(f.key===u.key){i<c&&(n=n.concat(a.slice(i,c).map(function(d){return J(J({},d),{},{status:Yf})})),i=c),n.push(J(J({},f),{},{status:Jf})),i+=1,h=!0;break}}h||n.push(J(J({},u),{},{status:Xf}))}),i<e&&(n=n.concat(a.slice(i).map(function(u){return J(J({},u),{},{status:Yf})})));var s={};n.forEach(function(u){var h=u.key;s[h]=(s[h]||0)+1});var l=Object.keys(s).filter(function(u){return s[u]>1});return l.forEach(function(u){n=n.filter(function(h){var c=h.key,f=h.status;return c!==u||f!==Xf}),n.forEach(function(h){h.key===u&&(h.status=Jf)})}),n}var $M=["component","children","onVisibleChanged"],GM=["status"],BM=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function WM(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:kx,n=function(i){Dn(o,i);var e=In(o);function o(){var a;yr(this,o);for(var s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];return a=e.call.apply(e,[this].concat(l)),a.state={keyEntities:[]},a.removeKey=function(h){a.setState(function(c){var f=c.keyEntities;return{keyEntities:f.map(function(d){return d.key!==h?d:J(J({},d),{},{status:em})})}})},a}return _r(o,[{key:"render",value:function(){var s=this,l=this.state.keyEntities,u=this.props,h=u.component,c=u.children,f=u.onVisibleChanged,d=kn(u,$M),g=h||k.exports.Fragment,v={};return BM.forEach(function(y){v[y]=d[y],delete d[y]}),delete d.keys,k.exports.createElement(g,d,l.map(function(y){var p=y.status,m=kn(y,GM),_=p===Yf||p===Jf;return k.exports.createElement(t,ge({},v,{key:m.key,visible:_,eventProps:m,onVisibleChanged:function(C){f==null||f(C,{key:m.key}),C||s.removeKey(m.key)}}),c)}))}}],[{key:"getDerivedStateFromProps",value:function(s,l){var u=s.keys,h=l.keyEntities,c=Kf(u),f=VM(h,c);return{keyEntities:f.filter(function(d){var g=h.find(function(v){var y=v.key;return d.key===y});return!(g&&g.status===em&&d.status===Xf)})}}}]),o}(k.exports.Component);return n.defaultProps={component:"div"},n}var ZM=WM(wx),Lg=function(r){Dn(n,r);var t=In(n);function n(){var i;yr(this,n);for(var e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return i=t.call.apply(t,[this].concat(o)),i.closeTimer=null,i.close=function(s){s&&s.stopPropagation(),i.clearCloseTimer();var l=i.props,u=l.onClose,h=l.noticeKey;u&&u(h)},i.startCloseTimer=function(){i.props.duration&&(i.closeTimer=window.setTimeout(function(){i.close()},i.props.duration*1e3))},i.clearCloseTimer=function(){i.closeTimer&&(clearTimeout(i.closeTimer),i.closeTimer=null)},i}return _r(n,[{key:"componentDidMount",value:function(){this.startCloseTimer()}},{key:"componentDidUpdate",value:function(e){(this.props.duration!==e.duration||this.props.updateMark!==e.updateMark||this.props.visible!==e.visible&&this.props.visible)&&this.restartCloseTimer()}},{key:"componentWillUnmount",value:function(){this.clearCloseTimer()}},{key:"restartCloseTimer",value:function(){this.clearCloseTimer(),this.startCloseTimer()}},{key:"render",value:function(){var e=this,o=this.props,a=o.prefixCls,s=o.className,l=o.closable,u=o.closeIcon,h=o.style,c=o.onClick,f=o.children,d=o.holder,g="".concat(a,"-notice"),v=Object.keys(this.props).reduce(function(p,m){return(m.substr(0,5)==="data-"||m.substr(0,5)==="aria-"||m==="role")&&(p[m]=e.props[m]),p},{}),y=k.exports.createElement("div",ge({className:Ht(g,s,ve({},"".concat(g,"-closable"),l)),style:h,onMouseEnter:this.clearCloseTimer,onMouseLeave:this.startCloseTimer,onClick:c},v),k.exports.createElement("div",{className:"".concat(g,"-content")},f),l?k.exports.createElement("a",{tabIndex:0,onClick:this.close,className:"".concat(g,"-close")},u||k.exports.createElement("span",{className:"".concat(g,"-close-x")})):null);return d?ou.createPortal(y,d):y}}]),n}(k.exports.Component);Lg.defaultProps={onClose:function(){},duration:1.5};function Dg(r){var t=k.exports.useRef({}),n=k.exports.useState([]),i=qe(n,2),e=i[0],o=i[1];function a(s){var l=!0;r.add(s,function(u,h){var c=h.key;if(u&&(!t.current[c]||l)){var f=k.exports.createElement(Lg,ge({},h,{holder:u}));t.current[c]=f,o(function(d){var g=d.findIndex(function(y){return y.key===h.key});if(g===-1)return[].concat(we(d),[f]);var v=we(d);return v[g]=f,v})}l=!1})}return[a,k.exports.createElement(k.exports.Fragment,null,e)]}var tm=0,UM=Date.now();function rm(){var r=tm;return tm+=1,"rcNotification_".concat(UM,"_").concat(r)}var uo=function(r){Dn(n,r);var t=In(n);function n(){var i;yr(this,n);for(var e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return i=t.call.apply(t,[this].concat(o)),i.state={notices:[]},i.hookRefs=new Map,i.add=function(s,l){var u=s.key||rm(),h=J(J({},s),{},{key:u}),c=i.props.maxCount;i.setState(function(f){var d=f.notices,g=d.map(function(y){return y.notice.key}).indexOf(u),v=d.concat();return g!==-1?v.splice(g,1,{notice:h,holderCallback:l}):(c&&d.length>=c&&(h.key=v[0].notice.key,h.updateMark=rm(),h.userPassKey=u,v.shift()),v.push({notice:h,holderCallback:l})),{notices:v}})},i.remove=function(s){i.setState(function(l){var u=l.notices;return{notices:u.filter(function(h){var c=h.notice,f=c.key,d=c.userPassKey,g=d||f;return g!==s})}})},i.noticePropsMap={},i}return _r(n,[{key:"getTransitionName",value:function(){var e=this.props,o=e.prefixCls,a=e.animation,s=this.props.transitionName;return!s&&a&&(s="".concat(o,"-").concat(a)),s}},{key:"render",value:function(){var e=this,o=this.state.notices,a=this.props,s=a.prefixCls,l=a.className,u=a.closeIcon,h=a.style,c=[];return o.forEach(function(f,d){var g=f.notice,v=f.holderCallback,y=d===o.length-1?g.updateMark:void 0,p=g.key,m=g.userPassKey,_=J(J(J({prefixCls:s,closeIcon:u},g),g.props),{},{key:p,noticeKey:m||p,updateMark:y,onClose:function(C){var w;e.remove(C),(w=g.onClose)===null||w===void 0||w.call(g)},onClick:g.onClick,children:g.content});c.push(p),e.noticePropsMap[p]={props:_,holderCallback:v}}),k.exports.createElement("div",{className:Ht(s,l),style:h},k.exports.createElement(ZM,{keys:c,motionName:this.getTransitionName(),onVisibleChanged:function(d,g){var v=g.key;d||delete e.noticePropsMap[v]}},function(f){var d=f.key,g=f.className,v=f.style,y=f.visible,p=e.noticePropsMap[d],m=p.props,_=p.holderCallback;return _?k.exports.createElement("div",{key:d,className:Ht(g,"".concat(s,"-hook-holder")),style:J({},v),ref:function(C){typeof d!="undefined"&&(C?(e.hookRefs.set(d,C),_(C,m)):e.hookRefs.delete(d))}}):k.exports.createElement(Lg,ge({},m,{className:Ht(g,m==null?void 0:m.className),style:J(J({},v),m==null?void 0:m.style),visible:y}))}))}}]),n}(k.exports.Component);uo.newInstance=void 0;uo.defaultProps={prefixCls:"rc-notification",animation:"fade",style:{top:65,left:"50%"}};uo.newInstance=function(t,n){var i=t||{},e=i.getContainer,o=kn(i,["getContainer"]),a=document.createElement("div");if(e){var s=e();s.appendChild(a)}else document.body.appendChild(a);var l=!1;function u(h){l||(l=!0,n({notice:function(f){h.add(f)},removeNotice:function(f){h.remove(f)},component:h,destroy:function(){ou.unmountComponentAtNode(a),a.parentNode&&a.parentNode.removeChild(a)},useNotification:function(){return Dg(h)}}))}ou.render(k.exports.createElement(uo,ge({},o,{ref:u})),a)};var qM={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"},YM=qM;function gt(r,t){JM(r)&&(r="100%");var n=XM(r);return r=t===360?r:Math.min(t,Math.max(0,parseFloat(r))),n&&(r=parseInt(String(r*t),10)/100),Math.abs(r-t)<1e-6?1:(t===360?r=(r<0?r%t+t:r%t)/parseFloat(String(t)):r=r%t/parseFloat(String(t)),r)}function Vs(r){return Math.min(1,Math.max(0,r))}function JM(r){return typeof r=="string"&&r.indexOf(".")!==-1&&parseFloat(r)===1}function XM(r){return typeof r=="string"&&r.indexOf("%")!==-1}function bx(r){return r=parseFloat(r),(isNaN(r)||r<0||r>1)&&(r=1),r}function $s(r){return r<=1?Number(r)*100+"%":r}function qn(r){return r.length===1?"0"+r:String(r)}function KM(r,t,n){return{r:gt(r,255)*255,g:gt(t,255)*255,b:gt(n,255)*255}}function nm(r,t,n){r=gt(r,255),t=gt(t,255),n=gt(n,255);var i=Math.max(r,t,n),e=Math.min(r,t,n),o=0,a=0,s=(i+e)/2;if(i===e)a=0,o=0;else{var l=i-e;switch(a=s>.5?l/(2-i-e):l/(i+e),i){case r:o=(t-n)/l+(t<n?6:0);break;case t:o=(n-r)/l+2;break;case n:o=(r-t)/l+4;break}o/=6}return{h:o,s:a,l:s}}function Zh(r,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?r+(t-r)*(6*n):n<1/2?t:n<2/3?r+(t-r)*(2/3-n)*6:r}function QM(r,t,n){var i,e,o;if(r=gt(r,360),t=gt(t,100),n=gt(n,100),t===0)e=n,o=n,i=n;else{var a=n<.5?n*(1+t):n+t-n*t,s=2*n-a;i=Zh(s,a,r+1/3),e=Zh(s,a,r),o=Zh(s,a,r-1/3)}return{r:i*255,g:e*255,b:o*255}}function Qf(r,t,n){r=gt(r,255),t=gt(t,255),n=gt(n,255);var i=Math.max(r,t,n),e=Math.min(r,t,n),o=0,a=i,s=i-e,l=i===0?0:s/i;if(i===e)o=0;else{switch(i){case r:o=(t-n)/s+(t<n?6:0);break;case t:o=(n-r)/s+2;break;case n:o=(r-t)/s+4;break}o/=6}return{h:o,s:l,v:a}}function eT(r,t,n){r=gt(r,360)*6,t=gt(t,100),n=gt(n,100);var i=Math.floor(r),e=r-i,o=n*(1-t),a=n*(1-e*t),s=n*(1-(1-e)*t),l=i%6,u=[n,a,o,o,s,n][l],h=[s,n,n,a,o,o][l],c=[o,o,s,n,n,a][l];return{r:u*255,g:h*255,b:c*255}}function ed(r,t,n,i){var e=[qn(Math.round(r).toString(16)),qn(Math.round(t).toString(16)),qn(Math.round(n).toString(16))];return i&&e[0].startsWith(e[0].charAt(1))&&e[1].startsWith(e[1].charAt(1))&&e[2].startsWith(e[2].charAt(1))?e[0].charAt(0)+e[1].charAt(0)+e[2].charAt(0):e.join("")}function tT(r,t,n,i,e){var o=[qn(Math.round(r).toString(16)),qn(Math.round(t).toString(16)),qn(Math.round(n).toString(16)),qn(rT(i))];return e&&o[0].startsWith(o[0].charAt(1))&&o[1].startsWith(o[1].charAt(1))&&o[2].startsWith(o[2].charAt(1))&&o[3].startsWith(o[3].charAt(1))?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}function rT(r){return Math.round(parseFloat(r)*255).toString(16)}function im(r){return Gt(r)/255}function Gt(r){return parseInt(r,16)}function nT(r){return{r:r>>16,g:(r&65280)>>8,b:r&255}}var td={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function _i(r){var t={r:0,g:0,b:0},n=1,i=null,e=null,o=null,a=!1,s=!1;return typeof r=="string"&&(r=aT(r)),typeof r=="object"&&(Fr(r.r)&&Fr(r.g)&&Fr(r.b)?(t=KM(r.r,r.g,r.b),a=!0,s=String(r.r).substr(-1)==="%"?"prgb":"rgb"):Fr(r.h)&&Fr(r.s)&&Fr(r.v)?(i=$s(r.s),e=$s(r.v),t=eT(r.h,i,e),a=!0,s="hsv"):Fr(r.h)&&Fr(r.s)&&Fr(r.l)&&(i=$s(r.s),o=$s(r.l),t=QM(r.h,i,o),a=!0,s="hsl"),Object.prototype.hasOwnProperty.call(r,"a")&&(n=r.a)),n=bx(n),{ok:a,format:r.format||s,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}var iT="[-\\+]?\\d+%?",oT="[-\\+]?\\d*\\.\\d+%?",pn="(?:"+oT+")|(?:"+iT+")",Uh="[\\s|\\(]+("+pn+")[,|\\s]+("+pn+")[,|\\s]+("+pn+")\\s*\\)?",qh="[\\s|\\(]+("+pn+")[,|\\s]+("+pn+")[,|\\s]+("+pn+")[,|\\s]+("+pn+")\\s*\\)?",dr={CSS_UNIT:new RegExp(pn),rgb:new RegExp("rgb"+Uh),rgba:new RegExp("rgba"+qh),hsl:new RegExp("hsl"+Uh),hsla:new RegExp("hsla"+qh),hsv:new RegExp("hsv"+Uh),hsva:new RegExp("hsva"+qh),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function aT(r){if(r=r.trim().toLowerCase(),r.length===0)return!1;var t=!1;if(td[r])r=td[r],t=!0;else if(r==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var n=dr.rgb.exec(r);return n?{r:n[1],g:n[2],b:n[3]}:(n=dr.rgba.exec(r),n?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=dr.hsl.exec(r),n?{h:n[1],s:n[2],l:n[3]}:(n=dr.hsla.exec(r),n?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=dr.hsv.exec(r),n?{h:n[1],s:n[2],v:n[3]}:(n=dr.hsva.exec(r),n?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=dr.hex8.exec(r),n?{r:Gt(n[1]),g:Gt(n[2]),b:Gt(n[3]),a:im(n[4]),format:t?"name":"hex8"}:(n=dr.hex6.exec(r),n?{r:Gt(n[1]),g:Gt(n[2]),b:Gt(n[3]),format:t?"name":"hex"}:(n=dr.hex4.exec(r),n?{r:Gt(n[1]+n[1]),g:Gt(n[2]+n[2]),b:Gt(n[3]+n[3]),a:im(n[4]+n[4]),format:t?"name":"hex8"}:(n=dr.hex3.exec(r),n?{r:Gt(n[1]+n[1]),g:Gt(n[2]+n[2]),b:Gt(n[3]+n[3]),format:t?"name":"hex"}:!1)))))))))}function Fr(r){return Boolean(dr.CSS_UNIT.exec(String(r)))}var Yh=function(){function r(t,n){t===void 0&&(t=""),n===void 0&&(n={});var i;if(t instanceof r)return t;typeof t=="number"&&(t=nT(t)),this.originalInput=t;var e=_i(t);this.originalInput=t,this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a,this.roundA=Math.round(100*this.a)/100,this.format=(i=n.format)!==null&&i!==void 0?i:e.format,this.gradientType=n.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=e.ok}return r.prototype.isDark=function(){return this.getBrightness()<128},r.prototype.isLight=function(){return!this.isDark()},r.prototype.getBrightness=function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},r.prototype.getLuminance=function(){var t=this.toRgb(),n,i,e,o=t.r/255,a=t.g/255,s=t.b/255;return o<=.03928?n=o/12.92:n=Math.pow((o+.055)/1.055,2.4),a<=.03928?i=a/12.92:i=Math.pow((a+.055)/1.055,2.4),s<=.03928?e=s/12.92:e=Math.pow((s+.055)/1.055,2.4),.2126*n+.7152*i+.0722*e},r.prototype.getAlpha=function(){return this.a},r.prototype.setAlpha=function(t){return this.a=bx(t),this.roundA=Math.round(100*this.a)/100,this},r.prototype.toHsv=function(){var t=Qf(this.r,this.g,this.b);return{h:t.h*360,s:t.s,v:t.v,a:this.a}},r.prototype.toHsvString=function(){var t=Qf(this.r,this.g,this.b),n=Math.round(t.h*360),i=Math.round(t.s*100),e=Math.round(t.v*100);return this.a===1?"hsv("+n+", "+i+"%, "+e+"%)":"hsva("+n+", "+i+"%, "+e+"%, "+this.roundA+")"},r.prototype.toHsl=function(){var t=nm(this.r,this.g,this.b);return{h:t.h*360,s:t.s,l:t.l,a:this.a}},r.prototype.toHslString=function(){var t=nm(this.r,this.g,this.b),n=Math.round(t.h*360),i=Math.round(t.s*100),e=Math.round(t.l*100);return this.a===1?"hsl("+n+", "+i+"%, "+e+"%)":"hsla("+n+", "+i+"%, "+e+"%, "+this.roundA+")"},r.prototype.toHex=function(t){return t===void 0&&(t=!1),ed(this.r,this.g,this.b,t)},r.prototype.toHexString=function(t){return t===void 0&&(t=!1),"#"+this.toHex(t)},r.prototype.toHex8=function(t){return t===void 0&&(t=!1),tT(this.r,this.g,this.b,this.a,t)},r.prototype.toHex8String=function(t){return t===void 0&&(t=!1),"#"+this.toHex8(t)},r.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},r.prototype.toRgbString=function(){var t=Math.round(this.r),n=Math.round(this.g),i=Math.round(this.b);return this.a===1?"rgb("+t+", "+n+", "+i+")":"rgba("+t+", "+n+", "+i+", "+this.roundA+")"},r.prototype.toPercentageRgb=function(){var t=function(n){return Math.round(gt(n,255)*100)+"%"};return{r:t(this.r),g:t(this.g),b:t(this.b),a:this.a}},r.prototype.toPercentageRgbString=function(){var t=function(n){return Math.round(gt(n,255)*100)};return this.a===1?"rgb("+t(this.r)+"%, "+t(this.g)+"%, "+t(this.b)+"%)":"rgba("+t(this.r)+"%, "+t(this.g)+"%, "+t(this.b)+"%, "+this.roundA+")"},r.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var t="#"+ed(this.r,this.g,this.b,!1),n=0,i=Object.entries(td);n<i.length;n++){var e=i[n],o=e[0],a=e[1];if(t===a)return o}return!1},r.prototype.toString=function(t){var n=Boolean(t);t=t!=null?t:this.format;var i=!1,e=this.a<1&&this.a>=0,o=!n&&e&&(t.startsWith("hex")||t==="name");return o?t==="name"&&this.a===0?this.toName():this.toRgbString():(t==="rgb"&&(i=this.toRgbString()),t==="prgb"&&(i=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(i=this.toHexString()),t==="hex3"&&(i=this.toHexString(!0)),t==="hex4"&&(i=this.toHex8String(!0)),t==="hex8"&&(i=this.toHex8String()),t==="name"&&(i=this.toName()),t==="hsl"&&(i=this.toHslString()),t==="hsv"&&(i=this.toHsvString()),i||this.toHexString())},r.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},r.prototype.clone=function(){return new r(this.toString())},r.prototype.lighten=function(t){t===void 0&&(t=10);var n=this.toHsl();return n.l+=t/100,n.l=Vs(n.l),new r(n)},r.prototype.brighten=function(t){t===void 0&&(t=10);var n=this.toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(255*-(t/100)))),n.g=Math.max(0,Math.min(255,n.g-Math.round(255*-(t/100)))),n.b=Math.max(0,Math.min(255,n.b-Math.round(255*-(t/100)))),new r(n)},r.prototype.darken=function(t){t===void 0&&(t=10);var n=this.toHsl();return n.l-=t/100,n.l=Vs(n.l),new r(n)},r.prototype.tint=function(t){return t===void 0&&(t=10),this.mix("white",t)},r.prototype.shade=function(t){return t===void 0&&(t=10),this.mix("black",t)},r.prototype.desaturate=function(t){t===void 0&&(t=10);var n=this.toHsl();return n.s-=t/100,n.s=Vs(n.s),new r(n)},r.prototype.saturate=function(t){t===void 0&&(t=10);var n=this.toHsl();return n.s+=t/100,n.s=Vs(n.s),new r(n)},r.prototype.greyscale=function(){return this.desaturate(100)},r.prototype.spin=function(t){var n=this.toHsl(),i=(n.h+t)%360;return n.h=i<0?360+i:i,new r(n)},r.prototype.mix=function(t,n){n===void 0&&(n=50);var i=this.toRgb(),e=new r(t).toRgb(),o=n/100,a={r:(e.r-i.r)*o+i.r,g:(e.g-i.g)*o+i.g,b:(e.b-i.b)*o+i.b,a:(e.a-i.a)*o+i.a};return new r(a)},r.prototype.analogous=function(t,n){t===void 0&&(t=6),n===void 0&&(n=30);var i=this.toHsl(),e=360/n,o=[this];for(i.h=(i.h-(e*t>>1)+720)%360;--t;)i.h=(i.h+e)%360,o.push(new r(i));return o},r.prototype.complement=function(){var t=this.toHsl();return t.h=(t.h+180)%360,new r(t)},r.prototype.monochromatic=function(t){t===void 0&&(t=6);for(var n=this.toHsv(),i=n.h,e=n.s,o=n.v,a=[],s=1/t;t--;)a.push(new r({h:i,s:e,v:o})),o=(o+s)%1;return a},r.prototype.splitcomplement=function(){var t=this.toHsl(),n=t.h;return[this,new r({h:(n+72)%360,s:t.s,l:t.l}),new r({h:(n+216)%360,s:t.s,l:t.l})]},r.prototype.onBackground=function(t){var n=this.toRgb(),i=new r(t).toRgb();return new r({r:i.r+(n.r-i.r)*n.a,g:i.g+(n.g-i.g)*n.a,b:i.b+(n.b-i.b)*n.a})},r.prototype.triad=function(){return this.polyad(3)},r.prototype.tetrad=function(){return this.polyad(4)},r.prototype.polyad=function(t){for(var n=this.toHsl(),i=n.h,e=[this],o=360/t,a=1;a<t;a++)e.push(new r({h:(i+a*o)%360,s:n.s,l:n.l}));return e},r.prototype.equals=function(t){return this.toRgbString()===new r(t).toRgbString()},r}(),Gs=2,om=.16,sT=.05,lT=.05,uT=.15,Rx=5,Ax=4,hT=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function am(r){var t=r.r,n=r.g,i=r.b,e=Qf(t,n,i);return{h:e.h*360,s:e.s,v:e.v}}function Bs(r){var t=r.r,n=r.g,i=r.b;return"#".concat(ed(t,n,i,!1))}function cT(r,t,n){var i=n/100,e={r:(t.r-r.r)*i+r.r,g:(t.g-r.g)*i+r.g,b:(t.b-r.b)*i+r.b};return e}function sm(r,t,n){var i;return Math.round(r.h)>=60&&Math.round(r.h)<=240?i=n?Math.round(r.h)-Gs*t:Math.round(r.h)+Gs*t:i=n?Math.round(r.h)+Gs*t:Math.round(r.h)-Gs*t,i<0?i+=360:i>=360&&(i-=360),i}function lm(r,t,n){if(r.h===0&&r.s===0)return r.s;var i;return n?i=r.s-om*t:t===Ax?i=r.s+om:i=r.s+sT*t,i>1&&(i=1),n&&t===Rx&&i>.1&&(i=.1),i<.06&&(i=.06),Number(i.toFixed(2))}function um(r,t,n){var i;return n?i=r.v+lT*t:i=r.v-uT*t,i>1&&(i=1),Number(i.toFixed(2))}function Va(r){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=[],i=_i(r),e=Rx;e>0;e-=1){var o=am(i),a=Bs(_i({h:sm(o,e,!0),s:lm(o,e,!0),v:um(o,e,!0)}));n.push(a)}n.push(Bs(i));for(var s=1;s<=Ax;s+=1){var l=am(i),u=Bs(_i({h:sm(l,s),s:lm(l,s),v:um(l,s)}));n.push(u)}return t.theme==="dark"?hT.map(function(h){var c=h.index,f=h.opacity,d=Bs(cT(_i(t.backgroundColor||"#141414"),_i(n[c]),f*100));return d}):n}var Jh={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},wt={},Xh={};Object.keys(Jh).forEach(function(r){wt[r]=Va(Jh[r]),wt[r].primary=wt[r][5],Xh[r]=Va(Jh[r],{theme:"dark",backgroundColor:"#141414"}),Xh[r].primary=Xh[r][5]});wt.red;wt.volcano;wt.gold;wt.orange;wt.yellow;wt.lime;wt.green;wt.cyan;wt.blue;wt.geekblue;wt.purple;wt.magenta;wt.grey;var fT="rc-util-key";function Ox(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=r.mark;return t?t.startsWith("data-")?t:"data-".concat(t):fT}function Ig(r){if(r.attachTo)return r.attachTo;var t=document.querySelector("head");return t||document.body}function hm(r){var t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Xa())return null;var i=document.createElement("style");if(!((t=n.csp)===null||t===void 0)&&t.nonce){var e;i.nonce=(e=n.csp)===null||e===void 0?void 0:e.nonce}i.innerHTML=r;var o=Ig(n),a=o.firstChild;return n.prepend&&o.prepend?o.prepend(i):n.prepend&&a?o.insertBefore(i,a):o.appendChild(i),i}var rd=new Map;function dT(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=Ig(t);return Array.from(rd.get(n).children).find(function(i){return i.tagName==="STYLE"&&i.getAttribute(Ox(t))===r})}function Fg(r,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=Ig(n);if(!rd.has(i)){var e=hm("",n),o=e.parentNode;rd.set(i,o),o.removeChild(e)}var a=dT(t,n);if(a){var s,l;if(((s=n.csp)===null||s===void 0?void 0:s.nonce)&&a.nonce!==((l=n.csp)===null||l===void 0?void 0:l.nonce)){var u;a.nonce=(u=n.csp)===null||u===void 0?void 0:u.nonce}return a.innerHTML!==r&&(a.innerHTML=r),a}var h=hm(r,n);return h.setAttribute(Ox(n),t),h}function gT(r,t){Rr(r,"[@ant-design/icons] ".concat(t))}function cm(r){return pt(r)==="object"&&typeof r.name=="string"&&typeof r.theme=="string"&&(pt(r.icon)==="object"||typeof r.icon=="function")}function fm(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(r).reduce(function(t,n){var i=r[n];switch(n){case"class":t.className=i,delete t.class;break;default:t[n]=i}return t},{})}function nd(r,t,n){return n?or.createElement(r.tag,J(J({key:t},fm(r.attrs)),n),(r.children||[]).map(function(i,e){return nd(i,"".concat(t,"-").concat(r.tag,"-").concat(e))})):or.createElement(r.tag,J({key:t},fm(r.attrs)),(r.children||[]).map(function(i,e){return nd(i,"".concat(t,"-").concat(r.tag,"-").concat(e))}))}function Lx(r){return Va(r)[0]}function Dx(r){return r?Array.isArray(r)?r:[r]:[]}var vT=`
.anticon {
  display: inline-block;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,pT=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:vT,n=k.exports.useContext(Tg),i=n.csp;k.exports.useEffect(function(){Fg(t,"@ant-design-icons",{prepend:!0,csp:i})},[])},mT=["icon","className","onClick","style","primaryColor","secondaryColor"],ya={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function yT(r){var t=r.primaryColor,n=r.secondaryColor;ya.primaryColor=t,ya.secondaryColor=n||Lx(t),ya.calculated=!!n}function _T(){return J({},ya)}var rh=function(t){var n=t.icon,i=t.className,e=t.onClick,o=t.style,a=t.primaryColor,s=t.secondaryColor,l=kn(t,mT),u=ya;if(a&&(u={primaryColor:a,secondaryColor:s||Lx(a)}),pT(),gT(cm(n),"icon should be icon definiton, but got ".concat(n)),!cm(n))return null;var h=n;return h&&typeof h.icon=="function"&&(h=J(J({},h),{},{icon:h.icon(u.primaryColor,u.secondaryColor)})),nd(h.icon,"svg-".concat(h.name),J({className:i,onClick:e,style:o,"data-icon":h.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},l))};rh.displayName="IconReact";rh.getTwoToneColors=_T;rh.setTwoToneColors=yT;var Ng=rh;function Ix(r){var t=Dx(r),n=qe(t,2),i=n[0],e=n[1];return Ng.setTwoToneColors({primaryColor:i,secondaryColor:e})}function xT(){var r=Ng.getTwoToneColors();return r.calculated?[r.primaryColor,r.secondaryColor]:r.primaryColor}var wT=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];Ix("#1890ff");var nh=k.exports.forwardRef(function(r,t){var n,i=r.className,e=r.icon,o=r.spin,a=r.rotate,s=r.tabIndex,l=r.onClick,u=r.twoToneColor,h=kn(r,wT),c=k.exports.useContext(Tg),f=c.prefixCls,d=f===void 0?"anticon":f,g=Ht(d,(n={},ve(n,"".concat(d,"-").concat(e.name),!!e.name),ve(n,"".concat(d,"-spin"),!!o||e.name==="loading"),n),i),v=s;v===void 0&&l&&(v=-1);var y=a?{msTransform:"rotate(".concat(a,"deg)"),transform:"rotate(".concat(a,"deg)")}:void 0,p=Dx(u),m=qe(p,2),_=m[0],x=m[1];return k.exports.createElement("span",J(J({role:"img","aria-label":e.name},h),{},{ref:t,tabIndex:v,onClick:l,className:g}),k.exports.createElement(Ng,{icon:e,primaryColor:_,secondaryColor:x,style:y}))});nh.displayName="AntdIcon";nh.getTwoToneColor=xT;nh.setTwoToneColor=Ix;var Ir=nh,Fx=function(t,n){return k.exports.createElement(Ir,J(J({},t),{},{ref:n,icon:YM}))};Fx.displayName="LoadingOutlined";var id=k.exports.forwardRef(Fx),CT={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"},PT=CT,Nx=function(t,n){return k.exports.createElement(Ir,J(J({},t),{},{ref:n,icon:PT}))};Nx.displayName="ExclamationCircleFilled";var ST=k.exports.forwardRef(Nx),ET={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm165.4 618.2l-66-.3L512 563.4l-99.3 118.4-66.1.3c-4.4 0-8-3.5-8-8 0-1.9.7-3.7 1.9-5.2l130.1-155L340.5 359a8.32 8.32 0 01-1.9-5.2c0-4.4 3.6-8 8-8l66.1.3L512 464.6l99.3-118.4 66-.3c4.4 0 8 3.5 8 8 0 1.9-.7 3.7-1.9 5.2L553.5 514l130 155c1.2 1.5 1.9 3.3 1.9 5.2 0 4.4-3.6 8-8 8z"}}]},name:"close-circle",theme:"filled"},MT=ET,zx=function(t,n){return k.exports.createElement(Ir,J(J({},t),{},{ref:n,icon:MT}))};zx.displayName="CloseCircleFilled";var TT=k.exports.forwardRef(zx),kT={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"},bT=kT,jx=function(t,n){return k.exports.createElement(Ir,J(J({},t),{},{ref:n,icon:bT}))};jx.displayName="CheckCircleFilled";var RT=k.exports.forwardRef(jx),AT={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"},OT=AT,Hx=function(t,n){return k.exports.createElement(Ir,J(J({},t),{},{ref:n,icon:OT}))};Hx.displayName="InfoCircleFilled";var LT=k.exports.forwardRef(Hx);function DT(r,t){var n=function(){var e,o,a=null,s={add:function(v,y){a==null||a.component.add(v,y)}},l=Dg(s),u=qe(l,2),h=u[0],c=u[1];function f(g){var v=g.prefixCls,y=e("message",v),p=e(),m=g.key||qx(),_=new Promise(function(C){var w=function(){return typeof g.onClose=="function"&&g.onClose(),C(!0)};r(ge(ge({},g),{prefixCls:y,rootPrefixCls:p,getPopupContainer:o}),function(P){var S=P.prefixCls,M=P.instance;a=M,h(t(ge(ge({},g),{key:m,onClose:w}),S))})}),x=function(){a&&a.removeNotice(m)};return x.then=function(C,w){return _.then(C,w)},x.promise=_,x}var d=k.exports.useRef({});return d.current.open=f,["success","info","warning","error","loading"].forEach(function(g){return Xx(d.current,g)}),[d.current,k.exports.createElement(wo,{key:"holder"},function(g){return e=g.getPrefixCls,o=g.getPopupContainer,c})]};return n}var Tt,Vx=3,$x,IT=1,Gx="",od="move-up",Bx=!1,Wx,Zx,Ux=!1;function qx(){return IT++}function FT(r){r.top!==void 0&&($x=r.top,Tt=null),r.duration!==void 0&&(Vx=r.duration),r.prefixCls!==void 0&&(Gx=r.prefixCls),r.getContainer!==void 0&&(Wx=r.getContainer,Tt=null),r.transitionName!==void 0&&(od=r.transitionName,Tt=null,Bx=!0),r.maxCount!==void 0&&(Zx=r.maxCount,Tt=null),r.rtl!==void 0&&(Ux=r.rtl)}function Yx(r,t){var n=r.prefixCls,i=r.getPopupContainer,e=v1(),o=e.getPrefixCls,a=e.getRootPrefixCls,s=e.getIconPrefixCls,l=o("message",n||Gx),u=a(r.rootPrefixCls,l),h=s();if(Tt){t({prefixCls:l,rootPrefixCls:u,iconPrefixCls:h,instance:Tt});return}var c={prefixCls:l,transitionName:Bx?od:"".concat(u,"-").concat(od),style:{top:$x},getContainer:Wx||i,maxCount:Zx};uo.newInstance(c,function(f){if(Tt){t({prefixCls:l,rootPrefixCls:u,iconPrefixCls:h,instance:Tt});return}Tt=f,t({prefixCls:l,rootPrefixCls:u,iconPrefixCls:h,instance:f})})}var NT={info:LT,success:RT,error:TT,warning:ST,loading:id};function Jx(r,t,n){var i,e=r.duration!==void 0?r.duration:Vx,o=NT[r.type],a=Ht("".concat(t,"-custom-content"),(i={},ve(i,"".concat(t,"-").concat(r.type),r.type),ve(i,"".concat(t,"-rtl"),Ux===!0),i));return{key:r.key,duration:e,style:r.style||{},className:r.className,content:k.exports.createElement(Ka,{iconPrefixCls:n},k.exports.createElement("div",{className:a},r.icon||o&&k.exports.createElement(o,null),k.exports.createElement("span",null,r.content))),onClose:r.onClose,onClick:r.onClick}}function zT(r){var t=r.key||qx(),n=new Promise(function(e){var o=function(){return typeof r.onClose=="function"&&r.onClose(),e(!0)};Yx(r,function(a){var s=a.prefixCls,l=a.iconPrefixCls,u=a.instance;u.notice(Jx(ge(ge({},r),{key:t,onClose:o}),s,l))})}),i=function(){Tt&&Tt.removeNotice(t)};return i.then=function(e,o){return n.then(e,o)},i.promise=n,i}function jT(r){return Object.prototype.toString.call(r)==="[object Object]"&&!!r.content}var $a={open:zT,config:FT,destroy:function(t){if(Tt)if(t){var n=Tt,i=n.removeNotice;i(t)}else{var e=Tt,o=e.destroy;o(),Tt=null}}};function Xx(r,t){r[t]=function(n,i,e){return jT(n)?r.open(ge(ge({},n),{type:t})):(typeof i=="function"&&(e=i,i=void 0),r.open({content:n,duration:i,type:t,onClose:e}))}}["success","info","warning","error","loading"].forEach(function(r){return Xx($a,r)});$a.warn=$a.warning;$a.useMessage=DT(Yx,Jx);var HT=$a,VT={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 00203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z"}}]},name:"close",theme:"outlined"},$T=VT,Kx=function(t,n){return k.exports.createElement(Ir,J(J({},t),{},{ref:n,icon:$T}))};Kx.displayName="CloseOutlined";var Qx=k.exports.forwardRef(Kx),GT={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"},BT=GT,e1=function(t,n){return k.exports.createElement(Ir,J(J({},t),{},{ref:n,icon:BT}))};e1.displayName="CheckCircleOutlined";var WT=k.exports.forwardRef(e1),ZT={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M685.4 354.8c0-4.4-3.6-8-8-8l-66 .3L512 465.6l-99.3-118.4-66.1-.3c-4.4 0-8 3.5-8 8 0 1.9.7 3.7 1.9 5.2l130.1 155L340.5 670a8.32 8.32 0 00-1.9 5.2c0 4.4 3.6 8 8 8l66.1-.3L512 564.4l99.3 118.4 66 .3c4.4 0 8-3.5 8-8 0-1.9-.7-3.7-1.9-5.2L553.5 515l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z"}},{tag:"path",attrs:{d:"M512 65C264.6 65 64 265.6 64 513s200.6 448 448 448 448-200.6 448-448S759.4 65 512 65zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"close-circle",theme:"outlined"},UT=ZT,t1=function(t,n){return k.exports.createElement(Ir,J(J({},t),{},{ref:n,icon:UT}))};t1.displayName="CloseCircleOutlined";var qT=k.exports.forwardRef(t1),YT={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},JT=YT,r1=function(t,n){return k.exports.createElement(Ir,J(J({},t),{},{ref:n,icon:JT}))};r1.displayName="ExclamationCircleOutlined";var XT=k.exports.forwardRef(r1),KT={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"},QT=KT,n1=function(t,n){return k.exports.createElement(Ir,J(J({},t),{},{ref:n,icon:QT}))};n1.displayName="InfoCircleOutlined";var e2=k.exports.forwardRef(n1);function t2(r,t){var n=function(){var e,o=null,a={add:function(g,v){o==null||o.component.add(g,v)}},s=Dg(a),l=qe(s,2),u=l[0],h=l[1];function c(d){var g=d.prefixCls,v=e("notification",g);r(ge(ge({},d),{prefixCls:v}),function(y){var p=y.prefixCls,m=y.instance;o=m,u(t(d,p))})}var f=k.exports.useRef({});return f.current.open=c,["success","info","warning","error"].forEach(function(d){f.current[d]=function(g){return f.current.open(ge(ge({},g),{type:d}))}}),[f.current,k.exports.createElement(wo,{key:"holder"},function(d){return e=d.getPrefixCls,h})]};return n}globalThis&&globalThis.__awaiter;var Gn={},i1=4.5,o1=24,a1=24,s1="",ad="topRight",l1,u1,h1=!1,c1;function r2(r){var t=r.duration,n=r.placement,i=r.bottom,e=r.top,o=r.getContainer,a=r.closeIcon,s=r.prefixCls;s!==void 0&&(s1=s),t!==void 0&&(i1=t),n!==void 0?ad=n:r.rtl&&(ad="topLeft"),i!==void 0&&(a1=i),e!==void 0&&(o1=e),o!==void 0&&(l1=o),a!==void 0&&(u1=a),r.rtl!==void 0&&(h1=r.rtl),r.maxCount!==void 0&&(c1=r.maxCount)}function n2(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:a1,i;switch(r){case"top":i={left:0,right:0,top:t,bottom:"auto"};break;case"topLeft":i={left:0,top:t,bottom:"auto"};break;case"topRight":i={right:0,top:t,bottom:"auto"};break;case"bottom":i={left:0,right:0,top:"auto",bottom:n};break;case"bottomLeft":i={left:0,top:"auto",bottom:n};break;default:i={right:0,top:"auto",bottom:n};break}return i}function f1(r,t){var n=r.placement,i=n===void 0?ad:n,e=r.top,o=r.bottom,a=r.getContainer,s=a===void 0?l1:a,l=r.prefixCls,u=v1(),h=u.getPrefixCls,c=u.getIconPrefixCls,f=h("notification",l||s1),d=c(),g="".concat(f,"-").concat(i),v=Gn[g];if(v){Promise.resolve(v).then(function(p){t({prefixCls:"".concat(f,"-notice"),iconPrefixCls:d,instance:p})});return}var y=Ht("".concat(f,"-").concat(i),ve({},"".concat(f,"-rtl"),h1===!0));Gn[g]=new Promise(function(p){uo.newInstance({prefixCls:f,className:y,style:n2(i,e,o),getContainer:s,maxCount:c1},function(m){p(m),t({prefixCls:"".concat(f,"-notice"),iconPrefixCls:d,instance:m})})})}var i2={success:WT,info:e2,error:qT,warning:XT};function d1(r,t,n){var i=r.duration,e=r.icon,o=r.type,a=r.description,s=r.message,l=r.btn,u=r.onClose,h=r.onClick,c=r.key,f=r.style,d=r.className,g=r.closeIcon,v=g===void 0?u1:g,y=i===void 0?i1:i,p=null;e?p=k.exports.createElement("span",{className:"".concat(t,"-icon")},r.icon):o&&(p=k.exports.createElement(i2[o]||null,{className:"".concat(t,"-icon ").concat(t,"-icon-").concat(o)}));var m=k.exports.createElement("span",{className:"".concat(t,"-close-x")},v||k.exports.createElement(Qx,{className:"".concat(t,"-close-icon")})),_=!a&&p?k.exports.createElement("span",{className:"".concat(t,"-message-single-line-auto-margin")}):null;return{content:k.exports.createElement(Ka,{iconPrefixCls:n},k.exports.createElement("div",{className:p?"".concat(t,"-with-icon"):"",role:"alert"},p,k.exports.createElement("div",{className:"".concat(t,"-message")},_,s),k.exports.createElement("div",{className:"".concat(t,"-description")},a),l?k.exports.createElement("span",{className:"".concat(t,"-btn")},l):null)),duration:y,closable:!0,closeIcon:m,onClose:u,onClick:h,key:c,style:f||{},className:Ht(d,ve({},"".concat(t,"-").concat(o),!!o))}}function o2(r){f1(r,function(t){var n=t.prefixCls,i=t.iconPrefixCls,e=t.instance;e.notice(d1(r,n,i))})}var ho={open:o2,close:function(t){Object.keys(Gn).forEach(function(n){return Promise.resolve(Gn[n]).then(function(i){i.removeNotice(t)})})},config:r2,destroy:function(){Object.keys(Gn).forEach(function(t){Promise.resolve(Gn[t]).then(function(n){n.destroy()}),delete Gn[t]})}};["success","info","warning","error"].forEach(function(r){ho[r]=function(t){return ho.open(ge(ge({},t),{type:r}))}});ho.warn=ho.warning;ho.useNotification=t2(f1,d1);var a2=ho,s2="-ant-".concat(Date.now(),"-").concat(Math.random());function l2(r,t){var n={},i=function(h,c){var f=h.clone();return f=(c==null?void 0:c(f))||f,f.toRgbString()},e=function(h,c){var f=new Yh(h),d=Va(f.toRgbString());n["".concat(c,"-color")]=i(f),n["".concat(c,"-color-disabled")]=d[1],n["".concat(c,"-color-hover")]=d[4],n["".concat(c,"-color-active")]=d[7],n["".concat(c,"-color-outline")]=f.clone().setAlpha(.2).toRgbString(),n["".concat(c,"-color-deprecated-bg")]=d[1],n["".concat(c,"-color-deprecated-border")]=d[3]};if(t.primaryColor){e(t.primaryColor,"primary");var o=new Yh(t.primaryColor),a=Va(o.toRgbString());a.forEach(function(u,h){n["primary-".concat(h+1)]=u}),n["primary-color-deprecated-l-35"]=i(o,function(u){return u.lighten(35)}),n["primary-color-deprecated-l-20"]=i(o,function(u){return u.lighten(20)}),n["primary-color-deprecated-t-20"]=i(o,function(u){return u.tint(20)}),n["primary-color-deprecated-t-50"]=i(o,function(u){return u.tint(50)}),n["primary-color-deprecated-f-12"]=i(o,function(u){return u.setAlpha(u.getAlpha()*.12)});var s=new Yh(a[0]);n["primary-color-active-deprecated-f-30"]=i(s,function(u){return u.setAlpha(u.getAlpha()*.3)}),n["primary-color-active-deprecated-d-02"]=i(s,function(u){return u.darken(2)})}t.successColor&&e(t.successColor,"success"),t.warningColor&&e(t.warningColor,"warning"),t.errorColor&&e(t.errorColor,"error"),t.infoColor&&e(t.infoColor,"info");var l=Object.keys(n).map(function(u){return"--".concat(r,"-").concat(u,": ").concat(n[u],";")});return`
  :root {
    `.concat(l.join(`
`),`
  }
  `).trim()}function u2(r,t){var n=l2(r,t);Xa()?Fg(n,"".concat(s2,"-dynamic-theme")):su(!1,"ConfigProvider","SSR do not support dynamic theme with css variables.")}var h2=["getTargetContainer","getPopupContainer","renderEmpty","pageHeader","input","form"],c2="ant",f2="anticon",lu,g1;function Tl(){return lu||c2}function d2(){return g1||f2}var g2=function(t){var n=t.prefixCls,i=t.iconPrefixCls,e=t.theme;n!==void 0&&(lu=n),i!==void 0&&(g1=i),e&&u2(Tl(),e)},v1=function(){return{getPrefixCls:function(n,i){return i||(n?"".concat(Tl(),"-").concat(n):Tl())},getIconPrefixCls:d2,getRootPrefixCls:function(n,i){return n||lu||(i&&i.includes("-")?i.replace(/^(.*)-[^-]*$/,"$1"):Tl())}}},v2=function(t){var n,i,e=t.children,o=t.csp,a=t.autoInsertSpaceInButton,s=t.form,l=t.locale,u=t.componentSize,h=t.direction,c=t.space,f=t.virtual,d=t.dropdownMatchSelectWidth,g=t.legacyLocale,v=t.parentContext,y=t.iconPrefixCls,p=k.exports.useCallback(function(P,S){var M=t.prefixCls;if(S)return S;var R=M||v.getPrefixCls("");return P?"".concat(R,"-").concat(P):R},[v.getPrefixCls,t.prefixCls]),m=ge(ge({},v),{csp:o,autoInsertSpaceInButton:a,locale:l||g,direction:h,space:c,virtual:f,dropdownMatchSelectWidth:d,getPrefixCls:p});h2.forEach(function(P){var S=t[P];S&&(m[P]=S)});var _=aE(function(){return m},m,function(P,S){var M=Object.keys(P),R=Object.keys(S);return M.length!==R.length||M.some(function(j){return P[j]!==S[j]})}),x=k.exports.useMemo(function(){return{prefixCls:y,csp:o}},[y,o]),C=e,w={};return l&&(w=((n=l.Form)===null||n===void 0?void 0:n.defaultValidateMessages)||((i=Ha.Form)===null||i===void 0?void 0:i.defaultValidateMessages)||{}),s&&s.validateMessages&&(w=ge(ge({},w),s.validateMessages)),Object.keys(w).length>0&&(C=k.exports.createElement(ux,{validateMessages:w},e)),l&&(C=k.exports.createElement(dx,{locale:l,_ANT_MARK__:fx},C)),(y||o)&&(C=k.exports.createElement(Tg.Provider,{value:x},C)),u&&(C=k.exports.createElement(bM,{size:u},C)),k.exports.createElement(Dr.Provider,{value:_},C)},Ka=function(t){return k.exports.useEffect(function(){t.direction&&(HT.config({rtl:t.direction==="rtl"}),a2.config({rtl:t.direction==="rtl"}))},[t.direction]),k.exports.createElement(th,null,function(n,i,e){return k.exports.createElement(wo,null,function(o){return k.exports.createElement(v2,ge({parentContext:o,legacyLocale:e},t))})})};Ka.ConfigContext=Dr;Ka.SizeContext=px;Ka.config=g2;var Qa=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return n},p2=k.exports.isValidElement;function m2(r,t,n){return p2(r)?k.exports.cloneElement(r,typeof n=="function"?n(r.props||{}):n):t}function p1(r,t){return m2(r,r,t)}var y2=Qa("success","processing","error","default","warning"),_2=Qa("pink","red","yellow","orange","cyan","green","blue","purple","geekblue","magenta","volcano","gold","lime"),x2=_r(function r(t){yr(this,r),this.error=new Error("unreachable case: ".concat(JSON.stringify(t)))}),w2=globalThis&&globalThis.__rest||function(r,t){var n={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.indexOf(i)<0&&(n[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,i=Object.getOwnPropertySymbols(r);e<i.length;e++)t.indexOf(i[e])<0&&Object.prototype.propertyIsEnumerable.call(r,i[e])&&(n[i[e]]=r[i[e]]);return n},C2=function(t){return k.exports.createElement(wo,null,function(n){var i,e=n.getPrefixCls,o=n.direction,a=t.prefixCls,s=t.size,l=t.className,u=w2(t,["prefixCls","size","className"]),h=e("btn-group",a),c="";switch(s){case"large":c="lg";break;case"small":c="sm";break;case"middle":case void 0:break;default:console.warn(new x2(s).error)}var f=Ht(h,(i={},ve(i,"".concat(h,"-").concat(c),c),ve(i,"".concat(h,"-rtl"),o==="rtl"),i),l);return k.exports.createElement("div",ge({},u,{className:f}))})},P2=C2,S2=0,Wi={};function uu(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,n=S2++,i=t;function e(){i-=1,i<=0?(r(),delete Wi[n]):Wi[n]=lo(e)}return Wi[n]=lo(e),n}uu.cancel=function(t){t!==void 0&&(lo.cancel(Wi[t]),delete Wi[t])};uu.ids=Wi;var Kh;function dm(r){return!r||r.offsetParent===null||r.hidden}function E2(r){var t=(r||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\d.]*)?\)/);return t&&t[1]&&t[2]&&t[3]?!(t[1]===t[2]&&t[2]===t[3]):!0}var zg=function(r){Dn(n,r);var t=In(n);function n(){var i;return yr(this,n),i=t.apply(this,arguments),i.containerRef=k.exports.createRef(),i.animationStart=!1,i.destroyed=!1,i.onClick=function(e,o){var a,s,l=i.props,u=l.insertExtraNode,h=l.disabled;if(!(h||!e||dm(e)||e.className.indexOf("-leave")>=0)){i.extraNode=document.createElement("div");var c=Pg(i),f=c.extraNode,d=i.context.getPrefixCls;f.className="".concat(d(""),"-click-animating-node");var g=i.getAttributeName();if(e.setAttribute(g,"true"),o&&o!=="#ffffff"&&o!=="rgb(255, 255, 255)"&&E2(o)&&!/rgba\((?:\d*, ){3}0\)/.test(o)&&o!=="transparent"){f.style.borderColor=o;var v=((a=e.getRootNode)===null||a===void 0?void 0:a.call(e))||e.ownerDocument,y=v instanceof Document?v.body:(s=v.firstChild)!==null&&s!==void 0?s:v;Kh=Fg(`
      [`.concat(d(""),"-click-animating-without-extra-node='true']::after, .").concat(d(""),`-click-animating-node {
        --antd-wave-shadow-color: `).concat(o,`;
      }`),"antd-wave",{csp:i.csp,attachTo:y})}u&&e.appendChild(f),["transition","animation"].forEach(function(p){e.addEventListener("".concat(p,"start"),i.onTransitionStart),e.addEventListener("".concat(p,"end"),i.onTransitionEnd)})}},i.onTransitionStart=function(e){if(!i.destroyed){var o=i.containerRef.current;!e||e.target!==o||i.animationStart||i.resetEffect(o)}},i.onTransitionEnd=function(e){!e||e.animationName!=="fadeEffect"||i.resetEffect(e.target)},i.bindAnimationEvent=function(e){if(!(!e||!e.getAttribute||e.getAttribute("disabled")||e.className.indexOf("disabled")>=0)){var o=function(s){if(!(s.target.tagName==="INPUT"||dm(s.target))){i.resetEffect(e);var l=getComputedStyle(e).getPropertyValue("border-top-color")||getComputedStyle(e).getPropertyValue("border-color")||getComputedStyle(e).getPropertyValue("background-color");i.clickWaveTimeoutId=window.setTimeout(function(){return i.onClick(e,l)},0),uu.cancel(i.animationStartId),i.animationStart=!0,i.animationStartId=uu(function(){i.animationStart=!1},10)}};return e.addEventListener("click",o,!0),{cancel:function(){e.removeEventListener("click",o,!0)}}}},i.renderWave=function(e){var o=e.csp,a=i.props.children;if(i.csp=o,!k.exports.isValidElement(a))return a;var s=i.containerRef;return lE(a)&&(s=sE(a.ref,i.containerRef)),p1(a,{ref:s})},i}return _r(n,[{key:"componentDidMount",value:function(){var e=this.containerRef.current;!e||e.nodeType!==1||(this.instance=this.bindAnimationEvent(e))}},{key:"componentWillUnmount",value:function(){this.instance&&this.instance.cancel(),this.clickWaveTimeoutId&&clearTimeout(this.clickWaveTimeoutId),this.destroyed=!0}},{key:"getAttributeName",value:function(){var e=this.context.getPrefixCls,o=this.props.insertExtraNode;return o?"".concat(e(""),"-click-animating"):"".concat(e(""),"-click-animating-without-extra-node")}},{key:"resetEffect",value:function(e){var o=this;if(!(!e||e===this.extraNode||!(e instanceof Element))){var a=this.props.insertExtraNode,s=this.getAttributeName();e.setAttribute(s,"false"),Kh&&(Kh.innerHTML=""),a&&this.extraNode&&e.contains(this.extraNode)&&e.removeChild(this.extraNode),["transition","animation"].forEach(function(l){e.removeEventListener("".concat(l,"start"),o.onTransitionStart),e.removeEventListener("".concat(l,"end"),o.onTransitionEnd)})}}},{key:"render",value:function(){return k.exports.createElement(wo,null,this.renderWave)}}]),n}(k.exports.Component);zg.contextType=Dr;var Qh=function(){return{width:0,opacity:0,transform:"scale(0)"}},ec=function(t){return{width:t.scrollWidth,opacity:1,transform:"scale(1)"}},M2=function(t){var n=t.prefixCls,i=t.loading,e=t.existIcon,o=!!i;return e?or.createElement("span",{className:"".concat(n,"-loading-icon")},or.createElement(id,null)):or.createElement(kx,{visible:o,motionName:"".concat(n,"-loading-icon-motion"),removeOnLeave:!0,onAppearStart:Qh,onAppearActive:ec,onEnterStart:Qh,onEnterActive:ec,onLeaveStart:ec,onLeaveActive:Qh},function(a,s){var l=a.className,u=a.style;return or.createElement("span",{className:"".concat(n,"-loading-icon"),style:u,ref:s},or.createElement(id,{className:l}))})},T2=M2,k2=globalThis&&globalThis.__rest||function(r,t){var n={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.indexOf(i)<0&&(n[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,i=Object.getOwnPropertySymbols(r);e<i.length;e++)t.indexOf(i[e])<0&&Object.prototype.propertyIsEnumerable.call(r,i[e])&&(n[i[e]]=r[i[e]]);return n},gm=/^[\u4e00-\u9fa5]{2}$/,sd=gm.test.bind(gm);function b2(r){return typeof r=="string"}function Ws(r){return r==="text"||r==="link"}function R2(r){return k.exports.isValidElement(r)&&r.type===k.exports.Fragment}function A2(r,t){if(r!=null){var n=t?" ":"";return typeof r!="string"&&typeof r!="number"&&b2(r.type)&&sd(r.props.children)?p1(r,{children:r.props.children.split("").join(n)}):typeof r=="string"?sd(r)?k.exports.createElement("span",null,r.split("").join(n)):k.exports.createElement("span",null,r):R2(r)?k.exports.createElement("span",null,r):r}}function O2(r,t){var n=!1,i=[];return k.exports.Children.forEach(r,function(e){var o=pt(e),a=o==="string"||o==="number";if(n&&a){var s=i.length-1,l=i[s];i[s]="".concat(l).concat(e)}else i.push(e);n=a}),k.exports.Children.map(i,function(e){return A2(e,t)})}Qa("default","primary","ghost","dashed","link","text");Qa("default","circle","round");Qa("submit","button","reset");var L2=function(t,n){var i,e=t.loading,o=e===void 0?!1:e,a=t.prefixCls,s=t.type,l=s===void 0?"default":s,u=t.danger,h=t.shape,c=h===void 0?"default":h,f=t.size,d=t.className,g=t.children,v=t.icon,y=t.ghost,p=y===void 0?!1:y,m=t.block,_=m===void 0?!1:m,x=t.htmlType,C=x===void 0?"button":x,w=k2(t,["loading","prefixCls","type","danger","shape","size","className","children","icon","ghost","block","htmlType"]),P=k.exports.useContext(px),S=k.exports.useState(!!o),M=qe(S,2),R=M[0],j=M[1],A=k.exports.useState(!1),z=qe(A,2),D=z[0],I=z[1],B=k.exports.useContext(Dr),W=B.getPrefixCls,E=B.autoInsertSpaceInButton,T=B.direction,L=n||k.exports.createRef(),V=function(){return k.exports.Children.count(g)===1&&!v&&!Ws(l)},F=function(){if(!(!L||!L.current||E===!1)){var Q=L.current.textContent;V()&&sd(Q)?D||I(!0):D&&I(!1)}},H=pt(o)==="object"&&o.delay?o.delay||!0:!!o;k.exports.useEffect(function(){var me=null;return typeof H=="number"?me=window.setTimeout(function(){me=null,j(H)},H):j(H),function(){me&&(window.clearTimeout(me),me=null)}},[H]),k.exports.useEffect(F,[L]);var $=function(Q){var he=t.onClick,Fe=t.disabled;if(R||Fe){Q.preventDefault();return}he==null||he(Q)};su(!(typeof v=="string"&&v.length>2),"Button","`icon` is using ReactNode instead of string naming in v4. Please check `".concat(v,"` at https://ant.design/components/icon")),su(!(p&&Ws(l)),"Button","`link` or `text` button can't be a `ghost` button.");var G=W("btn",a),b=E!==!1,ee={large:"lg",small:"sm",middle:void 0},q=f||P,te=q&&ee[q]||"",ie=R?"loading":v,ue=Ht(G,(i={},ve(i,"".concat(G,"-").concat(c),c!=="default"&&c),ve(i,"".concat(G,"-").concat(l),l),ve(i,"".concat(G,"-").concat(te),te),ve(i,"".concat(G,"-icon-only"),!g&&g!==0&&!!ie),ve(i,"".concat(G,"-background-ghost"),p&&!Ws(l)),ve(i,"".concat(G,"-loading"),R),ve(i,"".concat(G,"-two-chinese-chars"),D&&b),ve(i,"".concat(G,"-block"),_),ve(i,"".concat(G,"-dangerous"),!!u),ve(i,"".concat(G,"-rtl"),T==="rtl"),i),d),re=v&&!R?v:k.exports.createElement(T2,{existIcon:!!v,prefixCls:G,loading:!!R}),xe=g||g===0?O2(g,V()&&b):null,Ce=U0(w,["navigate"]);if(Ce.href!==void 0)return k.exports.createElement("a",ge({},Ce,{className:ue,onClick:$,ref:L}),re,xe);var ae=k.exports.createElement("button",ge({},w,{type:C,className:ue,onClick:$,ref:L}),re,xe);return Ws(l)?ae:k.exports.createElement(zg,{disabled:!!R},ae)},ih=k.exports.forwardRef(L2);ih.displayName="Button";ih.Group=P2;ih.__ANT_BUTTON=!0;var uL=ih,oh={exports:{}},ah={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D2=k.exports,I2=Symbol.for("react.element"),F2=Symbol.for("react.fragment"),N2=Object.prototype.hasOwnProperty,z2=D2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,j2={key:!0,ref:!0,__self:!0,__source:!0};function m1(r,t,n){var i,e={},o=null,a=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(a=t.ref);for(i in t)N2.call(t,i)&&!j2.hasOwnProperty(i)&&(e[i]=t[i]);if(r&&r.defaultProps)for(i in t=r.defaultProps,t)e[i]===void 0&&(e[i]=t[i]);return{$$typeof:I2,type:r,key:o,ref:a,props:e,_owner:z2.current}}ah.Fragment=F2;ah.jsx=m1;ah.jsxs=m1;oh.exports=ah;const hL=oh.exports.jsx,cL=oh.exports.jsxs,fL=oh.exports.Fragment;var H2=globalThis&&globalThis.__rest||function(r,t){var n={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.indexOf(i)<0&&(n[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,i=Object.getOwnPropertySymbols(r);e<i.length;e++)t.indexOf(i[e])<0&&Object.prototype.propertyIsEnumerable.call(r,i[e])&&(n[i[e]]=r[i[e]]);return n},V2=function(t){var n,i=t.prefixCls,e=t.className,o=t.checked,a=t.onChange,s=t.onClick,l=H2(t,["prefixCls","className","checked","onChange","onClick"]),u=k.exports.useContext(Dr),h=u.getPrefixCls,c=function(v){a==null||a(!o),s==null||s(v)},f=h("tag",i),d=Ht(f,(n={},ve(n,"".concat(f,"-checkable"),!0),ve(n,"".concat(f,"-checkable-checked"),o),n),e);return k.exports.createElement("span",ge({},l,{className:d,onClick:c}))},$2=V2,G2=globalThis&&globalThis.__rest||function(r,t){var n={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.indexOf(i)<0&&(n[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,i=Object.getOwnPropertySymbols(r);e<i.length;e++)t.indexOf(i[e])<0&&Object.prototype.propertyIsEnumerable.call(r,i[e])&&(n[i[e]]=r[i[e]]);return n},B2=new RegExp("^(".concat(_2.join("|"),")(-inverse)?$")),W2=new RegExp("^(".concat(y2.join("|"),")$")),Z2=function(t,n){var i,e=t.prefixCls,o=t.className,a=t.style,s=t.children,l=t.icon,u=t.color,h=t.onClose,c=t.closeIcon,f=t.closable,d=f===void 0?!1:f,g=G2(t,["prefixCls","className","style","children","icon","color","onClose","closeIcon","closable"]),v=k.exports.useContext(Dr),y=v.getPrefixCls,p=v.direction,m=k.exports.useState(!0),_=qe(m,2),x=_[0],C=_[1];k.exports.useEffect(function(){"visible"in g&&C(g.visible)},[g.visible]);var w=function(){return u?B2.test(u)||W2.test(u):!1},P=ge({backgroundColor:u&&!w()?u:void 0},a),S=w(),M=y("tag",e),R=Ht(M,(i={},ve(i,"".concat(M,"-").concat(u),S),ve(i,"".concat(M,"-has-color"),u&&!S),ve(i,"".concat(M,"-hidden"),!x),ve(i,"".concat(M,"-rtl"),p==="rtl"),i),o),j=function(T){T.stopPropagation(),h==null||h(T),!T.defaultPrevented&&("visible"in g||C(!1))},A=function(){return d?c?k.exports.createElement("span",{className:"".concat(M,"-close-icon"),onClick:j},c):k.exports.createElement(Qx,{className:"".concat(M,"-close-icon"),onClick:j}):null},z="onClick"in g||s&&s.type==="a",D=U0(g,["visible"]),I=l||null,B=I?k.exports.createElement(k.exports.Fragment,null,I,k.exports.createElement("span",null,s)):s,W=k.exports.createElement("span",ge({},D,{ref:n,className:R,style:P}),B,A());return z?k.exports.createElement(zg,null,W):W},jg=k.exports.forwardRef(Z2);jg.displayName="Tag";jg.CheckableTag=$2;var dL=jg,Hg={exports:{}},Ae={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sh=60103,lh=60106,es=60107,ts=60108,rs=60114,ns=60109,is=60110,os=60112,as=60113,Vg=60120,ss=60115,ls=60116,y1=60121,_1=60122,x1=60117,w1=60129,C1=60131;if(typeof Symbol=="function"&&Symbol.for){var ht=Symbol.for;sh=ht("react.element"),lh=ht("react.portal"),es=ht("react.fragment"),ts=ht("react.strict_mode"),rs=ht("react.profiler"),ns=ht("react.provider"),is=ht("react.context"),os=ht("react.forward_ref"),as=ht("react.suspense"),Vg=ht("react.suspense_list"),ss=ht("react.memo"),ls=ht("react.lazy"),y1=ht("react.block"),_1=ht("react.server.block"),x1=ht("react.fundamental"),w1=ht("react.debug_trace_mode"),C1=ht("react.legacy_hidden")}function xr(r){if(typeof r=="object"&&r!==null){var t=r.$$typeof;switch(t){case sh:switch(r=r.type,r){case es:case rs:case ts:case as:case Vg:return r;default:switch(r=r&&r.$$typeof,r){case is:case os:case ls:case ss:case ns:return r;default:return t}}case lh:return t}}}var U2=ns,q2=sh,Y2=os,J2=es,X2=ls,K2=ss,Q2=lh,ek=rs,tk=ts,rk=as;Ae.ContextConsumer=is;Ae.ContextProvider=U2;Ae.Element=q2;Ae.ForwardRef=Y2;Ae.Fragment=J2;Ae.Lazy=X2;Ae.Memo=K2;Ae.Portal=Q2;Ae.Profiler=ek;Ae.StrictMode=tk;Ae.Suspense=rk;Ae.isAsyncMode=function(){return!1};Ae.isConcurrentMode=function(){return!1};Ae.isContextConsumer=function(r){return xr(r)===is};Ae.isContextProvider=function(r){return xr(r)===ns};Ae.isElement=function(r){return typeof r=="object"&&r!==null&&r.$$typeof===sh};Ae.isForwardRef=function(r){return xr(r)===os};Ae.isFragment=function(r){return xr(r)===es};Ae.isLazy=function(r){return xr(r)===ls};Ae.isMemo=function(r){return xr(r)===ss};Ae.isPortal=function(r){return xr(r)===lh};Ae.isProfiler=function(r){return xr(r)===rs};Ae.isStrictMode=function(r){return xr(r)===ts};Ae.isSuspense=function(r){return xr(r)===as};Ae.isValidElementType=function(r){return typeof r=="string"||typeof r=="function"||r===es||r===rs||r===w1||r===ts||r===as||r===Vg||r===C1||typeof r=="object"&&r!==null&&(r.$$typeof===ls||r.$$typeof===ss||r.$$typeof===ns||r.$$typeof===is||r.$$typeof===os||r.$$typeof===x1||r.$$typeof===y1||r[0]===_1)};Ae.typeOf=xr;Hg.exports=Ae;function nk(r){function t(F,H,$,G,b){for(var ee=0,q=0,te=0,ie=0,ue,re,xe=0,Ce=0,ae,me=ae=ue=0,Q=0,he=0,Fe=0,Qe=0,ui=$.length,Cr=ui-1,mt,ce="",ze="",Fn="",Nn="",Ot;Q<ui;){if(re=$.charCodeAt(Q),Q===Cr&&q+ie+te+ee!==0&&(q!==0&&(re=q===47?10:47),ie=te=ee=0,ui++,Cr++),q+ie+te+ee===0){if(Q===Cr&&(0<he&&(ce=ce.replace(f,"")),0<ce.trim().length)){switch(re){case 32:case 9:case 59:case 13:case 10:break;default:ce+=$.charAt(Q)}re=59}switch(re){case 123:for(ce=ce.trim(),ue=ce.charCodeAt(0),ae=1,Qe=++Q;Q<ui;){switch(re=$.charCodeAt(Q)){case 123:ae++;break;case 125:ae--;break;case 47:switch(re=$.charCodeAt(Q+1)){case 42:case 47:e:{for(me=Q+1;me<Cr;++me)switch($.charCodeAt(me)){case 47:if(re===42&&$.charCodeAt(me-1)===42&&Q+2!==me){Q=me+1;break e}break;case 10:if(re===47){Q=me+1;break e}}Q=me}}break;case 91:re++;case 40:re++;case 34:case 39:for(;Q++<Cr&&$.charCodeAt(Q)!==re;);}if(ae===0)break;Q++}switch(ae=$.substring(Qe,Q),ue===0&&(ue=(ce=ce.replace(c,"").trim()).charCodeAt(0)),ue){case 64:switch(0<he&&(ce=ce.replace(f,"")),re=ce.charCodeAt(1),re){case 100:case 109:case 115:case 45:he=H;break;default:he=B}if(ae=t(H,he,ae,re,b+1),Qe=ae.length,0<E&&(he=n(B,ce,Fe),Ot=s(3,ae,he,H,z,A,Qe,re,b,G),ce=he.join(""),Ot!==void 0&&(Qe=(ae=Ot.trim()).length)===0&&(re=0,ae="")),0<Qe)switch(re){case 115:ce=ce.replace(w,a);case 100:case 109:case 45:ae=ce+"{"+ae+"}";break;case 107:ce=ce.replace(m,"$1 $2"),ae=ce+"{"+ae+"}",ae=I===1||I===2&&o("@"+ae,3)?"@-webkit-"+ae+"@"+ae:"@"+ae;break;default:ae=ce+ae,G===112&&(ae=(ze+=ae,""))}else ae="";break;default:ae=t(H,n(H,ce,Fe),ae,G,b+1)}Fn+=ae,ae=Fe=he=me=ue=0,ce="",re=$.charCodeAt(++Q);break;case 125:case 59:if(ce=(0<he?ce.replace(f,""):ce).trim(),1<(Qe=ce.length))switch(me===0&&(ue=ce.charCodeAt(0),ue===45||96<ue&&123>ue)&&(Qe=(ce=ce.replace(" ",":")).length),0<E&&(Ot=s(1,ce,H,F,z,A,ze.length,G,b,G))!==void 0&&(Qe=(ce=Ot.trim()).length)===0&&(ce="\0\0"),ue=ce.charCodeAt(0),re=ce.charCodeAt(1),ue){case 0:break;case 64:if(re===105||re===99){Nn+=ce+$.charAt(Q);break}default:ce.charCodeAt(Qe-1)!==58&&(ze+=e(ce,ue,re,ce.charCodeAt(2)))}Fe=he=me=ue=0,ce="",re=$.charCodeAt(++Q)}}switch(re){case 13:case 10:q===47?q=0:1+ue===0&&G!==107&&0<ce.length&&(he=1,ce+="\0"),0<E*L&&s(0,ce,H,F,z,A,ze.length,G,b,G),A=1,z++;break;case 59:case 125:if(q+ie+te+ee===0){A++;break}default:switch(A++,mt=$.charAt(Q),re){case 9:case 32:if(ie+ee+q===0)switch(xe){case 44:case 58:case 9:case 32:mt="";break;default:re!==32&&(mt=" ")}break;case 0:mt="\\0";break;case 12:mt="\\f";break;case 11:mt="\\v";break;case 38:ie+q+ee===0&&(he=Fe=1,mt="\f"+mt);break;case 108:if(ie+q+ee+D===0&&0<me)switch(Q-me){case 2:xe===112&&$.charCodeAt(Q-3)===58&&(D=xe);case 8:Ce===111&&(D=Ce)}break;case 58:ie+q+ee===0&&(me=Q);break;case 44:q+te+ie+ee===0&&(he=1,mt+="\r");break;case 34:case 39:q===0&&(ie=ie===re?0:ie===0?re:ie);break;case 91:ie+q+te===0&&ee++;break;case 93:ie+q+te===0&&ee--;break;case 41:ie+q+ee===0&&te--;break;case 40:if(ie+q+ee===0){if(ue===0)switch(2*xe+3*Ce){case 533:break;default:ue=1}te++}break;case 64:q+te+ie+ee+me+ae===0&&(ae=1);break;case 42:case 47:if(!(0<ie+ee+te))switch(q){case 0:switch(2*re+3*$.charCodeAt(Q+1)){case 235:q=47;break;case 220:Qe=Q,q=42}break;case 42:re===47&&xe===42&&Qe+2!==Q&&($.charCodeAt(Qe+2)===33&&(ze+=$.substring(Qe,Q+1)),mt="",q=0)}}q===0&&(ce+=mt)}Ce=xe,xe=re,Q++}if(Qe=ze.length,0<Qe){if(he=H,0<E&&(Ot=s(2,ze,he,F,z,A,Qe,G,b,G),Ot!==void 0&&(ze=Ot).length===0))return Nn+ze+Fn;if(ze=he.join(",")+"{"+ze+"}",I*D!==0){switch(I!==2||o(ze,2)||(D=0),D){case 111:ze=ze.replace(x,":-moz-$1")+ze;break;case 112:ze=ze.replace(_,"::-webkit-input-$1")+ze.replace(_,"::-moz-$1")+ze.replace(_,":-ms-input-$1")+ze}D=0}}return Nn+ze+Fn}function n(F,H,$){var G=H.trim().split(y);H=G;var b=G.length,ee=F.length;switch(ee){case 0:case 1:var q=0;for(F=ee===0?"":F[0]+" ";q<b;++q)H[q]=i(F,H[q],$).trim();break;default:var te=q=0;for(H=[];q<b;++q)for(var ie=0;ie<ee;++ie)H[te++]=i(F[ie]+" ",G[q],$).trim()}return H}function i(F,H,$){var G=H.charCodeAt(0);switch(33>G&&(G=(H=H.trim()).charCodeAt(0)),G){case 38:return H.replace(p,"$1"+F.trim());case 58:return F.trim()+H.replace(p,"$1"+F.trim());default:if(0<1*$&&0<H.indexOf("\f"))return H.replace(p,(F.charCodeAt(0)===58?"":"$1")+F.trim())}return F+H}function e(F,H,$,G){var b=F+";",ee=2*H+3*$+4*G;if(ee===944){F=b.indexOf(":",9)+1;var q=b.substring(F,b.length-1).trim();return q=b.substring(0,F).trim()+q+";",I===1||I===2&&o(q,1)?"-webkit-"+q+q:q}if(I===0||I===2&&!o(b,1))return b;switch(ee){case 1015:return b.charCodeAt(10)===97?"-webkit-"+b+b:b;case 951:return b.charCodeAt(3)===116?"-webkit-"+b+b:b;case 963:return b.charCodeAt(5)===110?"-webkit-"+b+b:b;case 1009:if(b.charCodeAt(4)!==100)break;case 969:case 942:return"-webkit-"+b+b;case 978:return"-webkit-"+b+"-moz-"+b+b;case 1019:case 983:return"-webkit-"+b+"-moz-"+b+"-ms-"+b+b;case 883:if(b.charCodeAt(8)===45)return"-webkit-"+b+b;if(0<b.indexOf("image-set(",11))return b.replace(j,"$1-webkit-$2")+b;break;case 932:if(b.charCodeAt(4)===45)switch(b.charCodeAt(5)){case 103:return"-webkit-box-"+b.replace("-grow","")+"-webkit-"+b+"-ms-"+b.replace("grow","positive")+b;case 115:return"-webkit-"+b+"-ms-"+b.replace("shrink","negative")+b;case 98:return"-webkit-"+b+"-ms-"+b.replace("basis","preferred-size")+b}return"-webkit-"+b+"-ms-"+b+b;case 964:return"-webkit-"+b+"-ms-flex-"+b+b;case 1023:if(b.charCodeAt(8)!==99)break;return q=b.substring(b.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),"-webkit-box-pack"+q+"-webkit-"+b+"-ms-flex-pack"+q+b;case 1005:return g.test(b)?b.replace(d,":-webkit-")+b.replace(d,":-moz-")+b:b;case 1e3:switch(q=b.substring(13).trim(),H=q.indexOf("-")+1,q.charCodeAt(0)+q.charCodeAt(H)){case 226:q=b.replace(C,"tb");break;case 232:q=b.replace(C,"tb-rl");break;case 220:q=b.replace(C,"lr");break;default:return b}return"-webkit-"+b+"-ms-"+q+b;case 1017:if(b.indexOf("sticky",9)===-1)break;case 975:switch(H=(b=F).length-10,q=(b.charCodeAt(H)===33?b.substring(0,H):b).substring(F.indexOf(":",7)+1).trim(),ee=q.charCodeAt(0)+(q.charCodeAt(7)|0)){case 203:if(111>q.charCodeAt(8))break;case 115:b=b.replace(q,"-webkit-"+q)+";"+b;break;case 207:case 102:b=b.replace(q,"-webkit-"+(102<ee?"inline-":"")+"box")+";"+b.replace(q,"-webkit-"+q)+";"+b.replace(q,"-ms-"+q+"box")+";"+b}return b+";";case 938:if(b.charCodeAt(5)===45)switch(b.charCodeAt(6)){case 105:return q=b.replace("-items",""),"-webkit-"+b+"-webkit-box-"+q+"-ms-flex-"+q+b;case 115:return"-webkit-"+b+"-ms-flex-item-"+b.replace(S,"")+b;default:return"-webkit-"+b+"-ms-flex-line-pack"+b.replace("align-content","").replace(S,"")+b}break;case 973:case 989:if(b.charCodeAt(3)!==45||b.charCodeAt(4)===122)break;case 931:case 953:if(R.test(F)===!0)return(q=F.substring(F.indexOf(":")+1)).charCodeAt(0)===115?e(F.replace("stretch","fill-available"),H,$,G).replace(":fill-available",":stretch"):b.replace(q,"-webkit-"+q)+b.replace(q,"-moz-"+q.replace("fill-",""))+b;break;case 962:if(b="-webkit-"+b+(b.charCodeAt(5)===102?"-ms-"+b:"")+b,$+G===211&&b.charCodeAt(13)===105&&0<b.indexOf("transform",10))return b.substring(0,b.indexOf(";",27)+1).replace(v,"$1-webkit-$2")+b}return b}function o(F,H){var $=F.indexOf(H===1?":":"{"),G=F.substring(0,H!==3?$:10);return $=F.substring($+1,F.length-1),T(H!==2?G:G.replace(M,"$1"),$,H)}function a(F,H){var $=e(H,H.charCodeAt(0),H.charCodeAt(1),H.charCodeAt(2));return $!==H+";"?$.replace(P," or ($1)").substring(4):"("+H+")"}function s(F,H,$,G,b,ee,q,te,ie,ue){for(var re=0,xe=H,Ce;re<E;++re)switch(Ce=W[re].call(h,F,xe,$,G,b,ee,q,te,ie,ue)){case void 0:case!1:case!0:case null:break;default:xe=Ce}if(xe!==H)return xe}function l(F){switch(F){case void 0:case null:E=W.length=0;break;default:if(typeof F=="function")W[E++]=F;else if(typeof F=="object")for(var H=0,$=F.length;H<$;++H)l(F[H]);else L=!!F|0}return l}function u(F){return F=F.prefix,F!==void 0&&(T=null,F?typeof F!="function"?I=1:(I=2,T=F):I=0),u}function h(F,H){var $=F;if(33>$.charCodeAt(0)&&($=$.trim()),V=$,$=[V],0<E){var G=s(-1,H,$,$,z,A,0,0,0,0);G!==void 0&&typeof G=="string"&&(H=G)}var b=t(B,$,H,0,0);return 0<E&&(G=s(-2,b,$,$,z,A,b.length,0,0,0),G!==void 0&&(b=G)),V="",D=0,A=z=1,b}var c=/^\0+/g,f=/[\0\r\f]/g,d=/: */g,g=/zoo|gra/,v=/([,: ])(transform)/g,y=/,\r+?/g,p=/([\t\r\n ])*\f?&/g,m=/@(k\w+)\s*(\S*)\s*/,_=/::(place)/g,x=/:(read-only)/g,C=/[svh]\w+-[tblr]{2}/,w=/\(\s*(.*)\s*\)/g,P=/([\s\S]*?);/g,S=/-self|flex-/g,M=/[^]*?(:[rp][el]a[\w-]+)[^]*/,R=/stretch|:\s*\w+\-(?:conte|avail)/,j=/([^-])(image-set\()/,A=1,z=1,D=0,I=1,B=[],W=[],E=0,T=null,L=0,V="";return h.use=l,h.set=u,r!==void 0&&u(r),h}var ik={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function ok(r){var t={};return function(n){return t[n]===void 0&&(t[n]=r(n)),t[n]}}var ak=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|inert|itemProp|itemScope|itemType|itemID|itemRef|on|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,vm=ok(function(r){return ak.test(r)||r.charCodeAt(0)===111&&r.charCodeAt(1)===110&&r.charCodeAt(2)<91}),$g=Vu.exports,sk={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},lk={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},uk={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},P1={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Gg={};Gg[$g.ForwardRef]=uk;Gg[$g.Memo]=P1;function pm(r){return $g.isMemo(r)?P1:Gg[r.$$typeof]||sk}var hk=Object.defineProperty,ck=Object.getOwnPropertyNames,mm=Object.getOwnPropertySymbols,fk=Object.getOwnPropertyDescriptor,dk=Object.getPrototypeOf,ym=Object.prototype;function S1(r,t,n){if(typeof t!="string"){if(ym){var i=dk(t);i&&i!==ym&&S1(r,i,n)}var e=ck(t);mm&&(e=e.concat(mm(t)));for(var o=pm(r),a=pm(t),s=0;s<e.length;++s){var l=e[s];if(!lk[l]&&!(n&&n[l])&&!(a&&a[l])&&!(o&&o[l])){var u=fk(t,l);try{hk(r,l,u)}catch{}}}}return r}var gk=S1;function Wr(){return(Wr=Object.assign||function(r){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r}).apply(this,arguments)}var _m=function(r,t){for(var n=[r[0]],i=0,e=t.length;i<e;i+=1)n.push(t[i],r[i+1]);return n},ld=function(r){return r!==null&&typeof r=="object"&&(r.toString?r.toString():Object.prototype.toString.call(r))==="[object Object]"&&!Hg.exports.typeOf(r)},hu=Object.freeze([]),Pn=Object.freeze({});function Ga(r){return typeof r=="function"}function xm(r){return r.displayName||r.name||"Component"}function Bg(r){return r&&typeof r.styledComponentId=="string"}var co=typeof process!="undefined"&&({}.REACT_APP_SC_ATTR||{}.SC_ATTR)||"data-styled",Wg=typeof window!="undefined"&&"HTMLElement"in window,vk=Boolean(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process!="undefined"&&{}.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&{}.REACT_APP_SC_DISABLE_SPEEDY!==""?{}.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&{}.REACT_APP_SC_DISABLE_SPEEDY:typeof process!="undefined"&&{}.SC_DISABLE_SPEEDY!==void 0&&{}.SC_DISABLE_SPEEDY!==""?{}.SC_DISABLE_SPEEDY!=="false"&&{}.SC_DISABLE_SPEEDY:!1);function us(r){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];throw new Error("An error occurred. See https://git.io/JUIaE#"+r+" for more information."+(n.length>0?" Args: "+n.join(", "):""))}var pk=function(){function r(n){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=n}var t=r.prototype;return t.indexOfGroup=function(n){for(var i=0,e=0;e<n;e++)i+=this.groupSizes[e];return i},t.insertRules=function(n,i){if(n>=this.groupSizes.length){for(var e=this.groupSizes,o=e.length,a=o;n>=a;)(a<<=1)<0&&us(16,""+n);this.groupSizes=new Uint32Array(a),this.groupSizes.set(e),this.length=a;for(var s=o;s<a;s++)this.groupSizes[s]=0}for(var l=this.indexOfGroup(n+1),u=0,h=i.length;u<h;u++)this.tag.insertRule(l,i[u])&&(this.groupSizes[n]++,l++)},t.clearGroup=function(n){if(n<this.length){var i=this.groupSizes[n],e=this.indexOfGroup(n),o=e+i;this.groupSizes[n]=0;for(var a=e;a<o;a++)this.tag.deleteRule(e)}},t.getGroup=function(n){var i="";if(n>=this.length||this.groupSizes[n]===0)return i;for(var e=this.groupSizes[n],o=this.indexOfGroup(n),a=o+e,s=o;s<a;s++)i+=this.tag.getRule(s)+`/*!sc*/
`;return i},r}(),kl=new Map,cu=new Map,_a=1,Zs=function(r){if(kl.has(r))return kl.get(r);for(;cu.has(_a);)_a++;var t=_a++;return kl.set(r,t),cu.set(t,r),t},mk=function(r){return cu.get(r)},yk=function(r,t){t>=_a&&(_a=t+1),kl.set(r,t),cu.set(t,r)},_k="style["+co+'][data-styled-version="5.3.3"]',xk=new RegExp("^"+co+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),wk=function(r,t,n){for(var i,e=n.split(","),o=0,a=e.length;o<a;o++)(i=e[o])&&r.registerName(t,i)},Ck=function(r,t){for(var n=(t.textContent||"").split(`/*!sc*/
`),i=[],e=0,o=n.length;e<o;e++){var a=n[e].trim();if(a){var s=a.match(xk);if(s){var l=0|parseInt(s[1],10),u=s[2];l!==0&&(yk(u,l),wk(r,u,s[3]),r.getTag().insertRules(l,i)),i.length=0}else i.push(a)}}},Pk=function(){return typeof window!="undefined"&&window.__webpack_nonce__!==void 0?window.__webpack_nonce__:null},E1=function(r){var t=document.head,n=r||t,i=document.createElement("style"),e=function(s){for(var l=s.childNodes,u=l.length;u>=0;u--){var h=l[u];if(h&&h.nodeType===1&&h.hasAttribute(co))return h}}(n),o=e!==void 0?e.nextSibling:null;i.setAttribute(co,"active"),i.setAttribute("data-styled-version","5.3.3");var a=Pk();return a&&i.setAttribute("nonce",a),n.insertBefore(i,o),i},Sk=function(){function r(n){var i=this.element=E1(n);i.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var o=document.styleSheets,a=0,s=o.length;a<s;a++){var l=o[a];if(l.ownerNode===e)return l}us(17)}(i),this.length=0}var t=r.prototype;return t.insertRule=function(n,i){try{return this.sheet.insertRule(i,n),this.length++,!0}catch{return!1}},t.deleteRule=function(n){this.sheet.deleteRule(n),this.length--},t.getRule=function(n){var i=this.sheet.cssRules[n];return i!==void 0&&typeof i.cssText=="string"?i.cssText:""},r}(),Ek=function(){function r(n){var i=this.element=E1(n);this.nodes=i.childNodes,this.length=0}var t=r.prototype;return t.insertRule=function(n,i){if(n<=this.length&&n>=0){var e=document.createTextNode(i),o=this.nodes[n];return this.element.insertBefore(e,o||null),this.length++,!0}return!1},t.deleteRule=function(n){this.element.removeChild(this.nodes[n]),this.length--},t.getRule=function(n){return n<this.length?this.nodes[n].textContent:""},r}(),Mk=function(){function r(n){this.rules=[],this.length=0}var t=r.prototype;return t.insertRule=function(n,i){return n<=this.length&&(this.rules.splice(n,0,i),this.length++,!0)},t.deleteRule=function(n){this.rules.splice(n,1),this.length--},t.getRule=function(n){return n<this.length?this.rules[n]:""},r}(),wm=Wg,Tk={isServer:!Wg,useCSSOMInjection:!vk},M1=function(){function r(n,i,e){n===void 0&&(n=Pn),i===void 0&&(i={}),this.options=Wr({},Tk,{},n),this.gs=i,this.names=new Map(e),this.server=!!n.isServer,!this.server&&Wg&&wm&&(wm=!1,function(o){for(var a=document.querySelectorAll(_k),s=0,l=a.length;s<l;s++){var u=a[s];u&&u.getAttribute(co)!=="active"&&(Ck(o,u),u.parentNode&&u.parentNode.removeChild(u))}}(this))}r.registerId=function(n){return Zs(n)};var t=r.prototype;return t.reconstructWithOptions=function(n,i){return i===void 0&&(i=!0),new r(Wr({},this.options,{},n),this.gs,i&&this.names||void 0)},t.allocateGSInstance=function(n){return this.gs[n]=(this.gs[n]||0)+1},t.getTag=function(){return this.tag||(this.tag=(e=(i=this.options).isServer,o=i.useCSSOMInjection,a=i.target,n=e?new Mk(a):o?new Sk(a):new Ek(a),new pk(n)));var n,i,e,o,a},t.hasNameForId=function(n,i){return this.names.has(n)&&this.names.get(n).has(i)},t.registerName=function(n,i){if(Zs(n),this.names.has(n))this.names.get(n).add(i);else{var e=new Set;e.add(i),this.names.set(n,e)}},t.insertRules=function(n,i,e){this.registerName(n,i),this.getTag().insertRules(Zs(n),e)},t.clearNames=function(n){this.names.has(n)&&this.names.get(n).clear()},t.clearRules=function(n){this.getTag().clearGroup(Zs(n)),this.clearNames(n)},t.clearTag=function(){this.tag=void 0},t.toString=function(){return function(n){for(var i=n.getTag(),e=i.length,o="",a=0;a<e;a++){var s=mk(a);if(s!==void 0){var l=n.names.get(s),u=i.getGroup(a);if(l&&u&&l.size){var h=co+".g"+a+'[id="'+s+'"]',c="";l!==void 0&&l.forEach(function(f){f.length>0&&(c+=f+",")}),o+=""+u+h+'{content:"'+c+`"}/*!sc*/
`}}}return o}(this)},r}(),kk=/(a)(d)/gi,Cm=function(r){return String.fromCharCode(r+(r>25?39:97))};function ud(r){var t,n="";for(t=Math.abs(r);t>52;t=t/52|0)n=Cm(t%52)+n;return(Cm(t%52)+n).replace(kk,"$1-$2")}var Ni=function(r,t){for(var n=t.length;n;)r=33*r^t.charCodeAt(--n);return r},T1=function(r){return Ni(5381,r)};function bk(r){for(var t=0;t<r.length;t+=1){var n=r[t];if(Ga(n)&&!Bg(n))return!1}return!0}var Rk=T1("5.3.3"),Ak=function(){function r(t,n,i){this.rules=t,this.staticRulesId="",this.isStatic=(i===void 0||i.isStatic)&&bk(t),this.componentId=n,this.baseHash=Ni(Rk,n),this.baseStyle=i,M1.registerId(n)}return r.prototype.generateAndInjectStyles=function(t,n,i){var e=this.componentId,o=[];if(this.baseStyle&&o.push(this.baseStyle.generateAndInjectStyles(t,n,i)),this.isStatic&&!i.hash)if(this.staticRulesId&&n.hasNameForId(e,this.staticRulesId))o.push(this.staticRulesId);else{var a=fo(this.rules,t,n,i).join(""),s=ud(Ni(this.baseHash,a)>>>0);if(!n.hasNameForId(e,s)){var l=i(a,"."+s,void 0,e);n.insertRules(e,s,l)}o.push(s),this.staticRulesId=s}else{for(var u=this.rules.length,h=Ni(this.baseHash,i.hash),c="",f=0;f<u;f++){var d=this.rules[f];if(typeof d=="string")c+=d;else if(d){var g=fo(d,t,n,i),v=Array.isArray(g)?g.join(""):g;h=Ni(h,v+f),c+=v}}if(c){var y=ud(h>>>0);if(!n.hasNameForId(e,y)){var p=i(c,"."+y,void 0,e);n.insertRules(e,y,p)}o.push(y)}}return o.join(" ")},r}(),Ok=/^\s*\/\/.*$/gm,Lk=[":","[",".","#"];function Dk(r){var t,n,i,e,o=r===void 0?Pn:r,a=o.options,s=a===void 0?Pn:a,l=o.plugins,u=l===void 0?hu:l,h=new nk(s),c=[],f=function(v){function y(p){if(p)try{v(p+"}")}catch{}}return function(p,m,_,x,C,w,P,S,M,R){switch(p){case 1:if(M===0&&m.charCodeAt(0)===64)return v(m+";"),"";break;case 2:if(S===0)return m+"/*|*/";break;case 3:switch(S){case 102:case 112:return v(_[0]+m),"";default:return m+(R===0?"/*|*/":"")}case-2:m.split("/*|*/}").forEach(y)}}}(function(v){c.push(v)}),d=function(v,y,p){return y===0&&Lk.indexOf(p[n.length])!==-1||p.match(e)?v:"."+t};function g(v,y,p,m){m===void 0&&(m="&");var _=v.replace(Ok,""),x=y&&p?p+" "+y+" { "+_+" }":_;return t=m,n=y,i=new RegExp("\\"+n+"\\b","g"),e=new RegExp("(\\"+n+"\\b){2,}"),h(p||!y?"":y,x)}return h.use([].concat(u,[function(v,y,p){v===2&&p.length&&p[0].lastIndexOf(n)>0&&(p[0]=p[0].replace(i,d))},f,function(v){if(v===-2){var y=c;return c=[],y}}])),g.hash=u.length?u.reduce(function(v,y){return y.name||us(15),Ni(v,y.name)},5381).toString():"",g}var k1=or.createContext();k1.Consumer;var b1=or.createContext(),Ik=(b1.Consumer,new M1),hd=Dk();function Fk(){return k.exports.useContext(k1)||Ik}function Nk(){return k.exports.useContext(b1)||hd}var zk=function(){function r(t,n){var i=this;this.inject=function(e,o){o===void 0&&(o=hd);var a=i.name+o.hash;e.hasNameForId(i.id,a)||e.insertRules(i.id,a,o(i.rules,a,"@keyframes"))},this.toString=function(){return us(12,String(i.name))},this.name=t,this.id="sc-keyframes-"+t,this.rules=n}return r.prototype.getName=function(t){return t===void 0&&(t=hd),this.name+t.hash},r}(),jk=/([A-Z])/,Hk=/([A-Z])/g,Vk=/^ms-/,$k=function(r){return"-"+r.toLowerCase()};function Pm(r){return jk.test(r)?r.replace(Hk,$k).replace(Vk,"-ms-"):r}var Sm=function(r){return r==null||r===!1||r===""};function fo(r,t,n,i){if(Array.isArray(r)){for(var e,o=[],a=0,s=r.length;a<s;a+=1)(e=fo(r[a],t,n,i))!==""&&(Array.isArray(e)?o.push.apply(o,e):o.push(e));return o}if(Sm(r))return"";if(Bg(r))return"."+r.styledComponentId;if(Ga(r)){if(typeof(u=r)!="function"||u.prototype&&u.prototype.isReactComponent||!t)return r;var l=r(t);return fo(l,t,n,i)}var u;return r instanceof zk?n?(r.inject(n,i),r.getName(i)):r:ld(r)?function h(c,f){var d,g,v=[];for(var y in c)c.hasOwnProperty(y)&&!Sm(c[y])&&(Array.isArray(c[y])&&c[y].isCss||Ga(c[y])?v.push(Pm(y)+":",c[y],";"):ld(c[y])?v.push.apply(v,h(c[y],y)):v.push(Pm(y)+": "+(d=y,(g=c[y])==null||typeof g=="boolean"||g===""?"":typeof g!="number"||g===0||d in ik?String(g).trim():g+"px")+";"));return f?[f+" {"].concat(v,["}"]):v}(r):r.toString()}var Em=function(r){return Array.isArray(r)&&(r.isCss=!0),r};function Gk(r){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return Ga(r)||ld(r)?Em(fo(_m(hu,[r].concat(n)))):n.length===0&&r.length===1&&typeof r[0]=="string"?r:Em(fo(_m(r,n)))}var Bk=function(r,t,n){return n===void 0&&(n=Pn),r.theme!==n.theme&&r.theme||t||n.theme},Wk=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,Zk=/(^-|-$)/g;function tc(r){return r.replace(Wk,"-").replace(Zk,"")}var Uk=function(r){return ud(T1(r)>>>0)};function Us(r){return typeof r=="string"&&!0}var cd=function(r){return typeof r=="function"||typeof r=="object"&&r!==null&&!Array.isArray(r)},qk=function(r){return r!=="__proto__"&&r!=="constructor"&&r!=="prototype"};function Yk(r,t,n){var i=r[n];cd(t)&&cd(i)?R1(i,t):r[n]=t}function R1(r){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var e=0,o=n;e<o.length;e++){var a=o[e];if(cd(a))for(var s in a)qk(s)&&Yk(r,a[s],s)}return r}var A1=or.createContext();A1.Consumer;var rc={};function O1(r,t,n){var i=Bg(r),e=!Us(r),o=t.attrs,a=o===void 0?hu:o,s=t.componentId,l=s===void 0?function(m,_){var x=typeof m!="string"?"sc":tc(m);rc[x]=(rc[x]||0)+1;var C=x+"-"+Uk("5.3.3"+x+rc[x]);return _?_+"-"+C:C}(t.displayName,t.parentComponentId):s,u=t.displayName,h=u===void 0?function(m){return Us(m)?"styled."+m:"Styled("+xm(m)+")"}(r):u,c=t.displayName&&t.componentId?tc(t.displayName)+"-"+t.componentId:t.componentId||l,f=i&&r.attrs?Array.prototype.concat(r.attrs,a).filter(Boolean):a,d=t.shouldForwardProp;i&&r.shouldForwardProp&&(d=t.shouldForwardProp?function(m,_,x){return r.shouldForwardProp(m,_,x)&&t.shouldForwardProp(m,_,x)}:r.shouldForwardProp);var g,v=new Ak(n,c,i?r.componentStyle:void 0),y=v.isStatic&&a.length===0,p=function(m,_){return function(x,C,w,P){var S=x.attrs,M=x.componentStyle,R=x.defaultProps,j=x.foldedComponentIds,A=x.shouldForwardProp,z=x.styledComponentId,D=x.target,I=function(G,b,ee){G===void 0&&(G=Pn);var q=Wr({},b,{theme:G}),te={};return ee.forEach(function(ie){var ue,re,xe,Ce=ie;for(ue in Ga(Ce)&&(Ce=Ce(q)),Ce)q[ue]=te[ue]=ue==="className"?(re=te[ue],xe=Ce[ue],re&&xe?re+" "+xe:re||xe):Ce[ue]}),[q,te]}(Bk(C,k.exports.useContext(A1),R)||Pn,C,S),B=I[0],W=I[1],E=function(G,b,ee,q){var te=Fk(),ie=Nk(),ue=b?G.generateAndInjectStyles(Pn,te,ie):G.generateAndInjectStyles(ee,te,ie);return ue}(M,P,B),T=w,L=W.$as||C.$as||W.as||C.as||D,V=Us(L),F=W!==C?Wr({},C,{},W):C,H={};for(var $ in F)$[0]!=="$"&&$!=="as"&&($==="forwardedAs"?H.as=F[$]:(A?A($,vm,L):!V||vm($))&&(H[$]=F[$]));return C.style&&W.style!==C.style&&(H.style=Wr({},C.style,{},W.style)),H.className=Array.prototype.concat(j,z,E!==z?E:null,C.className,W.className).filter(Boolean).join(" "),H.ref=T,k.exports.createElement(L,H)}(g,m,_,y)};return p.displayName=h,(g=or.forwardRef(p)).attrs=f,g.componentStyle=v,g.displayName=h,g.shouldForwardProp=d,g.foldedComponentIds=i?Array.prototype.concat(r.foldedComponentIds,r.styledComponentId):hu,g.styledComponentId=c,g.target=i?r.target:r,g.withComponent=function(m){var _=t.componentId,x=function(w,P){if(w==null)return{};var S,M,R={},j=Object.keys(w);for(M=0;M<j.length;M++)S=j[M],P.indexOf(S)>=0||(R[S]=w[S]);return R}(t,["componentId"]),C=_&&_+"-"+(Us(m)?m:tc(xm(m)));return O1(m,Wr({},x,{attrs:f,componentId:C}),n)},Object.defineProperty(g,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(m){this._foldedDefaultProps=i?R1({},r.defaultProps,m):m}}),g.toString=function(){return"."+g.styledComponentId},e&&gk(g,r,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),g}var fd=function(r){return function t(n,i,e){if(e===void 0&&(e=Pn),!Hg.exports.isValidElementType(i))return us(1,String(i));var o=function(){return n(i,e,Gk.apply(void 0,arguments))};return o.withConfig=function(a){return t(n,i,Wr({},e,{},a))},o.attrs=function(a){return t(n,i,Wr({},e,{attrs:Array.prototype.concat(e.attrs,a).filter(Boolean)}))},o}(O1,r)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach(function(r){fd[r]=fd(r)});var gL=fd,L1={exports:{}};(function(r){(function(t){var n,i,e="fulfilled",o="undefined",a=function(){var h=[],c=0;function f(){for(;h.length-c;){try{h[c]()}catch(g){t.console&&t.console.error(g)}h[c++]=i,c==1024&&(h.splice(0,1024),c=0)}}var d=function(){if(typeof MutationObserver===o)return typeof process!==o&&typeof process.nextTick=="function"?function(){process.nextTick(f)}:typeof setImmediate!==o?function(){setImmediate(f)}:function(){setTimeout(f,0)};var g=document.createElement("div");return new MutationObserver(f).observe(g,{attributes:!0}),function(){g.setAttribute("a",0)}}();return function(g){h.push(g),h.length-c==1&&d()}}();function s(h){if(!(this instanceof s))throw new TypeError("Zousan must be created with the new keyword");if(typeof h=="function"){var c=this;try{h(function(f){c.resolve(f)},function(f){c.reject(f)})}catch(f){c.reject(f)}}else if(0<arguments.length)throw new TypeError("Zousan resolver "+h+" is not a function")}function l(h,c){if(typeof h.y=="function")try{var f=h.y.call(i,c);h.p.resolve(f)}catch(d){h.p.reject(d)}else h.p.resolve(c)}function u(h,c){if(typeof h.n=="function")try{var f=h.n.call(i,c);h.p.resolve(f)}catch(d){h.p.reject(d)}else h.p.reject(c)}s.prototype={resolve:function(h){if(this.state===n){if(h===this)return this.reject(new TypeError("Attempt to resolve promise with self"));var c=this;if(h&&(typeof h=="function"||typeof h=="object"))try{var f=!0,d=h.then;if(typeof d=="function")return void d.call(h,function(g){f&&(f=!1,c.resolve(g))},function(g){f&&(f=!1,c.reject(g))})}catch(g){return void(f&&this.reject(g))}this.state=e,this.v=h,c.c&&a(function(){for(var g=0,v=c.c.length;g<v;g++)l(c.c[g],h)})}},reject:function(h){if(this.state===n){var c=this;this.state="rejected",this.v=h;var f=this.c;a(f?function(){for(var d=0,g=f.length;d<g;d++)u(f[d],h)}:function(){c.handled||!s.suppressUncaughtRejectionError&&t.console&&s.warn("You upset Zousan. Please catch rejections: ",h,h?h.stack:null)})}},then:function(h,c){var f=new s,d={y:h,n:c,p:f};if(this.state===n)this.c?this.c.push(d):this.c=[d];else{var g=this.state,v=this.v;this.handled=!0,a(function(){g===e?l(d,v):u(d,v)})}return f},catch:function(h){return this.then(null,h)},finally:function(h){return this.then(h,h)},timeout:function(h,c){c=c||"Timeout";var f=this;return new s(function(d,g){setTimeout(function(){g(Error(c))},h),f.then(function(v){d(v)},function(v){g(v)})})}},s.resolve=function(h){var c=new s;return c.resolve(h),c},s.reject=function(h){var c=new s;return c.c=[],c.reject(h),c},s.all=function(h){var c=[],f=0,d=new s;function g(y,p){y&&typeof y.then=="function"||(y=s.resolve(y)),y.then(function(m){c[p]=m,++f==h.length&&d.resolve(c)},function(m){d.reject(m)})}for(var v=0;v<h.length;v++)g(h[v],v);return h.length||d.resolve(c),d},s.warn=console.warn,r.exports&&(r.exports=s),t.define&&t.define.amd&&t.define([],function(){return s}),(t.Zousan=s).soon=a})(fl)})(L1);var Jk=L1.exports,Zg={exports:{}},D1={exports:{}};(function(r,t){(function(n,i){r.exports=i()})(fl,function(){function n(a,s,l,u,h){i(a,s,l||0,u||a.length-1,h||o)}function i(a,s,l,u,h){for(;u>l;){if(u-l>600){var c=u-l+1,f=s-l+1,d=Math.log(c),g=.5*Math.exp(2*d/3),v=.5*Math.sqrt(d*g*(c-g)/c)*(f-c/2<0?-1:1),y=Math.max(l,Math.floor(s-f*g/c+v)),p=Math.min(u,Math.floor(s+(c-f)*g/c+v));i(a,s,y,p,h)}var m=a[s],_=l,x=u;for(e(a,l,s),h(a[u],m)>0&&e(a,l,u);_<x;){for(e(a,_,x),_++,x--;h(a[_],m)<0;)_++;for(;h(a[x],m)>0;)x--}h(a[l],m)===0?e(a,l,x):(x++,e(a,x,u)),x<=s&&(l=x+1),s<=x&&(u=x-1)}}function e(a,s,l){var u=a[s];a[s]=a[l],a[l]=u}function o(a,s){return a<s?-1:a>s?1:0}return n})})(D1);Zg.exports=Ba;Zg.exports.default=Ba;var Xk=D1.exports;function Ba(r,t){if(!(this instanceof Ba))return new Ba(r,t);this._maxEntries=Math.max(4,r||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),t&&this._initFormat(t),this.clear()}Ba.prototype={all:function(){return this._all(this.data,[])},search:function(r){var t=this.data,n=[],i=this.toBBox;if(!Ys(r,t))return n;for(var e=[],o,a,s,l;t;){for(o=0,a=t.children.length;o<a;o++)s=t.children[o],l=t.leaf?i(s):s,Ys(r,l)&&(t.leaf?n.push(s):ic(r,l)?this._all(s,n):e.push(s));t=e.pop()}return n},collides:function(r){var t=this.data,n=this.toBBox;if(!Ys(r,t))return!1;for(var i=[],e,o,a,s;t;){for(e=0,o=t.children.length;e<o;e++)if(a=t.children[e],s=t.leaf?n(a):a,Ys(r,s)){if(t.leaf||ic(r,s))return!0;i.push(a)}t=i.pop()}return!1},load:function(r){if(!(r&&r.length))return this;if(r.length<this._minEntries){for(var t=0,n=r.length;t<n;t++)this.insert(r[t]);return this}var i=this._build(r.slice(),0,r.length-1,0);if(!this.data.children.length)this.data=i;else if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var e=this.data;this.data=i,i=e}this._insert(i,this.data.height-i.height-1,!0)}return this},insert:function(r){return r&&this._insert(r,this.data.height-1),this},clear:function(){return this.data=xi([]),this},remove:function(r,t){if(!r)return this;for(var n=this.data,i=this.toBBox(r),e=[],o=[],a,s,l,u;n||e.length;){if(n||(n=e.pop(),s=e[e.length-1],a=o.pop(),u=!0),n.leaf&&(l=Kk(r,n.children,t),l!==-1))return n.children.splice(l,1),e.push(n),this._condense(e),this;!u&&!n.leaf&&ic(n,i)?(e.push(n),o.push(a),a=0,s=n,n=n.children[0]):s?(a++,n=s.children[a],u=!1):n=null}return this},toBBox:function(r){return r},compareMinX:Mm,compareMinY:Tm,toJSON:function(){return this.data},fromJSON:function(r){return this.data=r,this},_all:function(r,t){for(var n=[];r;)r.leaf?t.push.apply(t,r.children):n.push.apply(n,r.children),r=n.pop();return t},_build:function(r,t,n,i){var e=n-t+1,o=this._maxEntries,a;if(e<=o)return a=xi(r.slice(t,n+1)),di(a,this.toBBox),a;i||(i=Math.ceil(Math.log(e)/Math.log(o)),o=Math.ceil(e/Math.pow(o,i-1))),a=xi([]),a.leaf=!1,a.height=i;var s=Math.ceil(e/o),l=s*Math.ceil(Math.sqrt(o)),u,h,c,f;for(km(r,t,n,l,this.compareMinX),u=t;u<=n;u+=l)for(c=Math.min(u+l-1,n),km(r,u,c,s,this.compareMinY),h=u;h<=c;h+=s)f=Math.min(h+s-1,c),a.children.push(this._build(r,h,f,i-1));return di(a,this.toBBox),a},_chooseSubtree:function(r,t,n,i){for(var e,o,a,s,l,u,h,c;i.push(t),!(t.leaf||i.length-1===n);){for(h=c=1/0,e=0,o=t.children.length;e<o;e++)a=t.children[e],l=nc(a),u=Qk(r,a)-l,u<c?(c=u,h=l<h?l:h,s=a):u===c&&l<h&&(h=l,s=a);t=s||t.children[0]}return t},_insert:function(r,t,n){var i=this.toBBox,e=n?r:i(r),o=[],a=this._chooseSubtree(e,this.data,t,o);for(a.children.push(r),ia(a,e);t>=0&&o[t].children.length>this._maxEntries;)this._split(o,t),t--;this._adjustParentBBoxes(e,o,t)},_split:function(r,t){var n=r[t],i=n.children.length,e=this._minEntries;this._chooseSplitAxis(n,e,i);var o=this._chooseSplitIndex(n,e,i),a=xi(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,di(n,this.toBBox),di(a,this.toBBox),t?r[t-1].children.push(a):this._splitRoot(n,a)},_splitRoot:function(r,t){this.data=xi([r,t]),this.data.height=r.height+1,this.data.leaf=!1,di(this.data,this.toBBox)},_chooseSplitIndex:function(r,t,n){var i,e,o,a,s,l,u,h;for(l=u=1/0,i=t;i<=n-t;i++)e=na(r,0,i,this.toBBox),o=na(r,i,n,this.toBBox),a=eb(e,o),s=nc(e)+nc(o),a<l?(l=a,h=i,u=s<u?s:u):a===l&&s<u&&(u=s,h=i);return h},_chooseSplitAxis:function(r,t,n){var i=r.leaf?this.compareMinX:Mm,e=r.leaf?this.compareMinY:Tm,o=this._allDistMargin(r,t,n,i),a=this._allDistMargin(r,t,n,e);o<a&&r.children.sort(i)},_allDistMargin:function(r,t,n,i){r.children.sort(i);var e=this.toBBox,o=na(r,0,t,e),a=na(r,n-t,n,e),s=qs(o)+qs(a),l,u;for(l=t;l<n-t;l++)u=r.children[l],ia(o,r.leaf?e(u):u),s+=qs(o);for(l=n-t-1;l>=t;l--)u=r.children[l],ia(a,r.leaf?e(u):u),s+=qs(a);return s},_adjustParentBBoxes:function(r,t,n){for(var i=n;i>=0;i--)ia(t[i],r)},_condense:function(r){for(var t=r.length-1,n;t>=0;t--)r[t].children.length===0?t>0?(n=r[t-1].children,n.splice(n.indexOf(r[t]),1)):this.clear():di(r[t],this.toBBox)},_initFormat:function(r){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(r[0])),this.compareMinY=new Function("a","b",t.join(r[1])),this.toBBox=new Function("a","return {minX: a"+r[0]+", minY: a"+r[1]+", maxX: a"+r[2]+", maxY: a"+r[3]+"};")}};function Kk(r,t,n){if(!n)return t.indexOf(r);for(var i=0;i<t.length;i++)if(n(r,t[i]))return i;return-1}function di(r,t){na(r,0,r.children.length,t,r)}function na(r,t,n,i,e){e||(e=xi(null)),e.minX=1/0,e.minY=1/0,e.maxX=-1/0,e.maxY=-1/0;for(var o=t,a;o<n;o++)a=r.children[o],ia(e,r.leaf?i(a):a);return e}function ia(r,t){return r.minX=Math.min(r.minX,t.minX),r.minY=Math.min(r.minY,t.minY),r.maxX=Math.max(r.maxX,t.maxX),r.maxY=Math.max(r.maxY,t.maxY),r}function Mm(r,t){return r.minX-t.minX}function Tm(r,t){return r.minY-t.minY}function nc(r){return(r.maxX-r.minX)*(r.maxY-r.minY)}function qs(r){return r.maxX-r.minX+(r.maxY-r.minY)}function Qk(r,t){return(Math.max(t.maxX,r.maxX)-Math.min(t.minX,r.minX))*(Math.max(t.maxY,r.maxY)-Math.min(t.minY,r.minY))}function eb(r,t){var n=Math.max(r.minX,t.minX),i=Math.max(r.minY,t.minY),e=Math.min(r.maxX,t.maxX),o=Math.min(r.maxY,t.maxY);return Math.max(0,e-n)*Math.max(0,o-i)}function ic(r,t){return r.minX<=t.minX&&r.minY<=t.minY&&t.maxX<=r.maxX&&t.maxY<=r.maxY}function Ys(r,t){return t.minX<=r.maxX&&t.minY<=r.maxY&&t.maxX>=r.minX&&t.maxY>=r.minY}function xi(r){return{children:r,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function km(r,t,n,i,e){for(var o=[t,n],a;o.length;)n=o.pop(),t=o.pop(),!(n-t<=i)&&(a=t+Math.ceil((n-t)/i/2)*i,Xk(r,a,t,n,e),o.push(t,a,a,n))}var tb=Zg.exports,I1={exports:{}};(function(r){(function(){function t(s,l){var u=s.x-l.x,h=s.y-l.y;return u*u+h*h}function n(s,l,u){var h=l.x,c=l.y,f=u.x-h,d=u.y-c;if(f!==0||d!==0){var g=((s.x-h)*f+(s.y-c)*d)/(f*f+d*d);g>1?(h=u.x,c=u.y):g>0&&(h+=f*g,c+=d*g)}return f=s.x-h,d=s.y-c,f*f+d*d}function i(s,l){for(var u=s[0],h=[u],c,f=1,d=s.length;f<d;f++)c=s[f],t(c,u)>l&&(h.push(c),u=c);return u!==c&&h.push(c),h}function e(s,l,u,h,c){for(var f=h,d,g=l+1;g<u;g++){var v=n(s[g],s[l],s[u]);v>f&&(d=g,f=v)}f>h&&(d-l>1&&e(s,l,d,h,c),c.push(s[d]),u-d>1&&e(s,d,u,h,c))}function o(s,l){var u=s.length-1,h=[s[0]];return e(s,0,u,l,h),h.push(s[u]),h}function a(s,l,u){if(s.length<=2)return s;var h=l!==void 0?l*l:1;return s=u?s:i(s,h),s=o(s,h),s}r.exports=a,r.exports.default=a})()})(I1);var rb=I1.exports;/*!
* Contains code from THREE.js
* MIT License
* https://github.com/mrdoob/three.js
*/var ln=[];for(var oc=0;oc<6;oc++)ln[oc]=[];var Js=[];function ac(r,t,n){nb(r);for(var i=0;i<6;i++)if(!(n&&n.charAt(i)==="0")){var e=ln[i];if(Js[0]=e[0]>0?t[1][0]:t[0][0],Js[1]=e[1]>0?t[1][1]:t[0][1],Js[2]=e[2]>0?t[1][2]:t[0][2],ib(e,Js)<0)return!1}return!0}function nb(r){var t=r,n=t[0],i=t[1],e=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],h=t[8],c=t[9],f=t[10],d=t[11],g=t[12],v=t[13],y=t[14],p=t[15];gi(ln[0],o-n,u-a,d-h,p-g),gi(ln[1],o+n,u+a,d+h,p+g),gi(ln[2],o+i,u+s,d+c,p+v),gi(ln[3],o-i,u-s,d-c,p-v),gi(ln[4],o-e,u-l,d-f,p-y),gi(ln[5],o+e,u+l,d+f,p+y)}var Xs=1/6;function gi(r,t,n,i,e){return r[0]=t*Xs,r[1]=n*Xs,r[2]=i*Xs,r[3]=e*Xs,r}function ib(r,t){return r[0]*t[0]+r[1]*t[1]+r[2]*t[2]+r[3]}/*!
 * maptalks v1.0.0-rc.2
 * LICENSE : BSD-3-Clause
 * (c) 2016-2022 maptalks.org
 */var ob="1.0.0-rc.2",hs="_maptalks__internal_layer_",F1=["MultiPoint","MultiLineString","MultiPolygon","GeometryCollection"],ab=["FeatureCollection","Feature","Point","LineString","Polygon"].concat(F1),N1=["markerFile","polygonPatternFile","linePatternFile","markerFillPatternFile","markerLinePatternFile"],sb=[["markerWidth","markerHeight"],[],[null,"lineWidth"],[],[null,"markerLineWidth"]],lb={lineWidth:1,lineOpacity:1,lineDx:1,lineDy:1,polygonOpacity:1,markerWidth:1,markerHeight:1,markerDx:1,markerDy:1,markerOpacity:1,markerFillOpacity:1,markerLineWidth:1,markerLineOpacity:1,textSize:1,textOpacity:1,textHaloRadius:1,textWrapWidth:1,textLineSpacing:1,textDx:1,textDy:1},ub=["lineColor","polygonFill","markerFill","markerLineColor","textFill"],z1=14;function $e(){return Date.now()}function K(r){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)r[i]=n[i]}return r}function O(r){return r==null}function se(r){return typeof r=="number"&&!isNaN(r)}function un(r){return(r|0)===r}function mr(r){return typeof r=="object"&&!!r}function pe(r){return O(r)?!1:typeof r=="string"||r.constructor!==null&&r.constructor===String}function Re(r){return O(r)?!1:typeof r=="function"||r.constructor!==null&&r.constructor===Function}var hb=Object.prototype.hasOwnProperty;function cs(r,t){return hb.call(r,t)}var j1=Math.PI/180;function ct(r){return r*j1}function cb(r){return r/j1}var it=Object.prototype.toString.call(typeof process!="undefined"?process:0)==="[object process]"&&!process.versions.electron&&!process.versions.nw&&!process.versions["node-webkit"],Pr={},Ks={};function bm(){return window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI}if(!it){var Nr=navigator.userAgent.toLowerCase(),sc=document.documentElement,vi="ActiveXObject"in window,lc=Nr.indexOf("webkit")!==-1,uc=Nr.indexOf("phantom")!==-1,Rm=Nr.search("android [23]")!==-1,hc=Nr.indexOf("chrome")!==-1,Am=Nr.indexOf("gecko")!==-1&&!lc&&!window.opera&&!vi,jo=typeof orientation!="undefined"||Nr.indexOf("mobile")!==-1,Om=!window.PointerEvent&&window.MSPointerEvent,Lm=window.PointerEvent&&navigator.pointerEnabled||Om,Dm=vi&&"transition"in sc.style,cc="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Rm,Im="MozPerspective"in sc.style,Fm="OTransition"in sc.style,fb=(Dm||cc||Im)&&!Fm&&!uc,db=typeof window!="undefined"&&Re(window.createImageBitmap),gb=typeof window!="undefined"&&Re(window.ResizeObserver),vb=typeof window!="undefined"&&Re(window.btoa),Nm=0;hc&&(Nm=Nr.match(/chrome\/([\d.]+)/)[1]);var pb=!uc&&(Lm||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),mb=typeof window!="undefined"&&"WebGLRenderingContext"in window,zm=bm(),fc=!1;try{var yb=new OffscreenCanvas(2,2);yb.getContext("2d"),fc=!0}catch{fc=!1}var jm=!1;try{window.addEventListener("testPassive",function(){},{get passive(){jm=!0}})}catch{}if(Pr={ie:vi,ielt9:vi&&!document.addEventListener,edge:"msLaunchUri"in navigator&&!("documentMode"in document),webkit:lc,gecko:Am,android:Nr.indexOf("android")!==-1,android23:Rm,chrome:hc,chromeVersion:Nm,safari:!hc&&Nr.indexOf("safari")!==-1,phantomjs:uc,ie3d:Dm,webkit3d:cc,gecko3d:Im,opera12:Fm,any3d:fb,mobile:jo,mobileWebkit:jo&&lc,mobileWebkit3d:jo&&cc,mobileOpera:jo&&window.opera,mobileGecko:jo&&Am,touch:!!pb,msPointer:!!Om,pointer:!!Lm,retina:zm>1,devicePixelRatio:zm,language:navigator.browserLanguage?navigator.browserLanguage:navigator.language,ie9:vi&&document.documentMode===9,ie10:vi&&document.documentMode===10,webgl:mb,imageBitMap:db,resizeObserver:gb,btoa:vb,decodeImageInWorker:fc,monitorDPRChange:!0,supportsPassive:jm,removeDPRListening:function(t){t&&delete Ks[t.id]},checkDevicePixelRatio:function(){if(typeof window!="undefined"&&Pr.monitorDPRChange){var t=bm(),n=t!==Pr.devicePixelRatio;return n&&(Pr.devicePixelRatio=t),n}return!1},addDPRListening:function(t){t&&(Ks[t.id]=t)}},typeof window!="undefined"&&window.matchMedia)for(var dc=1;dc<500;dc++){var _b=(dc*.01).toFixed(2);window.matchMedia("screen and (resolution: "+_b+"dppx)").addEventListener("change",Pr.checkDevicePixelRatio)}if(Pr.devicePixelRatio){var gc=Pr.devicePixelRatio;Object.defineProperty(Pr,"devicePixelRatio",{get:function(){return gc},set:function(t){if(t!==gc&&(gc=t,!!Pr.monitorDPRChange))for(var n in Ks){var i=Ks[n];if(!(!i||!i.options||i.options.devicePixelRatio||!i.checkSize||!i.getRenderer)){var e=i.getRenderer();e&&i.checkSize(!0)}}}})}}var ye=Pr;function Y(r,t){r.prototype=Object.create(t.prototype),r.prototype.constructor=r,r.__proto__=t}function Ye(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}var H1=function(){function r(n,i){if(!O(n)&&!O(i)?(this.x=+n,this.y=+i):!O(n.x)&&!O(n.y)?(this.x=+n.x,this.y=+n.y):Array.isArray(n)&&(this.x=+n[0],this.y=+n[1]),this._isNaN())throw new Error("Position is NaN")}var t=r.prototype;return t.set=function(i,e){return this.x=i,this.y=e,this},t.abs=function(){return new this.constructor(Math.abs(this.x),Math.abs(this.y))},t._abs=function(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this},t._round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},t.round=function(){return new this.constructor(Math.round(this.x),Math.round(this.y))},t._ceil=function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},t.ceil=function(){return new this.constructor(Math.ceil(this.x),Math.ceil(this.y))},t.distanceTo=function(i){var e=i.x-this.x,o=i.y-this.y;return Math.sqrt(e*e+o*o)},t.mag=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t._floor=function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},t.floor=function(){return new this.constructor(Math.floor(this.x),Math.floor(this.y))},t.copy=function(){return new this.constructor(this.x,this.y)},t._add=function(i,e){return O(i.x)?O(i[0])?(this.x+=i,this.y+=e):(this.x+=i[0],this.y+=i[1]):(this.x+=i.x,this.y+=i.y),this},t.add=function(i,e){var o,a;return O(i.x)?O(i[0])?(o=this.x+i,a=this.y+e):(o=this.x+i[0],a=this.y+i[1]):(o=this.x+i.x,a=this.y+i.y),new this.constructor(o,a)},t._sub=function(i,e){return O(i.x)?O(i[0])?(this.x-=i,this.y-=e):(this.x-=i[0],this.y-=i[1]):(this.x-=i.x,this.y-=i.y),this},t._substract=function(){return this._sub.apply(this,arguments)},t.sub=function(i,e){var o,a;return O(i.x)?O(i[0])?(o=this.x-i,a=this.y-e):(o=this.x-i[0],a=this.y-i[1]):(o=this.x-i.x,a=this.y-i.y),new this.constructor(o,a)},t.substract=function(){return this.sub.apply(this,arguments)},t.multi=function(i){return new this.constructor(this.x*i,this.y*i)},t._multi=function(i){return this.x*=i,this.y*=i,this},t.div=function(i){return this.multi(1/i)},t._div=function(i){return this._multi(1/i)},t.equals=function(i){return i instanceof this.constructor?this.x===i.x&&this.y===i.y:!1},t._isNaN=function(){return isNaN(this.x)||isNaN(this.y)},t.isZero=function(){return this.x===0&&this.y===0},t.toArray=function(){return[this.x,this.y]},t.toFixed=function(i){return new this.constructor(this.x.toFixed(i),this.y.toFixed(i))},t.toJSON=function(){return{x:this.x,y:this.y}},r}(),N=function(r){Y(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n.closeTo=function(e,o){return o||(o=0),this.x>=e.x-o&&this.x<=e.x+o&&this.y>=e.y-o&&this.y<=e.y+o},n.mag=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},n.unit=function(){return this.copy()._unit()},n._unit=function(){return this._div(this.mag()),this},n.perp=function(){return this.copy()._perp()},n._perp=function(){var e=this.y;return this.y=this.x,this.x=-e,this},n.angleWith=function(e){return this.angleWithSep(e.x,e.y)},n.angleWithSep=function(e,o){return Math.atan2(this.x*o-this.y*e,this.x*e+this.y*o)},n._rotate=function(e){var o=Math.cos(e),a=Math.sin(e),s=o*this.x-a*this.y,l=a*this.x+o*this.y;return this.x=s,this.y=l,this},n.rotate=function(e){return this.copy()._rotate(e)},t}(H1),go,fu;(function(){if(it){go=function(a){return setTimeout(a,16)},fu=clearTimeout;return}var r,t,n=1e3/30;function i(o){return setTimeout(o,n)}function e(o){return window["webkit"+o]||window["moz"+o]||window["ms"+o]}typeof window!="undefined"?(r=window.requestAnimationFrame||e("RequestAnimationFrame")||i,t=window.cancelAnimationFrame||e("CancelAnimationFrame")||e("CancelRequestAnimationFrame")||function(o){window.clearTimeout(o)}):(r=i,t=clearTimeout),go=function(a){return r(a)},fu=function(a){a&&t(a)}})();function Zi(r){var t="data:image/svg+xml";return r.length>4&&r.slice(-4)===".svg"?1:r.slice(0,t.length)===t?2:0}function du(r,t){if(it&&du.node){du.node(r,t);return}r.src=t[0]}var xb=0;function Co(){return xb++}function Ug(r){return!r||!pe(r)?r:JSON.parse(r)}function Po(r){for(var t=1;t<arguments.length;t++){var n=arguments[t];if(n)for(var i=0,e=n.length;i<e;i++)r.push(n[i])}return r.length}function dd(r,t){var n=t.indexOf(r);n>-1&&t.splice(n,1)}function vo(r,t,n){if(!Array.isArray(r))return n?t.call(n,r):t(r);for(var i=[],e,o,a=0,s=r.length;a<s;a++){if(e=r[a],O(e)){i.push(null);continue}Array.isArray(e)?i.push(vo(e,t,n)):(o=n?t.call(n,e):t(e),i.push(o))}return i}function oe(r,t){return r===void 0?t:r}function ot(r){return Math.sign?Math.sign(r):(r=+r,r===0||isNaN(r)?Number(r):r>0?1:-1)}function Hm(r){if(Math.log2)return Math.log2(r);var t=Math.log(r)*Math.LOG2E,n=Math.round(t);return Math.abs(n-t)<1e-14?n:t}function gd(r,t,n){return r*(1-n)+t*n}function ri(r,t,n){if(r===n||r===t)return r;var i=n-t,e=((r-t)%i+i)%i+t;return e}function vd(r,t,n){return Math.min(n,Math.max(t,r))}function Me(r){return Array.isArray(r)&&r.length>0}var V1=/^url\((['"])(.+)\1\)$/i,$1=/^url\(([^'"].*[^'"])\)$/i;function wb(r){return pe(r)?$1.test(r)?1:V1.test(r)?2:3:0}function qg(r){var t=wb(r),n;return t===3?r:t===1?(n=$1.exec(r),n[1]):t===2?(n=V1.exec(r),n[2]):r}var Cb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Pb(r){if(ye.btoa)return window.btoa(r);for(var t=String(r),n="",i,e,o=0,a=Cb;t.charAt(o|0)||(a="=",o%1);n+=a.charAt(63&i>>8-o%1*8)){if(e=t.charCodeAt(o+=3/4),e>255)throw new Error("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");i=i<<8|e}return n}function Sb(r,t){for(var n=atob(r),i=new ArrayBuffer(n.length),e=new Uint8Array(i),o=0;o<n.length;o++)e[o]=n.charCodeAt(o)&255;var a=new Blob([i],{type:t});return a}function pd(r,t,n,i){var e=n-r,o=i-t;return Math.atan2(o,e)}var G1="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";function md(r,t){if(!r&&!t)return!0;if(!r||!t)return!1;for(var n in r)if(n==="center"){if(!t[n]||!Vm(r[n][0],t[n][0])||!Vm(r[n][1],t[n][1]))return!1}else if(r[n]!==t[n])return!1;return!0}function Vm(r,t,n){return n==null&&(n=1e-6),r>=t-n&&r<=t+n}function B1(r,t,n,i){r||(r=100),t||(t=4);var e=this;t*=2,this._flashTimeout&&clearTimeout(this._flashTimeout);function o(){if(t===0){e.show(),n&&(i?n.call(i):n());return}t%2===0?e.hide():e.show(),t--,e._flashTimeout=setTimeout(o,r)}return this._flashTimeout=setTimeout(o,r),this}function gu(r,t){r===void 0&&(r=[]),t===void 0&&(t="_pt");for(var n=[],i=0,e=r.length;i<e;i++){var o=r[i];if(!o){n.push(null);continue}o[t]||(o[t]=new N(0,0));var a=o[t];a.x=0,a.y=0,n.push(a)}return n}var W1;if(ye.decodeImageInWorker){var vc=document.createElement("canvas");vc.width=1,vc.height=1,W1=vc.getContext("2d")}function Z1(r,t){var n=W1.createImageData(r.width,r.height);n.data.set(r.data),createImageBitmap(n).then(function(i){t(i)})}function U1(r){if(r&&r.indexOf("http://")===0||r.indexOf("https://")===0)return r;var t=document.createElement("a");return t.href=r,r=t.href,t=null,r}var Ho={cssWidth:"1px",cssHeight:"1px",width:1,height:1};function q1(r,t){t===void 0&&(t=1);var n=r.width,i=r.height;return Ho.cssWidth=n+"px",Ho.cssHeight=i+"px",Ho.width=Math.round(n*t),Ho.height=Math.round(i*t),Ho}function Y1(r,t){var n,i,e;if(!Je(r))n=function(){return r},i=!0,e=!0;else{var o=r.stops&&typeof r.stops[0][0]=="object",a=o||r.property!==void 0,s=o||!a,l=r.type||t||"exponential",u;if(l==="exponential")u=$m;else if(l==="interval")u=Tb;else if(l==="categorical")u=Mb;else if(l==="identity")u=kb;else throw new Error('Unknown function type "'+l+'"');if(o){for(var h={},c=[],f=0;f<r.stops.length;f++){var d=r.stops[f];h[d[0].zoom]===void 0&&(h[d[0].zoom]={zoom:d[0].zoom,type:r.type,property:r.property,default:r.default,stops:[]}),h[d[0].zoom].stops.push([d[0].value,d[1]])}for(var g in h)c.push([h[g].zoom,Y1(h[g])]);n=function(y,p){var m=$m({stops:c,base:r.base},y)(y,p);return typeof m=="function"?m(y,p):m},i=!1,e=!1}else s?(n=function(y){var p=u(r,y);return typeof p=="function"?p(y):p},i=!0,e=!1):(n=function(y,p){var m=u(r,p?p[r.property]:null);return typeof m=="function"?m(y,p):m},i=!1,e=!0)}return n.isZoomConstant=e,n.isFeatureConstant=i,n}function Eb(r,t,n){return r!==void 0?r:t!==void 0?t:n!==void 0?n:null}function Mb(r,t){for(var n=0;n<r.stops.length;n++)if(t===r.stops[n][0])return r.stops[n][1];return r.default}function Tb(r,t){for(var n=0;n<r.stops.length&&!(t<r.stops[n][0]);n++);return r.stops[Math.max(n-1,0)][1]}function $m(r,t){for(var n=r.base!==void 0?r.base:1,i=0;!(i>=r.stops.length);){if(t<=r.stops[i][0])break;i++}return i===0?r.stops[i][1]:i===r.stops.length?r.stops[i-1][1]:J1(t,n,r.stops[i-1][0],r.stops[i][0],r.stops[i-1][1],r.stops[i][1])}function kb(r,t){return Eb(t,r.default)}function J1(r,t,n,i,e,o){return typeof e=="function"?function(){var a=e.apply(void 0,arguments),s=o.apply(void 0,arguments);return J1(r,t,n,i,a,s)}:e.length?bb(r,t,n,i,e,o):X1(r,t,n,i,e,o)}function X1(r,t,n,i,e,o){var a=i-n,s=r-n,l;return t===1?l=s/a:l=(Math.pow(t,s)-1)/(Math.pow(t,a)-1),e*(1-l)+o*l}function bb(r,t,n,i,e,o){for(var a=[],s=0;s<e.length;s++)a[s]=X1(r,t,n,i,e[s],o[s]);return a}function Je(r){return r&&typeof r=="object"&&(r.stops||r.property&&r.type==="identity")}function K1(r){for(var t in r)if(Je(r[t]))return!0;return!1}function Q1(r){return ew(r,"exponential")}function Yg(r,t){if(!r)return null;var n=!1;if(Array.isArray(r)){for(var i=[],e,o=0;o<r.length;o++)e=Yg(r[o],t),e?(i.push(e),n=!0):i.push(r[o]);return n?i:r}var a={__fn_types_loaded:!0},s=[],l;for(l in r)r.hasOwnProperty(l)&&s.push(l);for(var u=function(d){Object.defineProperty(a,d,{get:function(){return this["__fn_"+d]||(this["__fn_"+d]=Q1(this["_"+d])),this["__fn_"+d].apply(this,t())},set:function(v){this["_"+d]=v},configurable:!0,enumerable:!0})},h=0,c=s.length;h<c;h++)l=s[h],Je(r[l])?(n=!0,a["_"+l]=r[l],u(l)):a[l]=r[l];return n?a:r}function Gm(r){if(!r||!r.stops)return[];for(var t=[],n=0,i=r.stops.length;n<i;n++)t.push(r.stops[n][1]);return t}function ew(r,t){if(!Je(r))return function(){return r};r=JSON.parse(JSON.stringify(r));var n=!0,i=!0,e=r.stops;if(e){for(var o=0;o<e.length;o++)if(Je(e[o][1])){var a=ew(e[o][1],t);n=n&&a.isZoomConstant,i=i&&a.isFeatureConstant,e[o]=[e[o][0],a]}}var s=Y1(r,t);return s.isZoomConstant=n&&s.isZoomConstant,s.isFeatureConstant=i&&s.isFeatureConstant,s}var Jg=["Unknown","Point","LineString","Polygon","MultiPoint","MultiLineString","MultiPolygon","GeometryCollection"];function Xg(r){return new Function("f","var p = (f && f.properties || {}); return "+tw(r))}function tw(r){if(!r)return"true";var t=r[0];if(r.length<=1)return t==="any"?"false":"true";var n=t==="=="?pc(r[1],r[2],"===",!1):t==="!="?pc(r[1],r[2],"!==",!1):t==="<"||t===">"||t==="<="||t===">="?pc(r[1],r[2],t,!0):t==="any"?mc(r.slice(1),"||"):t==="all"?mc(r.slice(1),"&&"):t==="none"?yc(mc(r.slice(1),"||")):t==="in"?Bm(r[1],r.slice(2)):t==="!in"?yc(Bm(r[1],r.slice(2))):t==="has"?Wm(r[1]):t==="!has"?yc(Wm(r[1])):"true";return"("+n+")"}function rw(r){return r[0]==="$"?"f."+r.substring(1):"p["+JSON.stringify(r)+"]"}function pc(r,t,n,i){var e=rw(r),o=r==="$type"?Jg.indexOf(t):JSON.stringify(t);return(i?"typeof "+e+"=== typeof "+o+"&&":"")+e+n+o}function mc(r,t){return r.map(tw).join(t)}function Bm(r,t){r==="$type"&&(t=t.map(function(e){return Jg.indexOf(e)}));var n=JSON.stringify(t.sort(Rb)),i=rw(r);return t.length<=200?n+".indexOf("+i+") !== -1":`function(v, a, i, j) {
        while (i <= j) { var m = (i + j) >> 1;
            if (a[m] === v) return true; if (a[m] > v) j = m - 1; else i = m + 1;
        }
    return false; }(`+i+", "+n+",0,"+(t.length-1)+")"}function Wm(r){return r==="$id"?'"id" in f':JSON.stringify(r)+" in p"}function yc(r){return"!("+r+")"}function Rb(r,t){return r<t?-1:r>t?1:0}function yd(r){var t=r._toJSON(),n=t.feature;return n.type=Jg.indexOf(n.geometry.type),n.subType=t.subType,n}function nw(r){if(!Array.isArray(r))return nw([r]);for(var t=[],n=0;n<r.length;n++){var i=void 0;r[n].filter===!0?i=function(){return!0}:i=Xg(r[n].filter),t.push(Ab({},r[n],{filter:i}))}return t}function Ab(r){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)r[i]=n[i]}return r}var Ob=[],Lb={};function vu(r,t){return Yg(r,function(){var n=t.getMap();return Db(Ob,n?n.getZoom():12,K({},t.getProperties(),Ib(Lb,n&&n.getBearing()||0,n&&n.getPitch()||0,n?n.getZoom():10)))})}function Db(r,t,n){return r[0]=t,r[1]=n,r}function Ib(r,t,n,i){return r["{bearing}"]=t,r["{pitch}"]=n,r["{zoom}"]=i,r}function Fb(r){var t={stroke:{stroke:r.markerLineColor,"stroke-width":r.markerLineWidth,"stroke-opacity":r.markerLineOpacity,"stroke-dasharray":null,"stroke-linecap":"butt","stroke-linejoin":"round"},fill:{fill:r.markerFill,"fill-opacity":r.markerFillOpacity}};return t.stroke["stroke-width"]===0&&(t.stroke["stroke-opacity"]=0),t}function pu(r,t,n){if(!r.markerPath)return null;var i=1,e=Fb(r);se(r.markerOpacity)&&(i=r.markerOpacity),se(r.opacity)&&(i*=r.opacity);var o={};if(e){for(var a in e.stroke)e.stroke.hasOwnProperty(a)&&(O(e.stroke[a])||(o[a]=e.stroke[a]));for(var s in e.fill)e.fill.hasOwnProperty(s)&&(O(e.fill[s])||(o[s]=e.fill[s]))}for(var l=Array.isArray(r.markerPath)?r.markerPath:[r.markerPath],u,h=[],c=0;c<l.length;c++)u=pe(l[c])?{path:l[c]}:l[c],u=K({},u,o),u.d=u.path,delete u.path,h.push(u);var f=['<svg version="1.1"','xmlns="http://www.w3.org/2000/svg"'];i<1&&f.push('opacity="'+i+'"'),r.markerPathWidth&&r.markerPathHeight&&f.push('viewBox="0 0 '+r.markerPathWidth+" "+r.markerPathHeight+'"'),f.push('preserveAspectRatio="none"'),t&&f.push('width="'+t+'"'),n&&f.push('height="'+n+'"'),f.push("><defs></defs>");for(var d=0;d<h.length;d++){var g="<path ";for(var v in h[d])h[d].hasOwnProperty(v)&&(g+=" "+v+'="'+h[d][v]+'"');g+="></path>",f.push(g)}f.push("</svg>");var y="data:image/svg+xml;base64,"+Pb(f.join(" "));return y}function uh(r,t){if(!r)return[];var n=r;Array.isArray(r)||(n=[r]);for(var i=[],e=N1,o,a,s,l,u=n.length-1;u>=0;u--)if(r=n[u],!!r){t&&(r=_d(r));for(var h=0;h<e.length;h++)if(o=r[e[h]],Je(o)&&(o=Gm(o)),!!o){Array.isArray(o)||(o=[o]);for(var c=0;c<o.length;c++)o[c].slice(0,4)==="url("&&(o[c]=qg(o[c])),a=sb[h],i.push([o[c],r[a[0]],r[a[1]]])}if(r.markerType==="path"&&r.markerPath)if(s=Je(r.markerWidth)?200:r.markerWidth,l=Je(r.markerHeight)?200:r.markerHeight,Je(r.markerPath)){o=Gm(r.markerPath);for(var f=r.markerPath,d=0;d<o.length;d++)r.markerPath=o[d],i.push([pu(r),s,l]);r.markerPath=f}else i.push([pu(r),s,l])}return i}function _d(r){if(!r)return null;var t=r;if(it)return t;for(var n=N1,i,e=0,o=n.length;e<o;e++)i=t[n[e]],i&&(t[n[e]]=iw(i));return t}function iw(r){if(Je(r)){for(var t=r.stops,n=0;n<t.length;n++)t[n][1]=iw(t[n][1]);return r}return r.slice(0,4)==="url("&&(r=qg(r)),r}var Xe=function(){function r(n,i){se(n)&&se(i)?(this.width=n,this.height=i):se(n.width)?(this.width=n.width,this.height=n.height):Array.isArray(n)&&(this.width=n[0],this.height=n[1])}var t=r.prototype;return t.copy=function(){return new r(this.width,this.height)},t.add=function(i,e){var o,a;return i instanceof r?(o=this.width+i.width,a=this.height+i.height):(o=this.width+i,a=this.height+e),new r(o,a)},t.equals=function(i){return this.width===i.width&&this.height===i.height},t.multi=function(i){return new r(this.width*i,this.height*i)},t._multi=function(i){return this.width*=i,this.height*=i,this},t._round=function(){return this.width=Math.round(this.width),this.height=Math.round(this.height),this},t.toPoint=function(){return new N(this.width,this.height)},t.toArray=function(){return[this.width,this.height]},t.toJSON=function(){return{width:this.width,height:this.height}},r}();function ow(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}var Nb=/[\b\t\r\v\f]/igm;function Kg(r){return pe(r)?r.replace(Nb,""):r}function zb(r){return ow(r).split(/\s+/)}var Zm=typeof document!="undefined"?document.createElement("canvas").getContext("2d"):null;function Kn(r,t){return Kn.node?Kn.node(r,t):(Zm.font=t,Zm.measureText(r).width)}function aw(r,t,n){var i=Kn(r,t);return new Xe(i,n||z1)}function Um(r,t,n,i){if(!r||r.length===0)return[{text:"",width:0}];var e=O(i)?Kn(r,t):i,o=e/r.length,a=Math.floor(n/o/2);if(o>=n||a<=0)return[{text:"",width:n}];if(e<=n)return[{text:r,width:e}];for(var s=[],l=r.substring(0,a),u=o*a,h=a,c=r.length;h<c;h++){var f=r[h],d=Kn(l+f);d>=n?(s.push({text:l,width:u}),l=r.substring(h,a+h),h+=a-1,u=o*a):(l+=f,u=d),h>=c-1&&(u=Kn(l),s.push({text:l,width:u}))}return s}var jb=/\{([\w_]+)\}/g;function xd(r,t){return pe(r)?r.replace(jb,function(n,i){if(!t)return"";var e=t[i];return O(e)?"":Array.isArray(e)?e.join():e}):r}function wd(r,t){se(r)&&(r+=""),r=r||"";var n=t.textMaxHeight||0,i=lw(r,t);return n&&n<i.size.height&&(i.size.height=n),i}function ni(r,t,n){var i=r.width,e=r.height,o,a;return t==="left"?o=-i:t==="right"?o=0:o=-i/2,n==="top"?a=-e:n==="bottom"?a=0:a=-e/2,new N(o,a)}var Hb="monospace";function sw(r){return r.textFont?r.textFont:(r.textStyle&&r.textStyle!=="normal"?r.textStyle+" ":"")+(r.textWeight&&r.textWeight!=="normal"?r.textWeight+" ":"")+r.textSize+"px "+(r.textFaceName?r.textFaceName[0]==='"'?r.textFaceName:'"'+r.textFaceName+'"':Hb)}function lw(r,t){var n=sw(t),i=t.textLineSpacing||0,e=aw(r,n,t.textSize),o=e.width,a=e.height,s=t.textWrapCharacter,l=[],u=t.textWrapWidth;(!u||u>o)&&(u=o),pe(r)||(r+="");var h=0;if(s&&r.indexOf(s)>=0)for(var c=r.split(s),f=0,d=c.length;f<d;f++){var g=c[f],v=Kn(g,n);if(v>u)for(var y=Um(g,n,u,v),p=0,m=y.length;p<m;p++){var _=y[p].width;_>h&&(h=_),l.push({text:y[p].text,size:new Xe(_,a)})}else v>h&&(h=v),l.push({text:g,size:new Xe(v,a)})}else if(o>u)for(var x=Um(r,n,u,o),C=0;C<x.length;C++){var w=x[C].width;w>h&&(h=w),l.push({text:x[C].text,size:new Xe(w,a)})}else o>h&&(h=o),l.push({text:r,size:e});var P=l.length,S=new Xe(h,a*P+i*(P-1));return{total:P,size:S,rows:l,rawSize:e}}function uw(r){var t=0,n=r&&r.length||0;if(!n)return t;for(var i,e=0;e<n;e++)i=r.charCodeAt(e),t=(t<<5)-t+i,t=t&t;return t}function Rn(r){return r&&r.colorStops}function qm(r){var t=[r.type];if(r.places&&t.push(r.places.join()),r.colorStops){for(var n=[],i=r.colorStops.length-1;i>=0;i--)n.push(r.colorStops[i].join());t.push(n.join(","))}return t.join("_")}function Qg(r,t){if(!r)return 1;var n=[];if(Array.isArray(r)){for(var i=0;i<r.length;i++)n.push(Qg(r[i],t));return n.sort().join(",")}var e=Object.keys(r).sort(),o=e.reduce(function(s,l){return(!t||l.indexOf(t)===0)&&(s[l]=r[l]),s},{}),a=uw(JSON.stringify(o));return a}function Cd(r,t){function n(a,s){var l=a.opacity;O(l)?a.opacity=s:a.opacity*=s}var i;if(Array.isArray(r)){i=[];for(var e=0;e<r.length;e++){var o=K({},r[e]);n(o,t),i.push(o)}}else i=K({},r),n(i,t);return i}function Mr(r){var t=Array.prototype.slice.call(arguments,1);if((!t||!t.length)&&(t=[{}]),Array.isArray(r)){for(var n,i,e=[],o=0,a=r.length;o<a;o++){n=r[o],i={};for(var s=0,l=t.length;s<l;s++)Array.isArray(t[s])?O(t[s][o])?K(i,n||{}):K(i,n,t[s][o]):K(i,n,t[s]?t[s]:{});e.push(i)}return e}else{var u=[{},r];return u.push.apply(u,t),K.apply(this,u)}}function Vb(r){if(r.symbol&&(r=[r]),Array.isArray(r))return r;var t=r.$root,n=r.$iconset;if(r=r.style,t||n){t&&t[t.length-1]==="/"&&(t=t.substring(0,t.length-1)),n&&n[n.length-1]==="/"&&(n=n.substring(0,n.length-1));var i=function(o){return o==="{$root}"?t:o==="{$iconset}"?n:null};$b(r,i)}return r}function $b(r,t){for(var n=0;n<r.length;n++){var i=r[n].symbol;i&&hw(i,t)}}var Pd=/(\{\$root\}|\{\$iconset\})/g;function hw(r,t){for(var n in r)r.hasOwnProperty(n)&&n!=="textName"&&(pe(r[n])&&r[n].length>2?r[n]=r[n].replace(Pd,t):Je(r[n])?r[n]=cw(r[n],t):mr(r[n])&&hw(r[n],t))}function cw(r,t){var n=r.default;pe(n)&&(r.default=n.replace(Pd,t));for(var i=r.stops,e=0;e<i.length;e++)!Array.isArray(i[e])||(pe(i[e][1])?i[e][1]=i[e][1].replace(Pd,t):Je(i[e][1])&&(i[e][1]=cw(i[e][1],t)));return r}function Gb(r){r===void 0&&(r=[]),Array.isArray(r)||(r=[r]);for(var t=r.length,n=0;n<t;n++){var i=r[n];if(!!i.style){var e=i.style,o=e.lineDasharray,a=e.lineWidth;if(a&&se(a)&&a>0&&o&&Array.isArray(o)&&o.length)return!0}}return!1}var Bb=function(t){return t[0]},hh=it?Bb:function(r){for(var t=document.documentElement.style,n=0;n<r.length;n++)if(r[n]in t)return r[n];return!1},wi=hh(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),Wb=hh(["transformOrigin","WebkitTransformOrigin","OTransformOrigin","MozTransformOrigin","msTransformOrigin"]),Qs=hh(["transition","WebkitTransition","OTransition","MozTransition","msTransition"]);hh(["filter","WebkitFilter","OFilter","MozFilter","msFilter"]);function le(r,t){var n=document.createElement(r);return t&&tv(n,t),n}function Ym(r,t,n){var i=le(r);return t&&ev(i,t),n&&n.appendChild(i),i}function po(r){if(!r)return this;if(ye.ielt9||ye.ie9){var t=le("div");t.appendChild(r),t.innerHTML="",t=null}else r.parentNode&&r.parentNode.removeChild(r);return this}function Sn(r,t,n,i){if(!r||!r.addEventListener||!t||!n)return this;for(var e=function(h){h||(h=window.event),n.call(i||r,h)},o=t.split(" "),a=o.length-1;a>=0;a--){var s=o[a];if(!!s){r["Z__"+s]||(r["Z__"+s]=[]);var l=fw(r,s,n);l>=0&&si(r,s,n),r["Z__"+s].push({callback:e,src:n}),r.addEventListener(s,e,ye.supportsPassive?{capture:!1,passive:!1}:!1)}}return this}function si(r,t,n){function i(f,d){f==="mousewheel"&&ye.gecko&&(f="DOMMouseScroll"),r.removeEventListener(f,d,!1)}if(!r||!r.removeEventListener||!t)return this;for(var e=t.split(" "),o=e.length-1;o>=0;o--){var a=e[o];if(!!a){if(!n&&r["Z__"+a]){for(var s=r["Z__"+a],l=0,u=s.length;l<u;l++)i(s[l].callback);return delete r["Z__"+a],this}var h=fw(r,a,n);if(h<0)return this;var c=r["Z__"+a][h];i(a,c.callback),r["Z__"+a].splice(h,1)}}return this}function fw(r,t,n){if(!r||!r["Z__"+t]||!n)return-1;for(var i=r["Z__"+t],e=0,o=i.length;e<o;e++)if(i[e].src===n)return e;return-1}function ar(r){return r.preventDefault?r.preventDefault():r.returnValue=!1,this}function qt(r){return r.stopPropagation?r.stopPropagation():r.cancelBubble=!0,this}function Zb(r){return r.onselectstart=function(){return!1},r.ondragstart=function(){return!1},r.setAttribute("unselectable","on"),this}function el(r,t){return r?(ye.any3d?qb(r,t):(r.style.left=t.x+"px",r.style.top=t.y+"px"),t):null}function ch(r){var t=window.getComputedStyle(r),n=[parseInt(t["padding-left"]),parseInt(t["padding-top"])],i=r.getBoundingClientRect(),e=r.offsetWidth,o=r.offsetHeight,a=e?i.width/e:1,s=o?i.height/o:1;return r.__position=[i.left+n[0],i.top+n[1],a,s],r.__position}function kt(r,t){r||(r=window.event);var n=t.__position;return n||(n=ch(t)),new N((r.clientX-n[0]-t.clientLeft)/n[2],(r.clientY-n[1]-t.clientTop)/n[3])}function Ub(r,t){var n=r.length-t.length;return n>=0&&r.indexOf(t,n)===n}function ev(r,t){var n=r.style.cssText;return Ub(n,";")||(n+=";"),r.style.cssText=n+t,this}function dw(r,t){if(r.classList!==void 0)return r.classList.contains(t);var n=gw(r);return n.length>0&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(n)}function Ui(r,t){if(r.classList!==void 0&&!dw(r,t))for(var n=zb(t),i=0,e=n.length;i<e;i++)r.classList.add(n[i]);else{var o=gw(r);tv(r,(o?o+" ":"")+t)}return this}function tv(r,t){return O(r.className.baseVal)?r.className=t:r.className.baseVal=t,this}function gw(r){return O(r.className.baseVal)?r.className:r.className.baseVal}function qb(r,t){var n=t||new N(0,0);return r.style[wi]=ye.any3d?"translate3d("+n.x+"px,"+n.y+"px,0px)":"translate("+n.x+"px,"+n.y+"px)",this}function Yb(r){return/<[a-z\][\s\S]*>/i.test(r)}function Jb(r,t){var n=Xb(r);pe(t)?n.innerHTML=t:n.appendChild(t);var i=new Xe(n.clientWidth,n.clientHeight);return po(n),i}function Xb(r){var t=document.createElement(r);return t.style.cssText="position:absolute;left:-10000px;top:-10000px;",document.body.appendChild(t),t}var Be=Sn,Ke=si,vw=typeof Map=="function",Kb=function(){function r(n,i){this.max=n,this.onRemove=i,this.reset()}var t=r.prototype;return t.reset=function(){for(var i in this.data)this.onRemove(this.data[i]);return this.data={},this.order=[],this},t.clear=function(){this.reset(),delete this.onRemove},t.add=function(i,e){if(this.has(i))this.order.splice(this.order.indexOf(i),1),this.data[i]=e,this.order.push(i);else if(this.data[i]=e,this.order.push(i),this.order.length>this.max){var o=this.getAndRemove(this.order[0]);o&&this.onRemove(o)}return this},t.has=function(i){return i in this.data},t.keys=function(){return this.order},t.getAndRemove=function(i){if(!this.has(i))return null;var e=this.data[i];return delete this.data[i],this.order.splice(this.order.indexOf(i),1),e},t.get=function(i){if(!this.has(i))return null;var e=this.data[i];return e},t.remove=function(i){if(!this.has(i))return this;var e=this.data[i];return delete this.data[i],this.onRemove(e),this.order.splice(this.order.indexOf(i),1),this},t.setMaxSize=function(i){for(this.max=i;this.order.length>this.max;){var e=this.getAndRemove(this.order[0]);e&&this.onRemove(e)}return this},r}(),pw;vw&&(pw=function(){function r(n,i){this.max=n,this.onRemove=i,this.reset()}var t=r.prototype;return t.reset=function(){if(this.data)for(var i=this.data.values(),a=i,e=Array.isArray(a),o=0,a=e?a:a[Symbol.iterator]();;){var s;if(e){if(o>=a.length)break;s=a[o++]}else{if(o=a.next(),o.done)break;s=o.value}var l=s;this.onRemove(l)}return this.data=new Map,this},t.clear=function(){this.reset(),delete this.onRemove},t.add=function(i,e){return e?(this.has(i)?(this.data.delete(i),this.data.set(i,e),this.data.size>this.max&&this.shrink()):this.data.set(i,e),this):this},t.keys=function(){for(var i=new Array(this.data.size),e=0,o=this.data.keys(),l=o,a=Array.isArray(l),s=0,l=a?l:l[Symbol.iterator]();;){var u;if(a){if(s>=l.length)break;u=l[s++]}else{if(s=l.next(),s.done)break;u=s.value}var h=u;i[e++]=h}return i},t.shrink=function(){for(var i=this.data.keys(),e=i.next();this.data.size>this.max;){var o=this.getAndRemove(e.value);o&&this.onRemove(o),e=i.next()}},t.has=function(i){return this.data.has(i)},t.getAndRemove=function(i){if(!this.has(i))return null;var e=this.data.get(i);return this.data.delete(i),e},t.get=function(i){if(!this.has(i))return null;var e=this.data.get(i);return e},t.remove=function(i){if(!this.has(i))return this;var e=this.data.get(i);return this.data.delete(i),this.onRemove(e),this},t.setMaxSize=function(i){return this.max=i,this.data.size>this.max&&this.shrink(),this},r}());var Qb=vw?pw:Kb,Lt={jsonp:function(t,n){var i="_maptalks_jsonp_"+Co();t.match(/\?/)?t+="&callback="+i:t+="?callback="+i;var e=document.createElement("script");return e.type="text/javascript",e.src=t,window[i]=function(o){n(null,o),document.getElementsByTagName("head")[0].removeChild(e),e=null,delete window[i]},document.getElementsByTagName("head")[0].appendChild(e),this},get:function(t,n,i){if(Re(n)){var e=i;i=n,n=e}if(it&&Lt.get.node)return Lt.get.node(t,i,n);var o=Lt._getClient(i);if(o.open("GET",t,!0),n){for(var a in n.headers)o.setRequestHeader(a,n.headers[a]);o.withCredentials=n.credentials==="include",n.responseType&&(o.responseType=n.responseType)}return o.send(null),o},post:function(t,n,i){var e;if(pe(t)){if(Re(n)){var a=i;i=n,n=a}n=n||{},e=n.postData}else{var o=i;e=n,n=t,t=n.url,i=o}if(it&&Lt.post.node)return n.url=t,Lt.post.node(n,e,i);var s=Lt._getClient(i);if(s.open("POST",n.url,!0),n.headers||(n.headers={}),n.headers["Content-Type"]||(n.headers["Content-Type"]="application/x-www-form-urlencoded"),"setRequestHeader"in s)for(var l in n.headers)n.headers.hasOwnProperty(l)&&s.setRequestHeader(l,n.headers[l]);return pe(e)||(e=JSON.stringify(e)),s.send(e),s},_wrapCallback:function(t,n){return function(){if(t.readyState===4)if(t.status===200)if(t.responseType==="arraybuffer"){var i=t.response;i.byteLength===0?n(new Error("http status 200 returned without content.")):n(null,{data:t.response,cacheControl:t.getResponseHeader("Cache-Control"),expires:t.getResponseHeader("Expires"),contentType:t.getResponseHeader("Content-Type")})}else n(null,t.responseText);else n(new Error(t.statusText+","+t.status))}},_getClient:function(t){var n;try{n=new XMLHttpRequest}catch{try{n=new ActiveXObject("Msxml2.XMLHTTP")}catch{try{n=new ActiveXObject("Microsoft.XMLHTTP")}catch{}}}return n.onreadystatechange=Lt._wrapCallback(n,t),n},getArrayBuffer:function(t,n,i){if(Re(n)){var e=i;i=n,n=e}return n||(n={}),n.responseType="arraybuffer",Lt.get(t,n,i)},getImage:function(t,n,i){return Lt.getArrayBuffer(n,i,function(e,o){if(e)t.onerror&&t.onerror(e);else if(o){var a=window.URL||window.webkitURL,s=t.onload;t.onload=function(){s&&s(),a.revokeObjectURL(t.src)};var l=new Blob([new Uint8Array(o.data)],{type:o.contentType});t.cacheControl=o.cacheControl,t.expires=o.expires,t.src=o.data.byteLength?a.createObjectURL(l):G1}})}};Lt.getJSON=function(r,t,n){if(Re(t)){var i=n;n=t,t=i}var e=function(a,s){var l=s?Ug(s):null;n(a,l)};return t&&t.jsonp?Lt.jsonp(r,e):Lt.get(r,t,e)};var Jm="#000",eR="rgba(255,255,255,0)",tR="#000",tl=!1,pi=null,mi=Math.PI/180,Xm=1,Z={setHitTesting:function(t){tl=t},createCanvas:function(t,n,i){var e;return it?e=new i(t,n):(e=le("canvas"),e.width=t,e.height=n),e},prepareCanvasFont:function(t,n){t.textBaseline="top",t.font=sw(n);var i=n.textFill;i||(i=tR),t.fillStyle=Z.getRgba(i,n.textOpacity)},prepareCanvas:function(t,n,i,e){if(!!n){var o=n.lineWidth;!O(o)&&t.lineWidth!==o&&(t.lineWidth=o);var a=n.linePatternFile,s=n.lineColor||Jm;if(e)t.strokeStyle="#000";else if(a&&i){var l;(n.linePatternDx||n.linePatternDy)&&(l=[n.linePatternDx,n.linePatternDy]),Z._setStrokePattern(t,a,o,l,i),n.lineDasharray=[]}else Rn(s)?n.lineGradientExtent?t.strokeStyle=Z._createGradient(t,s,n.lineGradientExtent):t.strokeStyle=Jm:(Array.isArray(s)&&(s=Z.normalizeColorToRGBA(s)),t.strokeStyle=s);n.lineJoin&&(t.lineJoin=n.lineJoin),n.lineCap&&(t.lineCap=n.lineCap),t.setLineDash&&Me(n.lineDasharray)&&t.setLineDash(n.lineDasharray);var u=n.polygonPatternFile,h=n.polygonFill||eR;if(e)t.fillStyle="#000";else if(u&&i){var c=Qm(u),f=i.getImage([c,null,null]);if(f||(f=i.getImage([c+"-texture",null,o])),Zi(c)&&f instanceof Image&&(ye.edge||ye.ie)){var d=f.width||20,g=f.height||20,v=Z.createCanvas(d,g);Z.image(v.getContext("2d"),f,0,0,d,g),f=v}f?(t.fillStyle=t.createPattern(f,"repeat"),(n.polygonPatternDx||n.polygonPatternDy)&&(t.fillStyle.polygonPatternOffset=[n.polygonPatternDx,n.polygonPatternDy])):typeof console!="undefined"&&console.warn("img not found for",c)}else Rn(h)?n.polygonGradientExtent?t.fillStyle=Z._createGradient(t,h,n.polygonGradientExtent):t.fillStyle="rgba(255,255,255,0)":(Array.isArray(h)&&(h=Z.normalizeColorToRGBA(h)),t.fillStyle=h)}},_createGradient:function(t,n,i){var e=null,o=n.places,a=i.getMin(),s=i.getMax(),l=i.getWidth(),u=i.getHeight();if(!n.type||n.type==="linear"){if(!o)o=[a.x,a.y,s.x,a.y];else{if(o.length!==4)throw new Error("A linear gradient's places should have 4 numbers.");o=[a.x+o[0]*l,a.y+o[1]*u,a.x+o[2]*l,a.y+o[3]*u]}e=t.createLinearGradient.apply(t,o)}else if(n.type==="radial"){if(o){if(o.length!==6)throw new Error("A radial gradient's places should have 6 numbers.");o=[a.x+o[0]*l,a.y+o[1]*u,l*o[2],a.x+o[3]*l,a.y+o[4]*u,l*o[5]]}else{var h=i.getCenter()._round();o=[h.x,h.y,Math.abs(h.x-a.x),h.x,h.y,0]}e=t.createRadialGradient.apply(t,o)}return n.colorStops.forEach(function(c){e.addColorStop.apply(e,c)}),e},_setStrokePattern:function(t,n,i,e,o){var a=Qm(n),s;if(it)s=o.getImage([a,null,i]);else{var l=a+"-texture-"+i;if(s=o.getImage(l),!s){var u=o.getImage([a,null,null]);if(u){var h;!u.width||!u.height?h=i:h=Math.round(u.width*i/u.height);var c=Z.createCanvas(h,i,t.canvas.constructor);Z.image(c.getContext("2d"),u,0,0,h,i),o.addResource([l,null,i],c),s=c}}}s?(t.strokeStyle=t.createPattern(s,"repeat"),t.strokeStyle.linePatternOffset=e):typeof console!="undefined"&&console.warn("img not found for",a)},clearRect:function(t,n,i,e,o){t.canvas._drawn=!1,t.clearRect(n,i,e,o)},fillCanvas:function(t,n,i,e){if(tl&&(n=1),t.canvas._drawn=!0,n!==0){var o=Z._isPattern(t.fillStyle),a=t.fillStyle&&t.fillStyle.polygonPatternOffset,s=a?a[0]:0,l=a?a[1]:0;O(n)&&(n=1);var u;n<1&&(u=t.globalAlpha,t.globalAlpha*=n),o&&(i=i||0,e=e||0,t.translate(i+s,e+l)),t.fill(),o&&t.translate(-i-s,-e-l),n<1&&(t.globalAlpha=u)}},getRgba:function(t,n){if(O(n)&&(n=1),t[0]!=="#")return Array.isArray(t)&&(t=Z.normalizeColorToRGBA(t,n)),t;var i,e,o;return t.length===7?(i=parseInt(t.substring(1,3),16),e=parseInt(t.substring(3,5),16),o=parseInt(t.substring(5,7),16)):(i=parseInt(t.substring(1,2),16)*17,e=parseInt(t.substring(2,3),16)*17,o=parseInt(t.substring(3,4),16)*17),"rgba("+i+","+e+","+o+","+n+")"},normalizeColorToRGBA:function(t,n){return n===void 0&&(n=1),"rgba("+t[0]*255+","+t[1]*255+","+t[2]*255+","+(t.length===4?t[3]:1)*n+")"},image:function(t,n,i,e,o,a){t.canvas._drawn=!0;try{se(o)&&se(a)?t.drawImage(n,i,e,o,a):t.drawImage(n,i,e)}catch(s){console&&(console.warn("error when drawing image on canvas:",s),console.warn(n))}},text:function(t,n,i,e,o){Z._textOnMultiRow(t,o.rows,e,i,o.size,o.rawSize)},_textOnMultiRow:function(t,n,i,e,o,a){for(var s=ni(o,i.textHorizontalAlignment,i.textVerticalAlignment),l=a.height+i.textLineSpacing,u=e.add(0,s.y),h=i.textMaxHeight,c,f,d=0,g=0,v=n.length;g<v&&(c=n[g].text,f=ni(n[g].size,i.textHorizontalAlignment,i.textVerticalAlignment),Z._textOnLine(t,c,u.add(f.x,g*l),i.textHaloRadius,i.textHaloFill,i.textHaloOpacity),!(h>0&&(d+=l,d+a.height>=h)));g++);},_textOnLine:function(t,n,i,e,o,a){tl&&(a=1);var s=a!==0&&e!==0;t.textBaseline="top";var l,u,h=t.shadowBlur,c=t.shadowOffsetX,f=t.shadowOffsetY;if(s){var d=t.globalAlpha;t.globalAlpha*=a,t.miterLimit=2,t.lineJoin="round",t.lineCap="round",t.lineWidth=e*2,Array.isArray(o)&&(o=Z.normalizeColorToRGBA(o)),t.strokeStyle=o,t.strokeText(n,i.x,i.y+Xm),t.miterLimit=10,t.globalAlpha=d,l=t.globalCompositeOperation,t.globalCompositeOperation="destination-out",u=t.fillStyle,t.fillStyle="#000"}h&&s&&(t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0),Z.fillText(t,n,i),l&&(t.globalCompositeOperation=l,Z.fillText(t,n,i,u),h&&(t.shadowBlur=h,t.shadowOffsetX=c,t.shadowOffsetY=f))},fillText:function(t,n,i,e){t.canvas._drawn=!0,e&&(t.fillStyle=e),t.fillText(n,i.x,i.y+Xm)},_stroke:function(t,n,i,e){if(tl&&(n=1),t.canvas._drawn=!0,n!==0){var o=t.strokeStyle&&t.strokeStyle.linePatternOffset,a=o?o[0]:0,s=o?o[1]:0,l=Z._isPattern(t.strokeStyle)&&(!O(i)&&!O(e)||!O(a)&&!O(s));O(n)&&(n=1);var u;n<1&&(u=t.globalAlpha,t.globalAlpha*=n),l&&(i=i||0,e=e||0,t.translate(i+a,e+s)),t.stroke(),l&&t.translate(-i-a,-e-s),n<1&&(t.globalAlpha=u)}},_path:function(t,n,i,e,o){if(!Me(n))return;function a(g,v){var y=pd(g.x,g.y,v.x,v.y);t.save();var p=Math.cos(y);Math.abs(p)<1e-7?t.translate(g.x-t.lineWidth/2,g.y):t.translate(g.x,g.y-t.lineWidth/2/p),t.rotate(y),Z._stroke(t,e),t.restore()}for(var s=Me(i),l=o===!0?!1:Z._isPattern(t.strokeStyle),u,h,c,f=0,d=n.length;f<d;f++)if(u=n[f],!s||t.setLineDash)t.lineTo(u.x,u.y),l&&f>0&&(h=n[f-1],a(h,u),t.beginPath(),t.moveTo(u.x,u.y));else if(s){if(f===d-1)break;c=n[f+1],rR(t,u,c,i)}},path:function(t,n,i,e,o){!Me(n)||(t.beginPath(),t.moveTo(n[0].x,n[0].y),Z._path(t,n,o,i),Z._stroke(t,i))},_multiClip:function(t,n){if(!(!n||n.length===0)){n=n[0];for(var i=0,e=n.length;i<e;i++){var o=n[i],a=o.x,s=o.y;i===0?t.moveTo(a,s):t.lineTo(a,s),i===e-1&&(a=n[0].x,s=n[0].y,t.lineTo(a,s))}}},polygon:function(t,n,i,e,o,a){if(t.isMultiClip){Z._multiClip(t,n);return}if(!!Me(n)){var s=Z._isPattern(t.strokeStyle),l=Me(o)&&!t.setLineDash||s&&!a;Me(n[0])||(n=[n]);var u=t;n.length>1&&!it&&(pi||(pi=Z.createCanvas(1,1)),t.canvas._drawn=!1,pi.width=t.canvas.width,pi.height=t.canvas.height,t=pi.getContext("2d"),ey(t,u));var h,c,f;if(l){for(t.save(),c=0,f=n.length;c<f;c++)!Me(n[c])||(Z._ring(t,n[c],null,0,!0),h=e,c>0&&(t.globalCompositeOperation="destination-out",h=1),Z.fillCanvas(t,h,n[c][0].x,n[c][0].y),c>0?t.globalCompositeOperation="source-over":f>1&&(t.fillStyle="#fff"),Z._stroke(t,0));t.restore()}var d=t.fillStyle;for(c=0,f=n.length;c<f;c++)!Me(n[c])||(a?(Z.paintSmoothLine(t,n[c],i,a,!0),t.closePath()):Z._ring(t,n[c],o,i),l||(h=e,c>0&&(t.globalCompositeOperation="destination-out",h=1),Z.fillCanvas(t,h,n[c][0].x,n[c][0].y),c>0?t.globalCompositeOperation="source-over":f>1&&(t.fillStyle="#fff")),Z._stroke(t,i));t.fillStyle!==d&&(t.fillStyle=d),n.length>1&&!it&&(u.drawImage(pi,0,0),u.canvas._drawn=t.canvas._drawn,ey(u,t))}},_ring:function(t,n,i,e,o){var a=Z._isPattern(t.strokeStyle);!o&&a&&!n[0].equals(n[n.length-1])&&(n=n.concat([n[0]])),t.beginPath(),t.moveTo(n[0].x,n[0].y),Z._path(t,n,i,e,o),a||t.closePath()},paintSmoothLine:function(t,n,i,e,o,a,s){if(!n)return;if(n.length<=2||!e){Z.path(t,n,i);return}function l(S,M,R,j,A,z,D,I,B,W){var E=1-S,T=1-M,L=R*E*E+A*2*S*E+D*S*S,V=R*T*T+A*2*M*T+D*M*M,F=A*E*E+D*2*S*E+B*S*S,H=A*T*T+D*2*M*T+B*M*M,$=j*E*E+z*2*S*E+I*S*S,G=j*T*T+z*2*M*T+I*M*M,b=z*E*E+I*2*S*E+W*S*S,ee=z*T*T+I*2*M*T+W*M*M,q=L*T+F*M,te=V*E+H*S,ie=V*T+H*M,ue=$*T+b*M,re=G*E+ee*S,xe=G*T+ee*M;return[q,ue,te,re,ie,xe]}function u(S,M,R,j,A,z,D,I,B,W){var E=(S+R)/2,T=(M+j)/2,L=(R+A)/2,V=(j+z)/2,F=(A+D)/2,H=(z+I)/2,$=Math.sqrt((R-S)*(R-S)+(j-M)*(j-M)),G=Math.sqrt((A-R)*(A-R)+(z-j)*(z-j)),b=Math.sqrt((D-A)*(D-A)+(I-z)*(I-z)),ee=$/($+G),q=G/(G+b),te=E+(L-E)*ee,ie=T+(V-T)*ee,ue=L+(F-L)*q,re=V+(H-V)*q,xe=te+(L-te)*B+R-te,Ce=ie+(V-ie)*B+j-ie,ae=ue+(L-ue)*B+A-ue,me=re+(V-re)*B+z-re,Q=[xe,Ce,ae,me];return W<1?l(0,W,R,j,xe,Ce,ae,me,A,z):Q}var h=n.length,c=o?h:h-1;t.beginPath(),t.moveTo(n[0].x,n[0].y),s!==void 0&&(c-=Math.max(c-a-1,0));for(var f,d=0;d<c;d++){var g=n[d].x,v=n[d].y,y=void 0,p=void 0,m=void 0,_=void 0,x=void 0,C=void 0;d-1<0?o?(y=n[c-1].x,p=n[c-1].y):(y=n[d+1].x,p=n[d+1].y):(y=n[d-1].x,p=n[d-1].y),d+1<h?(m=n[d+1].x,_=n[d+1].y):(m=n[d+1-h].x,_=n[d+1-h].y),d+2<h?(x=n[d+2].x,C=n[d+2].y):o?(x=n[d+2-h].x,C=n[d+2-h].y):(x=n[d].x,C=n[d].y);var w=u(y,p,g,v,m,_,x,C,e,d===c-1?s:1);if(d===c-1&&s>=0&&s<1){t.bezierCurveTo(w[0],w[1],w[2],w[3],w[4],w[5]),n.splice(c-1,h-(c-1)-1);var P=new N(w[4],w[5]);P.prevCtrlPoint=new N(w[2],w[3]),n.push(P),h=n.length}else t.bezierCurveTo(w[0],w[1],w[2],w[3],m,_);n[d].nextCtrlPoint=w.slice(0,2),n[d].prevCtrlPoint=f?f.slice(2):null,f=w}!o&&n[1].prevCtrlPoint&&(n[0].nextCtrlPoint=n[1].prevCtrlPoint,delete n[0].prevCtrlPoint),n[h-1].prevCtrlPoint||(n[h-1].prevCtrlPoint=n[h-2].nextCtrlPoint),Z._stroke(t,i)},_arcBetween:function(t,n,i,e){var o=e,a=n.distanceTo(i),s=a/2/Math.sin(o/2),l=Math.asin((i.y-n.y)/a);n.x>i.x&&(l=Math.PI-l);var u=90*mi-o/2,h=l-u,c=Math.cos(h)*s,f=Math.sin(h)*s,d=n.x+c,g=n.y+f,v=Math.asin((i.y-g)/s);d>i.x&&(v=Math.PI-v);var y=v+o;return t.beginPath(),t.arc(d,g,s,v,y),[d,g]},_lineTo:function(t,n){t.lineTo(n.x,n.y)},bezierCurveAndFill:function(t,n,i,e){t.beginPath();var o=n[0];t.moveTo(o.x,o.y);var a=[t];a.push.apply(a,n.splice(1)),Z._bezierCurveTo.apply(Z,a),Z.fillCanvas(t,e),Z._stroke(t,i)},_bezierCurveTo:function(t,n,i,e){t.bezierCurveTo(n.x,n.y,i.x,i.y,e.x,e.y)},ellipse:function(t,n,i,e,o,a,s){function l(u,h,c,f,d){var g=.5522848,v=c*g,y=f*g,p=d*g;t.moveTo(u-c,h),t.bezierCurveTo(u-c,h-y,u-v,h-f,u,h-f),t.bezierCurveTo(u+v,h-f,u+c,h-y,u+c,h),t.bezierCurveTo(u+c,h+p,u+v,h+d,u,h+d),t.bezierCurveTo(u-v,h+d,u-c,h+p,u-c,h),t.closePath()}t.beginPath(),i===e&&i===o?t.arc(n.x,n.y,i,0,2*Math.PI):t.ellipse?e!==o?(t.ellipse(n.x,n.y,i,e,0,mi*180,mi*360,!1),t.ellipse(n.x,n.y,i,o,0,0,mi*180,!1)):t.ellipse(n.x,n.y,i,e,0,0,mi*360,!1):l(n.x,n.y,i,e,o),Z.fillCanvas(t,s,n.x-i,n.y-e),Z._stroke(t,a,n.x-i,n.y-e)},rectangle:function(t,n,i,e,o){var a=n.x,s=n.y;t.beginPath(),t.rect(a,s,i.width,i.height),Z.fillCanvas(t,o,a,s),Z._stroke(t,e,a,s)},sector:function(t,n,i,e,o,a){var s=mi,l=e[0],u=e[1];function h(c,f,d,g,v,y){var p=s*-y,m=s*-v;c.beginPath(),c.moveTo(f,d),c.arc(f,d,g,p,m),c.lineTo(f,d),Z.fillCanvas(c,a,f-g,d-g),Z._stroke(c,o,f-g,d-g)}h(t,n.x,n.y,i,l,u)},_isPattern:function(t){return!pe(t)&&!("addColorStop"in t)},drawCross:function(t,n,i,e,o){t.canvas._drawn=!0,t.strokeStyle=o,t.lineWidth=e,t.beginPath(),t.moveTo(n-5,i),t.lineTo(n+5,i),t.moveTo(n,i-5),t.lineTo(n,i+5),t.stroke()},copy:function(t,n){var i=n||le("canvas");return i.width=t.width,i.height=t.height,i.getContext("2d").drawImage(t,0,0),i},pixelRect:function(t,n,i,e){var o=t.lineWidth,a=t.globalAlpha,s=!1;if(o>0&&i>0)s=!0,i<1&&(t.globalAlpha*=i);else if(e>0)e<1&&(t.globalAlpha*=e);else return;t.canvas._drawn=!0,s?t.strokeRect(n[0],n[1],1,1):t.fillRect(n[0],n[1],1,1),t.globalAlpha!==a&&(t.globalAlpha=a)}};function rR(r,t,n,i){var e=t.x,o=t.y,a=n.x,s=n.y,l=i,u=function(w,P){return w<=P},h=function(w,P){return w>=P},c=function(w,P){return Math.min(w,P)},f=function(w,P){return Math.max(w,P)},d={thereYet:h,cap:c},g={thereYet:h,cap:c};o-s>0&&(g.thereYet=u,g.cap=f),e-a>0&&(d.thereYet=u,d.cap=f),r.moveTo(e,o);for(var v=e,y=o,p=0,m=!0,_,x;!(d.thereYet(v,a)&&g.thereYet(y,s));)_=Math.atan2(s-o,a-e),x=l[p],v=d.cap(a,v+Math.cos(_)*x),y=g.cap(s,y+Math.sin(_)*x),m?r.lineTo(v,y):r.moveTo(v,y),p=(p+1)%l.length,m=!m}var Km="data:image/";function Qm(r){return r.substring(0,Km.length)===Km?r:qg(r)}function ey(r,t){r.filter=t.filter,r.fillStyle=t.fillStyle,r.globalAlpha=t.globalAlpha,r.lineCap=t.lineCap,r.lineDashOffset=t.lineDashOffset,r.lineJoin=t.lineJoin,r.lineWidth=t.lineWidth,r.shadowBlur=t.shadowBlur,r.shadowColor=t.shadowColor,r.shadowOffsetX=t.shadowOffsetX,r.shadowOffsetY=t.shadowOffsetY,r.strokeStyle=t.strokeStyle}var Sd;typeof Promise!="undefined"?Sd=Promise:Sd=Jk;var ty=Sd,en=function(t){return function(n){Y(i,n);function i(){return n.apply(this,arguments)||this}var e=i.prototype;return e.on=function(a,s,l){if(!a)return this;if(!pe(a))return this._switch("on",a,s);if(!s)return this;this._eventMap||(this._eventMap={});var u=a.toLowerCase().split(" "),h;l||(l=this);for(var c,f=0,d=u.length;f<d;f++){h=u[f],c=this._eventMap[h],c||(c=[],this._eventMap[h]=c);var g=c.length;if(g>0){for(var v=0;v<g;v++)if(s===c[v].handler&&c[v].context===l)return this}c.push({handler:s,context:l})}return this},e.addEventListener=function(){return this.on.apply(this,arguments)},e.once=function(a,s,l){if(!pe(a)){var u={};for(var h in a)a.hasOwnProperty(h)&&(u[h]=this._wrapOnceHandler(h,a[h],l));return this._switch("on",u)}for(var c=a.split(" "),f=0,d=c.length;f<d;f++)this.on(c[f],this._wrapOnceHandler(c[f],s,l));return this},e.off=function(a,s,l){if(!this._eventMap||!a)return this;if(!pe(a))return this._switch("off",a,s);if(!s)return this;var u=a.split(" "),h,c,f;l||(l=this);for(var d=0,g=u.length;d<g;d++){if(h=u[d].toLowerCase(),f="Z__"+h,c=this._eventMap[h],!c)return this;for(var v=c.length-1;v>=0;v--){var y=c[v];(s===y.handler||s===y.handler[f])&&y.context===l&&(delete y.handler[f],c.splice(v,1))}c.length||delete this._eventMap[h]}return this},e.removeEventListener=function(){return this.off.apply(this,arguments)},e.listens=function(a,s,l){if(!this._eventMap||!pe(a))return 0;var u=this._eventMap[a.toLowerCase()];if(!u||!u.length)return 0;if(!s)return u.length;for(var h=0,c=u.length;h<c;h++)if(s===u[h].handler&&(O(l)||u[h].context===l))return 1;return 0},e.getListeningEvents=function(){return this._eventMap?Object.keys(this._eventMap):[]},e.copyEventListeners=function(a){var s=a._eventMap;if(!s)return this;var l;for(var u in s){l=s[u];for(var h=0,c=l.length;h<c;h++)this.on(u,l[h].handler,l[h].context)}return this},e.fire=function(){return this._eventParent?this._eventParent.fire.apply(this._eventParent,arguments):this._fire.apply(this,arguments)},e._wrapOnceHandler=function(a,s,l){var u=this,h="Z__"+a,c=!1,f=function d(){c||(delete f[h],c=!0,l?s.apply(l,arguments):s.apply(this,arguments),u.off(a,d,this))};return f[h]=s,f},e._switch=function(a,s,l){for(var u in s)s.hasOwnProperty(u)&&this[a](u,s[u],l);return this},e._clearListeners=function(a){if(!(!this._eventMap||!pe(a))){var s=this._eventMap[a.toLowerCase()];!s||(this._eventMap[a]=null)}},e._clearAllListeners=function(){this._eventMap=null},e._setEventParent=function(a){return this._eventParent=a,this},e._setEventTarget=function(a){return this._eventTarget=a,this},e._fire=function(a,s){if(!this._eventMap)return this;var l=this._eventMap[a.toLowerCase()];if(!l)return this;s||(s={}),s.type=a,s.target=this._eventTarget||this;for(var u=l.slice(0),h,c,f,d=0,g=u.length;d<g;d++)!u[d]||(h=u[d].context,c=!0,f=K({},s),h?c=u[d].handler.call(h,f):c=u[d].handler(f),c===!1&&s.domEvent&&qt(s.domEvent));return this},i}(t)},nR=function(){function r(n){this.target=n}var t=r.prototype;return t.enable=function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},t.disable=function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},t.enabled=function(){return!!this._enabled},t.remove=function(){this.disable(),delete this.target,delete this.dom},r}(),wr=en(nR),fr=function(){function r(n){if(!this||!this.setOptions)throw new Error('Class instance is being created without "new" operator.');this.setOptions(n),this.callInitHooks()}var t=r.prototype;return t.callInitHooks=function(){var i=Object.getPrototypeOf(this);return this._visitInitHooks(i),this},t.setOptions=function(i){if(this.hasOwnProperty("options")||(this.options=this.options?Object.create(this.options):{}),!i)return this;for(var e in i)this.options[e]=i[e];return this},t.config=function(i){if(i){if(arguments.length===2){var a={};a[i]=arguments[1],i=a}for(var s in i)this.options[s]=i[s],this[s]&&this[s]instanceof wr&&(i[s]?this[s].enable():this[s].disable());this.onConfig(i)}else{var e={};for(var o in this.options)this.options.hasOwnProperty(o)&&(e[o]=this.options[o]);return e}return this},t.onConfig=function(){},t._visitInitHooks=function(i){if(!this._initHooksCalled){var e=Object.getPrototypeOf(i);e._visitInitHooks&&e._visitInitHooks.call(this,e),this._initHooksCalled=!0;var o=i._initHooks;if(o&&o!==e._initHooks)for(var a=0;a<o.length;a++)o[a].call(this)}},r.addInitHook=function(i){for(var e=arguments.length,o=new Array(e>1?e-1:0),a=1;a<e;a++)o[a-1]=arguments[a];var s=typeof i=="function"?i:function(){this[i].apply(this,o)},l=this.prototype,u=Object.getPrototypeOf(l);return(!l._initHooks||l._initHooks===u._initHooks)&&(l._initHooks=[]),l._initHooks.push(s),this},r.include=function(){for(var i=0;i<arguments.length;i++)K(this.prototype,i<0||arguments.length<=i?void 0:arguments[i]);return this},r.mergeOptions=function(i){var e=this.prototype,o=Object.getPrototypeOf(e);return(!e.options||e.options===o.options)&&(e.options=e.options?Object.create(e.options):{}),K(e.options,i),this},r}(),rl={},mw=function(r){return function(t){Y(n,t);function n(){return t.apply(this,arguments)||this}n.registerJSONType=function(o){return o?(rl[o]=this,this):this},n.getJSONClass=function(o){return o?rl[o]:null};var i=n.prototype;return i.getJSONType=function(){if(this._jsonType===void 0){var o=Object.getPrototypeOf(this).constructor;for(var a in rl)if(rl[a]===o){this._jsonType=a;break}}if(!this._jsonType)throw new Error("Found an unregistered geometry class!");return this._jsonType},n}(r)},Vo={},yw=function(){function r(){this._tree=tb(9,["[0]","[1]","[2]","[3]"])}var t=r.prototype;return t.collides=function(i){return Vo.minX=i[0],Vo.minY=i[1],Vo.maxX=i[2],Vo.maxY=i[3],this._tree.collides(Vo)},t.insertBox=function(i){var e=this._tree;return e.insert(i),this},t.bulkInsertBox=function(i){return this._tree.load(i),this},t.clear=function(){return this._tree.clear(),this},r}();function rv(r){return function(t){Y(n,t);function n(){return t.apply(this,arguments)||this}var i=n.prototype;return i.addHandler=function(o,a){if(!a)return this;if(this._handlers||(this._handlers=[]),this[o])return this[o].enable(),this;var s=this[o]=new a(this);return this._handlers.push(s),this.options[o]&&s.enable(),this},i.removeHandler=function(o){if(!o)return this;var a=this[o];if(a){var s=this._handlers.indexOf(a);s>=0&&this._handlers.splice(s,1),this[o].remove(),delete this[o]}return this},i._clearHandlers=function(){for(var o=0,a=this._handlers.length;o<a;o++)this._handlers[o].remove();this._handlers=[]},n}(r)}var ry="touchstart mousedown",_c={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},ny={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},So=function(r){Y(t,r);function t(i,e){var o;return e===void 0&&(e={}),o=r.call(this,null)||this,o.dom=i,o.options=e,o}var n=t.prototype;return n.enable=function(){return this.dom?(this._onMouseDown=function(e){return this.onMouseDown(e)},Be(this.dom,ry,this._onMouseDown,this),this):this},n.disable=function(){return this.dom?(this._offEvents(),Ke(this.dom,ry,this._onMouseDown),delete this._onMouseDown,this):this},n.onMouseDown=function(e){if(!(!this.options.rightclick&&e.button===2)&&!(e.touches&&e.touches.length>1)&&!(this.options.cancelOn&&this.options.cancelOn(e)===!0)){var o=this.dom;o.setCapture?o.setCapture():window.captureEvents&&window.captureEvents(window.Event.MOUSEMOVE|window.Event.MOUSEUP),o.ondragstart=function(){return!1},delete this.moved;var a=e.touches?e.touches[0]:e;this.startPos=new N(a.clientX,a.clientY),Be(document,_c[e.type],this.onMouseMove,this),Be(document,ny[e.type],this.onMouseUp,this),this.options.ignoreMouseleave||Be(this.dom,"mouseleave",this.onMouseUp,this),this.fire("mousedown",{domEvent:e,mousePos:new N(a.clientX,a.clientY)})}},n.onMouseMove=function(e){if(e.touches&&e.touches.length>1){this.moved&&(this.interupted=!0,this.onMouseUp(e));return}var o=e.touches?e.touches[0]:e,a=new N(o.clientX,o.clientY),s=a.sub(this.startPos);!s.x&&!s.y||(this.moved?this.fire("dragging",{domEvent:e,mousePos:new N(o.clientX,o.clientY)}):(this.fire("dragstart",{domEvent:e,mousePos:this.startPos.copy()}),this.moved=!0))},n.onMouseUp=function(e){var o=e.changedTouches?e.changedTouches[0]:e;this._offEvents();var a={domEvent:e};se(o.clientX)&&(a.mousePos=new N(parseInt(o.clientX,0),parseInt(o.clientY,0))),this.moved&&(a.interupted=this.interupted,this.fire("dragend",a),delete this.interupted,delete this.moved),this.fire("mouseup",a)},n._offEvents=function(){var e=this.dom;if(Ke(e,"mouseleave",this.onMouseUp),!(typeof document=="undefined"||typeof window=="undefined")){for(var o in _c)Ke(document,_c[o],this.onMouseMove),Ke(document,ny[o],this.onMouseUp);e.releaseCapture?e.releaseCapture():window.captureEvents&&window.captureEvents(window.Event.MOUSEMOVE|window.Event.MOUSEUP)}},t}(wr),U=function(r){Y(t,r);function t(){return r.apply(this,arguments)||this}return t.toNumberArrays=function(i){return Array.isArray(i)?vo(i,function(e){return[e.x,e.y]}):[i.x,i.y]},t.toCoordinates=function(i){if(se(i[0])&&se(i[1]))return new t(i);if(i instanceof t)return i;for(var e=[],o=0,a=i.length;o<a;o++){var s=i[o];Array.isArray(s)?se(s[0])?e.push(new t(s)):e.push(t.toCoordinates(s)):s instanceof t?e.push(s):e.push(new t(s))}return e},t}(H1),Pt=function(){function r(t,n){this.type=t,this.properties=n}return r.createProj4=function(n){return new r("proj4",{proj:n})},r.fromProjectionCode=function(n){return n?(n=n.toUpperCase().replace(":",""),r[n]||null):null},r}();Pt.WGS84=Pt.createProj4("+proj=longlat +datum=WGS84 +no_defs");Pt.EPSG4326=Pt.WGS84;Pt.EPSG3857=Pt.createProj4("+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs");Pt.IDENTITY=Pt.createProj4("+proj=identity +no_defs");Pt.CGCS2000=Pt.createProj4("+proj=longlat +datum=CGCS2000");Pt.EPSG4490=Pt.CGCS2000;Pt.BD09LL=Pt.createProj4("+proj=longlat +datum=BD09");Pt.GCJ02=Pt.createProj4("+proj=longlat +datum=GCJ02");var iR=new N(0,0),oR=new U(0,0),xc=new U(0,0),wc=new U(0,0),Cc=new U(0,0),Pc=new U(0,0),aR=new U(0,0),iy=new U(0,0),oy=new U(0,0),Sc=[],Ci,$o=[],be=function(){function r(n,i,e,o){this._clazz=U;var a=arguments.length,s=a>0?arguments[a-1]:null;s&&s.unproject&&(this.projection=arguments[a-1]),this._dirty=!0,this._initialize(n,i,e,o)}var t=r.prototype;return t._initialize=function(i,e,o,a){if(this.xmin=null,this.xmax=null,this.ymin=null,this.ymax=null,!O(i)){var s=this.projection;if(se(i)&&se(e)&&se(o)&&se(a)){s?this.set(i,e,o,a):this.set(Math.min(i,o),Math.min(e,a),Math.max(i,o),Math.max(e,a));return}else Array.isArray(i)?s?this.set(i[0],i[1],i[2],i[3]):this.set(Math.min(i[0],i[2]),Math.min(i[1],i[3]),Math.max(i[0],i[2]),Math.max(i[1],i[3])):se(i.x)&&se(e.x)&&se(i.y)&&se(e.y)?s?this.set(i.x,i.y,e.x,e.y):(i.x>e.x?(this.xmin=e.x,this.xmax=i.x):(this.xmin=i.x,this.xmax=e.x),i.y>e.y?(this.ymin=e.y,this.ymax=i.y):(this.ymin=i.y,this.ymax=e.y)):se(i.xmin)&&se(i.xmax)&&se(i.ymin)&&se(i.ymax)&&this.set(i.xmin,i.ymin,i.xmax,i.ymax)}},t._add=function(i){return this._dirty=!0,O(i.x)?O(i.xmin)?O(i[0])||(this.xmin+=i[0],this.ymin+=i[1],this.xmax+=i[0],this.ymax+=i[1]):(this.xmin+=i.xmin,this.ymin+=i.ymin,this.xmax+=i.xmax,this.ymax+=i.ymax):(this.xmin+=i.x,this.ymin+=i.y,this.xmax+=i.x,this.ymax+=i.y),this},t.add=function(){var i=new this.constructor(this.xmin,this.ymin,this.xmax,this.ymax,this.projection);return i._add.apply(i,arguments)},t._scale=function(i){return this._dirty=!0,this.xmin*=i,this.ymin*=i,this.xmax*=i,this.ymax*=i,this},t._sub=function(i){return this._dirty=!0,O(i.x)?O(i.xmin)?O(i[0])||(this.xmin-=i[0],this.ymin-=i[1],this.xmax-=i[0],this.ymax-=i[1]):(this.xmin-=i.xmin,this.ymin-=i.ymin,this.xmax-=i.xmax,this.ymax-=i.ymax):(this.xmin-=i.x,this.ymin-=i.y,this.xmax-=i.x,this.ymax-=i.y),this},t._substract=function(){return this._sub.apply(this,arguments)},t.sub=function(){var i=new this.constructor(this.xmin,this.ymin,this.xmax,this.ymax,this.projection);return i._sub.apply(i,arguments)},t.substract=function(){return this.sub.apply(this,arguments)},t.round=function(){return new this.constructor(Math.round(this.xmin),Math.round(this.ymin),Math.round(this.xmax),Math.round(this.ymax),this.projection)},t._round=function(){return this._dirty=!0,this.xmin=Math.round(this.xmin),this.ymin=Math.round(this.ymin),this.xmax=Math.round(this.xmax),this.ymax=Math.round(this.ymax),this},t.getMin=function(i){return i?(i.set(this.xmin,this.ymin),i):new this._clazz(this.xmin,this.ymin)},t.getMax=function(i){return i?(i.set(this.xmax,this.ymax),i):new this._clazz(this.xmax,this.ymax)},t.getCenter=function(i){var e=(this.xmin+this.xmax)/2,o=(this.ymin+this.ymax)/2;return i?(i.set(e,o),i):new this._clazz(e,o)},t.isValid=function(){return!O(this.xmin)&&!O(this.ymin)&&!O(this.xmax)&&!O(this.ymax)},t.equals=function(i){return this.xmin===i.xmin&&this.xmax===i.xmax&&this.ymin===i.ymin&&this.ymax===i.ymax},t.intersects=function(i){this._project(this),this._project(i);var e=Math.max(this.pxmin,i.pxmin),o=Math.max(this.pymin,i.pymin),a=Math.min(this.pxmax,i.pxmax),s=Math.min(this.pymax,i.pymax),l=!(e>a||o>s);return l},t.within=function(i){return this._project(this),this._project(i),this.pxmin>=i.pxmin&&this.pxmax<=i.pxmax&&this.pymin>=i.pymin&&this.pymax<=i.pymax},t.contains=function(i){if(!i)return!1;this._project(this);var e=this.projection;if(e)if(i.x!==void 0){var o=oR;Array.isArray(i)?(o.x=i[0],o.y=i[1]):(o.x=i.x,o.y=i.y),i=e.project(o,o)}else i.xmin!==void 0&&this._project(i);return(i.x||i.pxmin||0)>=this.pxmin&&(i.x||i.pxmax||0)<=this.pxmax&&(i.y||i.pymin||0)>=this.pymin&&(i.y||i.pymax||0)<=this.pymax},t.getWidth=function(){return Math.abs(this.xmax-this.xmin)},t.getHeight=function(){return Math.abs(this.ymax-this.ymin)},t.getSize=function(){return new Xe(this.getWidth(),this.getHeight())},t.set=function(i,e,o,a){return this.xmin=i,this.ymin=e,this.xmax=o,this.ymax=a,this._dirty=!0,this},t.__combine=function(i){i.x!==void 0&&(Ci.xmin=Ci.xmax=i.x,Ci.ymin=Ci.ymax=i.y,i=Ci),this._project(i),this._project(this);var e=se(this.pxmin),o,a,s,l;e?(o=Math.min(this.pxmin,i.pxmin),a=Math.min(this.pymin,i.pymin),s=Math.max(this.pxmax,i.pxmax),l=Math.max(this.pymax,i.pymax)):(o=i.pxmin,a=i.pymin,s=i.pxmax,l=i.pymax);var u=this.projection;if(u){xc.set(o,a),wc.set(s,l);var h=u.unproject(xc,xc),c=u.unproject(wc,wc);o=h.x,a=h.y,s=c.x,l=c.y}return $o[0]=o,$o[1]=a,$o[2]=s,$o[3]=l,$o},t._combine=function(i){if(!i||i.isValid&&!i.isValid())return this;var e=this.__combine(i);return this.set(e[0],e[1],e[2],e[3]),this._dirty=!0,this},t.combine=function(i){if(!i||i.isValid&&!i.isValid())return this;var e=this.__combine(i);return new this.constructor(e[0],e[1],e[2],e[3],this.projection)},t.intersection=function(i){if(!this.intersects(i))return null;Cc.x=Math.max(this.pxmin,i.pxmin),Cc.y=Math.max(this.pymin,i.pymin),Pc.x=Math.min(this.pxmax,i.pxmax),Pc.y=Math.min(this.pymax,i.pymax);var e=Cc,o=Pc,a=this.projection;return a&&(e=a.unproject(e,e),o=a.unproject(o,o)),new this.constructor(e,o,a)},t.expand=function(i){var e,o;return se(i)?e=o=i:(e=i.width||i.x||i[0]||0,o=i.height||i.y||i[1]||0),new this.constructor(this.xmin-e,this.ymin-o,this.xmax+e,this.ymax+o,this.projection)},t._expand=function(i){var e,o;return se(i)?e=o=i:(e=i.width||i.x||i[0]||0,o=i.height||i.y||i[1]||0),this.xmin-=e,this.ymin-=o,this.xmax+=e,this.ymax+=o,this._dirty=!0,this},t.toJSON=function(){return{xmin:this.xmin,ymin:this.ymin,xmax:this.xmax,ymax:this.ymax}},t.toArray=function(i){var e=this.xmin,o=this.ymin,a=this.xmax,s=this.ymax;return i?(i[0].x=e,i[0].y=s,i[1].x=a,i[1].y=s,i[2].x=a,i[2].y=o,i[3].x=e,i[3].y=o,i[4].x=e,i[4].y=s,i):[new this._clazz([e,s]),new this._clazz([a,s]),new this._clazz([a,o]),new this._clazz([e,o]),new this._clazz([e,s])]},t.toString=function(){return this.xmin+","+this.ymin+","+this.xmax+","+this.ymax},t.copy=function(){return new this.constructor(this.xmin,this.ymin,this.xmax,this.ymax,this.projection)},t.convertTo=function(i,e){if(!this.isValid())return null;var o=e||new this.constructor;e&&o.set(null,null,null,null);var a;return this._clazz===U?a=aR:this._clazz===N&&(a=iR),a.x=this.xmin,a.y=this.ymax,o._combine(i(a)),a.x=this.xmax,o._combine(i(a)),a.y=this.ymin,o._combine(i(a)),a.x=this.xmin,o._combine(i(a)),o},t._project=function(i){if(!i||!i.isValid()){i&&(i.pxmin=i.pxmax=i.pymin=i.pymax=null);return}var e=this.projection;if(e){if(i._dirty){iy.set(i.xmax,i.ymin),oy.set(i.xmin,i.ymax),Sc[0]=iy,Sc[1]=oy;var o=e.projectCoords(Sc),a=o[0],s=o[1];i.pxmin=Math.min(a.x,s.x),i.pymin=Math.min(a.y,s.y),i.pxmax=Math.max(a.x,s.x),i.pymax=Math.max(a.y,s.y)}delete i._dirty}else i.pxmin=i.xmin,i.pxmax=i.xmax,i.pymin=i.ymin,i.pymax=i.ymax},r}();Ci=new be(0,0,0,0);var de=function(r){Y(t,r);function t(n,i,e,o){var a;return a=r.call(this,n,i,e,o)||this,a._clazz=N,a}return t}(be),_w=function(){function r(n){this.matrix=n}var t=r.prototype;return t.transform=function(i,e,o){var a=this.matrix[0]*(i.x-this.matrix[2])/e,s=-this.matrix[1]*(i.y-this.matrix[3])/e;return o?(o.x=a,o.y=s,o):new N(a,s)},t.untransform=function(i,e,o){var a=i.x*e/this.matrix[0]+this.matrix[2],s=i.y*e/-this.matrix[1]+this.matrix[3];return o?(o.x=a,o.y=s,o):new U(a,s)},r}(),Eo={project:function(){},unproject:function(){},projectCoords:function(t){var n=this;if(!t)return[];if(!Array.isArray(t))return this.project(t);if(t.length===0)return[];if(!this.isSphere())return vo(t,this.project,this);if(Array.isArray(t[0]))return t.map(function(p){return n.projectCoords(p)});for(var i=this.getCircum(),e=this.getSphereExtent(),o=e.sx,a=e.sy,s,l,u=t[0],h,c,f,d,g=[this.project(u)],v=1,y=t.length;v<y;v++)h=t[v],c=h.x-u.x,f=h.y-u.y,d=this.project(h),Math.abs(c)>180&&(s===void 0&&(s=h.x>u.x),s&&(d._add(-i.x*ot(c)*o,0),h._add(-360*ot(c),0))),Math.abs(f)>90&&(l===void 0&&(l=h.y<u.y),l&&(d._add(0,-i.y*ot(f)*a),h._add(0,-180*ot(f)))),u=h,g.push(d);return g},unprojectCoords:function(t){return t?Array.isArray(t)?vo(t,this.unproject,this):this.unproject(t):[]},isSphere:function(){return!!this.sphere},isOutSphere:function(t){if(!this.isSphere())return!1;var n=this.getSphereExtent();return!n.contains(t)},wrapCoord:function(t){if(!this.isSphere())return t;var n=this.getSphereExtent(),i=new U(t);return n.contains(i)||(i.x=ri(t.x,n.xmin,n.xmax),i.y=ri(t.y,n.ymin,n.ymax)),i},getCircum:function(){if(!this.circum&&this.isSphere()){var t=this.getSphereExtent();this.circum={x:t.getWidth(),y:t.getHeight()}}return this.circum},getSphereExtent:function(){if(!this.extent&&this.isSphere()){var t=this.project(new U(180,90)),n=this.project(new U(-180,-90));this.extent=new be(n,t,this),this.extent.sx=t.x>n.x?1:-1,this.extent.sy=t.y>n.y?1:-1}return this.extent}},nv={measureLength:function(t,n){if(!Array.isArray(t))return this.measureLenBetween(t,n);for(var i=0,e=0,o=t.length;e<o-1;e++)i+=this.measureLenBetween(t[e],t[e+1]);return i}},xw=K({measure:"IDENTITY",measureLenBetween:function(t,n){if(!t||!n)return 0;try{return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}catch{return 0}},measureArea:function(t){if(!Array.isArray(t))return 0;for(var n=0,i=0,e=t.length;i<e;i++){var o=t[i],a=null;i===e-1?a=t[0]:a=t[i+1],n+=o.x*a.y-o.y*a.x}return Math.abs(n/2)},locate:function(t,n,i){return t=new U(t.x,t.y),this._locate(t,n,i)},_locate:function(t,n,i){return t?(n||(n=0),i||(i=0),!n&&!i||(t.x=t.x+n,t.y=t.y+i),t):null},rotate:function(t,n,i){return t=new U(t.x,t.y),this._rotate(t,n,i)},_rotate:function(){var r=new N(0,0);return function(t,n,i){return r.x=t.x-n.x,r.y=t.y-n.y,r._rotate(i*Math.PI/180),t.x=n.x+r.x,t.y=n.y+r.y,t}}()},nv),ww=function(){function r(n){this.radius=n}var t=r.prototype;return t.measureLenBetween=function(i,e){if(!i||!e)return 0;var o=ct(i.y),a=ct(e.y),s=o-a,l=ct(i.x)-ct(e.x);return o=2*Math.asin(Math.sqrt(Math.pow(Math.sin(s/2),2)+Math.cos(o)*Math.cos(a)*Math.pow(Math.sin(l/2),2))),o*=this.radius,Math.round(o*1e5)/1e5},t.measureArea=function(i){var e=ct(this.radius),o=0,a=i,s=a.length;if(s<3)return 0;var l;for(l=0;l<s-1;l++){var u=a[l],h=a[l+1];o+=u.x*e*Math.cos(ct(u.y))*h.y*e-h.x*e*Math.cos(ct(h.y))*u.y*e}return s=a[l],a=a[0],o+=s.x*e*Math.cos(ct(s.y))*a.y*e-a.x*e*Math.cos(ct(a.y))*s.y*e,.5*Math.abs(o)},t.locate=function(i,e,o){return i=new U(i.x,i.y),this._locate(i,e,o)},t._locate=function(i,e,o){if(!i)return null;if(e||(e=0),o||(o=0),!e&&!o)return i;var a,s,l=ct(i.y);if(o!==0){var u=Math.abs(o),h=Math.sin(u/(2*this.radius))*2;l=l+h*(o>0?1:-1),s=ri(l*180/Math.PI,-90,90)}else s=i.y;if(e!==0){var c=Math.abs(e),f=ct(i.x),d=2*Math.sqrt(Math.pow(Math.sin(c/(2*this.radius)),2)/Math.pow(Math.cos(l),2));f=f+d*(e>0?1:-1),a=ri(f*180/Math.PI,-180,180)}else a=i.x;return i.x=a,i.y=s,i},t.rotate=function(i,e,o){return i=new U(i),this._rotate(i,e,o)},t._rotate=function(i,e,o){var a=sR(e,i),s=a-o,l=this.measureLenBetween(e,i);return i.x=e.x,i.y=e.y,lR(i,l,s,this.radius)},r}();function sR(r,t,n){n===void 0&&(n={});var i;n.final?i=ay(t,r):i=ay(r,t);var e=i>180?-(360-i):i;return e}function ay(r,t){var n=ct(r.y),i=ct(t.y),e=ct(t.x-r.x);e>Math.PI&&(e-=2*Math.PI),e<-Math.PI&&(e+=2*Math.PI);var o=Math.log(Math.tan(i/2+Math.PI/4)/Math.tan(n/2+Math.PI/4)),a=Math.atan2(e,o);return(cb(a)+360)%360}function lR(r,t,n,i){var e=t/i,o=r.x*Math.PI/180,a=ct(r.y),s=ct(n),l=e*Math.cos(s),u=a+l;Math.abs(u)>Math.PI/2&&(u=u>0?Math.PI-u:-Math.PI-u);var h=Math.log(Math.tan(u/2+Math.PI/4)/Math.tan(a/2+Math.PI/4)),c=Math.abs(h)>1e-11?l/h:Math.cos(a),f=e*Math.sin(s)/c,d=o+f;return r.x=(d*180/Math.PI+540)%360-180,r.y=u*180/Math.PI,r}var fh=K({measure:"EPSG:4326",sphere:new ww(6378137),measureLenBetween:function(){return this.sphere.measureLenBetween.apply(this.sphere,arguments)},measureArea:function(){return this.sphere.measureArea.apply(this.sphere,arguments)},_locate:function(){return this.sphere._locate.apply(this.sphere,arguments)},locate:function(){return this.sphere.locate.apply(this.sphere,arguments)},_rotate:function(){return this.sphere._rotate.apply(this.sphere,arguments)},rotate:function(){return this.sphere.rotate.apply(this.sphere,arguments)}},nv),Cw=K({measure:"BAIDU",sphere:new ww(637099681e-2),measureLenBetween:function(){return this.sphere.measureLenBetween.apply(this.sphere,arguments)},measureArea:function(){return this.sphere.measureArea.apply(this.sphere,arguments)},_locate:function(){return this.sphere._locate.apply(this.sphere,arguments)},locate:function(){return this.sphere.locate.apply(this.sphere,arguments)},_rotate:function(){return this.sphere._rotate.apply(this.sphere,arguments)},rotate:function(){return this.sphere.rotate.apply(this.sphere,arguments)}},nv),uR=fh,oa={};function iv(r){oa[r.measure]=r}iv(xw);iv(fh);iv(Cw);var hR={getInstance:function(t){if(!t)return uR;for(var n in oa)if(cs(oa,n)){var i=oa[n].measure;if(!i)continue;if(t.toLowerCase()===i.toLowerCase())return oa[n]}return null}},sy=1e-7,Pw=K({},Eo,{code:"EPSG:3857",rad:Math.PI/180,metersPerDegree:6378137*Math.PI/180,maxLatitude:85.0511287798,project:function(t,n){var i=this.rad,e=this.metersPerDegree,o=this.maxLatitude,a=t.x,s=Math.max(Math.min(o,t.y),-o),l;s===0?l=0:l=Math.log(Math.tan((90+s)*i/2))/i;var u=a*e,h=l*e;return n?(n.x=u,n.y=h,n):new U(u,h)},unproject:function(t,n){var i=this.rad,e=this.metersPerDegree,o=t.x/e,a=t.y,s;a===0?s=0:(s=a/e,s=(2*Math.atan(Math.exp(s*i))-Math.PI/2)/i),Math.abs(Math.abs(o)-180)<sy&&(o=ot(o)*180),Math.abs(Math.abs(s)-this.maxLatitude)<sy&&(s=ot(s)*this.maxLatitude);var l=ri(o,-180,180),u=ri(s,-this.maxLatitude,this.maxLatitude);return n?(n.x=l,n.y=u,n):new U(l,u)}},fh),Sw=K({},Eo,{code:"EPSG:4326",project:function(t,n){return n?(n.x=t.x,n.y=t.y,n):new U(t)},unproject:function(t,n){return n?(n.x=t.x,n.y=t.y,n):new U(t)}},fh),cR=K({},Sw,{code:"EPSG:4490"}),fR=K({},Eo,{code:"BAIDU",project:function(t,n){return this.convertLL2MC(t,n)},unproject:function(t,n){return this.convertMC2LL(t,n)}},Cw,{EARTHRADIUS:637099681e-2,MCBAND:[1289059486e-2,836237787e-2,5591021,348198983e-2,167804312e-2,0],LLBAND:[75,60,45,30,15,0],MC2LL:[[1410526172116255e-23,898305509648872e-20,-1.9939833816331,200.9824383106796,-187.2403703815547,91.6087516669843,-23.38765649603339,2.57121317296198,-.03801003308653,173379812e-1],[-7435856389565537e-24,8983055097726239e-21,-.78625201886289,96.32687599759846,-1.85204757529826,-59.36935905485877,47.40033549296737,-16.50741931063887,2.28786674699375,1026014486e-2],[-3030883460898826e-23,898305509983578e-20,.30071316287616,59.74293618442277,7.357984074871,-25.38371002664745,13.45380521110908,-3.29883767235584,.32710905363475,685681737e-2],[-1981981304930552e-23,8983055099779535e-21,.03278182852591,40.31678527705744,.65659298677277,-4.44255534477492,.85341911805263,.12923347998204,-.04625736007561,448277706e-2],[309191371068437e-23,8983055096812155e-21,6995724062e-14,23.10934304144901,-.00023663490511,-.6321817810242,-.00663494467273,.03430082397953,-.00466043876332,25551644e-1],[2890871144776878e-24,8983055095805407e-21,-3068298e-14,7.47137025468032,-353937994e-14,-.02145144861037,-1234426596e-14,.00010322952773,-323890364e-14,826088.5]],LL2MC:[[-.0015702102444,111320.7020616939,1704480524535203,-10338987376042340,26112667856603880,-35149669176653700,26595700718403920,-10725012454188240,1800819912950474,82.5],[.0008277824516172526,111320.7020463578,6477955746671607e-7,-4082003173641316e-6,1077490566351142e-5,-1517187553151559e-5,1205306533862167e-5,-5124939663577472e-6,9133119359512032e-7,67.5],[.00337398766765,111320.7020202162,4481351045890365e-9,-2339375119931662e-8,7968221547186455e-8,-1159649932797253e-7,9723671115602145e-8,-4366194633752821e-8,8477230501135234e-9,52.5],[.00220636496208,111320.7020209128,51751.86112841131,3796837749470245e-9,992013.7397791013,-122195221711287e-8,1340652697009075e-9,-620943.6990984312,144416.9293806241,37.5],[-.0003441963504368392,111320.7020576856,278.2353980772752,2485758690035394e-9,6070.750963243378,54821.18345352118,9540.606633304236,-2710.55326746645,1405.483844121726,22.5],[-.0003218135878613132,111320.7020701615,.00369383431289,823725.6402795718,.46104986909093,2351.343141331292,1.58060784298199,8.77738589078284,.37238884252424,7.45]],convertMC2LL:function(t,n){for(var i,e=0,o=this.MCBAND.length;e<o;e++)if(Math.abs(t.y)>=this.MCBAND[e]){i=this.MC2LL[e];break}var a=this.convertor(t,i,n);return a},convertLL2MC:function(t,n){var i,e,o;t.x=this.getLoop(t.x,-180,180),t.y=this.getRange(t.y,-74,74);var a=new U(t.x,t.y);for(e=0,o=this.LLBAND.length;e<o;e++)if(a.y>=this.LLBAND[e]){i=this.LL2MC[e];break}if(!i){for(e=this.LLBAND.length-1;e>=0;e--)if(a.y<=-this.LLBAND[e]){i=this.LL2MC[e];break}}var s=this.convertor(t,i,n);return s},convertor:function(t,n,i){if(!t||!n)return null;var e=n[0]+n[1]*Math.abs(t.x),o=Math.abs(t.y)/n[9],a=n[2]+n[3]*o+n[4]*o*o+n[5]*o*o*o+n[6]*o*o*o*o+n[7]*o*o*o*o*o+n[8]*o*o*o*o*o*o;return e*=t.x<0?-1:1,a*=t.y<0?-1:1,i?(i.x=e,i.y=a,i):new U(e,a)},toRadians:function(t){return Math.PI*t/180},toDegrees:function(t){return 180*t/Math.PI},getRange:function(t,n,i){return n!=null&&(t=Math.max(t,n)),i!=null&&(t=Math.min(t,i)),t},getLoop:function(t,n,i){if(t===1/0)return i;if(t===-1/0)return n;for(;t>i;)t-=i-n;for(;t<n;)t+=i-n;return t}}),dR=K({},Eo,{code:"IDENTITY",project:function(t,n){return n?(n.x=t.x,n.y=t.y,n):t.copy()},unproject:function(t,n){return n?(n.x=t.x,n.y=t.y,n):t.copy()}},xw),Ew=Pw,nl=Object.freeze({EPSG3857:Pw,DEFAULT:Ew,EPSG4326:Sw,EPSG4490:cR,BAIDU:fR,IDENTITY:dR,Common:Eo}),Mw=function(r){return function(t){Y(n,t);function n(){return t.apply(this,arguments)||this}return n.registerRenderer=function(e,o){var a=this.prototype,s=Object.getPrototypeOf(a);return(!a._rendererClasses||a._rendererClasses===s._rendererClasses)&&(a._rendererClasses=a._rendererClasses?Object.create(a._rendererClasses):{}),a._rendererClasses[e.toLowerCase()]=o,this},n.getRendererClass=function(e){var o=this.prototype;return o._rendererClasses?o._rendererClasses[e.toLowerCase()]:null},n}(r)},mu={};function gR(r,t){mu[r]=t}var vR=`
    var adapters = {};
    onmessage = function (msg) {
        msg = msg.data;
        if (msg.messageType === 'batch') {
            const messages = msg.messages;
            if (messages) {
                for (let i = 0; i < messages.length; i++) {
                    dispatch(messages[i]);
                }
            }
        } else {
            dispatch(msg);
        }
    };

    function dispatch(msg) {
        var workerKey = msg.workerKey;
        var adapter = adapters[workerKey];
        if (!adapter) {
            post(msg.callback, 'Unregistered worker adapters for ' + workerKey);
            return;
        }
        try {
            adapter.onmessage(msg, wrap(msg.callback));
        } catch (err) {
            post(msg.callback, workerKey + ':' + err.message);
            console.error(err);
            throw err;
        }
    }

    function post(callback, err, data, buffers) {
        var msg = {
            callback : callback
        };
        if (err) {
            msg.error = err;
        } else {
            msg.data = data;
        }
        if (buffers && buffers.length > 0) {
            postMessage(msg, buffers);
        } else {
            postMessage(msg);
        }
    }
    function wrap(callback) {
        return function (err, data, buffers) {
            post(callback, err, data, buffers);
        };
    }
    var workerExports;
`,pR=`
    workerExports = null;
`;function mR(){var r=vR;for(var t in mu){var n=mu[t];Re(n)&&n.length===0&&(n=n()),r+=`
    workerExports = {};
    (`+n+`)(workerExports, self);
    adapters['`+t+"'] = workerExports",r+=`
    workerExports.initialize && workerExports.initialize(self);
        `}return r+=pR,r}var Ec;function yR(){if(typeof window=="undefined")return null;if(!Ec){var r=mR();Ec=window.URL.createObjectURL(new Blob([r],{type:"text/javascript"})),mu=null}return Ec}var _R=typeof window!="undefined"?window.navigator.hardwareConcurrency||4:0,xR=Math.max(Math.floor(_R/2),1),ly=function(){function r(n){n===void 0&&(n=50),this._limit=n,this._messages=[],this.buffers=[]}var t=r.prototype;return t.addMessage=function(i,e){if(this._messages.push(i),!!Array.isArray(e))for(var o=0;o<e.length;o++)this.buffers.indexOf(e[o])<0&&this.buffers.push(e[o])},t.isFull=function(){return this._messages.length>=this._limit},t.getMessage=function(){return{messageType:"batch",messages:this._messages}},r}(),wR=function(){function r(){this.active={},this.workerCount=typeof window!="undefined"?window.MAPTALKS_WORKER_COUNT||xR:0,this._messages=[],this._messageBuffers=[]}var t=r.prototype;return t.acquire=function(i){if(!this.workers){this.workers=[];for(var e=yR(),o=0;o<this.workerCount;o++){var a=new Worker(e);a.id=o,this.workers.push(a)}URL.revokeObjectURL(e)}return this.active[i]=!0,this.workers.slice()},t.release=function(i){delete this.active[i],Object.keys(this.active).length===0&&(this.workers.forEach(function(e){e.terminate()}),this.workers=null)},t.addMessage=function(i,e,o){var a=this._messages[i];(!a||!a.length)&&(a=this._messages[i]=[new ly]);var s=a[a.length-1];s.isFull()&&(s=new ly,this._messages[i].push(s)),s.addMessage(e,o)},t.commit=function(){if(this._messages.length){for(var i=0;i<this._messages.length;i++)if(!(!this._messages[i]||!this._messages[i].length)){var e=this._messages[i].shift();this.workers[i].postMessage(e.getMessage(),e.buffers)}}},r}(),Mc;function Tw(){return Mc||(Mc=new wR),Mc}var Tc=0,uy=[],kw=function(){function r(n){var i=this;this.workerKey=n,this.workerPool=Tw(),this.currentActor=0,this.actorId=Co(),this.workers=this.workerPool.acquire(this.actorId),this.callbacks={},this.callbackID=0,this.receiveFn=this.receive.bind(this),this.workers.forEach(function(e){e.addEventListener("message",i.receiveFn,!1)})}var t=r.prototype;return t.isActive=function(){return!!this.workers},t.broadcast=function(i,e,o){var a=this;return o=o||function(){},CR(this.workers,function(s,l){a.send(i,e,l,s.id)},o),this},t.send=function(i,e,o,a){var s=o?this.actorId+":"+this.callbackID++:null;return o&&(this.callbacks[s]=o),this.post({data:i,callback:String(s)},e,a),this},t.receive=function(i){var e=this,o=i.data,a=o.callback,s=this.callbacks[a];delete this.callbacks[a],o.type==="<request>"?this.actorId===o.actorId&&this[o.command](o.params,function(l,u,h){var c={type:"<response>",callback:o.callback};l?c.error=l.message:c.data=u,e.post(c,h||uy,o.workerId)}):s&&o.error?s(o.error):s&&s(null,o.data)},t.remove=function(){var i=this;this.workers.forEach(function(e){e.removeEventListener("message",i.receiveFn,!1)}),this.workerPool.release(this.actorId),delete this.receiveFn,delete this.workers,delete this.callbacks,delete this.workerPool},t.post=function(i,e,o){return(typeof o!="number"||isNaN(o))&&(o=this.currentActor=(this.currentActor+1)%this.workerPool.workerCount),i.workerId=o,i.workerKey=this.workerKey,i.actorId=this.actorId,this.workerPool.addMessage(o,i,e||uy),o},t.getDedicatedWorker=function(){return Tc=(Tc+1)%this.workerPool.workerCount,Tc},r}();function CR(r,t,n){r.length||n(null,[]);var i=r.length,e=new Array(r.length),o=null;r.forEach(function(a,s){t(a,function(l,u){l&&(o=l),e[s]=u,--i===0&&n(o,e)})})}var ov="core-fetch-image",PR=[],SR=function(r){Y(t,r);function t(){return r.call(this,ov)||this}var n=t.prototype;return n.fetchImage=function(e,o){var a={url:e};this.send(a,PR,o)},t}(kw),fs=function(r){Y(t,r);function t(i){var e;return e=r.call(this)||this,e.layer=i,e._painted=!1,e._drawTime=0,ye.decodeImageInWorker&&(e._resWorkerConn=new SR),e.setToRedraw(),e}var n=t.prototype;return n.render=function(e){this.prepareRender(),!(!this.getMap()||!this.layer.isVisible())&&(this.resources||(this.resources=new mo),this.checkAndDraw(this._tryToDraw,e))},n.checkAndDraw=function(e){var o=this;this._toRedraw=!1;for(var a=arguments.length,s=new Array(a>1?a-1:0),l=1;l<a;l++)s[l-1]=arguments[l];if(this.checkResources){var u=this.checkResources();u.length>0?(this._loadingResource=!0,this.loadResources(u).then(function(){o._loadingResource=!1,o.layer&&(o.layer.fire("resourceload"),o.setToRedraw())})):e.call.apply(e,[this].concat(s))}else e.call.apply(e,[this].concat(s))},n.testIfNeedRedraw=function(){var e=this.getMap();return this._loadingResource?!1:this._toRedraw?!0:e.isInteracting()&&!this.drawOnInteracting?!1:!!this.needToRedraw()},n.needToRedraw=function(){var e=this.getMap();return e.isInteracting()||e.getRenderer().isViewChanged()?!(!e.getPitch()&&e.isMoving()&&!e.isZooming()&&!e.isRotating()&&!this.layer.options.forceRenderOnMoving):!1},n.onSkipDrawOnInteracting=function(){},n.isLoadingResource=function(){return this._loadingResource},n.isRenderComplete=function(){return!!this._renderComplete},n.mustRenderOnInteracting=function(){return!this._painted},n.setToRedraw=function(){return this._toRedraw=!0,this},n.setCanvasUpdated=function(){return this._canvasUpdated=!0,this},n.isCanvasUpdated=function(){return!!this._canvasUpdated},n.remove=function(){this.onRemove(),delete this._loadingResource,delete this.southWest,delete this.canvas,delete this.context,delete this.canvasExtent2D,delete this._extent2D,this.resources&&this.resources.remove(),delete this.resources,delete this.layer},n.onRemove=function(){},n.onAdd=function(){},n.getMap=function(){return this.layer?this.layer.getMap():null},n.getCanvasImage=function(){var e=this.getMap();if(this._canvasUpdated=!1,this._renderZoom!==e.getZoom()||!this.canvas||!this._extent2D||this.isBlank()||this.layer.isEmpty&&this.layer.isEmpty())return null;var o=e._pointToContainerPoint(this.southWest)._add(0,-e.height);return{image:this.canvas,layer:this.layer,point:o}},n.clear=function(){this.clearCanvas()},n.isBlank=function(){return!this._painted},n.show=function(){this.setToRedraw()},n.hide=function(){this.clear(),this.setToRedraw()},n.setZIndex=function(){this.setToRedraw()},n.hitDetect=function(e){if(!this.context||this.layer.isEmpty&&this.layer.isEmpty()||this.isBlank()||this._errorThrown)return!1;var o=this.getMap(),a=o.getDevicePixelRatio(),s=o.getSize();if(e.x<0||e.x>s.width*a||e.y<0||e.y>s.height*a)return!1;var l=this.getImageData&&this.getImageData();if(l){var u=a*e.x,h=a*e.y,c=h*l.width*4+u*4;return l.data[c+3]>0}try{var f=this.context.getImageData(a*e.x,a*e.y,1,1).data;if(f[3]>0)return!0}catch(d){return this._errorThrown||(console&&console.warn(`hit detect failed with tainted canvas, some geometries have external resources in another domain:
`,d),this._errorThrown=!0),!1}return!1},n.loadResources=function(e){this.resources||(this.resources=new mo);var o=this.resources,a=[];if(Me(e))for(var s={},l=e.length-1;l>=0;l--){var u=e[l];!u||!u.length||s[u.join("-")]||(s[u.join("-")]=1,o.isResourceLoaded(u,!0)||a.push(new ty(this._promiseResource(u))))}return ty.all(a)},n.prepareRender=function(){delete this._renderComplete;var e=this.getMap();this._renderZoom=e.getZoom(),this.canvasExtent2D=this._extent2D=e._get2DExtent(),this.southWest=e._containerPointToPoint(new N(0,e.height))},n.createCanvas=function(){if(!this.canvas){var e=this.getMap(),o=e.getSize(),a=e.getDevicePixelRatio(),s=Math.round(a*o.width),l=Math.round(a*o.height);if(this.layer._canvas){var u=this.layer._canvas;u.width=s,u.height=l,u.style&&(u.style.width=o.width+"px",u.style.height=o.height+"px"),this.canvas=this.layer._canvas}else this.canvas=Z.createCanvas(s,l,e.CanvasClass);this.onCanvasCreate()}},n.onCanvasCreate=function(){},n.createContext=function(){if(!(this.gl&&this.gl.canvas===this.canvas||this.context)&&(this.context=this.canvas.getContext("2d"),!!this.context)){this.layer.options.globalCompositeOperation&&(this.context.globalCompositeOperation=this.layer.options.globalCompositeOperation);var e=this.getMap().getDevicePixelRatio();e!==1&&this.context.scale(e,e)}},n.resetCanvasTransform=function(){if(!!this.context){var e=this.getMap().getDevicePixelRatio();this.context.setTransform(e,0,0,e,0,0)}},n.resizeCanvas=function(e){var o=this.canvas;if(!!o){var a=e||this.getMap().getSize(),s=this.getMap().getDevicePixelRatio(),l=q1(a,s),u=l.width,h=l.height,c=l.cssWidth,f=l.cssHeight;this.layer._canvas&&(o.style.width!==c||o.style.height!==f)&&(o.style.width=c,o.style.height=f),!(o.width===u&&o.height===h)&&(o.height=h,o.width=u,s!==1&&this.context&&this.context.scale(s,s))}},n.clearCanvas=function(){if(!(!this.context||!this.getMap())){var e=this.getMap().getDevicePixelRatio(),o=1/e,a=this.canvas.width*o,s=this.canvas.height*o;Z.clearRect(this.context,0,0,Math.max(a,this.canvas.width),Math.max(s,this.canvas.height))}},n.prepareCanvas=function(){this.canvas?(this.resetCanvasTransform(),this.clearCanvas(),this.resizeCanvas()):(this.createCanvas(),this.createContext(),this.layer.onCanvasCreate(),this.layer.fire("canvascreate",{context:this.context,gl:this.gl})),delete this._maskExtent;var e=this.layer.getMask();if(!e)return this.layer.fire("renderstart",{context:this.context,gl:this.gl}),null;var o=this._maskExtent=e._getMaskPainter().get2DExtent();return o.intersects(this._extent2D)?(this.layer.fire("renderstart",{context:this.context,gl:this.gl}),o):(this.layer.fire("renderstart",{context:this.context,gl:this.gl}),o)},n.clipCanvas=function(e){var o=this.layer.getMask();if(!o)return!1;var a=this.southWest,s=this.getMap();this.southWest=s._containerPointToPoint(new N(0,s.height)),e.save();var l=s.getDevicePixelRatio();if(l!==1&&(e.save(),e.scale(l,l)),o.getGeometries){e.isMultiClip=!0;var u=o.getGeometries()||[];e.beginPath(),u.forEach(function(c){var f=c._getMaskPainter();f.paint(null,e)}),e.stroke(),delete e.isMultiClip}else{var h=o._getMaskPainter();h.paint(null,e)}return l!==1&&e.restore(),e.clip(),this.southWest=a,!0},n.getViewExtent=function(){return{extent:this._extent2D,maskExtent:this._maskExtent,zoom:this._renderZoom,southWest:this.southWest}},n.completeRender=function(){this.getMap()&&(this._renderComplete=!0,this.layer.fire("renderend",{context:this.context,gl:this.gl}),this.setCanvasUpdated())},n.getEvents=function(){return{_zoomstart:this.onZoomStart,_zooming:this.onZooming,_zoomend:this.onZoomEnd,_resize:this.onResize,_movestart:this.onMoveStart,_moving:this.onMoving,_moveend:this.onMoveEnd,_dragrotatestart:this.onDragRotateStart,_dragrotating:this.onDragRotating,_dragrotateend:this.onDragRotateEnd,_spatialreferencechange:this.onSpatialReferenceChange}},n.onZoomStart=function(){},n.onZoomEnd=function(){this.setToRedraw()},n.onZooming=function(){},n.onMoveStart=function(){},n.onMoving=function(){},n.onMoveEnd=function(){this.setToRedraw()},n.onResize=function(){delete this._extent2D,this.resizeCanvas(),this.setToRedraw()},n.onDragRotateStart=function(){},n.onDragRotating=function(){},n.onDragRotateEnd=function(){this.setToRedraw()},n.onSpatialReferenceChange=function(){},n.getDrawTime=function(){return this._drawTime},n._tryToDraw=function(e){if(this._toRedraw=!1,!this.canvas&&this.layer.isEmpty&&this.layer.isEmpty()){this._renderComplete=!0;return}this._drawAndRecord(e)},n._drawAndRecord=function(e){if(!!this.getMap()){var o=this._painted;this._painted=!0;var a=$e();this.draw(e),a=$e()-a,this._drawTime=o?a:a/2,o&&this.layer&&this.layer.options.logDrawTime&&console.log(this.layer.getId(),"frameTimeStamp:",e,"drawTime:",this._drawTime)}},n._promiseResource=function(e){var o=this,a=this.resources,s=this.layer.options.crossOrigin,l=this.layer.options.renderer||"";return function(u){if(a.isResourceLoaded(e,!0)){u(e);return}if(!Zi(e[0])&&ye.decodeImageInWorker){var h=U1(e[0]);o._resWorkerConn.fetchImage(h,function(f,d){if(f){f&&typeof console!="undefined"&&console.warn(f),u(e);return}Z1(d,function(g){o._cacheResource(e,g),u(e)})})}else{var c=new Image;O(s)?l!=="canvas"&&(c.crossOrigin=""):c.crossOrigin=s,Zi(e[0])&&!it&&(e[1]&&(e[1]*=2),e[2]&&(e[2]*=2)),c.onload=function(){o._cacheResource(e,c),u(e)},c.onabort=function(f){console&&console.warn("image loading aborted: "+e[0]),f&&console&&console.warn(f),u(e)},c.onerror=function(f){f&&typeof console!="undefined"&&console.warn(f),a.markErrorResource(e),u(e)},du(c,e)}}},n._cacheResource=function(e,o){if(!(!this.layer||!this.resources)){var a=e[1],s=e[2];if(this.layer.options.cacheSvgOnCanvas&&Zi(e[0])===1&&(ye.edge||ye.ie)){O(a)&&(a=o.width||this.layer.options.defaultIconSize[0]),O(s)&&(s=o.height||this.layer.options.defaultIconSize[1]);var l=Z.createCanvas(a,s);Z.image(l.getContext("2d"),o,0,0,a,s),o=l}this.resources.addResource(e,o)}},t}(fr),mo=function(){function r(){this.resources={},this._errors={}}var t=r.prototype;return t.addResource=function(i,e){var o=this;if(this.resources[i[0]]={image:e,width:+i[1],height:+i[2],refCnt:0},e&&!e.close&&ye.imageBitMap){if(e.src&&Zi(e.src))return;createImageBitmap(e).then(function(a){!o.resources[i[0]]||(o.resources[i[0]].image=a)})}},t.isResourceLoaded=function(i,e){if(!i)return!1;var o=this._getImgUrl(i);if(this._errors[o])return!0;var a=this.resources[o];return!(!a||e&&Zi(i[0])&&(+i[1]>a.width||+i[2]>a.height))},t.login=function(i){var e=this.resources[i];e&&e.refCnt++},t.logout=function(i){var e=this.resources[i];e&&e.refCnt--<=0&&delete this.resources[i]},t.getImage=function(i){var e=this._getImgUrl(i);return!this.isResourceLoaded(i)||this._errors[e]?null:this.resources[e].image},t.markErrorResource=function(i){this._errors[this._getImgUrl(i)]=1},t.merge=function(i){if(!i)return this;for(var e in i.resources){var o=i.resources[e];this.addResource([e,o.width,o.height],o.image)}return this},t.forEach=function(i){if(!this.resources)return this;for(var e in this.resources)cs(this.resources,e)&&i(e,this.resources[e]);return this},t._getImgUrl=function(i){return Array.isArray(i)?i[0]:i},t.remove=function(){for(var i in this.resources){var e=this.resources[i];e&&e.image&&e.image.close&&e.image.close()}this.resources={}},r}(),qi={markerWidth:10,markerHeight:10,markerLineWidth:1};function bw(){return .5}var ER=new N(0,0);function av(r,t,n,i,e,o,a){var s=ER.set(t,n),l=r.set(s.x,s.y,s.x+o,s.y+a);return l._add(e),i&&TR(l,i),l}var MR=[];function Rw(r,t,n){n=n||Dw(MR,t);var i=Lw(t,n[0],n[1]);return av(r,t.markerDx||0,t.markerDy||0,dh(t),i,n[0],n[1])}function Aw(r){return r==="rectangle"?"right":"middle"}function Ow(r){return r==="bar"||r==="pie"||r==="pin"?"top":r==="rectangle"?"bottom":"middle"}var Yi=new Xe(0,0);function Lw(r,t,n){var i=bw(),e=2*(r.shadowBlur||0),o=e+i;Yi.width=t,Yi.height=n;var a=r.markerType,s=ni(Yi,r.markerHorizontalAlignment||Aw(a),r.markerVerticalAlignment||Ow(a));return s.x!==-t/2&&(s.x-=ot(s.x+t/2)*o),s.y!==-n/2&&(s.y-=ot(s.y+n/2)*o),s}function Dw(r,t){var n=bw(),i=oe(t.markerWidth,qi.markerWidth),e=oe(t.markerHeight,qi.markerHeight),o=oe(t.markerLineWidth,qi.markerLineWidth),a=2*((t.shadowBlur||0)+Math.max(Math.abs(t.shadowOffsetX||0)+Math.abs(t.shadowOffsetY||0))),s=Math.round(i+o+a+n*2),l=Math.round(e+o+a+n*2);return r[0]=s,r[1]=l,r}var hy=new de;function TR(r,t){var n=r.xmin,i=r.ymin,e=r.xmax,o=r.ymax;return hy.set(n,i,e,o),hy.convertTo(function(a){return a._rotate(t)},r)}function dh(r,t){t===void 0&&(t="markerRotation");var n=r[t];return se(n)?-n*Math.PI/180:0}function Ed(r,t,n){var i=t.markerFile,e=n?n.getImage(i):null,o=t.markerWidth||(e?e.width:0),a=t.markerHeight||(e?e.height:0);Yi.width=o,Yi.height=a;var s=ni(Yi,t.markerHorizontalAlignment||"middle",t.markerVerticalAlignment||"top");return av(r,t.markerDx||0,t.markerDy||0,dh(t),s,o,a)}function Iw(r,t,n){var i=n.size,e=ni(i,t.textHorizontalAlignment,t.textVerticalAlignment);if(t.textHaloRadius){var o=t.textHaloRadius;i=i.add(o*2,o*2)}return av(r,t.textDx||0,t.textDy||0,dh(t,"textRotation"),e,i.width,i.height)}var il=new de;function Md(r,t,n,i){var e=r||new de;if(Array.isArray(t)){for(var o=t,a=0;a<o.length;a++)Md(e,o[a],n,i[a]);return e}return yu(t)&&e._combine(Iw(il,t,i)),sv(t)&&e._combine(Ed(il,t,n)),_u(t)&&e._combine(Rw(il,t)),lv(t)&&e._combine(Ed(il,t)),e}function yu(r){return r?!O(r.textName):!1}function sv(r){return r?!O(r.markerFile):!1}function _u(r){return r?!!(O(r.markerFile)&&!O(r.markerType)&&r.markerType!=="path"):!1}function lv(r){return r?!!(O(r.markerFile)&&r.markerType==="path"):!1}var kc=["markerWidth","markerHeight","markerHorizontalAlignment","markerVerticalAlignment","markerDx","markerDy","textName","textSize","textDx","textDy","textVerticalAlignment","textHorizontalAlignment","textRotation"],bc=["textName","markerType","markerFile","textHaloRadius","shadowBlur","shadowOffsetX","shadowOffsetY"];function bl(r,t,n,i){for(var e=[],o=0,a,s=0,l=r.length;s<l-1;s++)a=kR(r[s],r[s+1],t,s,n,i),a&&(e[o]=e[o]||[],e[o].push({point:a[0],index:s}),(a[1]!==r[s+1]||s===l-2)&&(e[o].push({point:a[1],index:s+1}),o++));return e}var cy;function kR(r,t,n,i,e,o){var a=i?cy:Ji(r,n),s=Ji(t,n),l,u,h;for(cy=s;;){if(!(a|s))return[r,t];if(a&s)return!1;if(o)return[r,t];l=a||s,u=Td(r,t,l,n,e),h=Ji(u,n),l===a?(r=u,a=h):(t=u,s=h)}}function Rl(r,t,n){var i=[1,4,2,8],e,o,a,s,l,u,h,c,f;for(o=0,h=r.length;o<h;o++)r[o]._code=Ji(r[o],t);for(s=0;s<4;s++){for(c=i[s],e=[],o=0,h=r.length,a=h-1;o<h;a=o++)l=r[o],u=r[a],l._code&c?u._code&c||(f=Td(u,l,c,t,n),f._code=Ji(f,t),e.push(f)):(u._code&c&&(f=Td(u,l,c,t,n),f._code=Ji(f,t),e.push(f)),e.push(l));r=e}return r}function Td(r,t,n,i,e){var o=t.x-r.x,a=t.y-r.y,s=i.getMin(),l=i.getMax(),u,h;n&8?(u=r.x+o*(l.y-r.y)/a,h=l.y):n&4?(u=r.x+o*(s.y-r.y)/a,h=s.y):n&2?(u=l.x,h=r.y+a*(l.x-r.x)/o):n&1&&(u=s.x,h=r.y+a*(s.x-r.x)/o);var c=new N(u,h);return e&&c._round(),c}function Ji(r,t){var n=0;return r.x<t.getMin().x?n|=1:r.x>t.getMax().x&&(n|=2),r.y<t.getMin().y?n|=4:r.y>t.getMax().y&&(n|=8),n}function Fw(r,t,n,i){r=new N(r);var e=Math.abs(n.x-t.x),o=Math.abs(n.y-t.y),a=Math.sqrt(Math.abs(e*e-o*o)),s=e>=o,l,u,h;return s?(l=new N(t.x-a,t.y),u=new N(t.x+a,t.y),h=e*2):(l=new N(t.x,t.y-a),u=new N(t.x,t.y+a),h=o*2),r.distanceTo(l)+r.distanceTo(u)<=h+2*i}var bR=function(){function r(){}var t=r.prototype;return t.getMap=function(){return this.geometry.getMap()},t.getPainter=function(){return this.painter},t.isDynamicSize=function(){return!1},r.testColor=function(i){return!i||!pe(i)?!1:ub.indexOf(i)>=0},r}(),Nw=function(r){Y(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n._prepareContext=function(e){if(Je(this.symbol.opacity)?this._opacityFn||(this._opacityFn=Q1(this.symbol.opacity)):delete this._opacityFn,se(this.symbol.opacity))e.globalAlpha!==this.symbol.opacity&&(e.globalAlpha=this.symbol.opacity);else if(this._opacityFn){var o=this.getMap();e.globalAlpha=this._opacityFn(o.getZoom())}else e.globalAlpha!==1&&(e.globalAlpha=1)},n.prepareCanvas=function(e,o,a){e.setLineDash&&Me(o.lineDasharray)&&e.setLineDash(o.lineDasharray);var s=this.getPainter().isHitTesting();Z.prepareCanvas(e,o,a,s)},n.remove=function(){},n.setZIndex=function(){},n.show=function(){},n.hide=function(){},n._defineStyle=function(e){return vu(e,this.geometry)},t}(bR);function RR(r,t){var n=r&&r.getImage(t);return n||null}function zw(r,t,n,i){var e=jw(n),o=n,a=o.markerType.toLowerCase(),s=Hw(a,o.markerWidth,o.markerHeight),l=e.lineOpacity,u=e.polygonOpacity,h=Rn(e.polygonFill);if(h){var c;Rn(e.polygonFill)&&(c||(c=AR(t,o.markerWidth,o.markerHeight)),e.polygonGradientExtent=c)}Z.prepareCanvas(r,e,i);var f=o.markerWidth,d=o.markerHeight,g=o.markerLineWidth/2;if(a==="ellipse")Z.ellipse(r,t,f/2,d/2,d/2,l,u);else if(a==="cross"||a==="x"){for(var v=s.length-1;v>=0;v--)s[v]._add(t);Z.path(r,s.slice(0,2),l),Z.path(r,s.slice(2,4),l)}else if(a==="diamond"||a==="bar"||a==="square"||a==="rectangle"||a==="triangle"){a==="bar"?t=t.add(0,-g):a==="rectangle"&&(t=t.add(g,g));for(var y=s.length-1;y>=0;y--)s[y]._add(t);Z.polygon(r,s,l,u)}else if(a==="pin"){t=t.add(0,-g);for(var p=s.length-1;p>=0;p--)s[p]._add(t);var m=r.lineCap;r.lineCap="round",Z.bezierCurveAndFill(r,s,l,u),r.lineCap=m}else if(a==="pie"){t=t.add(0,-g);var _=Math.atan(f/2/d)*180/Math.PI,x=r.lineCap;r.lineCap="round",Z.sector(r,t,d,[90-_,90+_],l,u),r.lineCap=x}else throw new Error("unsupported markerType: "+a);return r.canvas}function AR(r,t,n){var i=new de;return i._combine(r),i.xmin+=-t/2,i.ymin+=-n/2,i.xmax+=t/2,i.ymax+=n/2,i}function jw(r){var t={lineColor:r.markerLineColor,linePatternFile:r.markerLinePatternFile,lineWidth:r.markerLineWidth,lineOpacity:r.markerLineOpacity,lineDasharray:r.markerLineDasharray,lineCap:"butt",lineJoin:"round",polygonFill:r.markerFill,polygonPatternFile:r.markerFillPatternFile,polygonOpacity:r.markerFillOpacity};return t.lineWidth===0&&(t.lineOpacity=0),t}function Hw(r,t,n){var i=n/2,e=t/2,o=0,a=0,s,l,u,h;if(r==="triangle")return s=new N(o,a-i),l=new N(o-e,a+i),u=new N(o+e,a+i),[s,l,u];if(r==="cross")return s=new N(o-e,a),l=new N(o+e,a),u=new N(o,a-i),h=new N(o,a+i),[s,l,u,h];if(r==="diamond")return s=new N(o-e,a),l=new N(o,a-i),u=new N(o+e,a),h=new N(o,a+i),[s,l,u,h];if(r==="square")return s=new N(o-e,a+i),l=new N(o+e,a+i),u=new N(o+e,a-i),h=new N(o-e,a-i),[s,l,u,h];if(r==="rectangle")return s=new N(o,a),l=s.add(t,0),u=s.add(t,n),h=s.add(0,n),[s,l,u,h];if(r==="x")return s=new N(o-e,a+i),l=new N(o+e,a-i),u=new N(o+e,a+i),h=new N(o-e,a-i),[s,l,u,h];if(r==="bar")return s=new N(o-e,a-n),l=new N(o+e,a-n),u=new N(o+e,a),h=new N(o-e,a),[s,l,u,h];if(r==="pin"||r==="pie"){var c=n*Math.atan(e/i);return s=new N(o,a),l=new N(o-c,a-n),u=new N(o+c,a-n),h=new N(o,a),[s,l,u,h]}return[]}var OR=new N(0,0),LR=new N(0,0),DR=new N(0,0),IR=new N(0,0),Mo=function(r){Y(t,r);function t(i,e,o){var a;return a=r.call(this)||this,a.symbol=i,a.geometry=e,a.painter=o,a}var n=t.prototype;return n.get2DExtent=function(){for(var e=this.getMap(),o=e.getGLRes(),a=new de,s=this._getRenderPoints()[0],l=s.length-1;l>=0;l--)s[l]&&a._combine(e._pointAtResToPoint(s[l],o));return a},n.isDynamicSize=function(){var e=this.symbol;return Je(e.markerWidth)||Je(e.markerHeight)||Je(e.textSize)},n._rotateExtent=function(e,o){return e.convertTo(function(a){return a._rotate(o)})},n._getRenderPoints=function(){var e=this.getPainter(),o=e.isSpriting()?"center":this.getPlacement();return this.getPainter().getRenderPoints(o)},n._getRenderContainerPoints=function(e){var o=this.getPainter();if(o.isSpriting())return this._getRenderPoints()[0];var a=this.geometry,s=this.getDxDy(),l;if(a._cPoint&&!e){var u=e?DR:IR;u.set(a._cPoint.x,a._cPoint.y);var h=o.containerOffset;u._sub(h);var c=s.x,f=s.y;(c||f)&&u._add(c||0,f||0),l=[u]}else{var d=this._getRenderPoints()[0];l=this.painter._pointContainerPoints(d,s.x,s.y,e,!0,this.getPlacement())}if(!l||!Array.isArray(l[0]))return l;for(var g=[],v=0,y=l.length;v<y;v++)for(var p=0,m=l[v].length;p<m;p++)g.push(l[v][p]);return g},n.getPlacement=function(){return this.symbol.markerPlacement},n.getRotation=function(){return dh(this.style)},n.getDxDy=function(){var e=this.style,o=e.markerDx,a=e.markerDy;return new N(o,a)},n._getRotationAt=function(e){var o=this.getRotation();o||(o=0);var a=this._getRenderPoints()[1];if(!a||!a[e])return o;var s=this.getMap(),l=a[e][0],u=a[e][1];if(s.isTransforming()){var h=s.getGLRes();return l=s._pointAtResToContainerPoint(a[e][0],h,0,OR),u=s._pointAtResToContainerPoint(a[e][1],h,0,LR),o+pd(l.x,l.y,u.x,u.y)}else return o+-pd(l.x,l.y,u.x,u.y)},n._rotate=function(e,o,a){if(a){var s=this.getDxDy(),l=o.sub(s);return e.save(),e.translate(l.x,l.y),e.rotate(a),s}return null},t}(Nw),FR=function(r){Y(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n.getPlacement=function(){return"point"},n.getDxDy=function(){return new N(0,0)},n.symbolize=function(e){var o=this.geometry,a=o.getLayer();if(!(!o.options.debug&&a&&!a.options.debug)){var s=this.getMap();if(!(!s||s.isZooming())){var l=a.options.debugOutline,u=1;e.strokeStyle=l,e.fillStyle=l;var h=o.getContainerExtent().toArray();Z.polygon(e,[h],u,0);for(var c=this._getRenderContainerPoints(),f=this.geometry.getId(),d=Hw("cross",10,10),g=0;g<c.length;g++){var v=c[g];O(f)||Z.fillText(e,f,v.add(8,-4),l);for(var y=[],p=0;p<d.length;p++)y.push(d[p].add(v));Z.path(e,y.slice(0,2),u),Z.path(e,y.slice(2,4),u)}}}},t}(Mo),Rc=new Xe(1,1),uv=function(r){Y(t,r),t.test=function(e){return sv(e)};function t(i,e,o){var a;return a=r.call(this,i,e,o)||this,a.style=a._defineStyle(a.translate()),a}var n=t.prototype;return n.symbolize=function(e,o){var a=this.style;if(!(!this.painter.isHitTesting()&&(a.markerWidth===0||a.markerHeight===0||a.markerOpacity===0))){var s=this._getRenderContainerPoints();if(!!Me(s)){var l=this._getImage(o);if(!l){typeof console!="undefined"&&console.warn("no img found for "+(this.style.markerFile||this._url[0]));return}this._prepareContext(e);var u=a.markerWidth,h=a.markerHeight;if(!se(u)||!se(h)){u=l.width,h=l.height,a.markerWidth=u,a.markerHeight=h;var c=a.markerFile;o.isResourceLoaded(c)||o.addResource(c,l);var f=this.getPainter();f.isSpriting()||f.removeCache()}var d;this.symbol.markerType!=="path"&&se(a.markerOpacity)&&a.markerOpacity<1&&(d=e.globalAlpha,e.globalAlpha*=a.markerOpacity),Rc.width=u,Rc.height=h;for(var g=ni(Rc,a.markerHorizontalAlignment,a.markerVerticalAlignment),v=0,y=s.length;v<y;v++){var p=s[v],m=this.getRotation()?this._rotate(e,p,this._getRotationAt(v)):null;m&&(p=m),Z.image(e,l,p.x+g.x,p.y+g.y,u,h),m&&e.restore()}d!==void 0&&(e.globalAlpha=d)}}},n._getImage=function(e){return RR(e,this.style.markerFile)},n.getFixedExtent=function(e){return this._fixedExtent=this._fixedExtent||new de,Ed(this._fixedExtent,this.style,e)},n.translate=function(){var e=this.symbol;return{markerFile:e.markerFile,markerOpacity:oe(e.markerOpacity,1),markerWidth:oe(e.markerWidth,null),markerHeight:oe(e.markerHeight,null),markerRotation:oe(e.markerRotation,0),markerDx:oe(e.markerDx,0),markerDy:oe(e.markerDy,0),markerHorizontalAlignment:oe(e.markerHorizontalAlignment,"middle"),markerVerticalAlignment:oe(e.markerVerticalAlignment,"top")}},t}(Mo),NR=new U(0,0),zR=new U(0,0),Vw=function(r){Y(t,r),t.test=function(e,o){if(!e||o&&o.type==="Point")return!1;for(var a in e){var s=a.slice(0,4);if(s==="line"||s==="poly")return!0}return!1};function t(i,e,o){var a;return a=r.call(this)||this,a.symbol=i,a.geometry=e,a.painter=o,e.type==="Point"?Ye(a):(a.style=a._defineStyle(a.translate()),a)}var n=t.prototype;return n.symbolize=function(e,o){var a=this.style;if(!(a.polygonOpacity===0&&a.lineOpacity===0&&!this.painter.isHitTesting())){var s=this._getPaintParams();if(!!s){this._prepareContext(e);var l=Rn(a.lineColor),u=this.geometry.getJSONType()==="Polygon"||this.geometry.type==="LineString";l&&(a.lineColor.places||!u)&&(a.lineGradientExtent=this.geometry.getContainerExtent()._expand(a.lineWidth)),Rn(a.polygonFill)&&(a.polygonGradientExtent=this.geometry.getContainerExtent());var h=s[0],c=this.geometry.getJSONType()==="Polygon"&&h.length>0&&Array.isArray(h[0][0])||this.geometry.type==="LineString"&&h.length>0&&Array.isArray(h[0]);if(c)for(var f=0;f<h.length;f++){this.prepareCanvas(e,a,o),l&&u&&!a.lineColor.places&&this._createGradient(e,h[f],a.lineColor);var d=[e,h[f]];s.length>1&&d.push.apply(d,s.slice(1)),d.push(a.lineOpacity,a.polygonOpacity,a.lineDasharray),this.geometry._paintOn.apply(this.geometry,d)}else{this.prepareCanvas(e,a,o),l&&u&&!a.lineColor.places&&this._createGradient(e,h,a.lineColor);var g=[e];g.push.apply(g,s),g.push(a.lineOpacity,a.polygonOpacity,a.lineDasharray),this.geometry._paintOn.apply(this.geometry,g)}e.setLineDash&&Array.isArray(a.lineDasharray)&&e.setLineDash([])}}},n.get2DExtent=function(){var e=this.getMap(),o=this.geometry._getPrjExtent();if(!o)return null;(!this._extMin||!this._extMax)&&(this._extMin=new U(0,0),this._extMax=new U(0,0)),this._extMin.x=o.xmin,this._extMin.y=o.ymin,this._extMax.x=o.xmax,this._extMax.y=o.ymax;var a=e._prjToPoint(this._extMin,void 0,NR),s=e._prjToPoint(this._extMax,void 0,zR);return this._pxExtent?this._pxExtent.set(Math.min(a.x,s.x),Math.min(a.y,s.y),Math.max(a.x,s.x),Math.max(a.y,s.y)):this._pxExtent=new de(a,s),this._pxExtent},n.getFixedExtent=function(){var e=this.style.lineWidth/2;return new de(-e,-e,e,e)},n._getPaintParams=function(){return this.getPainter().getPaintParams(this.style.lineDx,this.style.lineDy)},n.translate=function(){var e=this.symbol,o={lineColor:oe(e.lineColor,"#000"),lineWidth:oe(e.lineWidth,2),lineOpacity:oe(e.lineOpacity,1),lineDasharray:oe(e.lineDasharray,[]),lineCap:oe(e.lineCap,"butt"),lineJoin:oe(e.lineJoin,"miter"),linePatternFile:oe(e.linePatternFile,null),lineDx:oe(e.lineDx,0),lineDy:oe(e.lineDy,0),polygonFill:oe(e.polygonFill,null),polygonOpacity:oe(e.polygonOpacity,1),polygonPatternFile:oe(e.polygonPatternFile,null),polygonPatternDx:oe(e.polygonPatternDx,0),polygonPatternDy:oe(e.polygonPatternDy,0),linePatternDx:oe(e.linePatternDx,0),linePatternDy:oe(e.linePatternDy,0)};return o.lineWidth===0&&(o.lineOpacity=0),this.geometry.type==="LineString"&&!o.polygonFill&&(o.polygonFill=o.lineColor),o},n._createGradient=function(e,o,a){if(!(!Array.isArray(o)||!o.length)){var s=o.length,l=e.createLinearGradient(o[0].x,o[0].y,o[s-1].x,o[s-1].y);a.colorStops.forEach(function(u){l.addColorStop.apply(l,u)}),e.strokeStyle=l}},t}(Nw),jR=function(r){Y(t,r),t.test=function(e){return yu(e)};function t(i,e,o){var a;a=r.call(this,i,e,o)||this;var s=a.translate();return a._dynamic=K1(s),a.style=a._defineStyle(s),a.style.textWrapWidth===0?Ye(a):(a.strokeAndFill=a._defineStyle(a.translateLineAndFill(a.style)),a)}var n=t.prototype;return n.symbolize=function(e,o){if(!(!this.painter.isHitTesting()&&(this.style.textSize===0||!this.style.textOpacity&&(!this.style.textHaloRadius||!this.style.textHaloOpacity)||this.style.textWrapWidth===0))){var a=this._getRenderContainerPoints();if(!!Me(a)){var s=this.style,l=this.strokeAndFill,u=xd(this.style.textName,this.geometry.getProperties());this._dynamic&&delete this._textDesc;var h=this._textDesc=this._textDesc||wd(u,this.style);this._prepareContext(e),this.prepareCanvas(e,l,o),Z.prepareCanvasFont(e,s);for(var c=0,f=a.length;c<f;c++){var d=a[c],g=this.getRotation()?this._rotate(e,d,this._getRotationAt(c)):null;g&&(d=g),Z.text(e,u,d,s,h),g&&e.restore()}}}},n.getPlacement=function(){return this.symbol.textPlacement},n.getRotation=function(){var e=this.style.textRotation;return se(e)?-e*Math.PI/180:null},n.getDxDy=function(){var e=this.style;return new N(e.textDx,e.textDy)},n.getFixedExtent=function(){var e=this.geometry.getTextDesc();return Array.isArray(e)&&(e=e[this._index]),this._fixedExtent=this._fixedExtent||new de,e?Iw(this._fixedExtent,this.style,e):this._fixedExtent},n.translate=function(){var e=this.symbol,o={textName:e.textName,textFaceName:oe(e.textFaceName,"monospace"),textWeight:oe(e.textWeight,"normal"),textStyle:oe(e.textStyle,"normal"),textSize:oe(e.textSize,z1),textFont:oe(e.textFont,null),textFill:oe(e.textFill,"#000"),textOpacity:oe(e.textOpacity,1),textHaloFill:oe(e.textHaloFill,"#ffffff"),textHaloRadius:oe(e.textHaloRadius,0),textHaloOpacity:oe(e.textHaloOpacity,1),textWrapWidth:oe(e.textWrapWidth,null),textWrapCharacter:oe(e.textWrapCharacter,`
`),textLineSpacing:oe(e.textLineSpacing,0),textDx:oe(e.textDx,0),textDy:oe(e.textDy,0),textHorizontalAlignment:oe(e.textHorizontalAlignment,"middle"),textVerticalAlignment:oe(e.textVerticalAlignment,"middle"),textAlign:oe(e.textAlign,"center"),textRotation:oe(e.textRotation,0),textMaxWidth:oe(e.textMaxWidth,0),textMaxHeight:oe(e.textMaxHeight,0)};return o.textMaxWidth>0&&(!o.textWrapWidth||o.textWrapWidth>o.textMaxWidth)&&(o.textWrapWidth||(o.textMaxHeight=1),o.textWrapWidth=o.textMaxWidth),o},n.translateLineAndFill=function(e){return{lineColor:e.textHaloRadius?e.textHaloFill:e.textFill,lineWidth:e.textHaloRadius,lineOpacity:e.textOpacity,lineDasharray:null,lineCap:"butt",lineJoin:"round",polygonFill:e.textFill,polygonOpacity:e.textOpacity}},t}(Mo),HR=[],$w=function(r){Y(t,r),t.test=function(e){return _u(e)};function t(i,e,o){var a;a=r.call(this,i,e,o)||this;var s=a.translate();return a._dynamic=K1(s),a.style=a._defineStyle(s),a.strokeAndFill=a._defineStyle(jw(a.style)),a.padding=0,a}var n=t.prototype;return n.symbolize=function(e,o){var a=this.style;if(!(!this.painter.isHitTesting()&&(a.markerWidth===0||a.markerHeight===0||a.polygonOpacity===0&&a.lineOpacity===0))){var s=this._getRenderContainerPoints();!Me(s)||(this._prepareContext(e),this.getPainter().isSpriting()||this.geometry.getLayer().getMask()===this.geometry||this._dynamic||this.geometry.getLayer().options.cacheVectorOnCanvas===!1?this._drawMarkers(e,s,o):this._drawMarkersWithCache(e,s,o))}},n._drawMarkers=function(e,o,a){for(var s=o.length-1;s>=0;s--){var l=o[s],u=this.getRotation()?this._rotate(e,l,this._getRotationAt(s)):null;u&&(l=u),this._drawVectorMarker(e,l,a),u&&e.restore()}},n._drawMarkersWithCache=function(e,o,a){var s=this._stampSymbol(),l=a.getImage(s);l||(l=this._createMarkerImage(e,a),a.addResource([s,l.width,l.height],l));for(var u=Lw(this.style,l.width,l.height),h=o.length-1;h>=0;h--){var c=o[h],f=this.getRotation()?this._rotate(e,c,this._getRotationAt(h)):null;f&&(c=f),Z.image(e,l,c.x+u.x,c.y+u.y),f&&e.restore()}},n._createMarkerImage=function(e,o){var a=e.canvas.constructor,s=Dw(HR,this.style),l=Z.createCanvas(s[0],s[1],a),u=this._getCacheImageAnchor(s[0],s[1]),h=l.getContext("2d");return this._drawVectorMarker(h,u,o),l},n._stampSymbol=function(){return this._stamp||(this._stamp=uw([this.style.markerType,Rn(this.style.markerFill)?qm(this.style.markerFill):this.style.markerFill,this.style.markerFillOpacity,this.style.markerFillPatternFile,Rn(this.style.markerLineColor)?qm(this.style.markerLineColor):this.style.markerLineColor,this.style.markerLineWidth,this.style.markerLineOpacity,this.style.markerLineDasharray?this.style.markerLineDasharray.join(","):"",this.style.markerLinePatternFile,this.style.markerWidth,this.style.markerHeight,this.style.markerHorizontalAlignment,this.style.markerVerticalAlignment].join("_"))),this._stamp},n._getCacheImageAnchor=function(e,o){var a=2*(this.symbol.shadowBlur||0),s=a+this.padding,l=this.style.markerType;return l==="bar"||l==="pie"||l==="pin"?new N(e/2,o-s):l==="rectangle"?new N(s,s):new N(e/2,o/2)},n._getGraidentExtent=function(e){var o=new de,a=this.getDxDy(),s=this.getFixedExtent();if(Array.isArray(e))for(var l=e.length-1;l>=0;l--)o._combine(e[l]);else o._combine(e);return o.xmin+=s.xmin-a.x,o.ymin+=s.ymin-a.y,o.xmax+=s.xmax-a.x,o.ymax+=s.ymax-a.y,o},n._drawVectorMarker=function(e,o,a){zw(e,o,this.style,a)},n.getFixedExtent=function(){var e=this.isDynamicSize(),o=this.style.markerWidth,a=this.style.markerHeight;return this._fixedExtent=this._fixedExtent||new de,Rw(this._fixedExtent,this.style,e?[128,128*a/o]:null)},n.translate=function(){var e=this.symbol,o={markerType:oe(e.markerType,"ellipse"),markerFill:oe(e.markerFill,"#00f"),markerFillOpacity:oe(e.markerFillOpacity,1),markerFillPatternFile:oe(e.markerFillPatternFile,null),markerLineColor:oe(e.markerLineColor,"#000"),markerLineWidth:oe(e.markerLineWidth,qi.markerLineWidth),markerLineOpacity:oe(e.markerLineOpacity,1),markerLineDasharray:oe(e.markerLineDasharray,[]),markerLinePatternFile:oe(e.markerLinePatternFile,null),markerDx:oe(e.markerDx,0),markerDy:oe(e.markerDy,0),markerWidth:oe(e.markerWidth,qi.markerWidth),markerHeight:oe(e.markerHeight,qi.markerHeight),markerRotation:oe(e.markerRotation,0),shadowBlur:oe(e.shadowBlur,0),shadowOffsetX:oe(e.shadowOffsetX,0),shadowOffsetY:oe(e.shadowOffsetY,0)},a=o.markerType,s=Aw(a),l=Ow(a);return o.markerHorizontalAlignment=oe(e.markerHorizontalAlignment,s),o.markerVerticalAlignment=oe(e.markerVerticalAlignment,l),se(e.markerOpacity)&&(se(e.markerFillOpacity)&&(o.markerFillOpacity*=e.markerOpacity),se(e.markerLineOpacity)&&(o.markerLineOpacity*=e.markerOpacity)),o},t}(Mo),Gw=function(r){Y(t,r),t.test=function(e){return lv(e)};function t(i,e,o){var a;O(i.markerWidth)&&(i.markerWidth=80),O(i.markerHeight)&&(i.markerHeight=80),a=r.call(this,i,e,o)||this,i=K(i,a.translate());var s=a.style=a._defineStyle(i);return ye.gecko?a._url=[pu(s,s.markerWidth,s.markerHeight),s.markerWidth,s.markerHeight]:a._url=[pu(s),s.markerWidth,s.markerHeight],a}var n=t.prototype;return n._prepareContext=function(){},n._getImage=function(e){var o=this;if(e&&e.isResourceLoaded(this._url))return e.getImage(this._url);var a=this.painter,s=new Image;return s.onload=function(){var l=a.getLayer()&&a.getLayer().getRenderer();l&&l.setToRedraw()},s.onerror=function(l){l&&typeof console!="undefined"&&console.warn(l),e.markErrorResource(o._url)},s.src=this._url[0],e&&e.addResource(this._url,s),s},t}(uv),VR={lineWidth:1,polygonFill:"#fff",polygonOpacity:.5},$R=function(r){Y(t,r),t.test=function(e,o){var a=o.getLayer();if(!a)return!1;var s=o.getJSONType();return s==="Marker"||s==="LineString"};function t(i,e,o){var a;return a=r.call(this,i,e,o)||this,a.style=e.getLayer().options.drawAltitude,(!a.style||!mr(a.style))&&(a.style={lineWidth:2}),a.style.lineWidth||(a.style.lineWidth=0),a.dxdy=a._defineStyle({dx:i.textDx||i.markerDx,dy:i.textDy||i.markerDy}),a}var n=t.prototype;return n.symbolize=function(e){var o=this.geometry.getLayer();if(!!o.options.drawAltitude){var a=this.geometry.getProperties();if(!(!a||!a[o.options.altitudeProperty])){var s=this._getStyle();if(this._prepareContext(e),this.geometry.type==="LineString"){var l=this._getPaintParams(s.lineDx,s.lineDy,!1,!0);if(!l)return;var u=this.getPainter().getPaintParams(s.lineDx,s.lineDy,!0,!0,"_groundpt")[0];this._drawLineAltitude(e,l[0],u)}else{var h=this._getRenderContainerPoints(),c=this._getRenderContainerPoints(!0);if(!h||h.length===0)return;this._drawMarkerAltitude(e,h[0],c[0])}}}},n.getDxDy=function(){var e=this.dxdy;return new N(e.dx||0,e.dy||0)},n.get2DExtent=function(){return this.geometry.type==="LineString"?Vw.prototype.get2DExtent.apply(this):r.prototype.get2DExtent.call(this)},n.getPlacement=function(){return"point"},n._getPaintParams=function(e,o){return this.getPainter().getPaintParams(e||0,o||0,null,!0,"_altpt")},n._drawMarkerAltitude=function(e,o,a){var s=this._getStyle();this.prepareCanvas(e,s),Z.path(e,[o,a],s.lineOpacity,null,s.lineDasharray)},n._drawLineAltitude=function(e,o,a){var s=this._getStyle(),l=o.length>0&&Array.isArray(o[0]);if(l)for(var u=0;u<o.length;u++)this._drawLine(e,o[u],a[u]);else this._drawLine(e,o,a);e.setLineDash&&Array.isArray(s.lineDasharray)&&e.setLineDash([])},n._drawLine=function(e,o,a){var s=this._getStyle();this.prepareCanvas(e,s);for(var l=0,u=o.length-1;l<u;l++)Z.polygon(e,[o[l],o[l+1],a[l+1],a[l]],s.lineOpacity,s.polygonOpacity,s.lineDasharray)},n._getStyle=function(){var e=this.geometry.getLayer().options.drawAltitude;return mr(e)||(e=VR),e.lineWidth||(e.lineWidth=0,e.lineOpacity=0),e},t}(Mo),GR=[$R,Vw,uv,Gw,$w,jR],zn,fy=new N(0,0),BR=new de,ol=new de,er=new de,WR=new de,tn=new de,ZR={},Go={minx:1/0,miny:1/0,maxx:-1/0,maxy:-1/0},hv=function(r){Y(t,r);function t(i){var e;return e=r.call(this)||this,e.geometry=i,e.symbolizers=e._createSymbolizers(),e._altAtGL=e._getGeometryAltitude(),e}var n=t.prototype;return n.getMap=function(){return this.geometry.getMap()},n.getLayer=function(){return this.geometry.getLayer()},n._createSymbolizers=function(){var e=this.getSymbol(),o=[],a=GR,s=e;Array.isArray(e)||(s=[e]);for(var l=s.length-1;l>=0;l--)for(var u=s[l],h=a.length-1;h>=0;h--)if(a[h].test(u,this.geometry)){var c=new a[h](u,this.geometry,this);c._index=l,o.push(c),c instanceof Mo&&(this._hasPoint=!0)}if(!o.length&&console){var f=this.geometry.getId();console.warn("invalid symbol for geometry("+(this.geometry?this.geometry.getType()+(f?":"+f:""):"")+") to draw : "+JSON.stringify(e))}return this._debugSymbolizer=new FR(e,this.geometry,this),o},n.hasPoint=function(){return!!this._hasPoint},n.getRenderPoints=function(e){return this._verifyProjection(),this._renderPoints||(this._renderPoints={}),e||(e="center"),this._renderPoints[e]||(this._renderPoints[e]=this.geometry._getRenderPoints(e)),this._renderPoints[e]},n.getPaintParams=function(e,o,a,s,l){l===void 0&&(l="_pt");var u=this.getLayer()._getRenderer(),h=u.mapStateCache,c,f,d,g,v,y=this.getMap();h&&!this._hitPoint?(c=h.resolution,f=h.pitch,d=h.bearing,g=h.glScale,v=h.containerExtent):(c=y.getResolution(),f=y.getPitch(),d=y.getBearing(),g=y.getGLScale(),v=y.getContainerExtent());var p=this.geometry,m=c,_=f!==0,x=d!==0,C=this._cachedParams,w=p._paintAsPath&&p._paintAsPath();if(w&&this._unsimpledParams&&m<=this._unsimpledParams._res)C=this._unsimpledParams;else if(!C||C._res!==c||this._pitched!==_&&p._redrawWhenPitch()||this._rotated!==x&&p._redrawWhenRotate()){if(C=p._getPaintParams(),!C)return null;C._res=m,!p._simplified&&w&&(this._unsimpledParams||(this._unsimpledParams=C),m>this._unsimpledParams._res&&(this._unsimpledParams._res=m)),this._cachedParams=C}if(!C)return null;this._pitched=_,this._rotated=x;var P=g,S=[],M=C[0],R=v,j=this._pointContainerPoints(M,e,o,a,s||this._hitPoint&&!R.contains(this._hitPoint),null,l);if(!j)return null;S.push(j);for(var A=1,z=C.length;A<z;A++)se(C[A])||C[A]instanceof Xe?se(C[A])?S.push(C[A]/P):S.push(C[A].multi(1/P)):S.push(C[A]);return S},n._pointContainerPoints=function(e,o,a,s,l,u,h){if(h===void 0&&(h="_pt"),this._aboveCamera())return null;var c=this.getLayer()._getRenderer(),f=c.mapStateCache,d=this.getMap(),g=this.geometry,v=this.containerOffset,y,p;f?(y=f.glRes,p=f.containerExtent):(y=d.getGLRes(),p=d.getContainerExtent());var m,_=this.getLayer().options.roundPoint,x=1/0,C=1/0,w=-1/0,P=-1/0,S=!l,M=c.layer.options.clipBBoxBufferSize||3,R=this.symbolizers;function j(ee,q){ee===void 0&&(ee=[]),q===void 0&&(q=[]);var te=gu(ee,h);te=d._pointsAtResToContainerPoints(ee,y,q,te);for(var ie=0,ue=te.length;ie<ue;ie++){var re=te[ie];re._sub(v),(o||a)&&re._add(o||0,a||0),_&&(re.x=Math.ceil(re.x),re.y=Math.ceil(re.y)),x=Math.min(re.x,x),C=Math.min(re.y,C),w=Math.max(re.x,w),P=Math.max(re.y,P)}if(S&&Gb(R)){if(tn.ymin=p.ymin,tn.ymin<M&&(tn.ymin=p.ymin-M),tn.xmin=p.xmin-M,tn.xmax=p.xmax+M,tn.ymax=p.ymax+M,g.getShell&&g.getHoles)return Rl(te,tn);var xe=bl(te,tn,!1);if(xe.length){var Ce=[];return xe.forEach(function(ae){for(var me=0,Q=ae.length;me<Q;me++)Ce.push(ae[me].point)}),Ce}}return te}var A=this.getAltitude();if(Array.isArray(e)){var z=this.geometry,D;!l&&z.options.enableClip?(D=this._clip(e,A),D.inView&&(S=!1)):D={points:e,altitude:A};var I=D.points;A=D.altitude,s&&(A=0);var B=A;m=[];for(var W=[],E=se(A),T=0,L=I.length;T<L;T++){var V=I[T];if(Array.isArray(V)){if(E){var F=j(V,A);m.push(F);continue}for(var H=[],$=0,G=V.length;$<G;$++)Array.isArray(A)&&(A[T]?B=A[T][$]:B=0),H.push(B);var b=j(V,H);m.push(b)}else Array.isArray(A)&&(u==="vertex-last"?B=A[A.length-1-T]:u==="line"?B=(A[T]+A[T+1])/2:B=A[T]),W.push(B)}W.length&&(m=j(I,W))}else e instanceof N&&(s&&(A=0),m=d._pointAtResToContainerPoint(e,y,A)._sub(v),(o||a)&&m._add(o,a));return Go.minx=x,Go.miny=C,Go.maxx=w,Go.maxy=P,this._containerBbox=Go,m},n._clip=function(e,o){if(se(o)&&o!==0)return{points:e,altitude:o};if(Array.isArray(o)){for(var a=!1,s=0,l=o.length;s<l;s++)if(o[s]!==0){a=!0;break}if(a)return{points:e,altitude:o}}var u=this.getMap(),h=this.geometry,c=this.getSymbol().lineWidth;se(c)||(c=4);var f=this.getLayer()._getRenderer(),d=f.mapStateCache,g,v,y;d?(g=d._2DExtent,v=d.glExtent,y=d.pitch):(g=u._get2DExtent(),v=u._get2DExtentAtRes(u.getGLRes()),y=u.getPitch());var p=g._expand(c);if(y>0&&o){var m=u.cameraLookAt,_=u.cameraPosition;fy.set(_.x,_.y),p=p._combine(fy._add(ot(m[0]-_[0]),ot(m[1]-_[1])))}var x=this.get2DExtent(null,WR),C=e;if(x.within(p))return{points:C,altitude:o,inView:!0};var w=v._expand(c*u._glScale);er.xmin=w.xmin,er.xmax=w.xmax,er.ymin=w.ymin,er.ymax=w.ymax;var P=h.options.smoothness;if(h.getShell&&this.geometry.getHoles&&!P){var S=w.xmin,M=w.ymin,R=w.xmax,j=w.ymax,A=Math.abs(R-S),z=Math.abs(j-M),D=Math.sqrt(A*A+z*z),I=(D-A)/2,B=(D-z)/2;if(er.xmin=w.xmin-I,er.xmax=w.xmax+I,er.ymin=w.ymin-B,er.ymax=w.ymax+B,!Array.isArray(e[0]))C=Rl(e,er);else{C=[];for(var W=0;W<e.length;W++){var E=Rl(e[W],er);E.length&&C.push(E)}}}else if(h.getJSONType()==="LineString"&&!P){if(!Array.isArray(e[0]))C=bl(e,er,!1,!!P);else{C=[];for(var T=0;T<e.length;T++)Po(C,bl(e[T],er,!1,!!P))}return this._interpolateSegAlt(C,e,o)}return{points:C,altitude:o}},n._interpolateSegAlt=function(e,o,a){if(!Array.isArray(a)){var s=function(c){return c.point};return{points:e.map(function(h){return Array.isArray(h)?h.map(s):h.point}),altitude:a}}var l=Bw(e,o,a);a=[];var u=l.map(function(h){if(Array.isArray(h)){var c=[],f=h.map(function(d){return c.push(d.altitude),d.point});return a.push(c),f}return a.push(h.altitude),h.point});return{points:u,altitude:a}},n.getSymbol=function(){return this.geometry._getInternalSymbol()},n.paint=function(e,o,a){if(!!this.symbolizers){var s=this.getLayer(),l=s._getRenderer();if(!(!l||!l.context&&!o)){var u=l.mapStateCache||{};if(!(!this.geometry._isCheck&&e&&!e.intersects(this.get2DExtent(l.resources,BR)))){var h=this.getMap(),c=this.getMinAltitude(),f=h.getFrustumAltitude();if(!(c&&f&&f<c)){this.containerOffset=a||u.offset||h._pointToContainerPoint(l.southWest)._add(0,-h.height),this._beforePaint();for(var d=o||l.context,g=[d,l.resources],v=this.symbolizers.length-1;v>=0;v--)(d.shadowBlur||this.symbolizers[v].symbol.shadowBlur)&&this._prepareShadow(d,this.symbolizers[v].symbol),this.symbolizers[v].symbolize.apply(this.symbolizers[v],g);this._afterPaint(),this._painted=!0,(this.geometry.options.debug||s.options.debug)&&this._debugSymbolizer.symbolize.apply(this._debugSymbolizer,g)}}}}},n.getSprite=function(e,o){if(this.geometry.type!=="Point")return null;if(this._spriting=!0,!this._sprite&&this.symbolizers.length>0){var a=new de;this.symbolizers.forEach(function(v){var y=v.getFixedExtent(e);a._combine(y)});var s=a.getMin().multi(-1),l=o||(this.getMap()?this.getMap().CanvasClass:null),u=Z.createCanvas(a.getWidth(),a.getHeight(),l),h;this._renderPoints&&(h=this._renderPoints);for(var c=u.getContext("2d"),f=[c,e],d=this.symbolizers.length-1;d>=0;d--){var g=this.symbolizers[d].getDxDy();this._renderPoints={center:[[s.add(g)]]},this._prepareShadow(c,this.symbolizers[d].symbol),this.symbolizers[d].symbolize.apply(this.symbolizers[d],f)}h&&(this._renderPoints=h),this._sprite={canvas:u,offset:a.getCenter()}}return this._spriting=!1,this._sprite},n.isSpriting=function(){return!!this._spriting},n.hitTest=function(e,o){if((!o||o<.5)&&(o=.5),this._hitPoint=e.sub(o,o),!zn){var a=this.getMap()?this.getMap().CanvasClass:null;zn=Z.createCanvas(1,1,a)}Z.setHitTesting(!0),zn.width=zn.height=2*o;var s=zn.getContext("2d");try{this.paint(null,s,this._hitPoint)}catch(c){throw c}finally{Z.setHitTesting(!1)}delete this._hitPoint;for(var l=s.getImageData(0,0,zn.width,zn.height).data,u=3,h=l.length;u<h;u+=4)if(l[u]>0)return!0;return!1},n.isHitTesting=function(){return!!this._hitPoint},n._prepareShadow=function(e,o){o.shadowBlur?(e.shadowBlur=this.isHitTesting()?0:o.shadowBlur,e.shadowColor=o.shadowColor||"#000",e.shadowOffsetX=o.shadowOffsetX||0,e.shadowOffsetY=o.shadowOffsetY||0):e.shadowBlur&&(e.shadowBlur=null,e.shadowColor=null,e.shadowOffsetX=null,e.shadowOffsetY=null)},n._eachSymbolizer=function(e,o){if(!!this.symbolizers){o||(o=this);for(var a=this.symbolizers.length-1;a>=0;a--)e.apply(o,[this.symbolizers[a]])}},n.get2DExtent=function(e,o){this._verifyProjection();var a=this.getMap();e=e||this.getLayer()._getRenderer().resources;var s=a.getZoom(),l=this._isDynamicSize();if((!this._extent2D||this._extent2D._zoom!==s||!this._fixedExtent)&&(this._extent2D&&this._extent2D._zoom!==s&&delete this._extent2D,this.symbolizers&&(this._extent2D||(this._extent2D=this._computeExtent2D(new de),this._extent2D._zoom=s),this._fixedExtent||(this._fixedExtent=this._computeFixedExtent(e,new de)))),!this._extent2D)return l&&delete this._fixedExtent,null;var u=this._fixedExtent,h=u.xmin,c=u.ymin,f=u.xmax,d=u.ymax;return l&&delete this._fixedExtent,ol.set(h,-d,f,-c),o?(o.set(this._extent2D.xmin,this._extent2D.ymin,this._extent2D.xmax,this._extent2D.ymax),o._add(ol),o):this._extent2D.add(ol)},n._computeExtent2D=function(e){for(var o=this.symbolizers.length-1;o>=0;o--){var a=this.symbolizers[o];e._combine(a.get2DExtent())}return e},n._computeFixedExtent=function(e,o){for(var a=this.symbolizers.length-1;a>=0;a--){var s=this.symbolizers[a];s.getFixedExtent&&o._combine(s.getFixedExtent(e))}return o},n._isDynamicSize=function(){for(var e=this.symbolizers.length-1;e>=0;e--){var o=this.symbolizers[e];if(o.isDynamicSize())return!0}return!1},n._aboveCamera=function(){var e=this.getMinAltitude(),o=this.getMap(),a=o.getFrustumAltitude();return e&&a&&a<e},n.getFixedExtent=function(){var e=this.getMap(),o=e.getZoom();return this._isDynamicSize()?this._computeFixedExtent(null,new de):((!this._extent2D||this._extent2D._zoom!==o)&&this.get2DExtent(null,ol),this._fixedExtent)},n.setZIndex=function(e){this._eachSymbolizer(function(o){o.setZIndex(e)})},n.show=function(){if(this._painted)this.removeCache(),this._eachSymbolizer(function(o){o.show()});else{var e=this.getLayer();e.isCanvasRender()||this.paint()}},n.hide=function(){this._eachSymbolizer(function(e){e.hide()})},n.repaint=function(){this._altAtGL=this._getGeometryAltitude(),this.removeCache();var e=this.getLayer();if(!!e){var o=e.getRenderer();!o||!o.setToRedraw()||o.setToRedraw()}},n.refreshSymbol=function(){this.removeCache(),this._removeSymbolizers(),this.symbolizers=this._createSymbolizers()},n.remove=function(){this.removeCache(),this._removeSymbolizers()},n._removeSymbolizers=function(){this._eachSymbolizer(function(e){delete e.painter,e.remove()}),delete this.symbolizers},n.removeCache=function(){delete this._renderPoints,delete this._paintParams,delete this._sprite,delete this._extent2D,delete this._fixedExtent,delete this._cachedParams,delete this._unsimpledParams},n.getAltitude=function(){var e=this.geometry.getAltitude();return e!==this._propAlt&&(this._altAtGL=this._getGeometryAltitude()),this._altAtGL?this._altAtGL:0},n.getMinAltitude=function(){return this.minAltitude?this.minAltitude:0},n.getMaxAltitude=function(){return this.maxAltitude?this.maxAltitude:0},n._getGeometryAltitude=function(){var e=this,o=this.getMap();if(!o)return 0;var a=this.geometry.getAltitude();if(this._propAlt=a,!a)return this.minAltitude=this.maxAltitude=0,0;var s=this.geometry.getCenter();return s?Array.isArray(a)?(this.minAltitude=Number.MAX_VALUE,this.maxAltitude=Number.MIN_VALUE,a.map(function(l){var u=e._meterToPoint(s,l);return u<e.minAltitude&&(e.minAltitude=u),u>e.maxAltitude&&(e.maxAltitude=u),u})):(this.minAltitude=this.maxAltitude=this._meterToPoint(s,a),this.minAltitude):0},n._meterToPoint=function(e,o){var a=this.getMap(),s=a.getGLRes();return a.distanceToPointAtRes(o,0,s,e).x*ot(o)},n._verifyProjection=function(){var e=this.geometry._getProjection()||ZR;this._projCode&&this._projCode!==e.code&&this.removeCache(),this._projCode=e.code},n._beforePaint=function(){},n._afterPaint=function(){},t}(fr);function Bw(r,t,n){if(!Array.isArray(n))return r;for(var i=[],e=0,o=r.length;e<o;e++)if(Array.isArray(r[e]))i.push(Bw(r[e],t,n));else{var a=r[e];if(a.point.equals(t[a.index]))a.altitude=n[a.index],i.push(a);else{var s=void 0,l=void 0;a.index===0?(s=a.index,l=a.index+1):(s=a.index-1,l=a.index);var u=a.point.distanceTo(t[l]),h=u/(u+t[s].distanceTo(a.point)),c=gd(n[s],n[l],1-h);a.altitude=c,i.push(a)}}return i}var UR=new de,Ww=function(r){Y(t,r);function t(i,e){var o;return o=r.call(this)||this,o.geometry=i,o.isMask=e,o}var n=t.prototype;return n._eachPainter=function(e){for(var o=this.geometry.getGeometries(),a,s=0,l=o.length;s<l&&(a=this.isMask?o[s]._getMaskPainter():o[s]._getPainter(),!(!!a&&a&&e.call(this,a)===!1));s++);},n.paint=function(e){!this.geometry||this._eachPainter(function(o){o.paint(e)})},n.get2DExtent=function(e,o){o&&o.set(null,null,null,null);var a=o||new de;return this._eachPainter(function(s){a=a._combine(s.get2DExtent(e,UR))}),a},n.remove=function(){var e=arguments;this._eachPainter(function(o){o.remove.apply(o,e)})},n.setZIndex=function(){var e=arguments;this._eachPainter(function(o){o.setZIndex.apply(o,e)})},n.show=function(){var e=arguments;this._eachPainter(function(o){o.show.apply(o,e)})},n.hide=function(){var e=arguments;this._eachPainter(function(o){o.hide.apply(o,e)})},n.repaint=function(){var e=arguments;this._eachPainter(function(o){o.repaint.apply(o,e)})},n.refreshSymbol=function(){var e=arguments;this._eachPainter(function(o){o.refreshSymbol.apply(o,e)})},n.hasPoint=function(){var e=!1;return this._eachPainter(function(o){return o.hasPoint()?(e=!0,!1):!0}),e},n.getMinAltitude=function(){var e=!0,o=0;return this._eachPainter(function(a){var s=a.getMinAltitude();(e||s<o)&&(e=!1,o=s)}),o},n.getMaxAltitude=function(){var e=0;return this._eachPainter(function(o){var a=o.getMaxAltitude();a>e&&(e=a)}),e},t}(fr),Bo=23,zi={"EPSG:3857":{projection:"EPSG:3857",resolutions:function(){for(var r=[],t=12756274*Math.PI,n=0;n<Bo;n++)r[n]=t/(256*Math.pow(2,n));return r}(),fullExtent:{top:6378137*Math.PI,left:-6378137*Math.PI,bottom:-6378137*Math.PI,right:6378137*Math.PI}},"EPSG:4326":{projection:"EPSG:4326",fullExtent:{top:90,left:-180,bottom:-90,right:180},resolutions:function(){for(var r=[],t=0;t<Bo;t++)r[t]=180/(Math.pow(2,t)*128);return r}()},BAIDU:{projection:"baidu",resolutions:function(){for(var r=Math.pow(2,18),t=[],n=0;n<Bo;n++)t[n]=r,r*=.5;return t}(),fullExtent:{top:33554432,left:-33554432,bottom:-33554432,right:33554432}},IDENTITY:{projection:"identity",resolutions:function(){for(var r=Math.pow(2,8),t=[],n=0;n<Bo;n++)t[n]=r,r*=.5;return t}(),fullExtent:{top:2e5,left:-2e5,bottom:-2e5,right:2e5}},"PRESET-VT-3857":{projection:"EPSG:3857",resolutions:function(){for(var r=[],t=6378137*Math.PI,n=0;n<Bo;n++)r[n]=t/(256*Math.pow(2,n));return r}(),fullExtent:{top:6378137*Math.PI,left:-6378137*Math.PI,bottom:-6378137*Math.PI,right:6378137*Math.PI}}};zi["EPSG:4490"]=zi["EPSG:4326"];var Tr=function(){function r(n){n===void 0&&(n={}),this.options=n,this._initSpatialRef()}r.getPreset=function(i){return zi[i.toUpperCase()]},r.getAllPresets=function(){return Object.keys(zi)},r.getProjectionInstance=function(i){if(!i)return null;if(mr(i))return i;i=(i+"").toLowerCase();for(var e in nl)if(cs(nl,e)){var o=nl[e].code;if(o&&o.toLowerCase()===i)return nl[e]}return null},r.equals=function(i,e){if(pe(i)||pe(e))return i===e;if(!i&&!e)return!0;if(!i||!e||i.projection!==e.projection)return!1;var o=i.fullExtent,a=e.fullExtent;if(o&&!a||!o&&a||o&&a&&(o.top!==a.top||o.bottom!==a.bottom||o.left!==a.left||o.right!==a.right))return!1;var s=i.resolutions,l=e.resolutions;if(s&&l){if(s.length!==l.length)return!1;for(var u=0;u<s.length;u++)if(s[u]!==l[u])return!1}else if(s||l)return!1;return!0};var t=r.prototype;return t._initSpatialRef=function(){var i=this.options.projection;if(i?i=r.getProjectionInstance(i):i=Ew,!i)throw new Error("must provide a valid projection in map's spatial reference.");i=K({},Eo,i),i.measureLength||K(i,hR.DEFAULT),this._projection=i;var e,o=this.options.resolutions;if(!o&&(i.code&&(e=zi[i.code.toUpperCase()],e&&(o=e.resolutions,this.isEPSG=i.code!=="IDENTITY")),!o))throw new Error("must provide valid resolutions in map's spatial reference.");if(this._resolutions=o,this._pyramid=!0,this._pyramid){for(var a=0;a<o.length;a++)if(o[a]&&o[a-1]&&o[a-1]/o[a]!==2){this._pyramid=!1;break}}var s=this.options.fullExtent;if(!s&&(i.code&&(e=zi[i.code.toUpperCase()],e&&(s=e.fullExtent)),!s))throw new Error("must provide a valid fullExtent in map's spatial reference.");if(O(s.left)?(this._fullExtent=new be(s),s.left=s.xmin,s.right=s.xmax,s.top=s.ymax,s.bottom=s.ymin):this._fullExtent=new be(new U(s.left,s.top),new U(s.right,s.bottom)),O(s.top)||O(s.bottom)||O(s.left)||O(s.right))throw new Error("must provide valid top/bottom/left/right in fullExtent.");K(this._fullExtent,s),this._projection.fullExtent=s;var l=s.right>=s.left?1:-1,u=s.top>=s.bottom?-1:1;this._transformation=new _w([l,u,0,0])},t.getResolutions=function(){return this._resolutions||[]},t.getResolution=function(i){var e=i|0;e<0?e=0:e>this._resolutions.length-1&&(e=this._resolutions.length-1);var o=this._resolutions[e];if(e!==i&&i>0&&e<this._resolutions.length-1){var a=this._resolutions[e+1];return o+(a-o)*(i-e)}return o},t.getProjection=function(){return this._projection},t.getFullExtent=function(){return this._fullExtent},t.getTransformation=function(){return this._transformation},t.getMinZoom=function(){for(var i=0;i<this._resolutions.length;i++)if(!O(this._resolutions[i]))return i;return 0},t.getMaxZoom=function(){for(var i=this._resolutions.length-1;i>=0;i--)if(!O(this._resolutions[i]))return i;return this._resolutions.length-1},t.getZoomDirection=function(){return ot(this._resolutions[this.getMinZoom()]-this._resolutions[this.getMaxZoom()])},t.toJSON=function(){return this.json||(this.json={resolutions:this._resolutions,fullExtent:{top:this._fullExtent.top,left:this._fullExtent.left,bottom:this._fullExtent.bottom,right:this._fullExtent.right},projection:this._projection.code}),this.json},t.isPyramid=function(){return this._pyramid},r}(),Ac=new N(0,0),dy=new de,qR={id:null,visible:!0,interactive:!0,editable:!0,cursor:null,defaultProjection:"EPSG:4326"},_e=function(r){Y(t,r);function t(i){var e,o=K({},i),a=o.symbol,s=o.properties,l=o.id;return delete o.symbol,delete o.id,delete o.properties,e=r.call(this,o)||this,a?e.setSymbol(a):e._genSizeSymbol(),s&&e.setProperties(s),O(l)||e.setId(l),e}var n=t.prototype;return n.getFirstCoordinate=function(){if(this.type==="GeometryCollection"){var e=this.getGeometries();return e.length?e[0].getFirstCoordinate():null}var o=this.getCoordinates();if(!Array.isArray(o))return o;do o=o[0];while(Array.isArray(o)&&o.length>0);return o},n.getLastCoordinate=function(){if(this.type==="GeometryCollection"){var e=this.getGeometries();return e.length?e[e.length-1].getLastCoordinate():null}var o=this.getCoordinates();if(!Array.isArray(o))return o;do o=o[o.length-1];while(Array.isArray(o)&&o.length>0);return o},n.addTo=function(e,o){return e.addGeometry(this,o),this},n.getLayer=function(){return this._layer?this._layer:null},n.getMap=function(){return this._layer?this._layer.getMap():null},n.getId=function(){return this._id},n.setId=function(e){var o=this.getId();return this._id=e,this._fireEvent("idchange",{old:o,new:e}),this},n.getProperties=function(){return this.properties?this.properties:this._getParent()?this._getParent().getProperties():null},n.setProperties=function(e){var o=this.properties;return this.properties=mr(e)?K({},e):e,this._repaint(),this._fireEvent("propertieschange",{old:o,new:e}),this},n.getType=function(){return this.type},n.getSymbol=function(){var e=this._symbol;return e?Array.isArray(e)?Mr(e):K({},e):null},n.setSymbol=function(e){return this._symbolUpdated=e,this._symbol=this._prepareSymbol(e),this.onSymbolChanged(),delete this._compiledSymbol,delete this._symbolHash,this},n.getSymbolHash=function(){return this._symbolHash||(this._symbolHash=Qg(this._symbolUpdated)),this._symbolHash},n.updateSymbol=function(e){if(!e)return this;var o=this._getSymbol();if(Array.isArray(o)){if(!Array.isArray(e))throw new Error("Parameter of updateSymbol is not an array.");for(var a=0;a<e.length;a++)yu(e[a])&&delete this._textDesc,o[a]&&e[a]&&(o[a]=Mr(o[a],e[a]))}else{if(Array.isArray(e))throw new Error("Geometry's symbol is not an array to update.");yu(o)&&delete this._textDesc,o?o=Mr(o,e):o=Mr(this._getInternalSymbol(),e)}return this._eventSymbolProperties=e,delete this._compiledSymbol,this.setSymbol(o)},n.getTextContent=function(){var e=this._getInternalSymbol();if(Array.isArray(e)){for(var o=[],a=!1,s=0;s<e.length;s++)o[s]=xd(e[s]&&e[s].textName,this.getProperties()),O(o[s])||(a=!0);return a?o:null}return xd(e&&e.textName,this.getProperties())},n.getTextDesc=function(){if(!this._textDesc){var e=this.getTextContent(),o=this._sizeSymbol,a=Array.isArray(e);Array.isArray(o)?this._textDesc=o.map(function(s,l){return wd(a?e[l]:"",s)}):this._textDesc=wd(e,o)}return this._textDesc},n.getCenter=function(){return this._computeCenter(this._getMeasurer())},n.getExtent=function(){var e=this._getPrjExtent(),o=this._getProjection();if(e&&o){var a=o.unproject(new U(e.xmin,e.ymin)),s=o.unproject(new U(e.xmax,e.ymax));return new be(a,s,o)}else return this._computeExtent(this._getMeasurer())},n.getContainerExtent=function(e){var o=this.get2DExtent();if(!o||!o.isValid())return null;var a=this.getMap(),s=this.getCenter(),l=a.getGLRes(),u=this.getMinAltitude(),h=a.distanceToPointAtRes(u,0,l,s).x*ot(u),c=o.convertTo(function(p){return a._pointAtResToContainerPoint(p,l,h,Ac)},e),f=this.getMaxAltitude();if(f!==u){f=a.distanceToPointAtRes(f,0,l,s).x*ot(f);var d=o.convertTo(function(p){return a._pointAtResToContainerPoint(p,l,f,Ac)},dy);c._combine(d)}var g=this.getLayer();if(g&&this.type==="LineString"&&f&&g.options.drawAltitude){var v=o.convertTo(function(p){return a._pointAtResToContainerPoint(p,l,0,Ac)},dy);c._combine(v)}c&&c._add(this._getFixedExtent());var y=this.options.smoothness;return y&&c._expand(c.getWidth()*.15),c},n._getFixedExtent=function(){this._fixedExtent||(this._fixedExtent=new de);var e=this._sizeSymbol,o=(e&&e.lineWidth||1)/2;this._fixedExtent.set(-o,-o,o,o);var a=e&&e.lineDx||0;this._fixedExtent._add([a,0]);var s=e&&e.lineDy||0;return this._fixedExtent._add([0,s]),this._fixedExtent},n.get2DExtent=function(){var e=this.getMap();if(!e)return null;if(this._extent2d)return this._extent2d;var o=this._getPrjExtent();if(!o||!o.isValid())return null;var a=o.getMin(),s=o.getMax(),l=e.getGLRes();return e._prjToPointAtRes(a,l,a),e._prjToPointAtRes(s,l,s),this._extent2d=new de(a,s),this._extent2d.z=e.getZoom(),this._extent2d},n.getSize=function(){var e=this.getContainerExtent();return e?e.getSize():null},n.containsPoint=function(e,o){if(!this.getMap())throw new Error('The geometry is required to be added on a map to perform "containsPoint".');return e instanceof U&&(e=this.getMap().coordToContainerPoint(e)),this._containsPoint(e,o)},n._containsPoint=function(e,o){var a=this._getPainter();return a?(O(o)&&this._hitTestTolerance&&(o=this._hitTestTolerance()),a.hitTest(e,o)):!1},n.show=function(){if(this.options.visible=!0,this.getMap()){var e=this._getPainter();e&&e.show(),this._fireEvent("show")}return this},n.hide=function(){if(this.options.visible=!1,this.getMap()){this.onHide();var e=this._getPainter();e&&e.hide(),this._fireEvent("hide")}return this},n.isVisible=function(){if(!this.options.visible)return!1;var e=this._getInternalSymbol();if(!e)return!0;if(Array.isArray(e)){if(!e.length)return!0;for(var o=0,a=e.length;o<a;o++)if(O(e[o].opacity)||e[o].opacity>0)return!0;return!1}else return O(e.opacity)||mr(e.opacity)||se(e.opacity)&&e.opacity>0},n.getZIndex=function(){return this.options.zIndex||0},n.setZIndex=function(e){var o=this.options.zIndex;return this.options.zIndex=e,this._fireEvent("zindexchange",{old:o,new:e}),this},n.setZIndexSilently=function(e){return this.options.zIndex=e,this},n.bringToFront=function(){var e=this.getLayer();if(!e||!e.getGeoMaxZIndex)return this;var o=e.getGeoMaxZIndex();return this.setZIndex(o+1),this},n.bringToBack=function(){var e=this.getLayer();if(!e||!e.getGeoMinZIndex)return this;var o=e.getGeoMinZIndex();return this.setZIndex(o-1),this},n.translate=function(e,o){if(O(e))return this;var a=new U(e,o);if(a.x===0&&a.y===0)return this;var s=this.getCoordinates();if(this._silence=!0,s)if(Array.isArray(s)){var l=vo(s,function(u){return u.add(a)});this.setCoordinates(l)}else this.setCoordinates(s.add(a));return this._silence=!1,this._fireEvent("positionchange"),this},n.flash=function(e,o,a,s){return B1.call(this,e,o,a,s)},n.copy=function(){var e=this.toJSON(),o=t.fromJSON(e);return o.options.visible=!0,o},n.remove=function(){var e=this.getLayer();return e?(this._fireEvent("removestart"),this._unbind(),this._fireEvent("removeend"),this._fireEvent("remove"),this):this},n.toGeoJSONGeometry=function(){var e=this._exportGeoJSONGeometry();return e},n.toGeoJSON=function(e){e||(e={});var o={type:"Feature",geometry:null};if(O(e.geometry)||e.geometry){var a=this._exportGeoJSONGeometry();o.geometry=a}var s=this.getId();O(s)||(o.id=s);var l;return(O(e.properties)||e.properties)&&(l=this._exportProperties()),o.properties=l,o},n.toJSON=function(e){e||(e={});var o=this._toJSON(e),a=this._exportGraphicOptions(e);return K(o,a),o},n.getLength=function(){return this._computeGeodesicLength(this._getMeasurer())},n.getArea=function(){return this._computeGeodesicArea(this._getMeasurer())},n.rotate=function(e,o){if(this.type==="GeometryCollection"){var a=this.getGeometries();return a.forEach(function(h){return h.rotate(e,o)}),this}o?o=new U(o):o=this.getCenter();var s=this._getMeasurer(),l=this.getCoordinates();if(!Array.isArray(l)){if(o.x!==l.x||o.y!==l.y){var u=s._rotate(l,o,e);this.setCoordinates(u)}return this}return vo(l,function(h){return s._rotate(h,o,e)}),this.setCoordinates(l),this},n._getConnectPoints=function(){return[this.getCenter()]},n._initOptions=function(e){var o=K({},e),a=o.symbol,s=o.properties,l=o.id;delete o.symbol,delete o.id,delete o.properties,this.setOptions(o),a&&this.setSymbol(a),s&&this.setProperties(s),O(l)||this.setId(l)},n._bindLayer=function(e){if(this.getLayer())throw new Error("Geometry cannot be added to two or more layers at the same time.");this._layer=e,this._clearCache(),this._bindInfoWindow(),this._bindMenu()},n._prepareSymbol=function(e){if(Array.isArray(e)){for(var o=[],a=0;a<e.length;a++)o.push(_d(this._checkAndCopySymbol(e[a])));return o}else if(e)return e=this._checkAndCopySymbol(e),_d(e);return null},n._checkAndCopySymbol=function(e){var o={};for(var a in e)lb[a]&&pe(e[a])?o[a]=+e[a]:o[a]=e[a];return o},n._getSymbol=function(){return this._symbol},n._setExternSymbol=function(e){return this._eventSymbolProperties=e,this._symbol||delete this._textDesc,this._externSymbol=this._prepareSymbol(e),this.onSymbolChanged(),this},n._getInternalSymbol=function(){return this._symbol?this._symbol:this._externSymbol?this._externSymbol:this.options.symbol?this.options.symbol:null},n._getPrjExtent=function(){var e=this._getProjection();return this._verifyProjection(),!this._extent&&e&&(this._extent=this._computePrjExtent(e)),this._extent},n._unbind=function(){var e=this.getLayer();!e||(this._animPlayer&&this._animPlayer.finish(),this._unbindMenu(),this._unbindInfoWindow(),this.isEditing()&&this.endEdit(),this._removePainter(),this.onRemove&&this.onRemove(),e.onRemoveGeometry&&e.onRemoveGeometry(this),delete this._layer,delete this._internalId,delete this._extent)},n._getInternalId=function(){return this._internalId},n._setInternalId=function(e){this._internalId=e},n._getMeasurer=function(){return this._getProjection()?this._getProjection():Tr.getProjectionInstance(this.options.defaultProjection)},n._getProjection=function(){var e=this.getMap();return e?e.getProjection():null},n._verifyProjection=function(){var e=this._getProjection();this._projCode&&e&&this._projCode!==e.code&&this._clearProjection(),this._projCode=e?e.code:this._projCode},n._getExternalResources=function(){var e=this._getInternalSymbol();return uh(e)},n._getPainter=function(){var e=this.getLayer();if(!this._painter&&e){if(F1.indexOf(this.type)!==-1){if(e.constructor.getCollectionPainterClass){var o=e.constructor.getCollectionPainterClass();o&&(this._painter=new o(this))}}else if(e.constructor.getPainterClass){var a=e.constructor.getPainterClass();a&&(this._painter=new a(this))}}return this._painter},n._getMaskPainter=function(){return this._maskPainter?this._maskPainter:(this._maskPainter=this.getGeometries&&this.getGeometries()?new Ww(this,!0):new hv(this),this._maskPainter)},n._removePainter=function(){this._painter&&this._painter.remove(),delete this._painter},n._paint=function(e){if(this._painter){if(this._dirtyCoords){delete this._dirtyCoords;var o=this._getProjection();o&&(this._pcenter=o.project(this._coordinates),this._clearCache())}this._painter.paint(e)}},n._clearCache=function(){delete this._extent,delete this._extent2d},n._clearProjection=function(){delete this._extent,delete this._extent2d},n._repaint=function(){this._painter&&this._painter.repaint()},n.onHide=function(){this.closeMenu(),this.closeInfoWindow()},n.onShapeChanged=function(){this._clearCache(),this._repaint(),this._fireEvent("shapechange")},n.onPositionChanged=function(){this._clearCache(),this._repaint(),this._fireEvent("positionchange")},n.onSymbolChanged=function(){this._painter&&this._painter.refreshSymbol();var e={};this._eventSymbolProperties?(e.properties=K({},this._eventSymbolProperties),delete this._eventSymbolProperties):delete this._textDesc,this._genSizeSymbol(),this._fireEvent("symbolchange",e)},n._genSizeSymbol=function(){var e=this._getInternalSymbol();if(!e){delete this._sizeSymbol;return}if(Array.isArray(e)){this._sizeSymbol=[];for(var o=!1,a=0;a<e.length;a++){var s=this._sizeSymbol[a]=this._getSizeSymbol(e[a]);!o&&s&&s._dynamic&&(o=!0)}this._sizeSymbol._dynamic=o}else this._sizeSymbol=this._getSizeSymbol(e)},n._getSizeSymbol=function(e){var o=vu({lineWidth:e.lineWidth,lineDx:e.lineDx,lineDy:e.lineDy},this);return(Je(e.lineWidth)||Je(e.lineDx)||Je(e.lineDy))&&(o._dynamic=!0),o},n._getCompiledSymbol=function(){return this._compiledSymbol?this._compiledSymbol:(this._compiledSymbol=vu(this._getInternalSymbol(),this),this._compiledSymbol)},n.onConfig=function(e){var o;e.properties&&(o=e.properties,delete e.properties);var a=!1;for(var s in e)if(e.hasOwnProperty(s)){var l=s.slice(0,5);if(l==="arrow"||l==="smoot"){a=!0;break}}o?(this.setProperties(o),this._repaint()):a&&this._repaint()},n._setParent=function(e){e&&(this._parent=e)},n._getParent=function(){return this._parent},n._fireEvent=function(e,o){this._silence||(this.getLayer()&&this.getLayer()._onGeometryEvent&&(o||(o={}),o.type=e,o.target=this,this.getLayer()._onGeometryEvent(o)),this.fire(e,o))},n._toJSON=function(e){return{feature:this.toGeoJSON(e)}},n._exportGraphicOptions=function(e){var o={};return(O(e.options)||e.options)&&(o.options=this.config()),(O(e.symbol)||e.symbol)&&(o.symbol=this.getSymbol()),(O(e.infoWindow)||e.infoWindow)&&this._infoWinOptions&&(o.infoWindow=this._infoWinOptions),o},n._exportGeoJSONGeometry=function(){var e=this.getCoordinates(),o=U.toNumberArrays(e);return{type:this.getType(),coordinates:o}},n._exportProperties=function(){var e=null,o=this.getProperties();return O(o)||(mr(o)?e=K({},o):e=o),e},n.getAltitude=function(){var e=this.getLayer();if(!e)return 0;var o=e.options,a=this.getProperties(),s=o.enableAltitude&&a?a[o.altitudeProperty]:0,l=e.getAltitude?e.getAltitude():0;return Array.isArray(s)?s.map(function(u){return u+l}):s+l},n._genMinMaxAlt=function(){var e=this,o=this.getAltitude();Array.isArray(o)?(this._minAlt=Number.MAX_VALUE,this._maxAlt=Number.MIN_VALUE,o.forEach(function(a){var s=a;s<e._minAlt&&(e._minAlt=s),s>e._maxAlt&&(e._maxAlt=s)})):this._minAlt=this._maxAlt=o},n.getMinAltitude=function(){return this._minAlt===void 0&&this._genMinMaxAlt(),this._minAlt?this._minAlt:0},n.getMaxAltitude=function(){return this._maxAlt===void 0&&this._genMinMaxAlt(),this._maxAlt?this._maxAlt:0},t}(mw(en(rv(fr))));_e.mergeOptions(qR);var YR={attribution:null,minZoom:null,maxZoom:null,visible:!0,opacity:1,globalCompositeOperation:null,renderer:"canvas",debugOutline:"#0f0",cssFilter:null,forceRenderOnMoving:!1,forceRenderOnZooming:!1,forceRenderOnRotating:!1,collision:!1,collisionScope:"layer",hitDetect:function(){return!ye.mobile}()},St=function(r){Y(t,r);function t(i,e){var o,a;return e&&(a=e.canvas,delete e.canvas),o=r.call(this,e)||this,o._canvas=a,o.setId(i),e&&(o.setZIndex(e.zIndex),e.mask&&o.setMask(_e.fromJSON(e.mask))),o}var n=t.prototype;return n.load=function(){if(!this.getMap())return this;if(this.onLoad()){this._initRenderer();var e=this.getZIndex();O(e)||(this._renderer.setZIndex(e),this.isCanvasRender()||this._renderer.render()),this.onLoadEnd()}return this},n.getId=function(){return this._id},n.setId=function(e){var o=this._id;return O(e)||(e=e+""),this._id=e,this.fire("idchange",{old:o,new:e}),this},n.addTo=function(e){return e.addLayer(this),this},n.setZIndex=function(e){return this._zIndex=e,O(e)?delete this.options.zIndex:this.options.zIndex=e,this.map&&this.map._sortLayersByZIndex(),this._renderer&&this._renderer.setZIndex(e),this},n.getZIndex=function(){return this._zIndex||0},n.getMinZoom=function(){var e=this.getMap(),o=this.options.minZoom;return e?Math.max(e.getMinZoom(),o||0):o},n.getMaxZoom=function(){var e=this.getMap(),o=this.options.maxZoom;return e?Math.min(e.getMaxZoom(),O(o)?1/0:o):o},n.getOpacity=function(){return this.options.opacity},n.setOpacity=function(e){return this.config("opacity",e),this},n.isCanvasRender=function(){var e=this._getRenderer();return e&&e instanceof fs},n.getMap=function(){return this.map?this.map:null},n.getProjection=function(){var e=this.getMap();return e?e.getProjection():null},n.bringToFront=function(){var e=this._getLayerList();if(!e.length)return this;var o=e[e.length-1];if(e.length===1||o===this)return this;var a=o.getZIndex();return this.setZIndex(a+1),this},n.bringToBack=function(){var e=this._getLayerList();if(!e.length)return this;var o=e[0];if(e.length===1||o===this)return this;var a=o.getZIndex();return this.setZIndex(a-1),this},n.show=function(){var e=this;if(!this.options.visible){this.options.visible=!0;var o=this.getRenderer();o&&o.show();var a=this.getMap();o&&a?a.once("renderend",function(){e.fire("show")}):this.fire("show")}return this},n.hide=function(){var e=this;if(this.options.visible){this.options.visible=!1;var o=this.getRenderer();o&&o.hide();var a=this.getMap();o&&a?a.once("renderend",function(){e.fire("hide")}):this.fire("hide")}return this},n.isVisible=function(){if(se(this.options.opacity)&&this.options.opacity<=0)return!1;var e=this.getMap();if(e){var o=e.getZoom();if(!O(this.options.maxZoom)&&this.options.maxZoom<o||!O(this.options.minZoom)&&this.options.minZoom>o)return!1}return O(this.options.visible)&&(this.options.visible=!0),this.options.visible},n.remove=function(){return this.map&&this.map.removeLayer(this),this},n.getMask=function(){return this._mask},n.setMask=function(e){if(!(e.type==="Point"&&e._isVectorMarker()||e.type==="Polygon"||e.type==="MultiPolygon"))throw new Error("Mask for a layer must be a marker with vector marker symbol or a Polygon(MultiPolygon).");if(e._bindLayer(this),e.type==="Point"?e.updateSymbol({markerLineColor:"rgba(0, 0, 0, 0)",markerFillOpacity:0}):e.setSymbol({lineColor:"rgba(0, 0, 0, 0)",polygonOpacity:0}),this._mask=e,this.options.mask=e.toJSON(),!this.getMap()||this.getMap().isZooming())return this;var o=this._getRenderer();return o&&o.setToRedraw&&this._getRenderer().setToRedraw(),this},n.removeMask=function(){if(delete this._mask,delete this.options.mask,!this.getMap()||this.getMap().isZooming())return this;var e=this._getRenderer();return e&&e.setToRedraw&&this._getRenderer().setToRedraw(),this},n.onLoad=function(){return!0},n.onLoadEnd=function(){},n.isLoaded=function(){return!!this._loaded},n.getCollisionIndex=function(){if(this.options.collisionScope==="layer")return this._collisionIndex||(this._collisionIndex=new yw),this._collisionIndex;var e=this.getMap();return e?e.getCollisionIndex():null},n.clearCollisionIndex=function(){return this.options.collisionScope==="layer"&&this._collisionIndex&&this._collisionIndex.clear(),this},n.getRenderer=function(){return this._getRenderer()},n.onConfig=function(e){if(se(e.opacity)||e.cssFilter){var o=this.getRenderer();o&&o.setToRedraw()}},n.onAdd=function(){},n.onRendererCreate=function(){},n.onCanvasCreate=function(){},n.onRemove=function(){},n._bindMap=function(e,o){!e||(this.map=e,O(o)||this.setZIndex(o),this._switchEvents("on",this),this.onAdd(),this.fire("add"))},n._initRenderer=function(){var e=this.options.renderer;if(!!this.constructor.getRendererClass){var o=this.constructor.getRendererClass(e);if(!o)throw new Error("Invalid renderer for Layer("+this.getId()+"):"+e);this._renderer=new o(this),this._renderer.layer=this,this._renderer.setZIndex(this.getZIndex()),this._switchEvents("on",this._renderer),this._renderer.onAdd&&this._renderer.onAdd(),this.onRendererCreate(),this.fire("renderercreate",{renderer:this._renderer})}},n._doRemove=function(){this._loaded=!1,this.onRemove(),this._switchEvents("off",this),this._renderer&&(this._switchEvents("off",this._renderer),this._renderer.remove(),delete this._renderer),delete this.map,delete this._collisionIndex},n._switchEvents=function(e,o){o&&o.getEvents&&this.getMap()[e](o.getEvents(),o)},n._getRenderer=function(){return this._renderer},n._getLayerList=function(){return this.map?this.map._layers:[]},n._getMask2DExtent=function(){if(!this._mask||!this.getMap())return null;var e=this._mask._getMaskPainter();return e?e.get2DExtent():null},t}(mw(en(Mw(fr))));St.mergeOptions(YR);var JR=St.prototype.fire;St.prototype.fire=function(r,t){return r==="layerload"&&(this._loaded=!0),this.map&&(t||(t={}),t.type=r,t.target=this,this.map._onLayerEvent(t)),JR.apply(this,arguments)};var XR=new U(0,0),KR={maxVisualPitch:70,maxPitch:80,centerCross:!1,zoomInCenter:!1,zoomOrigin:null,zoomAnimation:function(){return!it}(),zoomAnimationDuration:330,panAnimation:function(){return!it}(),panAnimationDuration:600,rotateAnimation:function(){return!it}(),zoomable:!0,enableInfoWindow:!0,hitDetect:function(){return!ye.mobile}(),hitDetectLimit:5,fpsOnInteracting:25,layerCanvasLimitOnInteracting:-1,maxZoom:null,minZoom:null,maxExtent:null,fixCenterOnResize:!0,checkSize:!0,checkSizeInterval:1e3,renderer:"canvas",cascadePitches:[10,60],renderable:!0},fe=function(r){Y(t,r);function t(i,e){var o;if(!e)throw new Error("Invalid options when creating map.");if(!e.center)throw new Error("Invalid center when creating map.");var a=K({},e),s=a.zoom;delete a.zoom;var l=new U(a.center);delete a.center;var u=a.baseLayer;delete a.baseLayer;var h=a.layers;return delete a.layers,o=r.call(this,a)||this,o.VERSION=t.VERSION,Object.defineProperty(Ye(Ye(o)),"id",{value:Co(),writable:!1}),o._loaded=!1,o._initContainer(i),o._panels={},o._baseLayer=null,o._layers=[],o._zoomLevel=s,o._center=l,o.setSpatialReference(a.spatialReference||a.view),o._mapViewPoint=new N(0,0),o._initRenderer(),o._updateMapSize(o._getContainerDomSize()),u&&o.setBaseLayer(u),h&&o.addLayer(h),o.setMaxExtent(a.maxExtent),o._Load(),o}t.addOnLoadHook=function(e){var o=Array.prototype.slice.call(arguments,1),a=typeof e=="function"?e:function(){this[e].apply(this,o)};return this.prototype._onLoadHooks=this.prototype._onLoadHooks||[],this.prototype._onLoadHooks.push(a),this};var n=t.prototype;return n.isLoaded=function(){return!!this._loaded},n.getContainer=function(){return this._containerDOM},n.getSpatialReference=function(){return this._spatialReference},n.setSpatialReference=function(e){var o=this.options.spatialReference;return this._loaded&&Tr.equals(o,e)?this:(this._updateSpatialReference(e,o),this)},n._updateSpatialReference=function(e,o){if(pe(e)&&(e=Tr.getPreset(e)),e=K({},e),this._center=this.getCenter(),this.options.spatialReference=e,this._spatialReference=new Tr(e),this.options.spatialReference&&Re(this.options.spatialReference.projection)){var a=this._spatialReference.getProjection();this.options.spatialReference.projection=a.code}return this._resetMapStatus(),this._fireEvent("spatialreferencechange",{old:o,new:K({},this.options.spatialReference)}),this},n.onConfig=function(e){var o=e.spatialReference||e.view;return O(o)||this._updateSpatialReference(o,null),this},n.getProjection=function(){return this._spatialReference?this._spatialReference.getProjection():null},n.getFullExtent=function(){return this._spatialReference?this._spatialReference.getFullExtent():null},n.setCursor=function(e){return delete this._cursor,this._trySetCursor(e),this._cursor=e,this},n.resetCursor=function(){return this.setCursor(null)},n.getCenter=function(){if(!this._loaded||!this._prjCenter)return this._center;var e=this.getProjection();return e.unproject(this._prjCenter)},n.setCenter=function(e){if(!e)return this;e=new U(e);var o=this.getProjection(),a=o.project(e);return this._verifyExtent(a)?this._loaded?(this.onMoveStart(),this._setPrjCenter(a),this.onMoveEnd(this._parseEventFromCoord(this.getCenter())),this):(this._center=e,this):this},n.getSize=function(){return O(this.width)||O(this.height)?this._getContainerDomSize():new Xe(this.width,this.height)},n.getContainerExtent=function(){var e=this.height,o=this.getPitch(),a=this.options.maxVisualPitch;return a&&o>a&&(e=this._getVisualHeight(a)),new de(0,this.height-e,this.width,this.height)},n._getVisualHeight=function(e){e=e||.01;var o=(90-this.getPitch())*Math.PI/180,a=this.getFov()*Math.PI/180;e*=Math.PI/180;var s=this.cameraCenterDistance/this.getGLScale(),l=Math.tan(a/2),u=Math.tan(e),h=s*l/(1/u-l)/Math.sin(e),c=s*(Math.sin(o)*h/(s+Math.cos(o)*h));return this.height/2+c},n.getExtent=function(){return this._pointToExtent(this._get2DExtent())},n.getProjExtent=function(){var e=this._get2DExtent();return new be(this._pointToPrj(e.getMin()),this._pointToPrj(e.getMax()))},n.getPrjExtent=function(){return this.getProjExtent()},n.getMaxExtent=function(){return this.options.maxExtent?new be(this.options.maxExtent,this.getProjection()):null},n.setMaxExtent=function(e){if(e){var o=new be(e,this.getProjection());this.options.maxExtent=o;var a=this.getProjection();this._prjMaxExtent=o.convertTo(function(s){return a.project(s)}),this._verifyExtent(this._getPrjCenter())||(this._loaded?this._panTo(this._prjMaxExtent.getCenter()):this._center=a.unproject(this._prjMaxExtent.getCenter()))}else delete this.options.maxExtent,delete this._prjMaxExtent;return this},n.getZoom=function(){return this._zoomLevel},n.getZoomForScale=function(e,o,a){var s=this.getZoom();if(O(o)&&(o=s),e===1&&o===s)return s;var l=this._getResolution(o),u=l/e,h=this.getZoomFromRes(u);if(a)return h;var c=1e-6;return this.getSpatialReference().getZoomDirection()<0?Math.ceil(h-c):Math.floor(h+c)},n.getZoomFromRes=function(e){var o=this._getResolutions(),a=this._getResolution(this.getMinZoom()),s=this._getResolution(this.getMaxZoom());if(a<=s){if(e<=a)return this.getMinZoom();if(e>=s)return this.getMaxZoom()}else{if(e>=a)return this.getMinZoom();if(e<=s)return this.getMaxZoom()}for(var l=o.length,u=0;u<l-1;u++)if(!!o[u]){var h=o[u+1]-o[u],c=e-o[u];if(ot(h)===ot(c)&&Math.abs(h)>=Math.abs(c))return u+c/h}return l-1},n.setZoom=function(e,o){return o===void 0&&(o={animation:!0}),isNaN(e)||O(e)?this:(e=+e,this._loaded&&this.options.zoomAnimation&&o.animation?this._zoomAnimation(e):this._zoom(e),this)},n.getMaxZoom=function(){return O(this.options.maxZoom)?this.getMaxNativeZoom():this.options.maxZoom},n.setMaxZoom=function(e){var o=this.getMaxNativeZoom();return e>o&&(e=o),e!==null&&e<this._zoomLevel&&(this.setZoom(e),e=+e),this.options.maxZoom=e,this},n.getMinZoom=function(){return O(this.options.minZoom)?this._spatialReference.getMinZoom():this.options.minZoom},n.setMinZoom=function(e){if(e!==null){e=+e;var o=this._spatialReference.getMinZoom();e<o&&(e=o),e>this._zoomLevel&&this.setZoom(e)}return this.options.minZoom=e,this},n.getMaxNativeZoom=function(){var e=this.getSpatialReference();return e?e.getMaxZoom():null},n.getGLRes=function(){if(this._glRes)return this._glRes;var e=this.getSpatialReference().getFullExtent();return this._glRes=(e.right-e.left)/Math.pow(2,19),this._glRes},n.getGLScale=function(e){return O(e)&&(e=this.getZoom()),this._getResolution(e)/this.getGLRes()},n.zoomIn=function(){return this.setZoom(this.getZoom()+1)},n.zoomOut=function(){return this.setZoom(this.getZoom()-1)},n.isZooming=function(){return!!this._zooming},n.isInteracting=function(){return this.isZooming()||this.isMoving()||this.isRotating()},n.setCenterAndZoom=function(e,o){return!O(o)&&this._zoomLevel!==o?(this.setCenter(e),this.setZoom(o,{animation:!1})):this.setCenter(e),this},n.getFitZoom=function(e,o){var a=this;if(!e||!(e instanceof be))return this._zoomLevel;if(e.xmin===e.xmax&&e.ymin===e.ymax)return this.getMaxZoom();var s=this.getSize(),l=e.convertTo(function(v){return a.coordToPoint(v)}),u=l.getWidth(),h=l.getHeight(),c=s.width/u,f=s.height/h,d=this.getSpatialReference().getZoomDirection()<0?Math.max(c,f):Math.min(c,f),g=this.getZoomForScale(d,null,o);return g},n.getView=function(){return{center:this.getCenter().toArray(),zoom:this.getZoom(),pitch:this.getPitch(),bearing:this.getBearing()}},n.setView=function(e){return e?(e.center&&this.setCenter(e.center),e.zoom!==null&&!isNaN(+e.zoom)&&this.setZoom(+e.zoom,{animation:!1}),e.pitch!==null&&!isNaN(+e.pitch)&&this.setPitch(+e.pitch),e.pitch!==null&&!isNaN(+e.bearing)&&this.setBearing(+e.bearing),this):this},n.getResolution=function(e){return this._getResolution(e)},n.getScale=function(e){var o=O(e)?this.getZoom():e,a=this._getResolution(this.getMaxNativeZoom()),s=this._getResolution(o);return s/a},n.fitExtent=function(e,o,a,s){if(a===void 0&&(a={}),!e)return this;e=new be(e,this.getProjection());var l=this.getFitZoom(e)+(o||0),u=e.getCenter();return typeof a.animation=="undefined"||a.animation?this._animateTo({center:u,zoom:l},{duration:a.duration||this.options.zoomAnimationDuration,easing:a.easing||"out"},s):this.setCenterAndZoom(u,l)},n.getBaseLayer=function(){return this._baseLayer},n.setBaseLayer=function(e){var o=!1;if(this._baseLayer&&(o=!0,this._fireEvent("baselayerchangestart"),this._baseLayer.remove()),!e)return delete this._baseLayer,this._fireEvent("baselayerchangeend"),this._fireEvent("setbaselayer"),this;this._baseLayer=e,e._bindMap(this,-1);function a(){this._fireEvent("baselayerload"),o&&(o=!1,this._fireEvent("baselayerchangeend"))}return this._baseLayer.on("layerload",a,this),this._loaded&&this._baseLayer.load(),this._fireEvent("setbaselayer"),this},n.removeBaseLayer=function(){return this._baseLayer&&(this._baseLayer.remove(),delete this._baseLayer,this._fireEvent("baselayerremove")),this},n.getLayers=function(e){return this._getLayers(function(o){return o===this._baseLayer||o.getId().indexOf(hs)>=0?!1:e?e(o):!0})},n.getLayer=function(e){if(!e)return null;var o=this._layerCache?this._layerCache[e]:null;if(o)return o;var a=this.getBaseLayer();return a&&a.getId()===e?a:null},n.addLayer=function(e){if(!e)return this;if(!Array.isArray(e))return e=Array.prototype.slice.call(arguments,0),this.addLayer(e);this._layerCache||(this._layerCache={});for(var o=this._layers,a=0,s=e.length;a<s;a++){var l=e[a],u=l.getId();if(O(u))throw new Error("Invalid id for the layer: "+u);if(l.getMap()!==this){if(this._layerCache[u])throw new Error("Duplicate layer id in the map: "+u);this._layerCache[u]=l,l._bindMap(this),o.push(l),this._loaded&&l.load()}}return this._sortLayersByZIndex(),this._fireEvent("addlayer",{layers:e}),this},n.removeLayer=function(e){if(!e)return this;if(!Array.isArray(e))return this.removeLayer([e]);for(var o=[],a=0,s=e.length;a<s;a++){var l=e[a];if(l instanceof St||(l=this.getLayer(l)),!!l){var u=l.getMap();if(!(!u||u!==this)){o.push(l),this._removeLayer(l,this._layers),this._loaded&&l._doRemove();var h=l.getId();this._layerCache&&delete this._layerCache[h]}}}if(o.length>0){var c=this.getRenderer();c&&c.setLayerCanvasUpdated(),this.once("frameend",function(){o.forEach(function(f){f.fire("remove")})})}return this._fireEvent("removelayer",{layers:e}),this},n.sortLayers=function(e){if(!e||!Array.isArray(e))return this;for(var o=[],a=Number.MAX_VALUE,s=0,l=e.length;s<l;s++){var u=e[s];if(pe(e[s])&&(u=this.getLayer(u)),!(u instanceof St)||!u.getMap()||u.getMap()!==this)throw new Error("It must be a layer added to this map to order.");u.getZIndex()<a&&(a=u.getZIndex()),o.push(u)}for(var h=0,c=o.length;h<c;h++)o[h].setZIndex(a+h);return this},n.toDataURL=function(e){e||(e={});var o=e.mimeType;o||(o="image/png");var a=e.save,s=this._getRenderer();if(s&&s.toDataURL){var l=e.fileName;l||(l="export");var u=s.toDataURL(o,e.quality||.92);if(a&&u){var h;if(typeof Blob!="undefined"&&typeof atob!="undefined"){var c=Sb(u.replace(/^data:image\/(png|jpeg|jpg|webp);base64,/,""),o);h=URL.createObjectURL(c)}else h=u;var f=document.createElement("a");f.download=l,f.href=h,document.body.appendChild(f),f.click(),document.body.removeChild(f)}return u}return null},n.coordToPoint=function(e,o,a){return this.coordinateToPoint(e,o,a)},n.coordToPointAtRes=function(e,o,a){return this.coordinateToPointAtRes(e,o,a)},n.pointToCoord=function(e,o,a){return this.pointToCoordinate(e,o,a)},n.pointAtResToCoord=function(e,o,a){return this.pointAtResToCoordinate(e,o,a)},n.coordToViewPoint=function(e,o,a){return this.coordinateToViewPoint(e,o,a)},n.viewPointToCoord=function(e,o){return this.viewPointToCoordinate(e,o)},n.coordToContainerPoint=function(e,o,a){return this.coordinateToContainerPoint(e,o,a)},n.containerPointToCoord=function(e,o){return this.containerPointToCoordinate(e,o)},n.containerPointToViewPoint=function(e,o){return o?o.set(e.x,e.y):o=e.copy(),o._sub(this.getViewPoint())},n.viewPointToContainerPoint=function(e,o){return o?o.set(e.x,e.y):o=e.copy(),o._add(this.getViewPoint())},n.checkSize=function(e){var o=$e()-this._initTime<1500&&this.width===0||this.height===0,a=this._getContainerDomSize(),s=this.height,l=this.width;if(!e&&a.width===l&&a.height===s)return this;ch(this._containerDOM);var u=this.getCenter();if(this.options.fixCenterOnResize)this._updateMapSize(a);else{var h=this._getVisualHeight(this.getPitch()),c=new N(0,this.height-h),f=this._containerPointToPrj(c);this._updateMapSize(a);var d=this._getVisualHeight(this.getPitch()),g=new N(0,this.height-d);this._setPrjCoordAtContainerPoint(f,g),this._mapViewCoord=this._getPrjCenter()}var v=a.width===0||a.height===0||l===0||s===0;return(o||v)&&(this._eventSilence=!0,this.setCenter(u),delete this._eventSilence),this._fireEvent("resize"),this},n.locate=function(e,o,a){return this.getProjection()._locate(new U(e),o,a)},n.getMainPanel=function(){return this._getRenderer().getMainPanel()},n.getPanels=function(){return this._panels},n.remove=function(){var e=this;if(this.isRemoved())return this;this._fireEvent("removestart"),this._removeDomEvents(),this._clearHandlers(),this.removeBaseLayer();for(var o=this.getLayers(),a=0;a<o.length;a++)o[a].remove();return this._getRenderer()&&this._getRenderer().remove(),this._containerDOM.childNodes&&this._containerDOM.childNodes.length>0&&Array.prototype.slice.call(this._containerDOM.childNodes,0).filter(function(s){return s.className==="maptalks-wrapper"}).forEach(function(s){return e._containerDOM.removeChild(s)}),delete this._panels,delete this._containerDOM,delete this.renderer,this._fireEvent("removeend"),this._clearAllListeners(),ye.removeDPRListening&&ye.removeDPRListening(this),this},n.isRemoved=function(){return!this._containerDOM},n.isMoving=function(){return!!this._moving},n.onMoveStart=function(e){this._mapAnimPlayer&&this._stopAnim(this._mapAnimPlayer);var o=this._getPrjCenter();(!this._originCenter||this._verifyExtent(o))&&(this._originCenter=o),this._moving=!0,this._trySetCursor("move"),this._fireEvent("movestart",this._parseEvent(e?e.domEvent:null,"movestart"))},n.onMoving=function(e){this._fireEvent("moving",this._parseEvent(e?e.domEvent:null,"moving"))},n.onMoveEnd=function(e){if(this._moving=!1,this._trySetCursor("default"),this._fireEvent("moveend",e&&e.domEvent?this._parseEvent(e.domEvent,"moveend"):e),!this._verifyExtent(this._getPrjCenter())&&this._originCenter){var o=this._originCenter;this._panTo(o)}},n.onDragRotateStart=function(e){this._dragRotating=!0,this._fireEvent("dragrotatestart",this._parseEvent(e?e.domEvent:null,"dragrotatestart"))},n.onDragRotating=function(e){this._fireEvent("dragrotating",this._parseEvent(e?e.domEvent:null,"dragrotating"))},n.onDragRotateEnd=function(e){this._dragRotating=!1,this._fireEvent("dragrotateend",this._parseEvent(e?e.domEvent:null,"dragrotateend"))},n.isDragRotating=function(){return!!this._dragRotating},n.isOffscreen=function(e,o){o===void 0&&(o=0);var a=this.width,s=this.height,l=a+o,u=s+o,h=e.xmin,c=e.ymin,f=e.xmax,d=e.ymax;return Array.isArray(e)&&(h=e[0],c=e[1],f=e[2],d=e[3]),f<o||h>=l||d<o||c>u},n.getRenderer=function(){return this._getRenderer()},n.getDevicePixelRatio=function(){return this.options.devicePixelRatio||ye.devicePixelRatio||1},n.setDevicePixelRatio=function(e){return se(e)&&e>0&&e!==this.options.devicePixelRatio&&(this.options.devicePixelRatio=e,this.checkSize(!0)),this},n._initContainer=function(e){if(pe(e)){if(this._containerDOM=document.getElementById(e),!this._containerDOM)throw new Error("Invalid container when creating map: '"+e+"'")}else this._containerDOM=e,it&&(this.CanvasClass=this._containerDOM.constructor);if(this._containerDOM.childNodes&&this._containerDOM.childNodes.length>0&&this._containerDOM.childNodes[0].className==="maptalks-wrapper")throw new Error("Container is already loaded with another map instance, use map.remove() to clear it.")},n._trySetCursor=function(e){return!this._cursor&&!this._priorityCursor&&(e||(e="default"),this._setCursorToPanel(e)),this},n._setPriorityCursor=function(e){if(e)this._priorityCursor=e,this._setCursorToPanel(e);else{var o=!1;this._priorityCursor&&(o=!0),delete this._priorityCursor,o&&this.setCursor(this._cursor)}return this},n._setCursorToPanel=function(e){var o=this.getMainPanel();o&&o.style&&o.style.cursor!==e&&(o.style.cursor=e)},n._removeLayer=function(e,o){if(!(!e||!o)){var a=o.indexOf(e);a>-1&&o.splice(a,1)}},n._sortLayersByZIndex=function(){if(!!this._layers){for(var e=0,o=this._layers.length;e<o;e++)this._layers[e]._order=e,this._layers[e].sortLayersByZIndex&&this._layers[e].sortLayersByZIndex();this._layers.sort(function(a,s){var l=a.getZIndex()-s.getZIndex();return l===0?a._order-s._order:l})}},n._fireEvent=function(e,o){this._eventSilence||(this.fire("_"+e,o),this.fire(e,o))},n._Load=function(){this._resetMapStatus(),this.options.pitch&&(this.setPitch(this.options.pitch),delete this.options.pitch),this.options.bearing&&(this.setBearing(this.options.bearing),delete this.options.bearing),delete this._glRes,this._loadAllLayers(),this._getRenderer().onLoad(),this._loaded=!0,this._callOnLoadHooks(),this._initTime=$e()},n._initRenderer=function(){var e=this.options.renderer,o=t.getRendererClass(e);this._renderer=new o(this),this._renderer.load()},n._getRenderer=function(){return this._renderer},n._loadAllLayers=function(){function e(o){o&&o.load()}this._baseLayer&&this._baseLayer.load(),this._eachLayer(e,this.getLayers())},n._getLayers=function(e){for(var o=this._baseLayer?[this._baseLayer].concat(this._layers):this._layers,a=[],s=0;s<o.length;s++)(!e||e.call(this,o[s]))&&a.push(o[s]);return a},n._eachLayer=function(e){if(!(arguments.length<2)){var o=Array.prototype.slice.call(arguments,1);o&&!Array.isArray(o)&&(o=[o]);for(var a=[],s=0,l=o.length;s<l;s++)a=a.concat(o[s]);for(var u=0,h=a.length;u<h;u++)e.call(e,a[u])}},n._onLayerEvent=function(e){!e||e.type==="idchange"&&(delete this._layerCache[e.old],this._layerCache[e.new]=e.target)},n._resetMapStatus=function(){var e=this.getMaxZoom(),o=this.getMinZoom(),a=this._spatialReference.getMaxZoom(),s=this._spatialReference.getMinZoom();(O(e)||e===-1||e>a)&&this.setMaxZoom(a),(O(o)||o===-1||o<s)&&this.setMinZoom(s),e=this.getMaxZoom(),o=this.getMinZoom(),e<o&&this.setMaxZoom(o),(O(this._zoomLevel)||this._zoomLevel>e)&&(this._zoomLevel=e),this._zoomLevel<o&&(this._zoomLevel=o),delete this._prjCenter;var l=this.getProjection();this._prjCenter=l.project(this._center),this._calcMatrices();var u=this._getRenderer();u&&u.resetContainer()},n._getContainerDomSize=function(){if(!this._containerDOM)return null;var e=this._containerDOM,o,a;if(this._containerDomContentRect)return o=this._containerDomContentRect.width,a=this._containerDomContentRect.height,new Xe(o,a);if(!O(e.width)&&!O(e.height)){o=e.width,a=e.height;var s=this.getDevicePixelRatio();s!==1&&e.layer&&(o/=s,a/=s)}else if(!O(e.clientWidth)&&!O(e.clientHeight))o=parseInt(e.clientWidth,0),a=parseInt(e.clientHeight,0);else throw new Error("can not get size of container");return new Xe(o,a)},n._updateMapSize=function(e){return this.width=e.width,this.height=e.height,this._getRenderer().updateMapSize(e),this._calcMatrices(),this},n._getPrjCenter=function(){return this._prjCenter},n._setPrjCenter=function(e){this._prjCenter=e,this.isInteracting()&&!this.isMoving()&&(this._mapViewCoord=e),this._calcMatrices()},n._setPrjCoordAtContainerPoint=function(e,o){if(o.x===this.width/2&&o.y===this.height/2)return this;var a=this._containerPointToPoint(o)._sub(this._prjToPoint(this._getPrjCenter())),s=this._pointToPrj(this._prjToPoint(e).sub(a));return this._setPrjCenter(s),this},n._verifyExtent=function(e){if(!e)return!1;var o=this._prjMaxExtent;return o?o.contains(e):!0},n._offsetCenterByPixel=function(e){var o=new N(this.width/2-e.x,this.height/2-e.y),a=this._containerPointToPrj(o);return this._setPrjCenter(a),a},n.offsetPlatform=function(e){return e?(this._getRenderer().offsetPlatform(e),this._mapViewCoord=this._getPrjCenter(),this._mapViewPoint=this._mapViewPoint.add(e),this):this._mapViewPoint},n.getViewPoint=function(){var e=this._getViewPointFrameOffset(),o=this.offsetPlatform();return e&&(o=o.add(e)),o},n._resetMapViewPoint=function(){this._mapViewPoint=new N(0,0),this._mapViewCoord=this._getPrjCenter()},n._getResolution=function(e){return(e===void 0||e===this._zoomLevel)&&this._mapRes!==void 0?this._mapRes:(O(e)&&(e=this._zoomLevel),this._spatialReference.getResolution(e))},n._getResolutions=function(){return this._spatialReference.getResolutions()},n._prjToPoint=function(e,o,a){o=O(o)?this.getZoom():o;var s=this._getResolution(o);return this._prjToPointAtRes(e,s,a)},n._prjToPointAtRes=function(e,o,a){return this._spatialReference.getTransformation().transform(e,o,a)},n._prjsToPointsAtRes=function(e,o,a){a===void 0&&(a=[]);for(var s=this._spatialReference.getTransformation(),l=[],u=0,h=e.length;u<h;u++){var c=s.transform(e[u],o,a[u]);l.push(c)}return l},n._pointToPrj=function(e,o,a){o=O(o)?this.getZoom():o;var s=this._getResolution(o);return this._pointToPrjAtRes(e,s,a)},n._pointToPrjAtRes=function(e,o,a){return this._spatialReference.getTransformation().untransform(e,o,a)},n._pointToPoint=function(e,o,a){return O(o)?(a?(a.x=e.x,a.y=e.y):a=e.copy(),a):this._pointAtResToPoint(e,this._getResolution(o),a)},n._pointAtResToPoint=function(e,o,a){return a?(a.x=e.x,a.y=e.y):a=e.copy(),a._multi(o/this._getResolution())},n._pointToPointAtRes=function(e,o,a){return a?(a.x=e.x,a.y=e.y):a=e.copy(),a._multi(this._getResolution()/o)},n._containerPointToPrj=function(e,o){return this._pointToPrj(this._containerPointToPoint(e,void 0,o),void 0,o)},n._callOnLoadHooks=function(){var e=t.prototype;if(!!e._onLoadHooks)for(var o=0,a=e._onLoadHooks.length;o<a;o++)e._onLoadHooks[o].call(this)},t}(rv(en(Mw(fr))));fe.include({coordinateToPoint:function(t,n,i){var e=this._getResolution(n);return this.coordinateToPointAtRes(t,e,i)},coordinateToPointAtRes:function(){var r=new U(0,0);return function(t,n,i){var e=this.getProjection().project(t,r);return this._prjToPointAtRes(e,n,i)}}(),pointToCoordinate:function(){var r=new U(0,0);return function(t,n,i){var e=this._pointToPrj(t,n,r);return this.getProjection().unproject(e,i)}}(),pointAtResToCoordinate:function(){var r=new U(0,0);return function(t,n,i){var e=this._pointToPrjAtRes(t,n,r);return this.getProjection().unproject(e,i)}}(),coordinateToViewPoint:function(){var r=new U(0,0);return function(t,n,i){return this._prjToViewPoint(this.getProjection().project(t,r),n,i)}}(),viewPointToCoordinate:function(){var r=new U(0,0);return function(t,n){return this.getProjection().unproject(this._viewPointToPrj(t,r),n)}}(),coordinateToContainerPoint:function(t,n,i){var e=this._getResolution(n);return this.coordinateToContainerPointAtRes(t,e,i)},coordinateToContainerPointAtRes:function(){var r=new U(0,0);return function(t,n,i){var e=this.getProjection().project(t,r);return this._prjToContainerPointAtRes(e,n,i)}}(),coordinatesToContainerPoints:function(t,n){var i=this._getResolution(n);return this.coordinatesToContainerPointsAtRes(t,i)},coordinatesToContainerPointsAtRes:function(){return function(r,t){for(var n=[],i=this._spatialReference.getTransformation(),e=t/this._getResolution(),o=this.getProjection(),a=new U(0,0),s=this.isTransforming(),l=this._prjToPoint(this._getPrjCenter(),void 0,XR),u=0,h=r.length;u<h;u++){var c=o.project(r[u],a),f=i.transform(c,t);f=f._multi(e),this._toContainerPoint(f,s,e,0,l),n.push(f)}return n}}(),containerPointToCoordinate:function(){var r=new U(0,0);return function(t,n){var i=this._containerPointToPrj(t,r);return this.getProjection().unproject(i,n)}}(),containerToExtent:function(){var r=new N(0,0),t=new N(0,0);return function(n){var i=new de(this._containerPointToPoint(n.getMin(r),void 0,r),this._containerPointToPoint(n.getMax(t),void 0,t));return this._pointToExtent(i)}}(),distanceToPixel:function(){var r=new N(0,0),t=new N(0,0);return function(n,i,e){var o=this.getProjection();if(!o)return null;var a=this.getScale()/this.getScale(e),s=this.getCenter(),l=o.locate(s,n,i),u=this.coordToContainerPoint(s,void 0,r),h=this.coordToContainerPoint(l,void 0,t);return h._sub(u)._multi(a)._abs(),new Xe(h.x,h.y)}}(),distanceToPoint:function(t,n,i,e){var o=this._getResolution(i);return this.distanceToPointAtRes(t,n,o,e)},distanceToPointAtRes:function(){var r=new N(0,0);return function(t,n,i,e){var o=this.getProjection();if(!o)return null;var a=e||this.getCenter(),s=o.locate(a,t,n),l=this.coordToPointAtRes(a,i,r),u=this.coordToPointAtRes(s,i);return u._sub(l)._abs(),u}}(),pixelToDistance:function(){var r=new U(0,0),t=new U(0,0);return function(n,i){var e=this.getProjection();if(!e)return null;var o=this.getFullExtent(),a=o.top>o.bottom?-1:1,s=r.set(this.width/2+n,this.height/2+a*i),l=this.containerPointToCoord(s,t);return e.measureLength(this.getCenter(),l)}}(),pointToDistance:function(t,n,i){var e=this.getResolution(i);return this.pointAtResToDistance(t,n,e)},pointAtResToDistance:function(){var r=new N(0,0),t=new U(0,0);return function(n,i,e){var o=this.getProjection();if(!o)return null;var a=this._prjToPointAtRes(this._getPrjCenter(),e,r);a._add(n,i);var s=this.pointAtResToCoord(a,e,t);return o.measureLength(this.getCenter(),s)}}(),locateByPoint:function(){var r=new N(0,0);return function(t,n,i){var e=this.coordToContainerPoint(t,void 0,r);return this.containerPointToCoord(e._add(n,i))}}(),_get2DExtent:function(t,n){var i;if((t===void 0||t===this._zoomLevel)&&this._mapExtent2D&&(i=this._mapExtent2D),i)return n?(n.set(i.xmin,i.ymin,i.xmax,i.ymax),n):i.copy();var e=this._getResolution(t);return this._get2DExtentAtRes(e,n)},_get2DExtentAtRes:function(){var r=new N(0,0);return function(t,n){var i=this;if(t===this._mapGlRes&&this._mapGlExtent2D)return this._mapGlExtent2D;var e=this.getContainerExtent();return e.convertTo(function(o){return i._containerPointToPointAtRes(o,t,r)},n)}}(),_pointToExtent:function(){var r=new U(0,0),t=new U(0,0);return function(n){var i=n.getMin(),e=n.getMax(),o=this.getFullExtent(),a=!o||o.left<=o.right?[i.x,e.x]:[e.x,i.x],s=a[0],l=a[1],u=!o||o.top>o.bottom?[e.y,i.y]:[i.y,e.y],h=u[0],c=u[1],f=i.set(s,c),d=e.set(l,h);return new be(this.pointToCoord(f,void 0,r),this.pointToCoord(d,void 0,t),this.getProjection())}}(),_getViewPointFrameOffset:function(){var r=new N(0,0);return function(){if(this.isZooming())return null;var t=this._getPrjCenter();return this._mapViewCoord&&!this._mapViewCoord.equals(t)?this._prjToContainerPoint(this._mapViewCoord)._sub(this._prjToContainerPoint(t,void 0,r)):null}}(),_viewPointToPrj:function(){var r=new N(0,0);return function(t,n){return this._containerPointToPrj(this.viewPointToContainerPoint(t,r),n)}}(),_prjToContainerPoint:function(t,n,i,e){var o=this._getResolution(n);return this._prjToContainerPointAtRes(t,o,i,e)},_prjToContainerPointAtRes:function(){var r=new N(0,0);return function(t,n,i,e){return this._pointAtResToContainerPoint(this._prjToPointAtRes(t,n,r),n,e||0,i)}}(),_prjToViewPoint:function(){var r=new N(0,0);return function(t,n,i){var e=this._prjToContainerPoint(t,void 0,r,i);return this.containerPointToViewPoint(e,n)}}(),_viewPointToPoint:function(){var r=new N(0,0);return function(t,n,i){return this._containerPointToPoint(this.viewPointToContainerPoint(t,r),n,i)}}(),_pointToViewPoint:function(){var r=new U(0,0);return function(t,n,i){return this._prjToViewPoint(this._pointToPrj(t,n,r),i)}}()});fe.mergeOptions(KR);var QR=function(r){Y(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n.addHooks=function(){!this.target||this.target.on("_dblclick",this._onDoubleClick,this)},n.removeHooks=function(){!this.target||this.target.off("_dblclick",this._onDoubleClick,this)},n._onDoubleClick=function(e){var o=this.target;if(o.options.doubleClickZoom){var a=o.getZoom(),s=e.domEvent.shiftKey?Math.ceil(a)-1:Math.floor(a)+1;o._zoomAnimation(s,e.containerPoint)}},t}(wr);fe.mergeOptions({doubleClickZoom:!0});fe.addOnLoadHook("addHandler","doubleClickZoom",QR);var eA=function(r){Y(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n.addHooks=function(){var e=this.target;if(!!e){var o=e._panels.mapWrapper||e._containerDOM;this._dragHandler=new So(o,{cancelOn:this._cancelOn.bind(this),rightclick:!0}),this._dragHandler.on("mousedown",this._onMouseDown,this).on("dragstart",this._onDragStart,this).on("dragging",this._onDragging,this).on("dragend",this._onDragEnd,this).enable()}},n.removeHooks=function(){this._dragHandler.off("mousedown",this._onMouseDown,this).off("dragstart",this._onDragStart,this).off("dragging",this._onDragging,this).off("dragend",this._onDragEnd,this),this._dragHandler.remove(),delete this._dragHandler},n._cancelOn=function(e){return!!(this.target.isZooming()||this._ignore(e))},n._ignore=function(e){return e?(e.domEvent&&(e=e.domEvent),this.target._ignoreEvent(e)):!1},n._onMouseDown=function(e){delete this.startDragTime,delete this._mode,e.domEvent.button===2||e.domEvent.ctrlKey?(this.target.options.dragRotate||this.target.options.dragPitch)&&(this._mode="rotatePitch"):this.target.options.dragPan&&(this._mode="move"),this.target._stopAnim(this.target._mapAnimPlayer),ar(e.domEvent)},n._onDragStart=function(e){this.startDragTime=$e(),this._mode==="move"?this._moveStart(e):this._mode==="rotatePitch"&&this._rotateStart(e)},n._onDragging=function(e){var o=this.target;o._isEventOutMap(e.domEvent)||(this._mode==="move"?this._moving(e):this._mode==="rotatePitch"&&this._rotating(e))},n._onDragEnd=function(e){this._mode==="move"?this._moveEnd(e):this._mode==="rotatePitch"&&this._rotateEnd(e),delete this.startDragTime,delete this.startBearing},n._start=function(e){this.preX=e.mousePos.x,this.preY=e.mousePos.y,this.startX=this.preX,this.startY=this.preY,this._startPrjCenter=this.target._getPrjCenter().copy()},n._moveStart=function(e){this._start(e);var o=this.target;o.onMoveStart(e);var a=kt(o._getActualEvent(e.domEvent),o.getContainer());this.startPrjCoord=o._containerPointToPrj(a)},n._moving=function(e){if(!!this.startDragTime){var o=this.target,a=kt(o._getActualEvent(e.domEvent),o.getContainer());o._setPrjCoordAtContainerPoint(this.startPrjCoord,a),o.onMoving(e)}},n._moveEnd=function(e){if(!!this.startDragTime){var o=e.domEvent.type==="touchend",a=this.target,s=$e()-this.startDragTime,l=e.mousePos.x,u=e.mousePos.y,h=l-this.startX,c=u-this.startY,f=a._getPrjCenter(),d=f.sub(this._startPrjCenter);if(this._clear(),a.options.panAnimation&&!e.interupted&&a._verifyExtent(a._getPrjCenter())&&s<280&&Math.abs(c)+Math.abs(h)>5){s=5*s;var g=o?5:2.8,v=f.add(d._multi(g)),y=a.getProjection().unproject(v);a.panTo(y,{duration:o?s*3:s*2,easing:"outExpo"})}else a.onMoveEnd(e)}},n._rotateStart=function(e){this._start(e),delete this._rotateMode,this.startBearing=this.target.getBearing(),this.target.onDragRotateStart(e),this._db=0},n._rotating=function(e){var o=this.target,a=e.mousePos.x,s=e.mousePos.y,l=o.getPitch(),u=o.getBearing(),h=Math.abs(a-this.preX),c=Math.abs(s-this.preY);if(this._rotateMode||(o.options.dragRotatePitch?this._rotateMode="rotate_pitch":h>c?this._rotateMode="rotate":h<c?this._rotateMode="pitch":this._rotateMode="rotate"),!(this._rotateMode==="pitch"&&l===0&&c<10)){if(this._rotateMode.indexOf("rotate")>=0&&o.options.dragRotate){var f=0;o.options.dragPitch||h>c?f=-.6*(this.preX-a):a>o.width/2?f=.6*(this.preY-s):f=-.6*(this.preY-s);var d=o.getBearing()+f;this._db=this._db||0,this._db+=f,o._setBearing(d)}this._rotateMode.indexOf("pitch")>=0&&o.options.dragPitch&&o._setPitch(o.getPitch()+(this.preY-s)*.4),this.preX=a,this.preY=s,(o.getBearing()!==u||o.getPitch()!==l)&&o.onDragRotating(e)}},n._rotateEnd=function(e){var o=this.target,a=o.getBearing();this._clear();var s=$e()-this.startDragTime;if(o.onDragRotateEnd(e),o.options.rotateAnimation&&Math.abs(a-this.startBearing)>20&&(this._rotateMode==="rotate"||this._rotateMode==="rotate_pitch")&&!e.interupted&&s<400){var l=o.getBearing();o._animateTo({bearing:l+this._db/1.5},{easing:"outQuint",duration:1600})}},n._clear=function(){delete this.startPrjCoord,delete this.preX,delete this.preY,delete this.startX,delete this.startY},t}(wr);fe.mergeOptions({draggable:!0,dragPan:!0,dragRotatePitch:!0,dragRotate:!0,dragPitch:!0});fe.addOnLoadHook("addHandler","draggable",eA);var gy="mousedown mouseup mousemove click dblclick contextmenu touchstart touchmove touchend",tA=function(r){Y(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n.addHooks=function(){var e=this.target,o=e._panels.allLayers||e._containerDOM;Be(o,gy,this._identifyGeometryEvents,this)},n.removeHooks=function(){var e=this.target,o=e._panels.allLayers||e._containerDOM;Ke(o,gy,this._identifyGeometryEvents)},n._identifyGeometryEvents=function(e,o){var a=this.target;if(a.isInteracting()||a._ignoreEvent(e))return;var s=null,l=o||e.type,u=l==="mousedown"||l==="touchstart"&&e.touches&&e.touches.length===1;if(u)this._mouseDownTime=$e();else if((l==="click"||l==="touchend")&&this._mouseDownTime){var h=this._mouseDownTime;delete this._mouseDownTime;var c=$e();if(c-h>300){if(l==="click")return}else l==="touchend"&&(s="click")}var f=e.touches&&e.touches.length>0?e.touches[0]:e.changedTouches&&e.changedTouches.length>0?e.changedTouches[0]:e;if(!f)return;var d=kt(f,a._containerDOM);l==="touchstart"&&ar(e);for(var g=null,v=this.target.getRenderer().getTopElements(),y=u&&e.button!==2,p=0;p<v.length;p++)if(v[p].hitTest(d)){var m=v[p].options.cursor;if(m&&(g=m),y||v[p].events&&v[p].events.indexOf(l)>=0){var _={target:a,type:l,domEvent:e,containerPoint:d};if(y){a._setPriorityCursor(g),v[p].mousedown(_);return}else v[p].onEvent(_)}}var x=a._getLayers(function(S){return!!(S.identify&&S.options.geometryEvents)});if(a._setPriorityCursor(g),!x.length)return;var C={includeInternals:!0,filter:function(M){if(!(M instanceof _e))return!1;var R=M._getEventTypeToFire(e);if(l==="mousemove"){if(!g&&M.options.cursor&&(g=M.options.cursor),!M.listens("mousemove")&&!M.listens("mouseover")&&!M.listens("mouseenter"))return!1}else if(!M.listens(R)&&!M.listens(s))return!1;return!0},count:1,containerPoint:d,onlyVisible:a.options.onlyVisibleGeometryEvents,layers:x},w=P.bind(this);l==="mousemove"||l==="touchmove"?this._queryIdentifyTimeout=a.getRenderer().callInNextFrame(function(){a.isInteracting()||a.identifyAtPoint(C,w)}):a.identifyAtPoint(C,w);function P(S){var M=!0;if(l==="mousemove"){var R={};if(S.length>0)for(var j=S.length-1;j>=0;j--){var A=S[j];if(A instanceof _e){var z=A._getInternalId();R[z]=A,A._onEvent(e),(!this._prevOverGeos||!this._prevOverGeos.geomap[z])&&A._onEvent(e,"mouseenter"),M=A._onEvent(e,"mouseover")}}a._setPriorityCursor(g);var D=this._prevOverGeos&&this._prevOverGeos.geos;if(this._prevOverGeos={geos:S,geomap:R},D&&D.length>0)for(var I=D.length-1;I>=0;I--){var B=D[I];if(B instanceof _e){var W=D[I]._getInternalId();R[W]||(M=B._onEvent(e,"mouseout"))}}}else{if(!S||!S.length)return;for(var E=S.length-1;E>=0;E--)if(S[E]instanceof _e){M=S[E]._onEvent(e),s&&S[E]._onEvent(e,s);break}}M===!1&&qt(e)}},t}(wr);fe.mergeOptions({geometryEvents:!0,onlyVisibleGeometryEvents:!0});fe.addOnLoadHook("addHandler","geometryEvents",tA);var vy=4.000244140625,rA=1/100,nA=1/450,iA=2,oA=function(r){Y(t,r);function t(i){var e;return e=r.call(this,i)||this,e._thisScrollZoom=e._scrollZoom.bind(Ye(Ye(e))),e._wheelZoomRate=nA,e._defaultZoomRate=rA,e._delta=0,e}var n=t.prototype;return n.addHooks=function(){Sn(this.target._containerDOM,"wheel",this._onWheelScroll,this)},n.removeHooks=function(){si(this.target._containerDOM,"wheel",this._onWheelScroll)},n._onWheelScroll=function(e){ar(e),qt(e);var o=this.target;if(o._ignoreEvent(e)||!o.options.zoomable)return!1;var a=o._containerDOM,s=o._checkZoomOrigin(kt(e,a));return o.options.seamlessZoom?(this._zooming||(this._trackPadSuspect=0,this._ensureTrackpad=!1),this._seamless(e,s)):this._interval(e,s)},n._seamless=function(e,o){var a=e.deltaMode===window.WheelEvent.DOM_DELTA_LINE?e.deltaY*60:e.deltaY;if(a%vy!==0&&(this._ensureTrackpad||(Math.abs(a)<60?this._trackPadSuspect++:this._trackPadSuspect=0,this._trackPadSuspect>=2&&(this._ensureTrackpad=!0)),this._ensureTrackpad&&(a*=14)),e.shiftKey&&a&&(a=a/4),this._lastWheelEvent=e,this._delta-=a,!this._zooming&&this._delta){var s=this.target;this._zoomOrigin=o,s.onZoomStart(null,o)}this._start()},n._start=function(){if(!!this._delta){this._zooming=!0;var e=this.target;this._active||(e.getRenderer().callInNextFrame(this._thisScrollZoom),this._active=!0)}},n._scrollZoom=function(){var e=this;if(this._active=!1,!!this._delta){var o=Math.abs(this._delta)>vy?this._wheelZoomRate:this._defaultZoomRate,a=iA/(1+Math.exp(-Math.abs(this._delta*o)));this._delta<0&&a!==0&&(a=1/a);var s=this.target,l=s.getZoom(),u=s.getZoomForScale(a,l,!0);this._delta=0,s.onZooming(u,this._zoomOrigin),this._timeout&&clearTimeout(this._timeout),this._timeout=setTimeout(function(){e._zooming=!1,delete e._timeout,s.onZoomEnd(s.getZoom(),e._zoomOrigin)},210)}},n._interval=function(e,o){var a=this,s=this.target;if(this._zooming)return this._requesting++,!1;this._requesting=0;var l=(e.deltaY?e.deltaY*-1:e.wheelDelta?e.wheelDelta:e.detail)>0?1:-1;e.detail&&(l*=-1);var u=s.getZoom(),h=u+l;if(h=s._checkZoom(l>0?Math.ceil(h):Math.floor(h)),h===u)return!1;this._zooming=!0,this._delta||(s.onZoomStart(null,o),this._origin=o,this._delta=l,this._startZoom=s.getZoom());var c=90;return s._animateTo({zoom:h-this._delta*1/2,around:this._origin},{continueOnViewChanged:!0,easing:"linear",duration:c,wheelZoom:!0},function(f){if(f.state.playState!=="finished"){f.state.playState!=="running"&&(delete a._zooming,delete a._requesting);return}a._requesting<1||Math.abs(h-a._startZoom)>2||h===s.getMaxZoom()||h===s.getMinZoom()?(s._animateTo({zoom:h,around:a._origin},{continueOnViewChanged:!0,duration:100},function(d){d.state.playState!=="running"&&(delete a._zooming,delete a._requesting)}),delete a._startZoom,delete a._origin,delete a._delta,a._requesting=0):O(a._requesting)||(delete a._zooming,a._onWheelScroll(e))}),!1},t}(wr);fe.mergeOptions({scrollWheelZoom:!0,seamlessZoom:!0});fe.addOnLoadHook("addHandler","scrollWheelZoom",oA);var aA=function(r){Y(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n.addHooks=function(){Sn(this.target.getContainer(),"touchstart",this._onTouchStart,this)},n.removeHooks=function(){si(this.target.getContainer(),"touchstart",this._onTouchStart)},n._onTouchStart=function(e){var o=this.target;if(!(!e.touches||e.touches.length<2)){var a=o.getContainer(),s=kt(e.touches[0],a),l=kt(e.touches[1],a);this.preY=s.y,this._startP1=s,this._startP2=l,this._startDist=s.distanceTo(l),this._startVector=s.sub(l),this._startZoom=o.getZoom(),this._startBearing=o.getBearing(),Ke(document,"touchmove",this._onTouchMove),Ke(document,"touchend",this._onTouchEnd),Sn(document,"touchmove",this._onTouchMove,this),Sn(document,"touchend",this._onTouchEnd,this),ar(e),o._fireEvent("touchactstart")}},n._onTouchMove=function(e){var o=this.target;if(!(!e.touches||e.touches.length<2)){var a=o.getContainer(),s=kt(e.touches[0],a),l=kt(e.touches[1],a),u=s.sub(this._startP1),h=l.sub(this._startP2),c=s.sub(l),f=s.distanceTo(l)/this._startDist,d=c.angleWith(this._startVector)*180/Math.PI,g=this.preY||s.y,v=(g-s.y)*.4;this.preY=s.y;var y={domEvent:e,mousePos:[s,l]};if(this.mode||(o.options.touchRotate&&Math.abs(d)>8?this.mode=o.options.touchZoomRotate?"rotate_zoom":"rotate":o.options.touchPitch&&u.y*h.y>0&&Math.abs(u.y)>10&&Math.abs(h.y)>10?this.mode="pitch":o.options.zoomable&&o.options.touchZoom&&Math.abs(1-f)>.15&&(this.mode=o.options.touchZoomRotate&&o.options.touchRotate?"rotate_zoom":"zoom"),this._startTouching(y)),this.mode==="zoom"||this.mode==="rotate_zoom"){this._scale=f;var p=o._getResolution(this._startZoom)/f,m=o.getZoomFromRes(p);o.onZooming(m,this._Origin)}this.mode==="rotate"||this.mode==="rotate_zoom"?(o._setBearing(this._startBearing+d),o.onDragRotating(y)):this.mode==="pitch"&&(o._setPitch(o.getPitch()+v),o.onDragRotating(y)),o._fireEvent("touchactinging")}},n._startTouching=function(e){var o=this.target;if(this.mode==="zoom"||this.mode==="rotate_zoom"){var a=o.getSize();this._Origin=new N(a.width/2,a.height/2),o.onZoomStart(null,this._Origin)}(this.mode==="rotate"||this.mode==="pitch"||this.mode==="rotate_zoom")&&o.onDragRotateStart(e)},n._onTouchEnd=function(e){delete this.preY;var o=this.target;if(Ke(document,"touchmove",this._onTouchMove),Ke(document,"touchend",this._onTouchEnd),this.mode==="zoom"||this.mode==="rotate_zoom"){var a=this._scale,s=o._getResolution(this._startZoom)/a,l=o.getZoomFromRes(s);o.onZoomEnd(l,this._Origin)}(this.mode==="pitch"||this.mode==="rotate"||this.mode==="rotate_zoom")&&o.onDragRotateEnd({domEvent:e}),delete this.mode,o._fireEvent("touchactend")},t}(wr);fe.mergeOptions({touchGesture:!0,touchZoom:!0,touchPitch:!0,touchRotate:!0,touchZoomRotate:!1});fe.addOnLoadHook("addHandler","touchGesture",aA);var al="__anim_player",Xi={outExpo:function(t){return t===1?1:1-Math.pow(2,-10*t)},outQuint:function(t){return 1-Math.pow(1-t,5)},in:function(t){return Math.pow(t,2)},out:function(t){return 1-Xi.in(1-t)},inAndOut:function(t){return 3*t*t-2*t*t*t},linear:function(t){return t},upAndDown:function(t){return t<.5?Xi.inAndOut(2*t):1-Xi.inAndOut(2*(t-.5))}},sA=function(t,n){this.state=t,this.styles=n},Zw=function(t,n,i,e){this._animation=t,this.options=n,this._onFrame=i,this.playState="idle",this.ready=!0,this.finished=!1,this.target=e},ft={speed:{slow:2e3,normal:1e3,fast:500},_resolveStyles:function(t){if(!t)return null;function n(c){if(!Array.isArray(c))return ft._resolveStyles(c);for(var f=[],d=[],g=[],v=0;v<c.length;v++){var y=ft._resolveStyles(c[v]);y&&(f.push(y[0]),d.push(y[1]),g.push(y[2]))}return f.length?[f,d,g]:null}function i(c){var f=c,d;Array.isArray(c)||(se(c)?f=[0,c]:c instanceof N||c instanceof U?(d=c.constructor,f=[new d(0,0),c]):f=[c,c]);var g=f[0],v=f[1];return se(g)&&se(v)?g===v?null:[g,v-g,v]:Array.isArray(g)&&se(g[0])||g instanceof U||g instanceof N?(Array.isArray(g)?(g=new U(g),v=new U(v)):(d=g.constructor,g=new d(g),v=new d(v)),g.equals(v)?null:[g,v.sub(g),v]):[g,v,v]}function e(c){return!Array.isArray(c)&&c.constructor===Object?!0:!!(Array.isArray(c)&&c[0].constructor===Object)}var o={},a={},s={};for(var l in t)if(t.hasOwnProperty(l)){var u=t[l];if(u){if(Array.isArray(u)&&(O(u[0])||O(u[1])))continue}else continue;var h=void 0;e(u)?h=n(u):h=i(u),h&&(a[l]=h[0],o[l]=h[1],s[l]=h[2])}return[a,o,s]},framing:function(t,n){n||(n={});var i=n.easing?Xi[n.easing]:Xi.linear;i||(i=Xi.linear);var e,o,a;t=ft._resolveStyles(t),t&&(o=t[0],e=t[1],a=t[2]);var s=function l(u,h,c){if(!h||!c)return null;var f={};for(var d in c)if(c.hasOwnProperty(d)){if(h[d]===a[d]){f[d]=h[d];continue}var g=h[d],v=c[d];if(se(v))f[d]=g+u*v;else if(Array.isArray(v)){for(var y=[],p=0;p<v.length;p++)y.push(l(u,g[p],v[p]));f[d]=y}else{var m=v.constructor;m===Object?f[d]=l(u,g,v):g instanceof N||g instanceof U?f[d]=g.add(v.multi(u)):f[d]=v}}return f};return function(l,u){var h,c;if(l<0)h={playState:"idle",delta:0},c=o;else if(l<u){var f=i(l/u);h={playState:"running",delta:f},c=s(f,o,e)}else h={playState:"finished",delta:1},c=a;return h.startStyles=o,h.destStyles=a,h.progress=l,h.remainingMs=u-l,new sA(h,c)}},_requestAnimFrame:function(t){this._frameQueue||(this._frameQueue=[]),this._frameQueue.push(t),this._a()},_a:function(){this._animationFrameId||(this._animationFrameId=go(ft._frameFn))},_run:function(){if(this._frameQueue.length){var t=this._frameQueue;this._frameQueue=[];for(var n=0,i=t.length;n<i;n++)t[n]();this._frameQueue.length?this._animationFrameId=go(ft._frameFn):delete this._animationFrameId}},animate:function(t,n,i,e){n||(n={});var o=ft.framing(t,n),a=new Zw(o,n,i,e);return a}};ft._frameFn=ft._run.bind(ft);K(Zw.prototype,{_prepare:function(){var t=this.options,n=t.speed||t.duration;pe(n)&&(n=ft.speed[n],n||(n=+n)),n||(n=ft.speed.normal),this.duration=n,this._framer=t.framer||ft._requestAnimFrame.bind(ft)},play:function(){if(this.playState!=="idle"&&this.playState!=="paused"||this.target&&this.target[al])return this;this.target&&(this.target[al]=1),this.playState==="idle"&&(this.currentTime=0,this._prepare());var t=$e();if(!this.startTime){var n=this.options;this.startTime=n.startTime?n.startTime:t}return this._playStartTime=Math.max(t,this.startTime),this.playState==="paused"&&(this._playStartTime-=this.currentTime),this.playState="running",this._run(),this},pause:function(){return this.playState==="paused"?this:(this.playState="paused",this._run(),this)},cancel:function(){return this.playState==="idle"?this:(this.playState="idle",this.finished=!1,this._run(),this)},finish:function(){return this.playState==="finished"?this:(this.playState="finished",this.finished=!0,this._run(),this)},reverse:function(){},_run:function(){var t=this,n=this._onFrame,i=$e(),e=i-this._playStartTime;if(this.options.repeat&&e>=this.duration&&(this._playStartTime=i,e=0),this.playState!=="running"){if(this.target&&delete this.target[al],n){this.playState==="finished"?e=this.duration:this.playState==="idle"&&(e=0);var o=this._animation(e,this.duration);o.state.playState=this.playState,n(o)}return}var a=this._animation(e,this.duration);this.playState=a.state.playState,this.playState!=="running"&&this.target&&delete this.target[al],this.playState==="idle"?this.startTime>i&&setTimeout(this._run.bind(this),this.startTime-i):this.playState==="running"?this._framer(function(){t.playState==="running"&&(t.currentTime=e,n&&n(a),t._run())}):this.playState==="finished"&&(this.finished=!0,n&&n(a))}});var lA={smoothness:0,enableClip:!0,enableSimplify:!0,simplifyTolerance:2,symbol:{lineColor:"#000",lineWidth:2,lineOpacity:1,polygonFill:"#fff",polygonOpacity:1,opacity:1}},gh=function(r){Y(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n.animateShow=function(e,o){var a=this;e===void 0&&(e={}),this._showPlayer&&this._showPlayer.finish(),Re(e)&&(e={},o=e);var s=this.getCoordinates();if(s.length===0)return this;this._animIdx=0,this._animLenSoFar=0,this.show();var l=!!this.getShell,u=l?this.getShell().concat(this.getShell()[0]):s,h=this._getProjection(),c=h.projectCoords(u);this._prjAniShowCenter=this._getPrjExtent().getCenter(),this._aniShowCenter=h.unproject(this._prjAniShowCenter);var f=e.duration||1e3,d=e.easing||"out";this.setCoordinates([]);var g=0;c.length&&(c[0]._distance=0);for(var v=1;v<c.length;v++){var y=c[v].distanceTo(c[v-1]);c[v]._distance=y,g+=y}this._tempCoord=new U(0,0),this._tempPrjCoord=new N(0,0);var p=this._showPlayer=ft.animate({t:f},{duration:f,easing:d},function(m){if(!a.getMap()){if(p.playState!=="finished"&&(p.finish(),o)){var _=a.getCoordinates();o(m,_[_.length-1])}return}var x=a._drawAnimShowFrame(m.styles.t,f,g,u,c);m.state.playState==="finished"&&(delete a._showPlayer,delete a._aniShowCenter,delete a._prjAniShowCenter,delete a._animIdx,delete a._animLenSoFar,delete a._animTailRatio,delete a._tempCoord,delete a._tempPrjCoord,a.setCoordinates(s)),o&&o(m,x)},this);return p.play(),p},n._drawAnimShowFrame=function(e,o,a,s,l){if(e===0)return s[0];var u=e/o*a,h=0,c,f;for(c=this._animIdx+1,f=l.length;c<f&&(h=l[c]._distance,!(this._animLenSoFar+h>u));c++)this._animLenSoFar+=h;if(this._animIdx=c-1,this._animIdx>=f-1)return this.setCoordinates(s),s[s.length-1];var d=this._animIdx,g=l[d],v=l[d+1],y=u-this._animLenSoFar,p=y/h;this._animTailRatio=p;var m=g.x+(v.x-g.x)*p,_=g.y+(v.y-g.y)*p;this._tempPrjCoord.x=m,this._tempPrjCoord.y=_;var x=this._tempPrjCoord,C=s[d],w=s[d+1],P=C.x+(w.x-C.x)*p,S=C.y+(w.y-C.y)*p;this._tempCoord.x=P,this._tempCoord.y=S;var M=this._tempCoord,R=!!this.getShell;if(!R&&this.options.smoothness>0){var j=s.slice(0,this._animIdx+3);this.setCoordinates(j);var A=l.slice(0,this._animIdx+3);this._setPrjCoordinates(A)}else{var z=s.slice(0,this._animIdx+1);z.push(M);var D=l.slice(0,this._animIdx+1);D.push(x),R?(this.setCoordinates([this._aniShowCenter].concat(z)),this._setPrjCoordinates([this._prjAniShowCenter].concat(D))):(this.setCoordinates(z),this._setPrjCoordinates(D))}return M},n._getCenterInExtent=function(e,o,a){var s=this.getExtent();if(!e.intersects(s))return null;var l=a(o,e);if(l.length===0)return null;var u=0,h=0,c=0;l.forEach(function(d){Array.isArray(d)?d.forEach(function(g){g.point&&(g=g.point),u+=g.x,h+=g.y,c++}):(d.point&&(d=d.point),u+=d.x,h+=d.y,c++)});var f=new U(u,h)._multi(1/c);return f.count=c,f},n._getPath2DPoints=function(e,o,a){if(!Me(e))return[];var s=this.getMap(),l=!o&&this._shouldSimplify(),u=this.options.simplifyTolerance*s._getResolution(),h=Array.isArray(e[0]);if(delete this._simplified,l&&!h){var c=e.length;e=rb(e,u,!1),this._simplified=e.length<c}if(a||(a=s._getResolution()),Array.isArray(e)){var f=[],d="_glPt";if(!Array.isArray(e[0]))return f=gu(e,d),s._prjsToPointsAtRes(e,a,f);for(var g=[],v=0,y=e.length;v<y;v++){var p=e[v];f=gu(p,d);var m=s._prjsToPointsAtRes(p,a,f);g.push(m)}return g}else return s._prjToPointAtRes(e,a)},n._shouldSimplify=function(){var e=this.getLayer(),o=this.getProperties(),a=o&&e.options.enableAltitude&&!O(o[e.options.altitudeProperty])&&o[e.options.altitudeProperty]!==0;return e&&e.options.enableSimplify&&!a&&this.options.enableSimplify&&!this._showPlayer},n._setPrjCoordinates=function(e){this._prjCoords=e,this.onShapeChanged()},n._getPrjCoordinates=function(){return this._verifyProjection(),!this._prjCoords&&this._getProjection()&&(this._prjCoords=this._projectCoords(this._coordinates)),this._prjCoords},n._updateCache=function(){this._clearCache();var e=this._getProjection();!e||this._prjCoords&&(this._coordinates=this._unprojectCoords(this._getPrjCoordinates()))},n._clearProjection=function(){this._prjCoords=null,r.prototype._clearProjection.call(this)},n._projectCoords=function(e){var o=this._getProjection();return o?o.projectCoords(e):[]},n._unprojectCoords=function(e){var o=this._getProjection();return o?o.unprojectCoords(e):[]},n._computeCenter=function(){var e=this._coordinates;if(!Me(e))return null;for(var o=0,a=0,s=0,l=e.length,u=0;u<l;u++)e[u]&&se(e[u].x)&&se(e[u].y)&&(o+=e[u].x,a+=e[u].y,s++);return new U(o/s,a/s)},n._computeExtent=function(){var e=this._coordinates;if(!Me(e))return null;var o=[e];return this.hasHoles&&this.hasHoles()&&o.push.apply(o,this.getHoles()),this._coords2Extent(o,this._getProjection())},n._computePrjExtent=function(){var e=[this._getPrjCoordinates()];return this.hasHoles&&this.hasHoles()&&e.push.apply(e,this._getPrjHoles()),this._coords2Extent(e)},n._get2DLength=function(){for(var e=this._getPath2DPoints(this._getPrjCoordinates(),!0),o=0,a=1,s=e.length;a<s;a++)o+=e[a].distanceTo(e[a-1]);return o},n._hitTestTolerance=function(){var e=this._getInternalSymbol(),o;if(Array.isArray(e)){o=0;for(var a=0;a<e.length;a++)se(e[a].lineWidth)&&e[a].lineWidth>o&&(o=e[a].lineWidth)}else o=e.lineWidth;return se(o)?o/2:1.5},n._coords2Extent=function(e,o){if(!e||e.length===0||Array.isArray(e[0])&&e[0].length===0)return null;for(var a=new be(o),s=0,l=e.length;s<l;s++)for(var u=0,h=e[s].length;u<h;u++)a._combine(e[s][u]);return a},t}(_e);gh.mergeOptions(lA);var Uw="Polygon",We=function(r){Y(t,r);function t(i,e){var o;return o=r.call(this,e)||this,o.type="Polygon",i&&o.setCoordinates(i),o}var n=t.prototype;return n.getOutline=function(){var e=this._getPainter();if(!e)return null;var o=this.getExtent();return new t(o.toArray(),{symbol:{lineWidth:1,lineColor:"6b707b"}})},n.setCoordinates=function(e){if(!e)return this._coordinates=null,this._holes=null,this._projectRings(),this;var o=U.toCoordinates(e),a=o.length;if(!Array.isArray(o[0]))this._coordinates=this._trimRing(o);else if(this._coordinates=this._trimRing(o[0]),a>1){for(var s=[],l=1;l<a;l++)!o[l]||s.push(this._trimRing(o[l]));this._holes=s}return this._projectRings(),this},n.getCoordinates=function(){if(!this._coordinates)return[];for(var e=this.getHoles(),o=[this._copyAndCloseRing(this._coordinates)],a=0,s=e.length;a<s;a++)o.push(this._copyAndCloseRing(e[a]));return o},n.getCenterInExtent=function(e){return this._getCenterInExtent(e,this.getShell(),Rl)},n.getShell=function(){return this._coordinates||[]},n.getHoles=function(){return this._holes||[]},n.hasHoles=function(){return this.getHoles().length>0},n._projectRings=function(){if(!this.getMap()){this.onShapeChanged();return}this._prjCoords=this._projectCoords(this._coordinates),this._prjHoles=this._projectCoords(this._holes),this.onShapeChanged()},n._setPrjCoordinates=function(e){this._prjCoords=e,this.onShapeChanged()},n._cleanRing=function(e){for(var o=e.length-1;o>=0;o--)e[o]||e.splice(o,1)},n._checkRing=function(e){if(this._cleanRing(e),!e||!Me(e))return!1;var o=e[e.length-1],a=!0;return(e[0].x!==o.x||e[0].y!==o.y)&&(a=!1),a},n._trimRing=function(e){var o=this._checkRing(e);return Me(e)&&o&&e.splice(e.length-1,1),e},n._copyAndCloseRing=function(e){e=e.slice(0);var o=this._checkRing(e);return Me(e)&&!o&&e.push(e[0].copy()),e},n._getPrjShell=function(){return this.getJSONType()===Uw?this._getPrjCoordinates():(this._verifyProjection(),this._getProjection()&&!this._prjShell&&(this._prjShell=this._projectCoords(this.getShell())),this._prjShell)},n._getPrjHoles=function(){var e=this._getProjection();return this._verifyProjection(),e&&!this._prjHoles&&(this._prjHoles=this._projectCoords(this.getHoles())),this._prjHoles},n._computeGeodesicLength=function(e){var o=this.getCoordinates();if(!Me(o))return 0;for(var a=0,s=0,l=o.length;s<l;s++)a+=e.measureLength(o[s]);return a},n._computeGeodesicArea=function(e){var o=this.getCoordinates();if(!Me(o))return 0;for(var a=e.measureArea(o[0]),s=1,l=o.length;s<l;s++)a-=e.measureArea(o[s]);return a},n._updateCache=function(){r.prototype._updateCache.call(this),this._prjHoles&&(this._holes=this._unprojectCoords(this._getPrjHoles()))},n._clearCache=function(){return delete this._prjShell,r.prototype._clearCache.call(this)},n._clearProjection=function(){this._prjHoles&&(this._prjHoles=null),this._prjShell&&(this._prjShell=null),r.prototype._clearProjection.call(this)},t}(gh);We.registerJSONType(Uw);function cv(r){return function(t){Y(n,t);function n(){return t.apply(this,arguments)||this}var i=n.prototype;return i.getCoordinates=function(){return this._coordinates},i.setCoordinates=function(o){var a=o instanceof U?o:new U(o);if(a.equals(this._coordinates))return this;if(this._coordinates=a,!this.getMap())return this._dirtyCoords=!0,this.onPositionChanged(),this;var s=this._getProjection();return this._setPrjCoordinates(s.project(this._coordinates)),this},i._getCenter2DPoint=function(o){var a=this.getMap();if(!a)return null;var s=this._getPrjCoordinates();return s?(o||(o=a._getResolution()),a._prjToPointAtRes(s,o)):null},i._getPrjCoordinates=function(){var o=this._getProjection();return this._verifyProjection(),!this._pcenter&&o&&this._coordinates&&(this._pcenter=o.project(this._coordinates)),this._pcenter},i._setPrjCoordinates=function(o){this._pcenter=o,this.onPositionChanged()},i._updateCache=function(){this._clearCache();var o=this._getProjection();this._pcenter&&o&&(this._coordinates=o.unproject(this._pcenter))},i._clearProjection=function(){this._pcenter=null,t.prototype._clearProjection.call(this)},i._computeCenter=function(){return this._coordinates?this._coordinates.copy():null},n}(r)}var py=new de,uA={symbol:{markerType:"path",markerPath:[{path:"M8 23l0 0 0 0 0 0 0 0 0 0c-4,-5 -8,-10 -8,-14 0,-5 4,-9 8,-9l0 0 0 0c4,0 8,4 8,9 0,4 -4,9 -8,14z M3,9 a5,5 0,1,0,0,-0.9Z",fill:"#DE3333"}],markerPathWidth:16,markerPathHeight:23,markerWidth:24,markerHeight:34},hitTestForEvent:!1},Ge=function(r){Y(t,r);function t(i,e){var o;return o=r.call(this,e)||this,o.type="Point",i&&o.setCoordinates(i),o}var n=t.prototype;return n.getOutline=function(){var e=this.getCoordinates(),o=this.getContainerExtent(),a=this.getMap().coordToContainerPoint(e);return new t(e,{symbol:{markerType:"square",markerWidth:o.getWidth(),markerHeight:o.getHeight(),markerLineWidth:1,markerLineColor:"6b707b",markerFill:"rgba(0, 0, 0, 0)",markerDx:o.xmin-(a.x-o.getWidth()/2),markerDy:o.ymin-(a.y-o.getHeight()/2)}})},n.setSymbol=function(){var e;delete this._fixedExtent;for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return(e=r.prototype.setSymbol).call.apply(e,[this].concat(a))},n._getSizeSymbol=function(e){for(var o={},a=!1,s=!1,l=0;l<kc.length;l++){var u=e[kc[l]];O(u)||(!a&&Je(u)&&(a=!0,s=!0),o[kc[l]]=u)}for(var h=0;h<bc.length;h++){var c=e[bc[h]];O(c)||(!a&&Je(c)&&(a=!0),o[bc[h]]=c)}var f;return a?(f=vu(o,this),s&&(f._dynamic=!0)):f=o,f},n._setExternSymbol=function(e){return this._symbol||delete this._fixedExtent,r.prototype._setExternSymbol.call(this,e)},n._isDynamicSize=function(){return this._sizeSymbol&&this._sizeSymbol._dynamic},n._getFixedExtent=function(){if(this._fixedExtent&&!this._isDynamicSize())return this._fixedExtent;this._fixedExtent=this._fixedExtent||new de,this._fixedExtent.set(null,null,null,null);var e=this._sizeSymbol;if(!e)return this._fixedExtent;var o=this.getLayer()&&this.getLayer().getRenderer(),a=o&&o.resources,s=this.getTextDesc();if(Array.isArray(e)){py.set(0,0,0,0);for(var l=0;l<e.length;l++)!e[l]||this._fixedExtent._combine(Md(py,e[l],a,s&&s[l]))}else this._fixedExtent=Md(this._fixedExtent,e,a,s);return this._fixedExtent},n._isVectorMarker=function(){var e=this._getInternalSymbol();return Array.isArray(e)?!1:_u(e)},n._canEdit=function(){var e=this._getInternalSymbol();return Array.isArray(e)?!1:_u(e)||lv(e)||sv(e)},n._containsPoint=function(e,o){var a=this.getContainerExtent();return o&&(a=a.expand(o)),a.contains(e)?this.options.hitTestForEvent?r.prototype._containsPoint.call(this,e,o):!0:!1},n._computeExtent=function(){return my.call(this,"getCenter")},n._computePrjExtent=function(){return my.call(this,"_getPrjCoordinates")},n._computeGeodesicLength=function(){return 0},n._computeGeodesicArea=function(){return 0},n._getSprite=function(e,o){return this._getPainter()?this._getPainter().getSprite(e,o):new hv(this).getSprite(e,o)},t}(cv(_e));Ge.mergeOptions(uA);Ge.registerJSONType("Marker");function my(r){var t=this[r]();return t?new be(t,t,this._getProjection()):null}var hA={arrowStyle:null,arrowPlacement:"vertex-last"},Ve=function(r){Y(t,r);function t(i,e){var o;return o=r.call(this,e)||this,o.type="LineString",i&&o.setCoordinates(i),o}var n=t.prototype;return n.getOutline=function(){return We.prototype.getOutline.call(this)},n.setCoordinates=function(e){return e?(this._coordinates=U.toCoordinates(e),this.getMap()?this._setPrjCoordinates(this._projectCoords(this._coordinates)):this.onShapeChanged(),this):(this._coordinates=null,this._setPrjCoordinates(null),this)},n.getCoordinates=function(){return this._coordinates||[]},n.getCenterInExtent=function(e){return this._getCenterInExtent(e,this.getCoordinates(),bl)},n._computeGeodesicLength=function(e){return e.measureLength(this.getCoordinates())},n._computeGeodesicArea=function(){return 0},t}(gh);Ve.mergeOptions(hA);Ve.registerJSONType("LineString");var cA=new de,xu=function(r){Y(t,r);function t(i,e){var o;return o=r.call(this,e)||this,o.type="GeometryCollection",o.setGeometries(i),o}var n=t.prototype;return n.getContainerExtent=function(e){var o=e||new de;return this.forEach(function(a){o._combine(a.getContainerExtent(cA))}),o},n.setGeometries=function(e){for(var o=this._checkGeometries(e||[]),a=this._getSymbol(),s=this.config(),l=o.length-1;l>=0;l--)o[l]._initOptions(s),o[l]._setParent(this),o[l]._setEventParent(this),a&&o[l].setSymbol(a);return this._geometries=o,this.getLayer()&&(this._bindGeometriesToLayer(),this.onShapeChanged()),this},n.getGeometries=function(){return this._geometries||[]},n.forEach=function(e,o){for(var a=this.getGeometries(),s=0,l=a.length;s<l;s++)!a[s]||(o?e.call(o,a[s],s):e(a[s],s));return this},n.filter=function(e,o){if(!e)return new t;var a=[],s=Re(e),l=s?e:Xg(e);return this.forEach(function(u){var h=s?u:yd(u);(o?l.call(o,h):l(h))&&a.push(u)},this),new t(a)},n.translate=function(e){if(!e)return this;if(this.isEmpty())return this;var o=arguments;return this.forEach(function(a){a&&a.translate&&a.translate.apply(a,o)}),this},n.isEmpty=function(){return!Me(this.getGeometries())},n.remove=function(){return this.forEach(function(e){e._unbind()}),_e.prototype.remove.apply(this,arguments)},n.show=function(){return this.options.visible=!0,this.forEach(function(e){e.show()}),this},n.hide=function(){return this.options.visible=!1,this.forEach(function(e){e.hide()}),this},n.onConfig=function(e){this.forEach(function(o){o.config(e)})},n.getSymbol=function(){var e=r.prototype.getSymbol.call(this);if(!e){var o=[],a=!1;this.forEach(function(s){var l=s.getSymbol();l&&!a&&(a=!0),o.push(s.getSymbol())}),a&&(e={children:o})}return e},n.setSymbol=function(e){if(e&&e.children)this._symbol=null,this.forEach(function(a,s){a.setSymbol(e.children[s])});else{var o=this._prepareSymbol(e);this._symbol=o,this.forEach(function(a){a.setSymbol(o)})}return this.onSymbolChanged(),this},n._setExternSymbol=function(e){return e=this._prepareSymbol(e),this._externSymbol=e,this.forEach(function(o){o._setExternSymbol(e)}),this.onSymbolChanged(),this},n._bindLayer=function(){r.prototype._bindLayer.apply(this,arguments),this._bindGeometriesToLayer()},n._bindGeometriesToLayer=function(){var e=this.getLayer();this.forEach(function(o){o._bindLayer(e)})},n._checkGeometries=function(e){var o="The geometry added to collection is invalid.";if(e&&!Array.isArray(e)){if(e instanceof _e)return[e];throw new Error(o)}else{for(var a=0,s=e.length;a<s;a++)if(!this._checkGeo(e[a]))throw new Error(o+" Index: "+a);return e}},n._checkGeo=function(e){return e instanceof _e},n._updateCache=function(){this._clearCache(),!this.isEmpty()&&this.forEach(function(e){e&&e._updateCache&&e._updateCache()})},n._removePainter=function(){this._painter&&this._painter.remove(),delete this._painter,this.forEach(function(e){e._removePainter()})},n._computeCenter=function(e){if(!e||this.isEmpty())return null;for(var o=0,a=0,s=0,l=this.getGeometries(),u=0,h=l.length;u<h;u++)if(!!l[u]){var c=l[u]._computeCenter(e);c&&(o+=c.x,a+=c.y,s++)}return s===0?null:new U(o/s,a/s)},n._containsPoint=function(e,o){if(this.isEmpty())return!1;for(var a=this.getGeometries(),s=0,l=a.length;s<l;s++)if(a[s]._containsPoint(e,o))return!0;return!1},n._computeExtent=function(e){return yy.call(this,e,"_computeExtent")},n._computePrjExtent=function(e){return yy.call(this,e,"_computePrjExtent")},n._computeGeodesicLength=function(e){if(!e||this.isEmpty())return 0;for(var o=this.getGeometries(),a=0,s=0,l=o.length;s<l;s++)!o[s]||(a+=o[s]._computeGeodesicLength(e));return a},n._computeGeodesicArea=function(e){if(!e||this.isEmpty())return 0;for(var o=this.getGeometries(),a=0,s=0,l=o.length;s<l;s++)!o[s]||(a+=o[s]._computeGeodesicArea(e));return a},n._exportGeoJSONGeometry=function(){var e=[];if(!this.isEmpty())for(var o=this.getGeometries(),a=0,s=o.length;a<s;a++)!o[a]||e.push(o[a]._exportGeoJSONGeometry());return{type:"GeometryCollection",geometries:e}},n._clearProjection=function(){if(!this.isEmpty())for(var e=this.getGeometries(),o=0,a=e.length;o<a;o++)!e[o]||e[o]._clearProjection()},n._getConnectPoints=function(){var e=this.getExtent(),o=[new U(e.xmin,e.ymax),new U(e.xmax,e.ymin),new U(e.xmin,e.ymin),new U(e.xmax,e.ymax)];return o},n._getExternalResources=function(){if(this.isEmpty())return[];for(var e=this.getGeometries(),o=[],a={},s,l,u,h=0,c=e.length;h<c;h++)if(!!e[h]){s=e[h]._getInternalSymbol(),l=uh(s);for(var f=0,d=l.length;f<d;f++)u=l[f].join(),a[u]||(o.push(l[f]),a[u]=1)}return o},n.startEdit=function(e){var o=this;if(this.isEmpty())return this;e||(e={}),e.symbol&&(this._originalSymbol=this.getSymbol(),this.setSymbol(e.symbol)),this._draggbleBeforeEdit=this.options.draggable,this.config("draggable",!1);for(var a=this.getGeometries(),s=0,l=a.length;s<l;s++)a[s].startEdit(e);return this._editing=!0,this.hide(),setTimeout(function(){o.fire("editstart")},1),this},n.endEdit=function(){if(this.isEmpty())return this;for(var e=this.getGeometries(),o=0,a=e.length;o<a;o++)e[o].endEdit();return this._originalSymbol&&(this.setSymbol(this._originalSymbol),delete this._originalSymbol),this._editing=!1,this.show(),this.config("draggable",this._draggbleBeforeEdit),this.fire("editend"),this},n.isEditing=function(){return!!this._editing},t}(_e);xu.registerJSONType("GeometryCollection");function yy(r,t){if(this.isEmpty())return null;for(var n=new be,i=this.getGeometries(),e=0,o=i.length;e<o;e++)if(!!i[e]){var a=i[e][t](r);a&&n._combine(a)}return n}var qw=function(r){Y(t,r);function t(i,e,o,a){var s;return s=r.call(this,null,a)||this,s.GeometryType=i,s.type=e,s._initData(o),s}var n=t.prototype;return n.getCoordinates=function(){for(var e=[],o=this.getGeometries(),a=0,s=o.length;a<s;a++){var l=o[a];e.push(l.getShell&&l.getJSONType()!=="Polygon"?[l.getShell()]:l.getCoordinates())}return e},n.setCoordinates=function(e){e=e||[];for(var o=[],a=0,s=e.length;a<s;a++){var l=new this.GeometryType(e[a],this.config());o.push(l)}return this.setGeometries(o),this},n._initData=function(e){e=e||[],e.length&&(e[0]instanceof this.GeometryType?this.setGeometries(e):this.setCoordinates(e))},n._checkGeo=function(e){return e instanceof this.GeometryType},n._exportGeoJSONGeometry=function(){var e=this.getCoordinates(),o=U.toNumberArrays(e);return{type:this.getType(),coordinates:o}},t}(xu),wu=function(r){Y(t,r);function t(i,e){return r.call(this,Ge,"MultiPoint",i,e)||this}var n=t.prototype;return n.findClosest=function(e){if(!e)return null;var o=this.getCoordinates(),a=null,s=1/0;return o.forEach(function(l){var u=fA(l,e);u<s&&(a=l,s=u)}),a},t}(qw);wu.registerJSONType("MultiPoint");function fA(r,t){var n=t.x-r.x,i=t.y-r.y;return Math.sqrt(n*n+i*i)}var Yw=function(r){Y(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n.getCenterInExtent=function(e){var o=this.getGeometries(),a=0,s=0,l=0;return o.forEach(function(u){var h=u.getCenterInExtent(e);h&&(a+=h.x*h.count,s+=h.y*h.count,l+=h.count)}),l===0?null:new U(a,s)._multi(1/l)},t}(qw),Cu=function(r){Y(t,r);function t(n,i){return r.call(this,Ve,"MultiLineString",n,i)||this}return t}(Yw);Cu.registerJSONType("MultiLineString");var Jw=function(r){Y(t,r);function t(n,i){return r.call(this,We,"MultiPolygon",n,i)||this}return t}(Yw);Jw.registerJSONType("MultiPolygon");var dA={Marker:Ge,LineString:Ve,Polygon:We,MultiPoint:wu,MultiLineString:Cu,MultiPolygon:Jw},fn={toGeometry:function(t,n){if(pe(t)&&(t=Ug(t)),Array.isArray(t)){for(var i=[],e=0,o=t.length;e<o;e++){var a=fn._convert(t[e],n);Array.isArray(a)?Po(i,a):i.push(a)}return i}else{var s=fn._convert(t,n);return s}},_convert:function(t,n){if(!t||O(t.type))return null;var i=t.type;if(i==="Feature"){var e=t.geometry,o=fn._convert(e);return o?(o.setId(t.id),o.setProperties(t.properties),n&&n(o),o):null}else if(i==="FeatureCollection"){var a=t.features;return a?fn.toGeometry(a,n):null}else if(["Point","LineString","Polygon","MultiPoint","MultiLineString","MultiPolygon"].indexOf(i)>=0){var s=i==="Point"?"Marker":i,l=new dA[s](t.coordinates);return n&&n(l),l}else if(i==="GeometryCollection"){var u=t.geometries;if(!Me(u)){var h=new xu;return n&&n(h),h}for(var c=[],f=u.length,d=0;d<f;d++)c.push(fn._convert(u[d]));var g=new xu(c);return n&&n(g),g}return null}},gA={numberOfShellPoints:60},Or=function(r){Y(t,r),t.fromJSON=function(e){var o=e.feature,a=new t(e.coordinates,e.radius,e.options);return a.setProperties(o.properties),a};function t(i,e,o){var a;return a=r.call(this,null,o)||this,i&&a.setCoordinates(i),a._radius=e,a}var n=t.prototype;return n.getRadius=function(){return this._radius},n.setRadius=function(e){return this._radius=e,this.onShapeChanged(),this},n.getShell=function(){for(var e=this._getMeasurer(),o=this.getCoordinates(),a=this.options.numberOfShellPoints,s=this.getRadius(),l=[],u,h,c,f=0,d=a-1;f<d;f++){u=360*f/d*Math.PI/180,h=s*Math.cos(u),c=s*Math.sin(u);var g=e.locate(o,h,c);l.push(g)}return l.push(l[0]),l},n.getHoles=function(){return[]},n.animateShow=function(){return this.show()},n._containsPoint=function(e,o){var a=this.getMap();if(a.getPitch())return r.prototype._containsPoint.call(this,e,o);var s=a._pointToContainerPoint(this._getCenter2DPoint()),l=this.getSize(),u=O(o)?this._hitTestTolerance():o,h=s.add(l.width/2,l.height/2);return Fw(e,s,h,u)},n._computePrjExtent=function(e){var o=this._getMinMax(e);if(!o)return null;var a=this._getPrjCoordinates(),s=o.map(function(f){return e.project(f)}),l=s[0].x-a.x,u=s[1].x-a.x,h=s[2].y-a.y,c=s[3].y-a.y;return new be(a.add(l,h),a.add(u,c))},n._computeExtent=function(e){var o=this._getMinMax(e);return o?new be(o[0].x,o[2].y,o[1].x,o[3].y,this._getProjection()):null},n._getMinMax=function(e){if(!e||!this._coordinates||O(this._radius))return null;var o=this._radius,a=e.locate(this._coordinates,-o,0),s=e.locate(this._coordinates,o,0),l=e.locate(this._coordinates,0,o),u=e.locate(this._coordinates,0,-o);return[a,s,l,u]},n._computeGeodesicLength=function(){return O(this._radius)?0:Math.PI*2*this._radius},n._computeGeodesicArea=function(){return O(this._radius)?0:Math.PI*Math.pow(this._radius,2)},n._exportGeoJSONGeometry=function(){var e=U.toNumberArrays([this.getShell()]);return{type:"Polygon",coordinates:e}},n._toJSON=function(e){var o=this.getCenter(),a=K({},e);a.geometry=!1;var s=this.toGeoJSON(a);return s.geometry={type:"Polygon"},{feature:s,subType:"Circle",coordinates:[o.x,o.y],radius:this.getRadius()}},t}(cv(We));Or.mergeOptions(gA);Or.registerJSONType("Circle");var vA={numberOfShellPoints:80},Jr=function(r){Y(t,r),t.fromJSON=function(e){var o=e.feature,a=new t(e.coordinates,e.width,e.height,e.options);return a.setProperties(o.properties),a};function t(i,e,o,a){var s;return s=r.call(this,null,a)||this,i&&s.setCoordinates(i),s.width=e,s.height=o,s}var n=t.prototype;return n.getWidth=function(){return this.width},n.setWidth=function(e){return this.width=e,this.onShapeChanged(),this},n.getHeight=function(){return this.height},n.setHeight=function(e){return this.height=e,this.onShapeChanged(),this},n.getShell=function(){for(var e=this._getMeasurer(),o=this.getCoordinates(),a=this.options.numberOfShellPoints,s=this.getWidth(),l=this.getHeight(),u=[],h=Math.pow(s/2,2)*Math.pow(l/2,2),c=Math.pow(s/2,2),f=Math.pow(l/2,2),d,g,v,y,p=0;p<a;p++){d=360*p/a,g=d*Math.PI/180,v=Math.sqrt(h/(c*Math.pow(Math.tan(g),2)+f)),y=Math.sqrt(h/(f*Math.pow(1/Math.tan(g),2)+c)),d>90&&d<270&&(v*=-1),d>180&&d<360&&(y*=-1);var m=e.locate(o,v,y);u.push(m)}return u},n.getHoles=function(){return[]},n.animateShow=function(){return this.show()},n._containsPoint=function(e,o){var a=this.getMap();if(a.isTransforming())return r.prototype._containsPoint.call(this,e,o);var s=a.getProjection(),l=O(o)?this._hitTestTolerance():o,u=s.projectCoords([this._coordinates,a.locate(this._coordinates,this.getWidth()/2,this.getHeight()/2)]),h=a._prjToContainerPoint(u[0]),c=a._prjToContainerPoint(u[1]);return Fw(e,h,c,l)},n._computePrjExtent=function(){return Or.prototype._computePrjExtent.apply(this,arguments)},n._computeExtent=function(){return Or.prototype._computeExtent.apply(this,arguments)},n._getMinMax=function(e){if(!e||!this._coordinates||O(this.width)||O(this.height))return null;var o=this.getWidth(),a=this.getHeight(),s=e.locate(this._coordinates,-o/2,0),l=e.locate(this._coordinates,o/2,0),u=e.locate(this._coordinates,0,-a/2),h=e.locate(this._coordinates,0,a/2);return[s,l,u,h]},n._computeGeodesicLength=function(){if(O(this.width)||O(this.height))return 0;var e=this.width>this.height?this.width:this.height;return 2*Math.PI*e/2-4*Math.abs(this.width-this.height)},n._computeGeodesicArea=function(){return O(this.width)||O(this.height)?0:Math.PI*this.width*this.height/4},n._exportGeoJSONGeometry=function(){var e=U.toNumberArrays([this.getShell()]);return{type:"Polygon",coordinates:e}},n._toJSON=function(e){var o=K({},e),a=this.getCenter();o.geometry=!1;var s=this.toGeoJSON(o);return s.geometry={type:"Polygon"},{feature:s,subType:"Ellipse",coordinates:[a.x,a.y],width:this.getWidth(),height:this.getHeight()}},t}(cv(We));Jr.mergeOptions(vA);Jr.registerJSONType("Ellipse");var Ki=function(r){Y(t,r),t.fromJSON=function(e){var o=e.feature,a=new t(e.coordinates,e.width,e.height,e.options);return a.setProperties(o.properties),a};function t(i,e,o,a){var s;return s=r.call(this,null,a)||this,i&&s.setCoordinates(i),s._width=e,s._height=o,s}var n=t.prototype;return n.getCoordinates=function(){return this._coordinates},n.setCoordinates=function(e){if(this._coordinates=e instanceof U?e:new U(e),!this._coordinates||!this.getMap())return this.onPositionChanged(),this;var o=this._getProjection();return this._setPrjCoordinates(o.project(this._coordinates)),this},n.getWidth=function(){return this._width},n.setWidth=function(e){return this._width=e,this.onShapeChanged(),this},n.getHeight=function(){return this._height},n.setHeight=function(e){return this._height=e,this.onShapeChanged(),this},n.getShell=function(){var e=this._getMeasurer(),o=this._coordinates,a=this.getMap(),s=1,l=-1;if(a){var u=a.getFullExtent();u.left>u.right&&(s=-1),u.bottom>u.top&&(l=1)}var h=[];return h.push(o),h.push(e.locate(o,s*this._width,0)),h.push(e.locate(o,s*this._width,l*this._height)),h.push(e.locate(o,0,l*this._height)),h.push(o),h},n.getHoles=function(){return[]},n.animateShow=function(){return this.show()},n._getPrjCoordinates=function(){var e=this._getProjection();return this._verifyProjection(),!this._pnw&&e&&this._coordinates&&(this._pnw=e.project(this._coordinates)),this._pnw},n._setPrjCoordinates=function(e){this._pnw=e,this.onPositionChanged()},n._getPrjShell=function(){var e=r.prototype._getPrjShell.call(this),o=this._getProjection();if(!o.isSphere())return e;for(var a=o.getSphereExtent(),s=a.sx,l=a.sy,u=this._getProjection().getCircum(),h=e[0],c=1,f=e.length;c<f;c++){var d=e[c],g=0,v=0;s*(h.x-d.x)>0&&(g=u.x*s),l*(h.y-d.y)<0&&(v=u.y*l),e[c]._add(g,v)}return e},n._updateCache=function(){this._clearCache();var e=this._getProjection();this._pnw&&e&&(this._coordinates=e.unproject(this._pnw))},n._clearProjection=function(){this._pnw=null,r.prototype._clearProjection.call(this)},n._computeCenter=function(e){return e.locate(this._coordinates,this._width/2,-this._height/2)},n._containsPoint=function(e,o){var a=this.getMap();if(a.isTransforming())return r.prototype._containsPoint.call(this,e,o);var s=O(o)?this._hitTestTolerance():o,l=a._getResolution()*s,u=this._getPrjExtent().expand(l),h=a._containerPointToPrj(e);return u.contains(h)},n._computePrjExtent=function(e){var o=this._getSouthEast(e);if(!o)return null;var a=e.projectCoords([new U(this._coordinates.x,o.y),new U(o.x,this._coordinates.y)]);return new be(a[0],a[1])},n._computeExtent=function(e){var o=this._getSouthEast(e);return o?new be(this._coordinates,o,this._getProjection()):null},n._getSouthEast=function(e){if(!e||!this._coordinates||O(this._width)||O(this._height))return null;var o=this.getWidth(),a=this.getHeight(),s=o,l=-a;if(e.fullExtent){var u=e.fullExtent,h=u.right>u.left?1:-1,c=u.top>u.bottom?1:-1;s*=h,l*=c}var f=e.locate(this._coordinates,s,0),d=e.locate(this._coordinates,0,l);return f.y=d.y,f},n._computeGeodesicLength=function(){return O(this._width)||O(this._height)?0:2*(this._width+this._height)},n._computeGeodesicArea=function(){return O(this._width)||O(this._height)?0:this._width*this._height},n._exportGeoJSONGeometry=function(){var e=U.toNumberArrays([this.getShell()]);return{type:"Polygon",coordinates:e}},n._toJSON=function(e){var o=K({},e),a=this.getCoordinates();o.geometry=!1;var s=this.toGeoJSON(o);return s.geometry={type:"Polygon"},{feature:s,subType:"Rectangle",coordinates:[a.x,a.y],width:this.getWidth(),height:this.getHeight()}},t}(We);Ki.registerJSONType("Rectangle");var pA={numberOfShellPoints:60},To=function(r){Y(t,r),t.fromJSON=function(e){var o=e.feature,a=new t(e.coordinates,e.radius,e.startAngle,e.endAngle,e.options);return a.setProperties(o.properties),a};function t(i,e,o,a,s){var l;return l=r.call(this,i,e,s)||this,l.startAngle=o,l.endAngle=a,l}var n=t.prototype;return n.getStartAngle=function(){return this.startAngle},n.setStartAngle=function(e){return this.startAngle=e,this.onShapeChanged(),this},n.getEndAngle=function(){return this.endAngle},n.setEndAngle=function(e){return this.endAngle=e,this.onShapeChanged(),this},n.getShell=function(){for(var e=this._getMeasurer(),o=this.getCoordinates(),a=this.options.numberOfShellPoints-2,s=this.getRadius(),l=[o.copy()],u=this.getStartAngle(),h=this.getEndAngle()-u,c,f,d,g=0;g<a;g++){c=(h*g/(a-1)+u)*Math.PI/180,f=s*Math.cos(c),d=s*Math.sin(c);var v=e.locate(o,f,d);l.push(v)}return l.push(o.copy()),l},n._containsPoint=function(e,o){var a=this.getMap();if(a.isTransforming())return r.prototype._containsPoint.call(this,e,o);var s=a._pointToContainerPoint(this._getCenter2DPoint()),l=O(o)?this._hitTestTolerance():o,u=this.getSize(),h=s,c=e,f=c.x-h.x,d=h.y-c.y,g=Math.atan2(d,f),v=g<0?(g+2*Math.PI)*360/(2*Math.PI):g*360/(2*Math.PI),y=this.startAngle%360,p=this.endAngle%360,m=!1;return y>p?m=!(v>p&&v<y):m=v>=y&&v<=p,c.distanceTo(h)<=u.width/2+l&&m},n._computeGeodesicLength=function(){return O(this._radius)?0:Math.PI*2*this._radius*Math.abs(this.startAngle-this.endAngle)/360+2*this._radius},n._computeGeodesicArea=function(){return O(this._radius)?0:Math.PI*Math.pow(this._radius,2)*Math.abs(this.startAngle-this.endAngle)/360},n._toJSON=function(e){var o=K({},e),a=this.getCenter();o.geometry=!1;var s=this.toGeoJSON(o);return s.geometry={type:"Polygon"},{feature:s,subType:"Sector",coordinates:[a.x,a.y],radius:this.getRadius(),startAngle:this.getStartAngle(),endAngle:this.getEndAngle()}},t}(Or);To.mergeOptions(pA);To.registerJSONType("Sector");var mA={enableSimplify:!1,enableClip:!1},ds=function(r){Y(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n._arc=function(e,o,a){for(var s=this.options.arcDegree*Math.PI/180,l=1,u=o.length;l<u;l++){var h=Z._arcBetween(e,o[l-1],o[l],s),c=[o[l-1].x+o[l].x-h[0],o[l-1].y+o[l].y-h[1]];o[l-1].nextCtrlPoint=c,o[l].prevCtrlPoint=c,Z._stroke(e,a)}},n._quadraticCurve=function(e,o){if(o.length<=2){Z._path(e,o);return}var a,s;for(a=2,s=o.length;a<s;a+=2)e.quadraticCurveTo(o[a-1].x,o[a-1].y,o[a].x,o[a].y);if(a-=1,a<s)for(;a<s;a++)e.lineTo(o[a].x,o[a].y)},n._bezierCurve=function(e,o){if(o.length<=3){Z._path(e,o);return}var a,s;for(a=1,s=o.length;a+2<s;a+=3)e.bezierCurveTo(o[a].x,o[a].y,o[a+1].x,o[a+1].y,o[a+2].x,o[a+2].y);if(a<s)for(;a<s;a++)e.lineTo(o[a].x,o[a].y)},n._getCurveArrowPoints=function(e,o,a,s,l,u){var h=o.length,c;for(c=u;c<h;c+=u){var f=this._getArrowShape(o[c-1],o[c],a,s,l);f&&e.push(f)}if(c-=u,c<h-1)for(c+=1;c<h;c++){var d=this._getArrowShape(o[c-1],o[c],a,s,l);d&&e.push(d)}},t}(Ve);ds.mergeOptions(mA);var yA={arcDegree:90},vh=function(r){Y(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n._toJSON=function(e){return{feature:this.toGeoJSON(e),subType:"ArcCurve"}},n._paintOn=function(e,o,a){e.beginPath(),this._arc(e,o,a),Z._stroke(e,a),this._paintArrow(e,o,a)},t.fromJSON=function(e){var o=e.feature,a=new t(o.geometry.coordinates,e.options);return a.setProperties(o.properties),a},t}(ds);vh.registerJSONType("ArcCurve");vh.mergeOptions(yA);var Xw=function(r){Y(t,r);function t(){return r.apply(this,arguments)||this}t.fromJSON=function(e){var o=e.feature,a=new t(o.geometry.coordinates,e.options);return a.setProperties(o.properties),a};var n=t.prototype;return n._toJSON=function(e){return{feature:this.toGeoJSON(e),subType:"CubicBezierCurve"}},n._paintOn=function(e,o,a){e.beginPath(),e.moveTo(o[0].x,o[0].y),this._bezierCurve(e,o),Z._stroke(e,a),this._paintArrow(e,o,a)},n._getArrowPoints=function(e,o,a,s,l){return this._getCurveArrowPoints(e,o,a,s,l,3)},t}(ds);Xw.registerJSONType("CubicBezierCurve");var Kw=function(r){Y(t,r);function t(){return r.apply(this,arguments)||this}t.fromJSON=function(e){var o=e.feature,a=new t(o.geometry.coordinates,e.options);return a.setProperties(o.properties),a};var n=t.prototype;return n._toJSON=function(e){return{feature:this.toGeoJSON(e),subType:"QuadBezierCurve"}},n._paintOn=function(e,o,a){e.beginPath(),e.moveTo(o[0].x,o[0].y),this._quadraticCurve(e,o,a),Z._stroke(e,a),this._paintArrow(e,o,a)},n._getArrowPoints=function(e,o,a,s,l){return this._getCurveArrowPoints(e,o,a,s,l,2)},t}(ds);Kw.registerJSONType("QuadBezierCurve");var _A={textFaceName:"monospace",textSize:12,textLineSpacing:8,textWrapCharacter:`
`,textHorizontalAlignment:"middle",textVerticalAlignment:"middle"},xA={markerType:"square",markerLineColor:"#000",markerLineWidth:2,markerLineOpacity:1,markerFill:"#fff",markerOpacity:1},fv=function(r){Y(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n.getContent=function(){return this._content},n.setContent=function(e){var o=this._content;return this._content=Kg(e),this._refresh(),this._fireEvent("contentchange",{old:o,new:e}),this},n.onAdd=function(){this._refresh()},n.toJSON=function(){var e=r.prototype.toJSON.call(this);return delete e.symbol,e},n.setSymbol=function(e){if(this._refreshing||!e)return r.prototype.setSymbol.call(this,e);var o=this._parseSymbol(e);if(this.setTextStyle){var a=this.getTextStyle()||{};a.symbol=o[0],this.setTextStyle(a)}else this.setTextSymbol&&this.setTextSymbol(o[0]);if(this.setBoxStyle){var s=this.getBoxStyle()||{};s.symbol=o[1],this.setBoxStyle(s)}else this.setBoxSymbol&&this.setBoxSymbol(o[1]);return this},n._parseSymbol=function(e){var o={},a={};for(var s in e)cs(e,s)&&(s.indexOf("text")===0?o[s]=e[s]:a[s]=e[s]);return[o,a]},n._getTextSize=function(e){return lw(this._content,e).size},n._getInternalSymbol=function(){return this._symbol},n._getDefaultTextSymbol=function(){return K({},_A)},n._getDefaultBoxSymbol=function(){return K({},xA)},n._getDefaultPadding=function(){return[12,8]},t}(Ge),wA={textStyle:{wrap:!0,padding:[12,8],verticalAlignment:"middle",horizontalAlignment:"middle"},boxSymbol:null},Pu=function(r){Y(t,r);function t(i,e,o,a,s){var l;return s===void 0&&(s={}),l=r.call(this,e,s)||this,l._content=Kg(i),l._width=O(o)?100:o,l._height=O(a)?40:a,s.boxSymbol&&l.setBoxSymbol(s.boxSymbol),s.textStyle&&l.setTextStyle(s.textStyle),l._refresh(),l}var n=t.prototype;return n.getWidth=function(){return this._width},n.setWidth=function(e){return this._width=e,this._refresh(),this},n.getHeight=function(){return this._height},n.setHeight=function(e){return this._height=e,this._refresh(),this},n.getBoxSymbol=function(){return K({},this.options.boxSymbol)},n.setBoxSymbol=function(e){return this.options.boxSymbol=e&&K({},e),this.getSymbol()&&this._refresh(),this},n.getTextStyle=function(){return this.options.textStyle?K({},this.options.textStyle):null},n.setTextStyle=function(e){return this.options.textStyle=e&&K({},e),this.getSymbol()&&this._refresh(),this},t.fromJSON=function(e){var o=e.feature,a=new t(e.content,o.geometry.coordinates,e.width,e.height,e.options);return a.setProperties(o.properties),a.setId(o.id),e.symbol&&a.setSymbol(e.symbol),a},n._toJSON=function(e){return{feature:this.toGeoJSON(e),width:this.getWidth(),height:this.getHeight(),subType:"TextBox",content:this._content}},n._refresh=function(){var e=this.getTextStyle()||{},o=e.padding||[12,8],a=this._width-2*o[0],s=this._height-2*o[1],l=K({},e.symbol||this._getDefaultTextSymbol(),this.options.boxSymbol||this._getDefaultBoxSymbol(),{textName:this._content,markerWidth:this._width,markerHeight:this._height,textHorizontalAlignment:"middle",textVerticalAlignment:"middle",textMaxWidth:a,textMaxHeight:s});e.wrap&&!l.textWrapWidth&&(l.textWrapWidth=a);var u=e.horizontalAlignment;l.textDx=l.markerDx||0;var h=l.markerWidth/2-o[0];u==="left"?(l.textHorizontalAlignment="right",l.textDx=l.textDx-h):u==="right"&&(l.textHorizontalAlignment="left",l.textDx=l.textDx+h);var c=e.verticalAlignment;l.textDy=l.markerDy||0;var f=l.markerHeight/2-o[1];c==="top"?(l.textVerticalAlignment="bottom",l.textDy-=f):c==="bottom"&&(l.textVerticalAlignment="top",l.textDy+=f),this._refreshing=!0,this.updateSymbol(l),delete this._refreshing},t}(fv);Pu.mergeOptions(wA);Pu.registerJSONType("TextBox");var CA={boxStyle:null,textSymbol:null},Qi=function(r){Y(t,r);function t(i,e,o){var a;return o===void 0&&(o={}),a=r.call(this,e,o)||this,o.textSymbol&&a.setTextSymbol(o.textSymbol),o.boxStyle&&a.setBoxStyle(o.boxStyle),a._content=Kg(i),a._refresh(),a}var n=t.prototype;return n.getBoxStyle=function(){return this.options.boxStyle?K({},this.options.boxStyle):null},n.setBoxStyle=function(e){return this.options.boxStyle=e&&K({},e),this._refresh(),this},n.getTextSymbol=function(){return K({},this._getDefaultTextSymbol(),this.options.textSymbol)},n.setTextSymbol=function(e){return this.options.textSymbol=e&&K({},e),this._refresh(),this},t.fromJSON=function(e){var o=e.feature,a=new t(e.content,o.geometry.coordinates,e.options);return a.setProperties(o.properties),a.setId(o.id),e.symbol&&a.setSymbol(e.symbol),a},n._canEdit=function(){return!1},n._toJSON=function(e){return{feature:this.toGeoJSON(e),subType:"Label",content:this._content}},n._refresh=function(){var e=K({},this.getTextSymbol(),{textName:this._content}),o=this.getBoxStyle();if(o){K(e,o.symbol);var a=this._getBoxSize(e),s=a[1],l=o.padding||this._getDefaultPadding(),u=a[0];e.markerWidth=u.width,e.markerHeight=u.height;var h=e.textDx||0,c=e.textDy||0,f=ni(s,e.textHorizontalAlignment,e.textVerticalAlignment)._add(h,c),d=o.horizontalAlignment||"middle";e.markerDx=f.x,d==="left"?e.markerDx+=e.markerWidth/2-l[0]:d==="right"?e.markerDx-=e.markerWidth/2-s.width-l[0]:e.markerDx+=s.width/2;var g=o.verticalAlignment||"middle";e.markerDy=f.y,g==="top"?e.markerDy+=e.markerHeight/2-l[1]:g==="bottom"?e.markerDy-=e.markerHeight/2-s.height-l[1]:e.markerDy+=s.height/2}this._refreshing=!0,this.updateSymbol(e),delete this._refreshing},n._getBoxSize=function(e){e.markerType||(e.markerType="square");var o=this.getBoxStyle(),a=this._getTextSize(e),s,l,u=o.padding||this._getDefaultPadding();return s=a.width+u[0]*2,l=a.height+u[1]*2,o.minWidth&&(!s||s<o.minWidth)&&(s=o.minWidth),o.minHeight&&(!l||l<o.minHeight)&&(l=o.minHeight),[new Xe(s,l),a]},t}(fv);Qi.mergeOptions(CA);Qi.registerJSONType("Label");var Qw=function(t){return function(n){Y(i,n);function i(){return n.apply(this,arguments)||this}i._hasConnectors=function(a){return!O(a.__connectors)&&a.__connectors.length>0},i._getConnectors=function(a){return a.__connectors};var e=i.prototype;return e.getConnectSource=function(){return this._connSource},e.setConnectSource=function(a){var s=this._connTarget;return this.onRemove(),this._connSource=a,this._connTarget=s,this.onAdd(),this},e.getConnectTarget=function(){return this._connTarget},e.setConnectTarget=function(a){var s=this._connSource;return this.onRemove(),this._connSource=s,this._connTarget=a,this._updateCoordinates(),this._registerEvents(),this},e._updateCoordinates=function(){var a=this.getMap();if(!a&&this._connSource&&(a=this._connSource.getMap()),!a&&this._connTarget&&(a=this._connTarget.getMap()),!!a&&!(!this._connSource||!this._connTarget)){for(var s=this._connSource._getConnectPoints(),l=this._connTarget._getConnectPoints(),u=0,h=this.getCoordinates(),c,f,d=0,g=s.length;d<g;d++)for(var v=s[d],y=0,p=l.length;y<p;y++){var m=l[y],_=a.computeLength(v,m);d===0&&y===0?(c=v,f=m,u=_):_<u&&(c=v,f=m)}(!Me(h)||!h[0].equals(c)||!h[1].equals(f))&&this.setCoordinates([c,f])}},e.onAdd=function(){this._registerEvents(),this._updateCoordinates()},e.onRemove=function(){if(this._connSource&&(this._connSource.__connectors&&dd(this,this._connSource.__connectors),this._connSource.off("dragging positionchange",this._updateCoordinates,this).off("remove",this.onRemove,this),this._connSource.off("dragstart mousedown mouseover",this._showConnect,this),this._connSource.off("dragend mouseup mouseout",this.hide,this),this._connSource.off("show",this._showConnect,this).off("hide",this.hide,this),delete this._connSource),this._connTarget&&(dd(this,this._connTarget.__connectors),this._connTarget.off("dragging positionchange",this._updateCoordinates,this).off("remove",this.onRemove,this),this._connTarget.off("show",this._showConnect,this).off("hide",this.hide,this),delete this._connTarget),!(this._connSource instanceof _e)||!(this._connTarget instanceof _e)){var a=this.getMap();a&&a.off("movestart moving moveend zoomstart zooming zoomend rotate pitch fovchange spatialreferencechange",this._updateCoordinates,this)}},e._showConnect=function(){!this._connSource||!this._connTarget||this._connSource.isVisible()&&this._connTarget.isVisible()&&(this._updateCoordinates(),this.show())},e._registerEvents=function(){if(!(!this._connSource||!this._connTarget)){this._connSource.__connectors||(this._connSource.__connectors=[]),this._connTarget.__connectors||(this._connTarget.__connectors=[]),this._connSource.__connectors.push(this),this._connTarget.__connectors.push(this),this._connSource.on("dragging positionchange",this._updateCoordinates,this).on("remove",this.remove,this),this._connTarget.on("dragging positionchange",this._updateCoordinates,this).on("remove",this.remove,this),this._connSource.on("show",this._showConnect,this).on("hide",this.hide,this),this._connTarget.on("show",this._showConnect,this).on("hide",this.hide,this);var a=this.options.showOn;if(this.hide(),a==="moving"?(this._connSource.on("dragstart",this._showConnect,this).on("dragend",this.hide,this),this._connTarget.on("dragstart",this._showConnect,this).on("dragend",this.hide,this)):a==="click"?(this._connSource.on("mousedown",this._showConnect,this).on("mouseup",this.hide,this),this._connTarget.on("mousedown",this._showConnect,this).on("mouseup",this.hide,this)):a==="mouseover"?(this._connSource.on("mouseover",this._showConnect,this).on("mouseout",this.hide,this),this._connTarget.on("mouseover",this._showConnect,this).on("mouseout",this.hide,this)):this._showConnect(),!(this._connSource instanceof _e)||!(this._connTarget instanceof _e)){var s=this.getMap();s&&s.on("movestart moving moveend zoomstart zooming zoomend rotate pitch fovchange spatialreferencechange",this._updateCoordinates,this)}}},i}(t)},eC={showOn:"always"},Su=function(r){Y(t,r);function t(n,i,e){var o;return o=r.call(this,null,e)||this,arguments.length===1&&(e=n,n=null,i=null),o._connSource=n,o._connTarget=i,o}return t}(Qw(Ve));Su.mergeOptions(eC);Su.registerJSONType("ConnectorLine");var tC=function(r){Y(t,r);function t(n,i,e){var o;return o=r.call(this,null,e)||this,arguments.length===1&&(e=n,n=null,i=null),o._connSource=n,o._connTarget=i,o}return t}(Qw(vh));tC.mergeOptions(eC);tC.registerJSONType("ArcConnectorLine");var PA={drawImmediate:!1},rC=function(r){Y(t,r);function t(i,e,o){var a;e&&!(e instanceof _e)&&!Array.isArray(e)&&ab.indexOf(e.type)<0&&(o=e,e=null),a=r.call(this,i,o)||this,a._maxZIndex=0,a._minZIndex=0,a._initCache(),e&&a.addGeometry(e);var s=a.options.style;return s&&a.setStyle(s),a}var n=t.prototype;return n.getGeometryById=function(e){return O(e)||e===""||!this._geoMap[e]?null:this._geoMap[e]},n.getGeometries=function(e,o){if(!e)return this._geoList.slice(0);for(var a=[],s,l,u=0,h=this._geoList.length;u<h;u++)s=this._geoList[u],o?l=e.call(o,s):l=e(s),l&&a.push(s);return a},n.getFirstGeometry=function(){return this._geoList.length?this._geoList[0]:null},n.getLastGeometry=function(){var e=this._geoList.length;return e===0?null:this._geoList[e-1]},n.getCount=function(){return this._geoList.length},n.getExtent=function(){if(this.getCount()===0)return null;var e=new be(this.getProjection());return this.forEach(function(o){e._combine(o.getExtent())}),e},n.forEach=function(e,o){for(var a=this._geoList.slice(0),s=0,l=a.length;s<l;s++)o?e.call(o,a[s],s):e(a[s],s);return this},n.filter=function(e,o){var a=[],s=Re(e),l=s?e:Xg(e);return this.forEach(function(u){var h=s?u:yd(u);(o?l.call(o,h):l(h))&&a.push(u)},this),a},n.isEmpty=function(){return!this._geoList.length},n.addGeometry=function(e,o){if(!e)return this;if(e.type==="FeatureCollection")return this.addGeometry(fn.toGeometry(e),o);if(Array.isArray(e)){if(e.length===0)return this}else{var a=arguments.length,s=arguments[a-1];return e=Array.prototype.slice.call(arguments,0,a-1),o=s,s&&mr(s)&&("type"in s||s instanceof _e)&&(e.push(s),o=!1),this.addGeometry(e,o)}this._initCache();var l;o&&(l=new be),this._toSort=this._maxZIndex>0;for(var u=[],h=0,c=e.length;h<c;h++){var f=e[h];if(!f)throw new Error("Invalid geometry to add to layer("+this.getId()+") at index:"+h);if(!(f instanceof _e)&&(f=_e.fromJSON(f),Array.isArray(f)))for(var d=0,g=f.length;d<g;d++)this._add(f[d],l,h),u.push(f[d]);Array.isArray(f)||(this._add(f,l,h),u.push(f))}var v=this.getMap();if(v&&(this._getRenderer().onGeometryAdd(u),l&&!O(l.xmin))){var y=l.getCenter(),p=v.getFitZoom(l);if(mr(o)){var m=Re(o.step)?o.step:function(){};v.animateTo({center:y,zoom:p},K({duration:v.options.zoomAnimationDuration,easing:"out"},o),m)}else o===!0&&v.setCenterAndZoom(y,p)}return this.fire("addgeo",{geometries:e}),this},n.getGeoMinZIndex=function(){return this._minZIndex},n.getGeoMaxZIndex=function(){return this._maxZIndex},n._add=function(e,o,a){this._toSort||(this._toSort=e.getZIndex()!==0),this._updateZIndex(e.getZIndex());var s=e.getId();if(!O(s)){if(!O(this._geoMap[s]))throw new Error("Duplicate geometry id in layer("+this.getId()+"):"+s+", at index:"+a);this._geoMap[s]=e}var l=Co();e._setInternalId(l),this._geoList.push(e),this.onAddGeometry(e),e._bindLayer(this),e.onAdd&&e.onAdd(),o&&o._combine(e.getExtent()),e._fireEvent("add",{layer:this}),this._cookedStyles&&this._styleGeometry(e)},n.removeGeometry=function(e){if(!Array.isArray(e))return this.removeGeometry([e]);for(var o=e.length-1;o>=0;o--)e[o]instanceof _e||(e[o]=this.getGeometryById(e[o])),!(!e[o]||this!==e[o].getLayer())&&e[o].remove();return this.fire("removegeo",{geometries:e}),this},n.clear=function(){this._clearing=!0,this.forEach(function(a){a.remove()}),this._geoMap={};var e=this._geoList;this._geoList=[];var o=this._getRenderer();return o&&(o.onGeometryRemove(e),o.clearImageData&&o.clearImageData()),this._clearing=!1,this.fire("clear"),this},n.onRemoveGeometry=function(e){if(!(!e||this._clearing)&&this===e.getLayer()){var o=e._getInternalId();if(!O(o)){var a=e.getId();O(a)||delete this._geoMap[a];var s=this._findInList(e);s>=0&&this._geoList.splice(s,1),this._getRenderer()&&this._getRenderer().onGeometryRemove([e])}}},n.getStyle=function(){return this.options.style?this.options.style:null},n.setStyle=function(e){return this.options.style=e,e=Vb(e),this._cookedStyles=nw(e),this.forEach(function(o){this._styleGeometry(o)},this),this.fire("setstyle",{style:e}),this},n._styleGeometry=function(e){if(!this._cookedStyles)return!1;for(var o=yd(e),a=0,s=this._cookedStyles.length;a<s;a++)if(this._cookedStyles[a].filter(o)===!0)return e._setExternSymbol(this._cookedStyles[a].symbol),!0;return!1},n.removeStyle=function(){return this.options.style?(delete this.options.style,delete this._cookedStyles,this.forEach(function(e){e._setExternSymbol(null)},this),this.fire("removestyle"),this):this},n.onAddGeometry=function(e){var o=this.getStyle();o&&this._styleGeometry(e)},n.hide=function(){for(var e=0,o=this._geoList.length;e<o;e++)this._geoList[e].onHide();return St.prototype.hide.call(this)},n._initCache=function(){this._geoList||(this._geoList=[],this._geoMap={})},n._updateZIndex=function(){for(var e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];this._maxZIndex=Math.max(this._maxZIndex,Math.max.apply(Math,o)),this._minZIndex=Math.min(this._minZIndex,Math.min.apply(Math,o))},n._sortGeometries=function(){var e=this;!this._toSort||(this._maxZIndex=0,this._minZIndex=0,this._geoList.sort(function(o,a){return e._updateZIndex(o.getZIndex(),a.getZIndex()),e._compare(o,a)}),this._toSort=!1)},n._compare=function(e,o){return e.getZIndex()===o.getZIndex()?e._getInternalId()-o._getInternalId():e.getZIndex()-o.getZIndex()},n._findInList=function(e){var o=this._geoList.length;if(o===0)return-1;this._sortGeometries();for(var a=0,s=o-1,l;a<=s;){if(l=Math.floor((a+s)/2),this._geoList[l]===e)return l;this._compare(this._geoList[l],e)>0?s=l-1:a=l+1}return-1},n._onGeometryEvent=function(e){if(!(!e||!e.target)){var o=e.type;o==="idchange"?this._onGeometryIdChange(e):o==="zindexchange"?this._onGeometryZIndexChange(e):o==="positionchange"?this._onGeometryPositionChange(e):o==="shapechange"?this._onGeometryShapeChange(e):o==="symbolchange"?this._onGeometrySymbolChange(e):o==="show"?this._onGeometryShow(e):o==="hide"?this._onGeometryHide(e):o==="propertieschange"&&this._onGeometryPropertiesChange(e)}},n._onGeometryIdChange=function(e){if(!(e.new===e.old&&this._geoMap[e.old]&&this._geoMap[e.old]===e.target)){if(!O(e.new)){if(this._geoMap[e.new])throw new Error("Duplicate geometry id in layer("+this.getId()+"):"+e.new);this._geoMap[e.new]=e.target}!O(e.old)&&e.new!==e.old&&delete this._geoMap[e.old]}},n._onGeometryZIndexChange=function(e){e.old!==e.new&&(this._updateZIndex(e.new),this._toSort=!0,this._getRenderer()&&this._getRenderer().onGeometryZIndexChange(e))},n._onGeometryPositionChange=function(e){this._getRenderer()&&this._getRenderer().onGeometryPositionChange(e)},n._onGeometryShapeChange=function(e){this._getRenderer()&&this._getRenderer().onGeometryShapeChange(e)},n._onGeometrySymbolChange=function(e){this._getRenderer()&&this._getRenderer().onGeometrySymbolChange(e)},n._onGeometryShow=function(e){this._getRenderer()&&this._getRenderer().onGeometryShow(e)},n._onGeometryHide=function(e){this._getRenderer()&&this._getRenderer().onGeometryHide(e)},n._onGeometryPropertiesChange=function(e){this._getRenderer()&&this._getRenderer().onGeometryPropertiesChange(e)},t}(St);rC.mergeOptions(PA);var SA=new de,EA={debug:!1,enableSimplify:!0,geometryEvents:!0,defaultIconSize:[20,20],cacheVectorOnCanvas:!0,cacheSvgOnCanvas:ye.gecko,enableAltitude:!1,altitudeProperty:"altitude",drawAltitude:!1,sortByDistanceToCamera:!1,roundPoint:!1,altitude:0,clipBBoxBufferSize:3},Xr=function(r){Y(t,r);function t(i,e,o){return r.call(this,i,e,o)||this}var n=t.prototype;return n.onConfig=function(e){if(r.prototype.onConfig.call(this,e),e.enableAltitude||e.drawAltitude||e.altitudeProperty){var o=this.getRenderer();o&&o.setToRedraw&&o.setToRedraw()}},n.identify=function(e,o){o===void 0&&(o={});var a=this.getRenderer();e instanceof U||(e=new U(e));var s=this.getMap().coordToContainerPoint(e);return o.onlyVisible&&a&&a.identifyAtPoint?a.identifyAtPoint(s,o):this._hitGeos(this._geoList,s,o)},n.identifyAtPoint=function(e,o){o===void 0&&(o={});var a=this.getRenderer();return e instanceof N||(e=new N(e)),o.onlyVisible&&a&&a.identifyAtPoint?a.identifyAtPoint(e,o):this._hitGeos(this._geoList,e,o)},n._hitGeos=function(e,o,a){a===void 0&&(a={});var s=a.filter,l=a.tolerance,u=[],h=this.getMap(),c=this.getRenderer(),f=c&&c.getImageData&&c.getImageData();if(f){var d=h.getDevicePixelRatio();f.r=d;var g=Math.round(o.x*d),v=Math.round(o.y*d),y=v*f.width*4+g*4;if(f.data[y+3]===0)return u}for(var p=e.length-1;p>=0;p--){var m=e[p];if(!(!m||!m.isVisible()||!m._getPainter()||!m.options.interactive)){if(!(m instanceof Ve)||!m._getArrowStyle()&&!(m instanceof ds)){var _=m.getContainerExtent(SA);if(l&&(_=_._expand(l)),!_||!_.contains(o))continue}if(m._containsPoint(o,l)&&(!s||s(m))&&(u.push(m),a.count&&u.length>=a.count))break}}return u},n.getAltitude=function(){return this.options.altitude||0},n.toJSON=function(e){e||(e={});var o={type:this.getJSONType(),id:this.getId(),options:this.config()};if(O(e.geometries)||e.geometries){var a;if(e.clipExtent){var s=this.getMap(),l=s?s.getProjection():null;a=new be(e.clipExtent,l)}for(var u=[],h=this.getGeometries(),c=0,f=h.length;c<f;c++){var d=h[c],g=d.getExtent();if(!(!g||a&&!a.intersects(g))){var v=d.toJSON(e.geometries);u.push(v)}}o.geometries=u}return o},t.fromJSON=function(e){if(!e||e.type!=="VectorLayer")return null;for(var o=new t(e.id,e.options),a=e.geometries,s=[],l=0;l<a.length;l++){var u=_e.fromJSON(a[l]);u&&s.push(u)}return o.addGeometry(s),o},t.getPainterClass=function(){return hv},t.getCollectionPainterClass=function(){return Ww},t}(rC);Xr.mergeOptions(EA);Xr.registerJSONType("VectorLayer");var sl="_map_tool",_y=function(r){Y(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n.addTo=function(e){return e?(this._map=e,e[sl]&&e[sl].disable(),this.onAdd&&this.onAdd(),this.enable(),e[sl]=this,this._fireEvent("add"),this):this},n.getMap=function(){return this._map},n.enable=function(){var e=this._map;return!e||this._enabled?this:(this._enabled=!0,this._switchEvents("off"),this._registerEvents(),this.onEnable&&this.onEnable(),this._fireEvent("enable"),this)},n.disable=function(){return!this._enabled||!this._map?this:(this._enabled=!1,this._switchEvents("off"),this.onDisable&&this.onDisable(),this._fireEvent("disable"),this)},n.isEnabled=function(){return!!this._enabled},n.remove=function(){return this._map?(this.disable(),this._map&&(delete this._map[sl],delete this._map),this._fireEvent("remove"),this):this},n._registerEvents=function(){this._switchEvents("on")},n._switchEvents=function(e){var o=this.getEvents();o&&this._map[e](o,this)},n._fireEvent=function(e,o){o||(o={}),this.fire(e,o)},t}(en(fr)),MA={symbol:{lineColor:"#000",lineWidth:2,lineOpacity:1,polygonFill:"#fff",polygonOpacity:.3},doubleClickZoom:!1,mode:null,once:!1,autoPanAtEdge:!1,ignoreMouseleave:!0,blockGeometryEvents:!1},xy={},ut=function(r){Y(t,r),t.registerMode=function(e,o){xy[e.toLowerCase()]=o},t.getRegisterMode=function(e){return xy[e.toLowerCase()]};function t(i){var e;return e=r.call(this,i)||this,e._checkMode(),e._events={click:e._clickHandler,"mousemove touchmove":e._mouseMoveHandler,dblclick:e._doubleClickHandler,"mousedown touchstart":e._mouseDownHandler,"mouseup touchend":e._mouseUpHandler,mousemove:e._mouseMoveHandler,mousedown:e._mouseDownHandler,mouseup:e._mouseUpHandler},e}var n=t.prototype;return n.getMode=function(){return this.options.mode?this.options.mode.toLowerCase():null},n.setMode=function(e){return this._geometry&&(this._geometry.remove(),delete this._geometry),this._clearStage(),this._switchEvents("off"),this.options.mode=e,this._checkMode(),this.isEnabled()&&(this._switchEvents("on"),this._restoreMapCfg(),this._saveMapCfg()),this},n.getSymbol=function(){var e=this.options.symbol;return Mr(e||this.options.symbol)},n.setSymbol=function(e){return e?(this.options.symbol=e,this._geometry&&this._geometry.setSymbol(e),this):this},n.getCurrentGeometry=function(){return this._geometry},n.onAdd=function(){this._checkMode()},n.onEnable=function(){this._saveMapCfg(),this._drawToolLayer=this._getDrawLayer(),this._clearStage(),this._loadResources();var e=this.getMap();return this.options.autoPanAtEdge&&(this._mapAutoPanAtEdge=e.options.autoPanAtEdge,this._mapAutoPanAtEdge||e.config({autoPanAtEdge:!0})),this._geometryEvents=e.options.geometryEvents,this.options.blockGeometryEvents&&e.config("geometryEvents",!1),this},n.onDisable=function(){var e=this.getMap();return this._restoreMapCfg(),this.endDraw(),this._map&&(e.removeLayer(this._getDrawLayer()),this.options.autoPanAtEdge&&(this._mapAutoPanAtEdge||e.config({autoPanAtEdge:!1}))),this.options.blockGeometryEvents&&e.config("geometryEvents",this._geometryEvents),this},n.undo=function(){var e=this._getRegisterMode(),o=e.action;if(!this._shouldRecordHistory(o)||!this._historyPointer)return this;var a=this._clickCoords.slice(0,--this._historyPointer);return e.update(this.getMap().getProjection(),a,this._geometry),this},n.redo=function(){var e=this._getRegisterMode(),o=e.action;if(!this._shouldRecordHistory(o)||O(this._historyPointer)||this._historyPointer===this._clickCoords.length)return this;var a=this._clickCoords.slice(0,++this._historyPointer);return e.update(this.getMap().getProjection(),a,this._geometry),this},n._shouldRecordHistory=function(e){return Array.isArray(e)&&e[0]==="click"&&e[1]==="mousemove"&&e[2]==="dblclick"},n._checkMode=function(){this._getRegisterMode()},n._saveMapCfg=function(){var e=this.getMap();this._mapDoubleClickZoom=e.options.doubleClickZoom,e.config({doubleClickZoom:this.options.doubleClickZoom});for(var o=this._getRegisterMode().action,a=!1,s=0;s<o.length;s++)if(o[s].indexOf("mousedown")>=0||o[s].indexOf("touchstart")>=0){a=!0;break}if(a){var l=this.getMap();this._mapDraggable=l.options.draggable,l.config({draggable:!1})}},n._restoreMapCfg=function(){var e=this.getMap();e.config({doubleClickZoom:this._mapDoubleClickZoom}),O(this._mapDraggable)||e.config("draggable",this._mapDraggable),delete this._mapDraggable,delete this._mapDoubleClickZoom},n._loadResources=function(){var e=this.getSymbol(),o=uh(e);o.length>0&&this._drawToolLayer._getRenderer().loadResources(o)},n._getProjection=function(){return this._map.getProjection()},n._getRegisterMode=function(){var e=this.getMode(),o=t.getRegisterMode(e);if(!o)throw new Error(e+" is not a valid mode of DrawTool.");return o},n.getEvents=function(){var e=this._getRegisterMode().action,o={};if(Array.isArray(e)){for(var a=0;a<e.length;a++)o[e[a]]=this._events[e[a]];return o}return null},n._mouseDownHandler=function(e){this._createGeometry(e)},n._mouseUpHandler=function(e){this.endDraw(e)},n._clickHandler=function(e){var o=this._getRegisterMode();if(this._clickCoords&&this._clickCoords.length){var a=this._clickCoords.length,s=this.getMap()._pointToPrj(e.point2d);if(this._clickCoords[a-1].equals(s))return}if(!this._geometry)this._createGeometry(e);else{var l=this.getMap()._pointToPrj(e.point2d);O(this._historyPointer)||(this._clickCoords=this._clickCoords.slice(0,this._historyPointer)),this._clickCoords.push(l),this._historyPointer=this._clickCoords.length,e.drawTool=this,o.update(this.getMap().getProjection(),this._clickCoords,this._geometry,e),this._clickCoords.length<=1?this._fireEvent("drawstart",e):this._fireEvent("drawvertex",e),o.clickLimit&&o.clickLimit===this._historyPointer&&this.endDraw(e)}},n._createGeometry=function(e){var o=this.getMode(),a=this._getRegisterMode(),s=this.getMap()._pointToPrj(e.point2d),l=this.getSymbol();this._geometry||(this._clickCoords=[s],e.drawTool=this,this._geometry=a.create(this.getMap().getProjection(),this._clickCoords,e),l&&o!=="point"?this._geometry.setSymbol(l):this.options.hasOwnProperty("symbol")&&this._geometry.setSymbol(this.options.symbol),this._addGeometryToStage(this._geometry),this._fireEvent("drawstart",e)),o==="point"&&this.endDraw(e)},n._mouseMoveHandler=function(e){var o=this.getMap();if(!(!this._geometry||!o||o.isInteracting())){var a=this._getMouseContainerPoint(e);if(!!this._isValidContainerPoint(a)){var s=this.getMap()._pointToPrj(e.point2d),l=o.getProjection();e.drawTool=this;var u=this._getRegisterMode();if(this._shouldRecordHistory(u.action)){var h=this._clickCoords.slice(0,this._historyPointer);if(h&&h.length>0&&s.equals(h[h.length-1]))return;u.update(l,h.concat([s]),this._geometry,e)}else u.update(l,s,this._geometry,e);this._fireEvent("mousemove",e)}}},n._doubleClickHandler=function(e){if(!!this._geometry){var o=this._getMouseContainerPoint(e);if(!!this._isValidContainerPoint(o)){var a=this._getRegisterMode(),s=this._clickCoords;if(!(s.length<2)){var l=this.getMode();if(!(l&&l.indexOf("polygon")>-1&&s.length<3)){for(var u=this.getMap().getProjection(),h=[s[0]],c=1,f=s.length;c<f;c++)(s[c].x!==s[c-1].x||s[c].y!==s[c-1].y)&&h.push(s[c]);h.length<2||this._geometry&&this._geometry instanceof We&&h.length<3||(e.drawTool=this,a.update(u,h,this._geometry,e),this.endDraw(e))}}}}},n._addGeometryToStage=function(e){var o=this._getDrawLayer();o.addGeometry(e)},n.endDraw=function(e){if(!this._geometry||this._ending)return this;this._ending=!0;var o=this._geometry;return this._clearStage(),e=e||{},this._geometry=o,this._fireEvent("drawend",e),delete this._geometry,this.options.once&&this.disable(),delete this._ending,delete this._historyPointer,this},n._clearStage=function(){this._getDrawLayer().clear(),delete this._geometry,delete this._clickCoords},n._getMouseContainerPoint=function(e){var o=this._getRegisterMode().action;return(o[0].indexOf("mousedown")>=0||o[0].indexOf("touchstart")>=0)&&qt(e.domEvent),e.containerPoint},n._isValidContainerPoint=function(e){var o=this._map.getSize(),a=o.width,s=o.height;return e.x<0||e.y<0?!1:!(e.x>a||e.y>s)},n._getDrawLayer=function(){var e=hs+"drawtool",o=this._map.getLayer(e);return o||(o=new Xr(e,{enableSimplify:!1}),this._map.addLayer(o)),o},n._fireEvent=function(e,o){o||(o={}),this._geometry&&(o.geometry=this._getRegisterMode().generate(this._geometry,{drawTool:this})),_y.prototype._fireEvent.call(this,e,o)},t}(_y);ut.mergeOptions(MA);var TA=function(r){Y(t,r);function t(i){var e;return e=r.call(this,i)||this,e.drawTool=new ut({mode:"boxZoom",ignoreMouseleave:!1}),e}var n=t.prototype;return n.addHooks=function(){this.target.on("_mousedown",this._onMouseDown,this)},n.removeHooks=function(){this.target.off("_mousedown",this._onMouseDown,this),this.drawTool.isEnabled()&&this.drawTool.remove()},n._onMouseDown=function(e){!this.target.options.boxZoom||e.domEvent.shiftKey&&this.drawTool.setSymbol(this.target.options.boxZoomSymbol).on("drawend",this._boxZoom,this).addTo(this.target)},n._boxZoom=function(e){var o=this.target;this.drawTool.remove();var a=e.geometry,s=a.getCenter(),l=a.getSymbol(),u=l.markerWidth,h=l.markerHeight,c=new be(s,o.locateByPoint(s,u,h),o.getProjection()),f=o.getFitZoom(c);o._animateTo({center:c.getCenter(),zoom:f})},t}(wr);fe.mergeOptions({boxZoom:!0,boxZoomSymbol:{markerType:"rectangle",markerLineWidth:3,markerLineColor:"#1bbc9b",markerLineDasharray:[10,5],markerFillOpacity:.1,markerFill:"#1bbc9b",markerWidth:1,markerHeight:1}});fe.addOnLoadHook("addHandler","boxZoom",TA);var rn=30,kA=function(r){Y(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n.addHooks=function(){!this.target||this.target.on("_mousemove",this._onMouseMove,this)},n.removeHooks=function(){!this.target||this.target.off("_mousemove",this._onMouseMove,this)},n._onMouseMove=function(e){var o=this.target;if(o.options.autoPanAtEdge){var a=e.containerPoint,s=o.getContainerExtent();if(s){var l=a.x,u=a.y,h=s.xmax,c=s.ymax,f;l<rn&&(f=[Math.abs(l-rn),0]),u<rn&&(f=[0,Math.abs(u-rn)]),l+rn>h&&(f=[-Math.abs(l+rn-h),0]),u+rn>c&&(f=[0,-Math.abs(u+rn-c)]),f&&o.panBy(f,{duration:1})}}},t}(wr);fe.mergeOptions({autoPanAtEdge:!1});fe.addOnLoadHook("addHandler","autoPanAtEdge",kA);fe.include({animateTo:function(t,n,i){var e=this;n===void 0&&(n={}),Re(n)&&(i=n,n={});var o=this.getProjection(),a=this.getView(),s={},l=!0;for(var u in t)if(cs(t,u)&&!O(t[u])&&(u==="prjCenter"||!O(a[u])))if(l=!1,u==="center"){var h=new U(a[u]).toFixed(7),c=new U(t[u]).toFixed(7);h.equals(c)||(s.center=[h,c])}else if(u==="prjCenter"){var f=new U(this._getPrjCenter()),d=new U(t[u]);f.equals(d)||(s.prjCenter=[f,d])}else a[u]!==t[u]&&u!=="around"&&(s[u]=[a[u],t[u]]);if(l)return null;this._animPlayer&&(this._isInternalAnimation?this._animPlayer.playState==="running"&&(this._animPlayer.pause(),this._prevAnimPlayer=this._animPlayer):(delete this._prevAnimPlayer,this._stopAnim(this._animPlayer)));var g=t.around||new N(this.width/2,this.height/2),v=this._getRenderer(),y=function(_){v.callInNextFrame(_)},p=this._animPlayer=ft.animate(s,{easing:n.easing||"out",duration:n.duration||this.options.zoomAnimationDuration,framer:y},function(m){if(e.isRemoved()){p.finish();return}if(p.playState==="running"){if(m.styles.center){var _=m.styles.center;e._setPrjCenter(o.project(_)),e.onMoving(e._parseEventFromCoord(e.getCenter()))}else if(m.styles.prjCenter){var x=m.styles.prjCenter;e._setPrjCenter(x),e.onMoving(e._parseEventFromCoord(e.getCenter()))}O(m.styles.zoom)||e.onZooming(m.styles.zoom,g),O(m.styles.pitch)||e._setPitch(m.styles.pitch),O(m.styles.bearing)||e._setBearing(m.styles.bearing),e._fireEvent("animating")}else(p.playState!=="paused"||p===e._mapAnimPlayer)&&(p._interupted||(s.center?e._setPrjCenter(o.project(s.center[1])):s.prjCenter&&e._setPrjCenter(s.prjCenter[1]),O(s.pitch)||e._setPitch(s.pitch[1]),O(s.bearing)||e._setBearing(s.bearing[1])),e._endAnim(p,s,g,n));i&&i(m)},this);return this._startAnim(s,g),p},_animateTo:function(t,n,i){return n===void 0&&(n={}),this._mapAnimPlayer&&this._stopAnim(this._mapAnimPlayer),this._isInternalAnimation=!0,this._mapAnimPlayer=this.animateTo(t,n,i),delete this._isInternalAnimation,this._mapAnimPlayer},flyTo:function(t,n,i){var e=this;n===void 0&&(n={}),this._animPlayer&&(this._isInternalAnimation?this._animPlayer.playState==="running"&&(this._animPlayer.pause(),this._prevAnimPlayer=this._animPlayer):(delete this._prevAnimPlayer,this._stopAnim(this._animPlayer))),Re(n)&&(i=n,n={}),n=K({curve:1.42},n);var o=this;function a(G,b){return o.getResolution(b)/o.getResolution(G)}var s=t.around||new N(this.width/2,this.height/2),l=this.getMinZoom(),u=this.getMaxZoom(),h=this.getProjection(),c=this.getView(),f=c.zoom,d=c.bearing,g=c.pitch,v="zoom"in t?vd(+t.zoom,l,u):f,y="bearing"in t?+t.bearing:d,p="pitch"in t?+t.pitch:g,m=h.project(t.center&&new U(t.center)||this.getCenter()),_=a(v,f),x=h.project(this.getCenter()),C=m.sub(x),w=n.curve,P=Math.max(this.width,this.height),S=P/_,M=C.mag();if("minZoom"in n){var R=vd(Math.min(n.minZoom,f,v),l,u),j=P/a(R,f);w=Math.sqrt(j/M*2)}var A=w*w;function z(G){var b=(S*S-P*P+(G?-1:1)*A*A*M*M)/(2*(G?S:P)*A*M);return Math.log(Math.sqrt(b*b+1)-b)}function D(G){return(Math.exp(G)-Math.exp(-G))/2}function I(G){return(Math.exp(G)+Math.exp(-G))/2}function B(G){return D(G)/I(G)}var W=z(0),E=function(b){return I(W)/I(W+w*b)},T=function(b){return P*((I(W)*B(W+w*b)-D(W))/A)/M},L=(z(1)-W)/w;if(Math.abs(M)<1e-6||!isFinite(L)){if(Math.abs(P-S)<1e-6)return this.animateTo(t,n,i);var V=S<P?-1:1;L=Math.abs(Math.log(S/P))/w,T=function(){return 0},E=function(b){return Math.exp(V*w*b)}}var F=this._getRenderer(),H=function(b){F.callInNextFrame(b)},$=this._animPlayer=ft.animate({k:[0,1]},{easing:n.easing||"out",duration:n.duration||8,framer:H},function(G){if(e.isRemoved()){$.finish();return}var b=G.styles.k,ee=b*L,q=1/E(ee),te={};if(t.center){var ie=b===1?m:x.add(C.multi(T(ee)));te.prjCenter=[m,ie]}if(f!==v){var ue=b===1?v:e.getZoomForScale(q,f,!0);te.zoom=[f,ue]}if(g!==p){var re=wy(g,p,b);te.pitch=[p,re]}if(d!==y){var xe=wy(d,y,b);te.bearing=[y,xe]}if($.playState==="running"){if(te.prjCenter){var Ce=te.prjCenter;e._setPrjCenter(Ce[1]),e.onMoving(e._parseEventFromCoord(e.getCenter()))}te.zoom&&e.onZooming(te.zoom[1],s),te.pitch&&e._setPitch(te.pitch[1]),te.bearing&&e._setBearing(te.bearing[1]),e._fireEvent("animating")}else($.playState!=="paused"||$===e._mapAnimPlayer)&&($._interupted||(te.prjCenter&&e._setPrjCenter(te.prjCenter[1]),te.pitch&&e._setPitch(te.pitch[1]),te.bearing&&e._setBearing(te.bearing[1])),e._endAnim($,te,s,n));i&&i(G)});return this._startAnim({center:t.center,zoom:t.zoom!==f,pitch:p!==g,bearing:y!==d},s),this},isAnimating:function(){return!!this._animPlayer},isRotating:function(){return this.isDragRotating()||!!this._animRotating},_endAnim:function(t,n,i,e){delete this._animRotating;var o=t._interupted?"animateinterrupted":"animateend";if(t===this._animPlayer&&delete this._animPlayer,t===this._mapAnimPlayer&&delete this._mapAnimPlayer,n.center){var a;t._interupted?a=this.getCenter():a=n.center[1],this.onMoveEnd(this._parseEventFromCoord(a))}else if(n.prjCenter){var s;t._interupted?s=this._getPrjCenter():s=n.prjCenter[1];var l=this._parseEventFromCoord(this.getProjection().unproject(s));l.point2d=this._prjToPoint(s),this.onMoveEnd(l)}O(n.zoom)||(t._interupted?this.onZoomEnd(this.getZoom(),i):e.wheelZoom?this.onZooming(n.zoom[1],i):this.onZoomEnd(n.zoom[1],i)),o&&this._fireEvent(o),!O(n.pitch)&&!this.getPitch()&&this.getRenderer().setToRedraw(),e.wheelZoom||this._resumePrev(t)},_startAnim:function(t,n){!this._animPlayer||(t.center&&this.onMoveStart(),t.zoom&&!this.isZooming()&&this.onZoomStart(t.zoom[1],n),(t.pitch||t.bearing)&&(this._animRotating=!0),this._fireEvent("animatestart"),this._animPlayer.play())},_stopAnim:function(t){!t||(delete this._animRotating,t.playState!=="finished"&&(t._interupted=!0,t.cancel()),t===this._animPlayer&&delete this._animPlayer,t===this._mapAnimPlayer&&delete this._mapAnimPlayer)},_resumePrev:function(t){if(!!this._prevAnimPlayer){var n=this._prevAnimPlayer;n.playState!=="paused"&&delete this._prevAnimPlayer,t!==n&&(this._animPlayer=n,n.play())}}});function wy(r,t,n){return r*(1-n)+t*n}var Cy="mousedown mouseup mouseover mouseout mouseenter mouseleave mousemove click dblclick contextmenu keypress touchstart touchmove touchend ",Oc=300;fe.include({_registerDomEvents:function(){var t=this._panels.mapWrapper||this._containerDOM;Sn(t,Cy,this._handleDOMEvent,this)},_removeDomEvents:function(){var t=this._panels.mapWrapper||this._containerDOM;si(t,Cy,this._handleDOMEvent)},_handleDOMEvent:function(t){var n=t.type,i=n==="mousedown"||n==="touchstart"&&(!t.touches||t.touches.length===1);i&&(this._domMouseDownTime=$e(),this._domMouseDownView=this.getView());var e=n==="contextmenu"&&bA(this);if(n==="contextmenu"){ar(t);var o=this._domMouseDownTime,a=$e();a-o<=Oc&&!e&&this._fireDOMEvent(this,t,"dom:"+t.type)}else this._fireDOMEvent(this,t,"dom:"+t.type);if(!this._ignoreEvent(t)){var s=!1;if(i)this._mouseDownTime=$e();else if(n==="click"||n==="touchend"||n==="contextmenu")if(this._mouseDownTime){var l=this._mouseDownTime;delete this._mouseDownTime;var u=$e();if(u-l>Oc){if(n==="click"||n==="contextmenu")return}else if(n==="contextmenu"){if(e)return}else n==="touchend"&&(s=!0)}else return;var h;s&&(this._clickTime&&$e()-this._clickTime<=Oc?(delete this._clickTime,h="dblclick",this._fireDOMEvent(this,t,"dom:dblclick")):(this._clickTime=$e(),h="click",this._fireDOMEvent(this,t,"dom:click"))),!this._ignoreEvent(t)&&(this._fireDOMEvent(this,t,n),h&&this._fireDOMEvent(this,t,h))}},_ignoreEvent:function(t){if(!t||!this._panels.control)return!1;if(this._isEventOutMap(t))return!0;var n=t.srcElement||t.target,i;if(n)for(;n&&n!==this._containerDOM;){if(n.className&&n.className.indexOf&&(n.className.indexOf("maptalks-control")>=0||n.className.indexOf("maptalks-ui")>=0&&i&&!i.eventsPropagation))return!0;i=n,n=n.parentNode}return!1},_isEventOutMap:function(t){if(this.getPitch()>this.options.maxVisualPitch){var n=this._getActualEvent(t),i=kt(n,this._containerDOM);if(!this.getContainerExtent().contains(i))return!0}return!1},_parseEvent:function(t,n){if(!t)return null;var i={domEvent:t};if(n!=="keypress"){var e=this._getActualEvent(t);if(e){var o=kt(e,this._containerDOM);i=K(i,{containerPoint:o,viewPoint:this.containerPointToViewPoint(o)});var a=this.options.maxVisualPitch;(this.getPitch()<=a||o.y>=this.height-this._getVisualHeight(a))&&(i=K(i,{coordinate:this.containerPointToCoord(o),point2d:this._containerPointToPoint(o)}))}}return i},_parseEventFromCoord:function(t){var n=this.coordToContainerPoint(t),i=this.containerPointToViewPoint(n),e={coordinate:t,containerPoint:n,viewPoint:i,point2d:this.coordToPoint(t)};return e},_getActualEvent:function(t){return t.touches&&t.touches.length>0?t.touches[0]:t.changedTouches&&t.changedTouches.length>0?t.changedTouches[0]:t},_fireDOMEvent:function(t,n,i){if(!this.isRemoved()){var e=this._parseEvent(n,i);this._fireEvent(i,e)}}});fe.addOnLoadHook("_registerDomEvents");function bA(r){if(!r._domMouseDownView)return!0;var t=r.getView(),n=r._domMouseDownView;return t.bearing!==n.bearing||t.pitch!==n.pitch}fe.include({isFullScreen:function(){return!!(document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement)},requestFullScreen:function(t){return this._fireEvent("fullscreenstart"),this._requestFullScreen(t||this._containerDOM),this._fireEvent("fullscreenend"),this},cancelFullScreen:function(){return this._cancelFullScreen(),this._fireEvent("cancelfullscreen"),this},_requestFullScreen:function(t){if(t.requestFullscreen)t.requestFullscreen();else if(t.mozRequestFullScreen)t.mozRequestFullScreen();else if(t.webkitRequestFullScreen)t.webkitRequestFullScreen();else if(t.msRequestFullScreen)t.msRequestFullScreen();else{var n="fullscreen=1,status=no,resizable=yes,top=0,left=0,scrollbars=no,titlebar=no,menubar=no,location=no,toolbar=no,z-look=yes,width="+(screen.availWidth-8)+",height="+(screen.availHeight-45),i=window.open(location.href,"_blank",n);i!==null&&(window.opener=null,window.close())}},_cancelFullScreen:function(){if(document.exitFullscreen)document.exitFullscreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else if(document.webkitCancelFullScreen)document.webkitCancelFullScreen();else{var t="fullscreen=no,status=yes,resizable=yes,scrollbars=no,titlebar=no,menubar=yes,location=yes,toolbar=yes,z-look=yes",n=window.open(location.href,"_blank",t);n!==null&&(window.opener=null,window.close())}}});fe.include({panTo:function(t,n,i){if(n===void 0&&(n={}),!t)return this;if(Re(n)&&(i=n,n={}),t=new U(t),typeof n.animation=="undefined"||n.animation){var e=this.getProjection().project(t);return this._panAnimation(e,n.duration,i)}else this.setCenter(t);return this},_panTo:function(t,n){return n===void 0&&(n={}),typeof n.animation=="undefined"||n.animation?this._panAnimation(t,n.duration):(this.onMoveStart(),this._setPrjCenter(t),this.onMoveEnd(this._parseEventFromCoord(this.getCenter())),this)},panBy:function(t,n,i){if(n===void 0&&(n={}),!t)return this;Re(n)&&(i=n,n={}),t=new N(t);var e=this.getContainerExtent(),o=e.ymin;if(o>0&&t.y>30){var a=t.y;t.y=30,t.x=t.x*30/a,console.warn("offset is limited to panBy when pitch is above maxPitch")}if(this.onMoveStart(),typeof n.animation=="undefined"||n.animation){t=t.multi(-1);var s=this._containerPointToPrj(new N(this.width/2+t.x,this.height/2+t.y));this._panAnimation(s,n.duration,i)}else this._offsetCenterByPixel(t),this.onMoveEnd(this._parseEventFromCoord(this.getCenter()));return this},_panAnimation:function(t,n,i){return this._animateTo({prjCenter:t},{duration:n||this.options.panAnimationDuration},i)}});_e.fromJSON=function(r){if(Array.isArray(r)){for(var t=[],n=0,i=r.length;n<i;n++){var e=_e.fromJSON(r[n]);Array.isArray(r)?t=t.concat(e):t.push(e)}return t}if(r&&!r.feature)return fn.toGeometry(r);var o;return r.subType?(o=_e.getJSONClass(r.subType).fromJSON(r),O(r.feature.id)||o.setId(r.feature.id)):(o=fn.toGeometry(r.feature),r.options&&o.config(r.options)),r.symbol&&o.setSymbol(r.symbol),r.infoWindow&&o.setInfoWindow(r.infoWindow),o};St.fromJSON=function(r){if(!r)return null;var t=r.type,n=St.getJSONClass(t);if(!n||!n.fromJSON)throw new Error("unsupported layer type:"+t);return n.fromJSON(r)};fe.include({JSON_VERSION:"1.0",toJSON:function(t){t||(t={});var n={jsonVersion:this.JSON_VERSION,version:this.VERSION,extent:this.getExtent().toJSON()};n.options=this.config(),n.options.center=this.getCenter(),n.options.zoom=this.getZoom(),n.options.bearing=this.getBearing(),n.options.pitch=this.getPitch();var i=this.getBaseLayer();(O(t.baseLayer)||t.baseLayer)&&i&&(n.baseLayer=i.toJSON(t.baseLayer));var e={};t.clipExtent&&(t.clipExtent===!0?e.clipExtent=this.getExtent():e.clipExtent=t.clipExtent);var o=[];if(O(t.layers)||t.layers&&!Array.isArray(t.layers)){for(var a=this.getLayers(),s=0,l=a.length;s<l;s++)if(!!a[s].toJSON){var u=K({},mr(t.layers)?t.layers:{},e);o.push(a[s].toJSON(u))}n.layers=o}else if(Me(t.layers)){for(var h=t.layers,c=0;c<h.length;c++){var f=h[c],d=this.getLayer(f.id);if(!!d.toJSON){var g=K({},f.options,e);o.push(d.toJSON(g))}}n.layers=o}else n.layers=[];return n}});fe.fromJSON=function(r,t,n){if(!r||!t)return null;n||(n={});var i=new fe(r,t.options);if(O(n.baseLayer)||n.baseLayer){var e=St.fromJSON(t.baseLayer);e&&i.setBaseLayer(e)}if(O(n.layers)||n.layers){for(var o=[],a=t.layers,s=0;s<a.length;s++){var l=St.fromJSON(a[s]);o.push(l)}i.addLayer(o)}return i};fe.include({computeLength:function(t,n){if(!this.getProjection())return null;var i=new U(t),e=new U(n);return i.equals(e)?0:this.getProjection().measureLength(i,e)},computeGeometryLength:function(t){return t._computeGeodesicLength(this.getProjection())},computeGeometryArea:function(t){return t._computeGeodesicArea(this.getProjection())},identify:function(t,n){t=t||{};var i=new U(t.coordinate);return this._identify(t,n,function(e){return e.identify(i,t)})},identifyAtPoint:function(t,n){t=t||{};var i=new N(t.containerPoint),e=this.containerPointToCoord(i);return this._identify(t,n,function(o){return o.identifyAtPoint?o.identifyAtPoint(i,t):e?o.identify(e,t):[]})},_identify:function(t,n,i){var e=t.layers;if(!Me(e))return this;for(var o=[],a=0,s=e.length;a<s;a++)pe(e[a])?o.push(this.getLayer(e[a])):o.push(e[a]);for(var l=[],u=o.length-1;u>=0&&!(t.count&&l.length>=t.count);u--){var h=o[u];if(!(!h||!h.getMap()||!t.includeInvisible&&!h.isVisible()||!t.includeInternals&&h.getId().indexOf(hs)>=0)){var c=i(h);c&&(Array.isArray(c)?Po(l,c):l.push(c))}}return n.call(this,l),this}});fe.include({_zoom:function(t,n){!this.options.zoomable||this.isZooming()||(n=this._checkZoomOrigin(n),t=this._checkZoom(t),this.onZoomStart(t,n),this._frameZoom=this.getZoom(),this.onZoomEnd(t,n))},_zoomAnimation:function(t,n,i){!this.options.zoomable||this.isZooming()||(t=this._checkZoom(t),this.getZoom()!==t&&(n=this._checkZoomOrigin(n),this._startZoomAnim(t,n,i)))},_checkZoomOrigin:function(t){return(!t||this.options.zoomInCenter)&&(t=new N(this.width/2,this.height/2)),this.options.zoomOrigin&&(t=new N(this.options.zoomOrigin)),t},_startZoomAnim:function(t,n,i){O(i)&&(i=1);var e=this._getResolution(this._startZoomVal)/this._getResolution(t),o=this.options.zoomAnimationDuration*Math.abs(e-i)/Math.abs(e-1);this._frameZoom=this._startZoomVal,this._animateTo({zoom:t,around:n},{continueOnViewChanged:!0,duration:o})},onZoomStart:function(t,n){!this.options.zoomable||this.isZooming()||(this._mapAnimPlayer&&this._stopAnim(this._mapAnimPlayer),this._zooming=!0,this._startZoomVal=this.getZoom(),this._startZoomCoord=this._containerPointToPrj(n),this._fireEvent("zoomstart",{from:this._startZoomVal,to:t}))},onZooming:function(t,n,i){if(!!this.options.zoomable){var e=this._frameZoom;if(e!==t){O(i)&&(i=1),this._zoomTo(t,n);var o=this.getResolution(t),a=this.getResolution(this._startZoomVal),s=a/o/i,l=this._prjToContainerPoint(this._startZoomCoord,this._startZoomVal),u=this.getViewPoint();if(!this.isRotating()&&!l.equals(n)&&s!==1){var h=this.getPitch(),c=l._sub(n)._multi(1/(1-s));h&&(c.y/=Math.cos(h*Math.PI/180)),n=n.add(c)}var f={view:[s,0,0,s,(n.x-u.x)*(1-s),(n.y-u.y)*(1-s)]},d=this.getDevicePixelRatio();d!==1&&(n=n.multi(d)),f.container=[s,0,0,s,n.x*(1-s),n.y*(1-s)],this._fireEvent("zooming",{from:this._startZoomVal,to:t,origin:n,matrix:f}),this._frameZoom=t}}},onZoomEnd:function(t,n){if(!!this.options.zoomable){var i=this._startZoomVal;this._zoomTo(t,n),this._zooming=!1,this._getRenderer().onZoomEnd(),this._fireEvent("zoomend",{from:i,to:t}),this._verifyExtent(this._getPrjCenter())||this._panTo(this._prjMaxExtent.getCenter())}},_zoomTo:function(t,n){this._zoomLevel=t,this._calcMatrices(),n&&this._setPrjCoordAtContainerPoint(this._startZoomCoord,n)},_checkZoom:function(t){var n=this.getMaxZoom(),i=this.getMinZoom();return t<i&&(t=i),t>n&&(t=n),t}});function Py(r,t,n,i,e){var o=1/Math.tan(t/2),a=1/(i-e);return r[0]=o/n,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=o,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=(e+i)*a,r[11]=-1,r[12]=0,r[13]=0,r[14]=2*e*i*a,r[15]=0,r}function nC(r,t,n){var i=n[0],e=n[1],o=n[2],a,s,l,u,h,c,f,d,g,v,y,p;return t===r?(r[12]=t[0]*i+t[4]*e+t[8]*o+t[12],r[13]=t[1]*i+t[5]*e+t[9]*o+t[13],r[14]=t[2]*i+t[6]*e+t[10]*o+t[14],r[15]=t[3]*i+t[7]*e+t[11]*o+t[15]):(a=t[0],s=t[1],l=t[2],u=t[3],h=t[4],c=t[5],f=t[6],d=t[7],g=t[8],v=t[9],y=t[10],p=t[11],r[0]=a,r[1]=s,r[2]=l,r[3]=u,r[4]=h,r[5]=c,r[6]=f,r[7]=d,r[8]=g,r[9]=v,r[10]=y,r[11]=p,r[12]=a*i+h*e+g*o+t[12],r[13]=s*i+c*e+v*o+t[13],r[14]=l*i+f*e+y*o+t[14],r[15]=u*i+d*e+p*o+t[15]),r}function kd(r,t,n){var i=n[0],e=n[1],o=n[2];return r[0]=t[0]*i,r[1]=t[1]*i,r[2]=t[2]*i,r[3]=t[3]*i,r[4]=t[4]*e,r[5]=t[5]*e,r[6]=t[6]*e,r[7]=t[7]*e,r[8]=t[8]*o,r[9]=t[9]*o,r[10]=t[10]*o,r[11]=t[11]*o,r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15],r}function RA(r,t,n){var i=Math.sin(n),e=Math.cos(n),o=t[4],a=t[5],s=t[6],l=t[7],u=t[8],h=t[9],c=t[10],f=t[11];return t!==r&&(r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r[4]=o*e+u*i,r[5]=a*e+h*i,r[6]=s*e+c*i,r[7]=l*e+f*i,r[8]=u*e-o*i,r[9]=h*e-a*i,r[10]=c*e-s*i,r[11]=f*e-l*i,r}function AA(r,t,n){var i=Math.sin(n),e=Math.cos(n),o=t[0],a=t[1],s=t[2],l=t[3],u=t[4],h=t[5],c=t[6],f=t[7];return t!==r&&(r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r[0]=o*e+u*i,r[1]=a*e+h*i,r[2]=s*e+c*i,r[3]=l*e+f*i,r[4]=u*e-o*i,r[5]=h*e-a*i,r[6]=c*e-s*i,r[7]=f*e-l*i,r}function aa(r,t,n){var i=t[0],e=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],h=t[7],c=t[8],f=t[9],d=t[10],g=t[11],v=t[12],y=t[13],p=t[14],m=t[15],_=n[0],x=n[1],C=n[2],w=n[3];return r[0]=_*i+x*s+C*c+w*v,r[1]=_*e+x*l+C*f+w*y,r[2]=_*o+x*u+C*d+w*p,r[3]=_*a+x*h+C*g+w*m,_=n[4],x=n[5],C=n[6],w=n[7],r[4]=_*i+x*s+C*c+w*v,r[5]=_*e+x*l+C*f+w*y,r[6]=_*o+x*u+C*d+w*p,r[7]=_*a+x*h+C*g+w*m,_=n[8],x=n[9],C=n[10],w=n[11],r[8]=_*i+x*s+C*c+w*v,r[9]=_*e+x*l+C*f+w*y,r[10]=_*o+x*u+C*d+w*p,r[11]=_*a+x*h+C*g+w*m,_=n[12],x=n[13],C=n[14],w=n[15],r[12]=_*i+x*s+C*c+w*v,r[13]=_*e+x*l+C*f+w*y,r[14]=_*o+x*u+C*d+w*p,r[15]=_*a+x*h+C*g+w*m,r}function Sy(r,t){var n=t[0],i=t[1],e=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],h=t[8],c=t[9],f=t[10],d=t[11],g=t[12],v=t[13],y=t[14],p=t[15],m=n*s-i*a,_=n*l-e*a,x=n*u-o*a,C=i*l-e*s,w=i*u-o*s,P=e*u-o*l,S=h*v-c*g,M=h*y-f*g,R=h*p-d*g,j=c*y-f*v,A=c*p-d*v,z=f*p-d*y,D=m*z-_*A+x*j+C*R-w*M+P*S;return D?(D=1/D,r[0]=(s*z-l*A+u*j)*D,r[1]=(e*A-i*z-o*j)*D,r[2]=(v*P-y*w+p*C)*D,r[3]=(f*w-c*P-d*C)*D,r[4]=(l*R-a*z-u*M)*D,r[5]=(n*z-e*R+o*M)*D,r[6]=(y*x-g*P-p*_)*D,r[7]=(h*P-f*x+d*_)*D,r[8]=(a*A-s*R+u*S)*D,r[9]=(i*R-n*A-o*S)*D,r[10]=(g*w-v*x+p*m)*D,r[11]=(c*x-h*w-d*m)*D,r[12]=(s*M-a*j-l*S)*D,r[13]=(n*j-i*M+e*S)*D,r[14]=(v*_-g*C-y*m)*D,r[15]=(h*C-c*_+f*m)*D,r):null}function dv(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function Ey(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15],r}function rr(r,t,n,i){return r[0]=t,r[1]=n,r[2]=i,r}function OA(r,t,n){return r[0]=t[0]+n[0],r[1]=t[1]+n[1],r[2]=t[2]+n[2],r}function Al(r,t,n){return r[0]=t[0]-n[0],r[1]=t[1]-n[1],r[2]=t[2]-n[2],r}function My(r){var t=r[0],n=r[1],i=r[2];return Math.sqrt(t*t+n*n+i*i)}function Ol(r,t){var n=t[0],i=t[1],e=t[2],o=n*n+i*i+e*e;return o>0&&(o=1/Math.sqrt(o),r[0]=t[0]*o,r[1]=t[1]*o,r[2]=t[2]*o),r}function LA(r,t){return r[0]*t[0]+r[1]*t[1]+r[2]*t[2]}function DA(r,t,n){return r[0]=t[0]*n,r[1]=t[1]*n,r[2]=t[2]*n,r}function Lc(r,t,n){var i=t[0],e=t[1],o=t[2],a=n[0],s=n[1],l=n[2];return r[0]=e*l-o*s,r[1]=o*a-i*l,r[2]=i*s-e*a,r}function Eu(r,t){var n=t[0]-r[0],i=t[1]-r[1],e=t[2]-r[2];return Math.hypot?Math.hypot(n,i,e):FA(n,i,e)}function IA(r,t,n){var i=t[0],e=t[1],o=t[2],a=n[3]*i+n[7]*e+n[11]*o+n[15];return a=a||1,r[0]=(n[0]*i+n[4]*e+n[8]*o+n[12])/a,r[1]=(n[1]*i+n[5]*e+n[9]*o+n[13])/a,r[2]=(n[2]*i+n[6]*e+n[10]*o+n[14])/a,r}function FA(){for(var r=0,t=arguments.length;t--;)r+=arguments[t]*arguments[t];return Math.sqrt(r)}function Dc(r,t,n){var i=t[0],e=t[1],o=t[2],a=1/(n[3]*i+n[7]*e+n[11]*o+n[15]);return r[0]=(n[0]*i+n[4]*e+n[8]*o+n[12])*a,r[1]=(n[1]*i+n[5]*e+n[9]*o+n[13])*a,r[2]=(n[2]*i+n[6]*e+n[10]*o+n[14])*a,r}function NA(r,t){var n=t[0],i=t[4],e=t[8],o=t[1],a=t[5],s=t[9],l=t[2],u=t[6],h=t[10],c=n+a+h,f;return c>0?(f=.5/Math.sqrt(c+1),r.w=.25/f,r.x=(u-s)*f,r.y=(e-l)*f,r.z=(o-i)*f):n>a&&n>h?(f=2*Math.sqrt(1+n-a-h),r.w=(u-s)/f,r.x=.25*f,r.y=(i+o)/f,r.z=(e+l)/f):a>h?(f=2*Math.sqrt(1+a-n-h),r.w=(e-l)/f,r.x=(i+o)/f,r.y=.25*f,r.z=(s+u)/f):(f=2*Math.sqrt(1+h-n-a),r.w=(o-i)/f,r.x=(e+l)/f,r.y=(s+u)/f,r.z=.25*f),this}function zA(r,t){var n=r,i=t.x,e=t.y,o=t.z,a=t.w,s=i+i,l=e+e,u=o+o,h=i*s,c=i*l,f=i*u,d=e*l,g=e*u,v=o*u,y=a*s,p=a*l,m=a*u;return n[0]=1-(d+v),n[4]=c-m,n[8]=f+p,n[1]=c+m,n[5]=1-(h+v),n[9]=g-y,n[2]=f-p,n[6]=g+y,n[10]=1-(h+d),n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function jA(r,t){var n=r;return n[12]=t[0],n[13]=t[1],n[14]=t[2],r}function HA(r,t,n,i){var e=[0,0,0],o=[0,0,0],a=[0,0,0];return Al(a,t,n),My(a)===0&&(a[2]=1),Ol(a,a),Lc(e,i,a),My(a)===0&&(Math.abs(i[2])===1?a[0]+=1e-4:a[2]+=1e-4,Ol(a,a),Lc(e,i,a)),Ol(e,e),Lc(o,a,e),r[0]=e[0],r[4]=o[0],r[8]=a[0],r[1]=e[1],r[5]=o[1],r[9]=a[1],r[2]=e[2],r[6]=o[2],r[10]=a[2],r}var nn=Math.PI/180,VA=.6435011087932844,Ty=new U(0,0);fe.include({getFov:function(){return this._fov||(this._fov=VA),this._fov/nn},setFov:function(t){if(this.isZooming())return this;if(t=Math.max(.01,Math.min(60,t)),this._fov===t)return this;var n=this.getFov();return this._fov=t*nn,this._calcMatrices(),this._renderLayers(),this._fireEvent("fovchange",{from:n,to:this.getFov()}),this},getBearing:function(){return this._angle?-this._angle/nn:0},setBearing:function(t){return this._mapAnimPlayer&&this._stopAnim(this._mapAnimPlayer),this._setBearing(t)},_setBearing:function(t){if(ye.ie9)throw new Error("map can't rotate in IE9.");var n=-ri(t,-180,180)*nn;if(this._angle===n)return this;var i=this.getBearing();return this._fireEvent("rotatestart",{from:i,to:n}),this._angle=n,this._calcMatrices(),this._renderLayers(),this._fireEvent("rotate",{from:i,to:n}),this._fireEvent("rotateend",{from:i,to:n}),this},getPitch:function(){return this._pitch?this._pitch/Math.PI*180:0},setPitch:function(t){return this._mapAnimPlayer&&this._stopAnim(this._mapAnimPlayer),this._setPitch(t)},_setPitch:function(t){if(ye.ie9)throw new Error("map can't tilt in IE9.");var n=vd(t,0,this.options.maxPitch)*nn;if(this._pitch===n)return this;var i=this.getPitch();return this._fireEvent("pitchstart",{from:i,to:n}),this._pitch=n,this._calcMatrices(),this._renderLayers(),this._fireEvent("pitch",{from:i,to:n}),this._fireEvent("pitchend",{from:i,to:n}),this},isTransforming:function(){return!!(this._pitch||this._angle)},getFrustumAltitude:function(){return this._frustumAltitude},_calcFrustumAltitude:function(){var t=90-this.getPitch(),n=this.getFov()/2,i=this.cameraPosition?this.cameraPosition[2]:0;if(n<=t)return i;n=Math.PI*n/180;var e=new N(this.cameraPosition).distanceTo(new N(this.cameraLookAt)),o=i*Math.tan(n*2),a=Math.tan(n)*(e+o);return i+a},_pointToContainerPoint:function(t,n,i,e){i===void 0&&(i=0);var o=this._getResolution(n);return this._pointAtResToContainerPoint(t,o,i,e)},_pointAtResToContainerPoint:function(t,n,i,e){i===void 0&&(i=0),e||(e=new N(0,0)),t=this._pointAtResToPoint(t,n,e);var o=this.isTransforming(),a=n/this._getResolution(),s;return!o&&!i&&(s=this._prjToPoint(this._getPrjCenter(),void 0,Ty)),this._toContainerPoint(e,o,a,i,s),e},_pointsAtResToContainerPoints:function(t,n,i,e){i===void 0&&(i=[]),e===void 0&&(e=[]);var o=this.getPitch(),a=this.getBearing();if(o===0&&a===0){var s=this._get2DExtent(),l=s.xmin,u=s.ymin,h=s.xmax,c=s.ymax;if(h>l&&c>u){for(var f=n/this._getResolution(),d=this.getSize(),g=d.width,v=d.height,y=(h-l)/g,p=(c-u)/v,m=0,_=t.length;m<_;m++){if(!t[m]){e[m]=null;continue}var x=e[m];x.x=t[m].x,x.y=t[m].y,x._multi(f),x.x=(x.x-l)*y,x.y=v-(x.y-u)*p}return e}}for(var C=Array.isArray(i),w=this.isTransforming(),P=n/this._getResolution(),S=this._prjToPoint(this._getPrjCenter(),void 0,Ty),M=0,R=t.length;M<R;M++){if(!t[M]){e[M]=null;continue}var j=e[M];j.x=t[M].x,j.y=t[M].y,j._multi(P);var A=C?i[M]||0:i;this._toContainerPoint(j,w,P,A,S)}return e},_toContainerPoint:function(){var r=[0,0,0];return function(t,n,i,e,o){var a=this.width/2,s=this.height/2;if(n||e){e*=i;var l=this._glScale;rr(r,t.x*l,t.y*l,e*l);var u=this._projIfBehindCamera(r,this.cameraPosition,this.cameraForward);Dc(u,u,this.projViewMatrix),t.x=u[0]*a+a,t.y=-(u[1]*s)+s}else t._sub(o.x,o.y),t.set(t.x,-t.y),t._add(a,s)}}(),_projIfBehindCamera:function(){var r=new Array(3),t=new Array(3),n=new Array(3);return function(i,e,o){Al(r,i,e);var a=LA(o,r);return a<=0&&(DA(t,o,a*1.01),OA(i,e,Al(n,r,t))),i}}(),_containerPointToPoint:function(t,n,i){var e=this._getResolution(n);return this._containerPointToPointAtRes(t,e,i)},_containerPointToPointAtRes:function(){var r=[0,0,0],t=[0,0,0,1],n=[0,0,0,1];return function(i,e,o){if(this.isTransforming()){var a=this.width/2||1,s=this.height/2||1;rr(r,(i.x-a)/a,(s-i.y)/s,0),rr(t,r[0],r[1],0),rr(n,r[0],r[1],1),t[3]=n[3]=1,Dc(t,t,this.projViewMatrixInverse),Dc(n,n,this.projViewMatrixInverse);var l=t[0],u=n[0],h=t[1],c=n[1],f=t[2],d=n[2],g=f===d?0:(0-f)/(d-f),v=gd(l,u,g),y=gd(h,c,g);return o?(o.x=v,o.y=y):o=new N(v,y),o._multi(1/this._glScale),this._getResolution()===e?o:this._pointToPointAtRes(o,e,o)}var p=this._prjToPointAtRes(this._getPrjCenter(),e,o),m=this._getResolution()/e,_=m*(i.x-this.width/2),x=m*(i.y-this.height/2);return p._add(_,-x)}}(),_calcMatrices:function(){var r=tr();return function(){delete this._mapRes,delete this._mapGlRes,delete this._mapExtent2D,delete this._mapGlExtent2D;var t=this.getSize(),n=t.width||1,i=t.height||1;this._glScale=this.getGLScale();var e=this._getCameraWorldMatrix(),o=this.getFov()*Math.PI/180,a=this._getCameraFar(o,this.getPitch());this.cameraFar=a,this.cameraNear=Math.max(this.cameraCenterDistance/10,.1);var s=this.projMatrix||tr();Py(s,o,n/i,this.cameraNear,a),this.projMatrix=s,this.viewMatrix=Sy(this.viewMatrix||tr(),e),this.projViewMatrix=aa(this.projViewMatrix||tr(),s,this.viewMatrix),this._calcCascadeMatrixes(),this.projViewMatrixInverse=aa(this.projViewMatrixInverse||tr(),e,Sy(r,s)),this.domCssMatrix=this._calcDomMatrix(),this._frustumAltitude=this._calcFrustumAltitude(),this._mapRes=this._getResolution(),this._mapGlRes=this.getGLRes(),this._mapExtent2D=this._get2DExtent(),this._mapGlExtent2D=this._get2DExtentAtRes(this._mapGlRes)}}(),_getCameraFar:function(t,n){var i=this.cameraCenterDistance=Eu(this.cameraPosition,this.cameraLookAt),e=i,o=4*i;if(n>0&&(n=n*Math.PI/180,2/Math.PI-n>t/2)){var a=Math.tan(t/2),s=Math.tan(n);o=Math.max(i*a/(1/s-a),o)}return e+=o,e+1},_calcCascadeMatrixes:function(){var r=tr();function t(n,i,e){var o=this.width,a=this.height,s=this.getFov()*Math.PI/180,l=this._getCameraFar(s,i),u=this.cameraCenterDistance;l=u+(l-u)/Math.cos((90-i)*Math.PI/180)*Math.cos((90-n)*Math.PI/180),Py(r,s,o/a,.1,l);var h=this.viewMatrix;return aa(e,r,h)}return function(){var n=this.getPitch(),i=this.options.cascadePitches[0],e=this.options.cascadePitches[1],o=this.cascadeFrustumMatrix0=this.cascadeFrustumMatrix0||tr(),a=this.cascadeFrustumMatrix1=this.cascadeFrustumMatrix1||tr();n>i?t.call(this,n,i,o):Ey(this.cascadeFrustumMatrix0,this.projViewMatrix),n>e?t.call(this,n,e,a):Ey(this.cascadeFrustumMatrix1,this.cascadeFrustumMatrix0)}}(),_calcDomMatrix:function(){var r=tr(),t=tr(),n=[1,-1,1],i=[0,0,0];return function(){var e=this.width||1,o=this.height||1,a=.5/Math.tan(this._fov/2)*o;return kd(r,this.projMatrix,n),nC(r,r,rr(i,0,0,-a)),this._pitch&&RA(r,r,this._pitch),this._angle&&AA(r,r,this._angle),dv(t),kd(t,t,rr(i,e/2,-o/2,1)),aa(this.domCssMatrix||tr(),t,r)}}(),_getFovZ:function(t){var n=this.getGLScale(t),i=this._getFovRatio();return n*(this.height||1)/2/i},_getCameraWorldMatrix:function(){var r={};return function(){var t=this.getGLRes(),n=this._prjToPointAtRes(this._prjCenter,t);this.cameraLookAt=rr(this.cameraLookAt||[0,0,0],n.x,n.y,0);var i=this.getPitch()*nn,e=this.getBearing()*nn,o=this._getFovZ(),a=o*Math.cos(i),s=Math.sin(i)*o,l=n.x-s*Math.sin(e),u=n.y-s*Math.cos(e);this.cameraPosition=rr(this.cameraPosition||[0,0,0],l,u,a),this.cameraToCenterDistance=Eu(this.cameraPosition,this.cameraLookAt);var h=s||1,c=this.cameraUp=rr(this.cameraUp||[0,0,0],Math.sin(e)*h,Math.cos(e)*h,0),f=this.cameraWorldMatrix=this.cameraWorldMatrix||tr();HA(f,this.cameraPosition,this.cameraLookAt,c);var d=this.cameraForward||[0,0,0];return Al(d,this.cameraLookAt,this.cameraPosition),this.cameraForward=Ol(d,d),NA(r,f),zA(f,r),jA(f,this.cameraPosition),f}}(),_getFovRatio:function(){var t=this.getFov();return Math.tan(t/2*nn)},_renderLayers:function(){if(!this.isInteracting()){var t=this._getLayers();t.forEach(function(n){if(!!n){var i=n._getRenderer();i&&i.setToRedraw&&i.setToRedraw()}})}}});function tr(){return dv(new Array(16))}fe.include({_onViewChange:function(t){this._viewHistory||(this._viewHistory=[],this._viewHistoryPointer=0);for(var n=this._getCurrentView(),i=this._viewHistory.length-1;i>=0;i--)if(md(t,this._viewHistory[i])){this._viewHistoryPointer=i,this._fireViewChange(n,t);return}this._viewHistoryPointer<this._viewHistory.length-1&&this._viewHistory.splice(this._viewHistoryPointer+1),this._viewHistory.push(t);var e=this.options.viewHistoryCount;e>0&&this._viewHistory.length>e&&this._viewHistory.splice(0,this._viewHistory.length-e),this._viewHistoryPointer=this._viewHistory.length-1,this._fireViewChange(n,t)},zoomToPreviousView:function(t){if(t===void 0&&(t={}),!this.hasPreviousView())return null;var n=this._viewHistory[--this._viewHistoryPointer];return this._zoomToView(n,t),n},hasPreviousView:function(){return!(!this._viewHistory||this._viewHistoryPointer===0)},zoomToNextView:function(t){if(t===void 0&&(t={}),!this.hasNextView())return null;var n=this._viewHistory[++this._viewHistoryPointer];return this._zoomToView(n,t),n},hasNextView:function(){return!(!this._viewHistory||this._viewHistoryPointer===this._viewHistory.length-1)},_zoomToView:function(t,n){var i=this,e=this.getView();n.animation?this._animateTo(t,{duration:n.duration},function(o){o.state.playState==="finished"&&i._fireViewChange(e,t)}):(this.setView(t),this._fireViewChange(e,t))},getViewHistory:function(){return this._viewHistory},_fireViewChange:function(t,n){this._fireEvent("viewchange",{old:t,new:n})},_getCurrentView:function(){return this._viewHistory?this._viewHistory[this._viewHistoryPointer]:null}});fe.mergeOptions({viewHistory:!0,viewHistoryCount:10});fe.include({getCollisionIndex:function(){return this._collisionIndex||this.createCollisionIndex(),this._collisionIndex||this.createCollisionIndex()},createCollisionIndex:function(){return this.clearCollisionIndex(),this._collisionIndex=new yw,this._collisionIndex},clearCollisionIndex:function(){return this.collisionFrameTime=0,this._collisionIndex&&this._collisionIndex.clear(),this}});var $A={mode:"LineString",language:"zh-CN",metric:!0,imperial:!1,symbol:{lineColor:"#000",lineWidth:3,lineOpacity:1},vertexSymbol:{markerType:"ellipse",markerFill:"#fff",markerLineColor:"#000",markerLineWidth:3,markerWidth:11,markerHeight:11},labelOptions:{textSymbol:{textFaceName:"monospace",textLineSpacing:1,textHorizontalAlignment:"right",textDx:15},boxStyle:{padding:[6,2],symbol:{markerType:"square",markerFill:"#fff",markerFillOpacity:.9,markerLineColor:"#b4b3b3"}}},clearButtonSymbol:[{markerType:"square",markerFill:"#fff",markerLineColor:"#b4b3b3",markerLineWidth:2,markerWidth:15,markerHeight:15,markerDx:20},{markerType:"x",markerWidth:10,markerHeight:10,markerDx:20}]},iC=function(r){Y(t,r);function t(i){var e;return e=r.call(this,i)||this,e.on("enable",e._afterEnable,Ye(Ye(e))).on("disable",e._afterDisable,Ye(Ye(e))),e._measureLayers=[],e}var n=t.prototype;return n.clear=function(){if(Me(this._measureLayers))for(var e=0;e<this._measureLayers.length;e++)this._measureLayers[e].remove();return delete this._lastMeasure,delete this._lastVertex,this._measureLayers=[],this},n.getMeasureLayers=function(){return this._measureLayers},n.getLastMeasure=function(){return this._lastMeasure?this._lastMeasure:0},n.undo=function(){r.prototype.undo.call(this);var e=this._historyPointer;if(e!==this._vertexes.length)for(var o=e;o<this._vertexes.length;o++)this._vertexes[o].label&&this._vertexes[o].label.remove(),this._vertexes[o].marker.remove();return this},n.redo=function(){r.prototype.redo.call(this);var e=this._historyPointer-1;return this._vertexes[e]&&(this._vertexes[e].marker.getLayer()||(this._vertexes[e].label&&this._vertexes[e].label.addTo(this._measureMarkerLayer),this._vertexes[e].marker.addTo(this._measureMarkerLayer))),this},n._measure=function(e){var o=this.getMap(),a;e instanceof _e?a=o.computeGeometryLength(e):Array.isArray(e)&&(a=o.getProjection().measureLength(e)),this._lastMeasure=a;var s;this.options.language==="zh-CN"?s=[" \u7C73"," \u516C\u91CC"," \u82F1\u5C3A"," \u82F1\u91CC"]:s=[" m"," km"," feet"," mile"];var l="";return this.options.metric&&(l+=a<1e3?a.toFixed(0)+s[0]:(a/1e3).toFixed(2)+s[1]),this.options.imperial&&(a*=3.2808399,l.length>0&&(l+=`
`),l+=a<5280?a.toFixed(0)+s[2]:(a/5280).toFixed(2)+s[3]),l},n._registerMeasureEvents=function(){this.on("drawstart",this._msOnDrawStart,this).on("drawvertex",this._msOnDrawVertex,this).on("mousemove",this._msOnMouseMove,this).on("drawend",this._msOnDrawEnd,this)},n._afterEnable=function(){this._registerMeasureEvents()},n._afterDisable=function(){this.off("drawstart",this._msOnDrawStart,this).off("drawvertex",this._msOnDrawVertex,this).off("mousemove",this._msOnMouseMove,this).off("drawend",this._msOnDrawEnd,this)},n._msOnDrawStart=function(e){var o=this.getMap(),a=o._pointToPrj(e.point2d),s=Co(),l="distancetool_"+s,u="distancetool_markers_"+s;o.getLayer(l)?(this._measureLineLayer=o.getLayer(l),this._measureMarkerLayer=o.getLayer(u)):(this._measureLineLayer=new Xr(l).addTo(o),this._measureMarkerLayer=new Xr(u).addTo(o)),this._measureLayers.push(this._measureLineLayer),this._measureLayers.push(this._measureMarkerLayer);var h=new Ge(e.coordinate,{symbol:this.options.vertexSymbol});h._setPrjCoordinates(a);var c=this.options.language==="zh-CN"?"\u8D77\u70B9":"start",f=new Qi(c,e.coordinate,this.options.labelOptions);f._setPrjCoordinates(a),this._lastVertex=f,this._addVertexMarker(h,f)},n._msOnMouseMove=function(e){var o=this._measure(this._msGetCoordsToMeasure(e));if(!this._tailMarker){var a=Mr(this.options.vertexSymbol);a.markerWidth/=2,a.markerHeight/=2,this._tailMarker=new Ge(e.coordinate,{symbol:a}).addTo(this._measureMarkerLayer),this._tailLabel=new Qi(o,e.coordinate,this.options.labelOptions).addTo(this._measureMarkerLayer)}var s=this._geometry._getPrjCoordinates(),l=s[s.length-1];this._tailMarker.setCoordinates(e.coordinate),this._tailMarker._setPrjCoordinates(l),this._tailLabel.setContent(o),this._tailLabel.setCoordinates(e.coordinate),this._tailLabel._setPrjCoordinates(l)},n._msGetCoordsToMeasure=function(e){return e.geometry.getCoordinates().concat([e.coordinate])},n._msOnDrawVertex=function(e){var o=this._geometry._getPrjCoordinates(),a=o[o.length-1],s=e.geometry,l=new Ge(e.coordinate,{symbol:this.options.vertexSymbol}),u=this._measure(s),h=new Qi(u,e.coordinate,this.options.labelOptions);this._addVertexMarker(l,h),h._setPrjCoordinates(a),l._setPrjCoordinates(a),this._lastVertex=h},n._addVertexMarker=function(e,o){this._vertexes||(this._vertexes=[]),this._historyPointer!==void 0&&this._vertexes.length>this._historyPointer-1&&(this._vertexes.length=this._historyPointer-1),this._vertexes.push({label:o,marker:e}),this._measureMarkerLayer.addGeometry(e),o&&this._measureMarkerLayer.addGeometry(o)},n._msOnDrawEnd=function(e){if(this._clearTailMarker(),e.geometry._getPrjCoordinates().length<2){this._lastMeasure=0,this._clearMeasureLayers();return}var o=this._lastVertex.getSize();o||(o=new Xe(10,10)),this._addClearMarker(this._lastVertex.getCoordinates(),this._lastVertex._getPrjCoordinates(),o.width);var a=e.geometry.copy();a._setPrjCoordinates(e.geometry._getPrjCoordinates()),a.addTo(this._measureLineLayer),this._lastMeasure=a.getLength()},n._addClearMarker=function(e,o,a){var s=this.options.clearButtonSymbol,l={markerDx:(s.markerDx||0)+a,textDx:(s.textDx||0)+a};Array.isArray(s)&&(l=s.map(function(f){return f?{markerDx:(f.markerDx||0)+a,textDx:(f.textDx||0)+a}:null})),s=Mr(s,l);var u=new Ge(e,{symbol:s}),h=this._measureLineLayer,c=this._measureMarkerLayer;u.on("click",function(){return h.remove(),c.remove(),!1},this),u.addTo(this._measureMarkerLayer),u._setPrjCoordinates(o)},n._clearTailMarker=function(){this._tailMarker&&(this._tailMarker.remove(),delete this._tailMarker),this._tailLabel&&(this._tailLabel.remove(),delete this._tailLabel)},n._clearMeasureLayers=function(){this._measureLineLayer.remove(),this._measureMarkerLayer.remove()},t}(ut);iC.mergeOptions($A);var GA={mode:"Polygon",symbol:{lineColor:"#000000",lineWidth:2,lineOpacity:1,lineDasharray:"",polygonFill:"#ffffff",polygonOpacity:.5}},BA=function(r){Y(t,r);function t(i){var e;return e=r.call(this,i)||this,e.on("enable",e._afterEnable,Ye(Ye(e))).on("disable",e._afterDisable,Ye(Ye(e))),e._measureLayers=[],e}var n=t.prototype;return n._measure=function(e){var o=this.getMap(),a;e instanceof _e?a=o.computeGeometryArea(e):Array.isArray(e)&&(a=o.getProjection().measureArea(e)),this._lastMeasure=a;var s;this.options.language==="zh-CN"?s=[" \u5E73\u65B9\u7C73"," \u5E73\u65B9\u516C\u91CC"," \u5E73\u65B9\u82F1\u5C3A"," \u5E73\u65B9\u82F1\u91CC"]:s=[" sq.m"," sq.km"," sq.ft"," sq.mi"];var l="";if(this.options.metric&&(l+=a<1e6?a.toFixed(0)+s[0]:(a/1e6).toFixed(2)+s[1]),this.options.imperial){a*=3.2808399,l.length>0&&(l+=`
`);var u=5280*5280;l+=a<u?a.toFixed(0)+s[2]:(a/u).toFixed(2)+s[3]}return l},n._msGetCoordsToMeasure=function(e){return e.geometry.getShell().concat([e.coordinate])},n._msOnDrawVertex=function(e){var o=this.getMap()._pointToPrj(e.point2d),a=new Ge(e.coordinate,{symbol:this.options.vertexSymbol});a._setPrjCoordinates(o),this._measure(e.geometry),this._lastVertex=a,this._addVertexMarker(a)},n._msOnDrawEnd=function(e){this._clearTailMarker();var o;if(e.point2d)o=this.getMap()._pointToPrj(e.point2d);else{var a=e.geometry._getPrjCoordinates();a=a.slice(0,a.length-1),e.geometry._setPrjCoordinates(a),o=a[a.length-1]}if(e.geometry._getPrjCoordinates().length<3){this._lastMeasure=0,this._clearMeasureLayers();return}var s=this._measure(e.geometry),l=this.getMap().getProjection(),u=l.unproject(o),h=new Qi(s,u,this.options.labelOptions).addTo(this._measureMarkerLayer);h._setPrjCoordinates(o);var c=h.getSize();c||(c=new Xe(10,10)),this._addClearMarker(u,o,c.width);var f=e.geometry.copy();f._setPrjCoordinates(e.geometry._getPrjCoordinates()),f.addTo(this._measureLineLayer),this._lastMeasure=f.getArea()},t}(iC);BA.mergeOptions(GA);var oC={create:function(t,n){var i=t.unproject(n[0]),e=new Or(i,0);return e._setPrjCoordinates(n[0]),e},update:function(t,n,i){var e=i.getMap(),o=Array.isArray(n)?n[n.length-1]:n,a=t.unproject(o),s=e.computeLength(i.getCenter(),a);i.setRadius(s)},generate:function(t){return t}};ut.registerMode("circle",K({clickLimit:2,action:["click","mousemove","click"]},oC));ut.registerMode("freeHandCircle",K({action:["mousedown touchstart","mousemove touchmove","mouseup touchend"]},oC));var aC={create:function(t,n){var i=t.unproject(n[0]),e=new Jr(i,0,0);return e._setPrjCoordinates(n[0]),e},update:function(t,n,i){var e=i.getMap(),o=i.getCenter(),a=Array.isArray(n)?n[n.length-1]:n,s=t.unproject(a),l=e.computeLength(o,new U({x:s.x,y:o.y})),u=e.computeLength(o,new U({x:o.x,y:s.y}));i.setWidth(l*2),i.setHeight(u*2)},generate:function(t){return t}};ut.registerMode("ellipse",K({clickLimit:2,action:["click","mousemove","click"]},aC));ut.registerMode("freeHandEllipse",K({action:["mousedown touchstart","mousemove touchmove","mouseup touchend"]},aC));var sC={create:function(t,n){var i=new We([]);return i._firstClick=n[0],i},update:function(t,n,i,e){var o=i.getMap(),a=e.containerPoint,s=o._prjToContainerPoint(i._firstClick),l=[[s.x,s.y],[a.x,s.y],[a.x,a.y],[s.x,a.y]];i.setCoordinates(l.map(function(u){return o.containerPointToCoord(new N(u))})),i._setPrjCoordinates(l.map(function(u){return o._containerPointToPrj(new N(u))}))},generate:function(t){return t}};ut.registerMode("rectangle",K({clickLimit:2,action:["click","mousemove","click"]},sC));ut.registerMode("freeHandRectangle",K({action:["mousedown touchstart","mousemove touchmove","mouseup touchend"]},sC));ut.registerMode("point",{clickLimit:1,action:["click"],create:function(t,n){var i=t.unproject(n[0]),e=new Ge(i);return e._setPrjCoordinates(n[0]),e},generate:function(t){return t}});var lC={create:function(t,n){var i=n.map(function(o){return t.unproject(o)}),e=new Ve(i);return e._setPrjCoordinates(n),e},update:function(t,n,i){var e=i.getSymbol(),o;Array.isArray(n)?o=n:(o=i._getPrjCoordinates(),o.push(n));var a=o.map(function(h){return t.unproject(h)});i.setCoordinates(a),i._setPrjCoordinates(o);var s=i.getLayer();if(s){var l=s.getGeometryById("polygon");if(!l&&o.length>=3){if(l=new We([a],{id:"polygon"}),e){var u=Mr(e,{lineOpacity:0});l.setSymbol(u)}l.addTo(s)}l&&l._setPrjCoordinates(o)}},generate:function(t){var n=new We(t.getCoordinates(),{symbol:t.getSymbol()});return n._setPrjCoordinates(t._getPrjCoordinates()),n._projCode=t._projCode,n}};ut.registerMode("polygon",K({action:["click","mousemove","dblclick"]},lC));ut.registerMode("freeHandPolygon",K({action:["mousedown touchstart","mousemove touchmove","mouseup touchend"]},lC));var gs={create:function(t,n){var i=n.map(function(o){return t.unproject(o)}),e=new Ve(i);return e._setPrjCoordinates(n),e},update:function(t,n,i){var e;Array.isArray(n)?e=n:(e=i._getPrjCoordinates(),e.push(n));var o=e.map(function(a){return t.unproject(a)});i.setCoordinates(o),i._setPrjCoordinates(e)},generate:function(t){return t}};ut.registerMode("linestring",K({action:["click","mousemove","dblclick"]},gs));ut.registerMode("freeHandLinestring",K({action:["mousedown touchstart","mousemove touchmove","mouseup touchend"]},gs));ut.registerMode("arccurve",{action:["click","mousemove","dblclick"],create:function(t,n){var i=n.map(function(o){return t.unproject(o)}),e=new vh(i);return e._setPrjCoordinates(n),e},update:gs.update,generate:function(t){return t}});ut.registerMode("quadbeziercurve",{action:["click","mousemove","dblclick"],create:function(t,n){var i=n.map(function(o){return t.unproject(o)}),e=new Kw(i);return e._setPrjCoordinates(n),e},update:gs.update,generate:function(t){return t}});ut.registerMode("cubicbeziercurve",{action:["click","mousemove","dblclick"],create:function(t,n){var i=n.map(function(o){return t.unproject(o)}),e=new Xw(i);return e._setPrjCoordinates(n),e},update:gs.update,generate:function(t){return t}});ut.registerMode("boxZoom",{action:["mousedown","mousemove","mouseup"],create:function(t,n){n=n[0];var i=t.unproject(n),e=new Ge(i);return e._firstClick=n,e},update:function(t,n,i,e){var o=i.getMap(),a=o._prjToContainerPoint(i._firstClick),s=e.containerPoint;n=o._containerPointToPrj(new U(Math.min(a.x,s.x),Math.min(a.y,s.y)));var l=t.unproject(n);i.setCoordinates(l)._setPrjCoordinates(n),i.updateSymbol({markerWidth:Math.abs(a.x-s.x),markerHeight:Math.abs(a.y-s.y)})},generate:function(t){return t}});function ky(r){for(var t=r.tileInfo,n=[t.cols,t.rows],i=[],e=t.lods,o=0,a=e.length;o<a;o++)i.push(e[o].resolution);var s=r.fullExtent,l=t.origin,u=[1,-1,l.x,l.y];return delete s.spatialReference,{spatialReference:{resolutions:i,fullExtent:s},tileSystem:u,tileSize:n}}Tr.loadArcgis=function(r,t,n){if(n===void 0&&(n={jsonp:!0}),pe(r)&&r.substring(0,1)!=="{")Lt.getJSON(r,function(e,o){if(e){t(e);return}var a=ky(o);t(null,a)},n);else{pe(r)&&(r=Ug(r));var i=ky(r);t(null,i)}return this};function WA(r){for(var t="",n=r.split(""),i=n.length,e=i-1;e>=0&&!isNaN(n[e]);e--)t=n[e]+t;return t}function ZA(r){var t=r.indexOf("EPSG")>-1?r:"EPSG:"+r;return t=uC(t,[["4490","4326"],["102100","3857"],["900913","3857"]]),t}function uC(r,t){return t===void 0&&(t=[]),t.forEach(function(n){var i=n[0],e=n[1];r=r.replace(i,e)}),r}function UA(r){var t=r.projection,n=r.isArcgis,i=r.isGeoServer,e=r.isSuperMap,o=.0002645833333333333;return(n||i||e)&&(o=28e-5),t&&t.indexOf("4326")>-1&&(o=23767925226029154e-25,(n||e)&&(o=2518101729011901e-24),i&&(o=251528279553466e-23)),o}function qA(r,t){for(var n=0;n<r.length;n++){var i=r[n];if(i=i.getElementsByTagName("ows:Identifier")[0],i&&i.textContent===t)return r[n]}return null}function YA(r,t,n){n.isArcgis==null&&(n.isArcgis=r.indexOf("arcgis")>-1),n.isSuperMap==null&&(n.isSuperMap=r.indexOf("supermap")>-1);var i=new DOMParser,e=i.parseFromString(r,"text/xml"),o=e.querySelectorAll("Contents")[0];if(!o)return[];var a=o.getElementsByTagName("Layer");if(!a.length)return[];for(var s=[],l=0,u=o.childNodes.length;l<u;l++)o.childNodes[l].nodeName==="TileMatrixSet"&&s.push(o.childNodes[l]);if(!s.length)return[];for(var h=[],c=0,f=a.length;c<f;c++){var d=a[c],g=d.querySelectorAll("Style")[0];g&&(g=g.getElementsByTagName("ows:Identifier")[0],g&&(g=g.textContent));var v=d.getElementsByTagName("ows:Identifier")[0];v&&(v=v.textContent);var y=d.getElementsByTagName("TileMatrixSetLink");if(y.length!==0)for(var p=0,m=y.length;p<m;p++){var _=y[p];_=_.getElementsByTagName("TileMatrixSet")[0],_&&(_=_.textContent);var x=qA(s,_);if(!!x){var C=d.querySelectorAll("ResourceURL")[0],w="";C&&(w=C.attributes.template.value);var P=JA(x,n),S=P.resolutions,M=P.tileSize,R=P.tileSystem,j=P.projection,A=P.TileMatrixSet,z=P.isGeoServer,D=P.levelStr;w.length||(w=t.substr(0,t.lastIndexOf("?")),w+="?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER={LAYER}&STYLE={Style}&TILEMATRIXSET={TileMatrixSet}&FORMAT={tiles}&TILEMATRIX={TileMatrix}&TILEROW={TileRow}&TILECOL={TileCol}");var I=uC(w,[["{LAYER}",v],["{Layer}",v],["{layer}",v],["{STYLE}",g],["{Style}",g],["{style}",g],["{TileMatrixSet}",A],["{TileMatrix}",z?D+":{z}":"{z}"],["{TileRow}","{y}"],["{TileCol}","{x}"],["{tiles}",z?"image/png":"tiles"]]);h.push({tileSize:M,tileSystem:R,spatialReference:{resolutions:S,projection:j},urlTemplate:I,info:{layerName:v,TileMatrixSet:A,style:g,tileSize:M,tileSystem:R,resolutions:S,projection:j,urlTemplate:I}})}}}return h}function JA(r,t){t===void 0&&(t={});var n=r.getElementsByTagName("TileMatrix"),i=[],e=[],o=[],a,s,l=!1,u;if(!a){var h=r.getElementsByTagName("ows:SupportedCRS")[0];h&&(a=h.textContent,a=a.split("EPSG")[1],a=WA(a),a=ZA(a))}s||(s=r.getElementsByTagName("ows:Identifier")[0],s&&(s=s.textContent)),t.projection=a;for(var c=1/0,f=0;f<n.length;f++){var d=n[f],g=d.getElementsByTagName("ows:Identifier")[0].textContent;isNaN(parseInt(g))?(u=g.substr(0,g.lastIndexOf(":")),g=g.split(":"),g=g[g.length-1],g=parseInt(g),l=!0,t.isGeoServer=!0):g=parseInt(g),c=Math.min(c,g);var v=d.getElementsByTagName("ScaleDenominator")[0].textContent,y=d.getElementsByTagName("TopLeftCorner")[0].textContent,p=d.getElementsByTagName("TileWidth")[0].textContent,m=d.getElementsByTagName("TileHeight")[0].textContent;if(o.length===0&&o.push(parseInt(p),parseInt(m)),e.length===0){var _=y.split(" ").filter(function(R){return R!==""}).map(function(R){return parseFloat(R)}),x=_[0],C=_[1];x>0?e.push(1,-1,C,x):e.push(1,-1,x,C)}var w=UA(t),P=parseFloat(v)*w;i.push(P)}if(c>0)for(var S=i[0],M=c-1;M>=0;M--)S=S*2,i.splice(0,0,S);return{resolutions:i,tileSize:o,tileSystem:e,projection:a,TileMatrixSet:s,isGeoServer:l,levelStr:u}}Tr.loadWMTS=function(r,t,n){return n===void 0&&(n={jsonp:!0}),pe(r)&&Lt.get(r,function(i,e){if(i){t(i);return}var o=YA(e,r,n);t(null,o)},n),this};var XA={eventsPropagation:!1,eventsToStop:null,dx:0,dy:0,autoPan:!1,autoPanDuration:600,single:!0,animation:"scale",animationOnHide:!1,animationDuration:500,pitchWithMap:!1,rotateWithMap:!1,visible:!0,roundPoint:!1},ii=function(r){Y(t,r);function t(i){return r.call(this,i)||this}var n=t.prototype;return n.addTo=function(e){return this._owner=e,this._switchEvents("on"),this.onAdd&&this.onAdd(),this.fire("add"),this},n.getMap=function(){return this._owner?this._owner.getBaseLayer?this._owner:this._owner.getMap():null},n.show=function(e){var o=this.getMap();if(!o)return this;this.options.visible=!0,e=e||this._coordinate||this._owner.getCenter();var a=this.isVisible();this.fire("showstart");var s=this._getUIContainer();this._coordinate=e,this._removePrevDOM(),this._mapEventsOn||this._switchMapEvents("on");var l=this.__uiDOM=this.buildOn(o);if(l.eventsPropagation=this.options.eventsPropagation,this._observerDomSize(l),!l)return this.fire("showend"),this;this._measureSize(l),this._singleton()&&(l._uiComponent=this,o[this._uiDomKey()]=l),this._setPosition(),l.style[Qs]=null,s.appendChild(l);var u=this._getAnimation();if(a&&(u.ok=!1),u.ok&&(u.fade&&(l.style.opacity=0),u.scale)){if(this.getTransformOrigin){var h=this.getTransformOrigin();l.style[Wb]=h}l.style[wi]=this._toCSSTranslate(this._pos)+" scale(0)"}this.isSupportZoomFilter()||(l.style.display=""),this.options.eventsToStop&&Be(l,this.options.eventsToStop,qt),this.options.autoPan&&this._autoPan();var c=u.transition;return u.ok&&c&&(l.offsetHeight,c&&(l.style[Qs]=c),u.fade&&(l.style.opacity=1),u.scale&&(l.style[wi]=this._toCSSTranslate(this._pos)+" scale(1)")),this.fire("showend"),this},n.hide=function(){var e=this;if(!this.getDOM())return this;this.options.visible=!1;var o=this._getAnimation(),a=this.getDOM();return this.options.animationOnHide||(o.ok=!1),o.ok?(a.offsetHeight,a.style[Qs]=o.transition,setTimeout(function(){a.style.display="none",e.fire("hide")},this.options.animationDuration)):(a.style.display="none",this.fire("hide")),o.fade&&(a.style.opacity=0),o.scale&&(a.style[wi]=this._toCSSTranslate(this._pos)+" scale(0)"),this._switchMapEvents("off"),this},n.isVisible=function(){if(!this.options.visible)return!1;var e=this.getDOM();return this.getMap()&&e&&e.parentNode&&e.style.display!=="none"},n.remove=function(){return delete this._mapEventsOn,this._owner?(this.hide(),this._switchEvents("off"),this.onRemove&&this.onRemove(),!this._singleton()&&this.__uiDOM&&this._removePrevDOM(),delete this._owner,this.fire("remove"),this):this},n.getSize=function(){return this._domContentRect&&this._size&&(this._size.width=this._domContentRect.width,this._size.height=this._domContentRect.height),this._size?this._size.copy():null},n.getOwner=function(){return this._owner},n.getDOM=function(){return this.__uiDOM},n._roundPoint=function(e){return this.options.roundPoint&&(e=e._round()),e},n.getPosition=function(){if(!this.getMap())return null;var e=this._roundPoint(this._getViewPoint());if(this.getOffset){var o=this._roundPoint(this.getOffset());o&&e._add(o)}return e},n._getAnimation=function(){for(var e={fade:!1,scale:!1},o=this.options.animation?this.options.animation.split(","):[],a=0;a<o.length;a++){var s=ow(o[a]);s==="fade"?e.fade=!0:s==="scale"&&(e.scale=!0)}var l=null;return e.fade&&(l="opacity "+this.options.animationDuration+"ms"),e.scale&&(l=l?l+",":"",l+=wi+" "+this.options.animationDuration+"ms"),e.transition=l,e.ok=l!==null,e},n._getViewPoint=function(){var e=0;if(this._owner&&this._owner.getAltitude){var o=this._owner.getAltitude();o>0&&(e=this._meterToPoint(this._coordinate,o))}return this.getMap().coordToViewPoint(this._coordinate,void 0,e)._add(this.options.dx,this.options.dy)},n._meterToPoint=function(e,o){var a=this.getMap();return a.distanceToPoint(o,0,void 0,e).x*ot(o)},n._autoPan=function(){var e=this.getMap(),o=this.getDOM();if(!e.isMoving()){var a=this._getViewPoint()._round(),s=e.width,l=e.height,u=e.viewPointToContainerPoint(a),h=this.getOffset(),c=u.add(h),f=e._viewPointToPrj(a),d=parseInt(o.clientWidth),g=parseInt(o.clientHeight),v=50,y=0,p=0;if(c.x<0?y=-c.x+v:c.x+d>s&&(y=-(c.x+d-s)-v),c.y<0?p=-c.y+v:c.y+g>l&&(p=l-(c.y+g)-v),p!==0||y!==0){var m=u.add(y,p),_=e._containerPointToPoint(m)._sub(e._prjToPoint(e._getPrjCenter())),x=e._pointToPrj(e._prjToPoint(f).sub(_));e._panAnimation(x)}}},n._measureSize=function(e){var o=this._getUIContainer();e.style.position="absolute",e.style.left=-99999+"px";var a=e.style.bottom?"bottom":"top";return e.style[a]=-99999+"px",e.style.display="",o.appendChild(e),this._size=new Xe(e.clientWidth,e.clientHeight),e.style.display="none",e.style.left="0px",e.style[a]="0px",this._size},n._removePrevDOM=function(){this.onDomRemove&&this.onDomRemove();var e=this.options.eventsToStop;if(this._singleton()){var o=this.getMap(),a=this._uiDomKey();o[a]&&(e&&Ke(o[a],e,qt),po(o[a]),o[a]._uiComponent&&!this.hideDom&&o[a]._uiComponent._switchMapEvents("off"),delete o[a]),delete this.__uiDOM}else this.__uiDOM&&(e&&Ke(this.__uiDOM,e,qt),po(this.__uiDOM),delete this.__uiDOM);this._resizeObserver&&(this._resizeObserver.disconnect(),delete this._resizeObserver,delete this._domContentRect)},n._uiDomKey=function(){return"__ui_"+this._getClassName()},n._singleton=function(){return this.options.single},n._getUIContainer=function(){return this.getMap()._panels.ui},n._getClassName=function(){return"UIComponent"},n._switchMapEvents=function(e){var o=this.getMap();if(!!o){this._mapEventsOn=e==="on";var a=this._getDefaultEvents();if(this.getEvents&&K(a,this.getEvents()),a)for(var s in a)a.hasOwnProperty(s)&&o[e](s,a[s],this)}},n._switchEvents=function(e){var o=this._getOwnerEvents();if(this._owner)for(var a in o)o.hasOwnProperty(a)&&this._owner[e](a,o[a],this)},n._getDefaultEvents=function(){return{"zooming rotate pitch":this.onEvent,zoomend:this.onZoomEnd,moving:this.onMoving,resize:this.onResize}},n._getOwnerEvents=function(){var e={};return this._owner&&this._owner instanceof _e&&(e.positionchange=this.onGeometryPositionChange,e.symbolchange=this.onGeometryPositionChange),this.getOwnerEvents&&K(e,this.getOwnerEvents()),e},n.onGeometryPositionChange=function(e){this._owner&&this.isVisible()&&this.show(e.target.getCenter())},n.onMoving=function(){this.isVisible()&&this.getMap().isTransforming()&&this._updatePosition()},n.onEvent=function(){this.isVisible()&&this._updatePosition()},n.onZoomEnd=function(){this.isVisible()&&this._setPosition()},n.onResize=function(){this.isVisible()&&this._setPosition()},n.onDomSizeChange=function(){this.isVisible()&&this._setPosition()},n._updatePosition=function(){var e=this.getMap()._getRenderer();e.callInNextFrame(this._setPosition.bind(this))},n._setPosition=function(){var e=this.getDOM();if(!!e){e.style[Qs]=null;var o=this.getPosition();this._pos=o,e.style[wi]=this._toCSSTranslate(o)+" scale(1)"}},n._toCSSTranslate=function(e){if(!e)return"";if(ye.any3d){var o=this.getMap(),a=o?o.getBearing():0,s=o?o.getPitch():0,l="";return this.options.pitchWithMap&&s&&(l+=" rotateX("+Math.round(s)+"deg)"),this.options.rotateWithMap&&a&&(l+=" rotateZ("+Math.round(-a)+"deg)"),"translate3d("+e.x+"px,"+e.y+"px, 0px)"+l}else return"translate("+e.x+"px,"+e.y+"px)"},n._observerDomSize=function(e){var o=this;return!e||!ye.resizeObserver||this._resizeObserver?this:(this._resizeObserver=new ResizeObserver(function(a){a.length?o._domContentRect=a[0].contentRect:delete o._domContentRect,o.onDomSizeChange&&o.onDomSizeChange()}),this._resizeObserver.observe(e),this)},n.isSupportZoomFilter=function(){return!1},t.isSupport=function(e){return!!(e&&Re(e.on)&&Re(e.off)&&Re(e.getCenter))},t}(en(fr));ii.mergeOptions(XA);var KA={containerClass:null,eventsPropagation:!0,draggable:!1,single:!1,content:null,altitude:0,minZoom:0,maxZoom:null},by="mousedown mouseup mouseenter mouseover mouseout mousemove click dblclick contextmenu keypress touchstart touchmove touchend",gv=function(r){Y(t,r);function t(i,e){var o;return o=r.call(this,e)||this,o._markerCoord=new U(i),o}var n=t.prototype;return n._getClassName=function(){return"UIMarker"},n.setCoordinates=function(e){return this._markerCoord=e,this.fire("positionchange"),this.isVisible()&&(this._coordinate=this._markerCoord,this._setPosition()),this},n.getCoordinates=function(){return this._markerCoord},n.getCenter=function(){return this.getCoordinates()},n.getAltitude=function(){return this.options.altitude||0},n.setContent=function(e){var o=this.options.content;return this.options.content=e,this.fire("contentchange",{old:o,new:e}),this.isVisible()&&this.show(),this},n.getContent=function(){return this.options.content},n.onAdd=function(){this.show()},n.show=function(){return r.prototype.show.call(this,this._markerCoord)},n.flash=function(e,o,a,s){return B1.call(this,e,o,a,s)},n.buildOn=function(){var e;return pe(this.options.content)?(e=le("div"),e.innerHTML=this.options.content):e=this.options.content,this.options.containerClass&&(e.className=this.options.containerClass),this._registerDOMEvents(e),e},n.getOffset=function(){var e=this.getSize();return new N(-e.width/2,-e.height/2)},n.getTransformOrigin=function(){return"center center"},n.onDomRemove=function(){var e=this.getDOM();this._removeDOMEvents(e)},n.isDragging=function(){return this.draggable?this.draggable.isDragging():!1},n._registerDOMEvents=function(e){Be(e,by,this._onDomEvents,this)},n._onDomEvents=function(e){var o=this.getMap()._parseEvent(e,e.type);this.fire(e.type,o)},n._removeDOMEvents=function(e){Ke(e,by,this._onDomEvents)},n._getConnectPoints=function(){var e=this.getMap(),o=e.coordToContainerPoint(this.getCoordinates()),a=this.getSize(),s=a.width,l=a.height,u=[e.containerPointToCoordinate(o.add(-s/2,0)),e.containerPointToCoordinate(o.add(s/2,0)),e.containerPointToCoordinate(o.add(0,l/2)),e.containerPointToCoordinate(o.add(0,-l/2))];return u},n._getViewPoint=function(){var e=0;if(this._owner){var o=this.getAltitude();o>0&&(e=this._meterToPoint(this._coordinate,o))}return this.getMap().coordToViewPoint(this._coordinate,void 0,e)._add(this.options.dx,this.options.dy)},n._getDefaultEvents=function(){return K({},r.prototype._getDefaultEvents.call(this),{"zooming zoomend":this.onZoomFilter})},n._setPosition=function(){this.onZoomFilter(),r.prototype._setPosition.call(this)},n.onZoomFilter=function(){var e=this.getDOM();!e||(!this.isVisible()&&e.style.display!=="none"?e.style.display="none":this.isVisible()&&e.style.display==="none"&&(e.style.display=""))},n.isVisible=function(){var e=this.getMap();if(!e||!this.options.visible)return!1;var o=e.getZoom(),a=this.options,s=a.minZoom,l=a.maxZoom;if(!O(s)&&o<s||!O(l)&&o>l)return!1;var u=this.getDOM();return u&&!0},n.isSupportZoomFilter=function(){return!0},t}(rv(ii));gv.mergeOptions(KA);var Ry=ye.touch?"touchstart mousedown":"mousedown",QA=function(r){Y(t,r);function t(i){return r.call(this,i)||this}var n=t.prototype;return n.addHooks=function(){this.target.on(Ry,this._startDrag,this)},n.removeHooks=function(){this.target.off(Ry,this._startDrag,this)},n._startDrag=function(e){var o=e.domEvent;o.touches&&o.touches.length>1||o.button===2||this.isDragging()||(this.target.on("click",this._endDrag,this),this._lastCoord=e.coordinate,this._lastPoint=e.containerPoint,this._prepareDragHandler(),this._dragHandler.onMouseDown(e.domEvent),this.target.fire("dragstart",e))},n._prepareDragHandler=function(){this._dragHandler=new So(this.target.getDOM(),{cancelOn:this._cancelOn.bind(this),ignoreMouseleave:!0}),this._dragHandler.on("mousedown",this._onMouseDown,this),this._dragHandler.on("dragging",this._dragging,this),this._dragHandler.on("mouseup",this._endDrag,this),this._dragHandler.enable()},n._cancelOn=function(e){var o=e.srcElement||e.target,a=o.tagName.toLowerCase();return a==="button"||a==="input"||a==="select"||a==="option"||a==="textarea"},n._onMouseDown=function(e){qt(e.domEvent)},n._dragging=function(e){var o=this.target,a=o.getMap(),s=a._parseEvent(e.domEvent),l=s.domEvent;if(!(l.touches&&l.touches.length>1)){if(!this._isDragging){this._isDragging=!0;return}var u=s.coordinate,h=s.containerPoint;this._lastCoord||(this._lastCoord=u),this._lastPoint||(this._lastPoint=h);var c=u.sub(this._lastCoord),f=h.sub(this._lastPoint);this._lastCoord=u,this._lastPoint=h,this.target.setCoordinates(this.target.getCoordinates().add(c)),s.coordOffset=c,s.pointOffset=f,o.fire("dragging",s)}},n._endDrag=function(e){var o=this.target,a=o.getMap();if(this._dragHandler&&(o.off("click",this._endDrag,this),this._dragHandler.disable(),delete this._dragHandler),delete this._lastCoord,delete this._lastPoint,this._isDragging=!1,!!a){var s=a._parseEvent(e.domEvent);o.fire("dragend",s)}},n.isDragging=function(){return!!this._isDragging},t}(wr);gv.addInitHook("addHandler","draggable",QA);var eO=/\{ *([\w_]+) *\}/g,hC={containerClass:"maptalks-msgBox",autoPan:!0,autoCloseOn:null,autoOpenOn:"click",width:"auto",minHeight:120,custom:!1,title:null,content:null,enableTemplate:!1},tO=new Xe(0,0),bd=function(r){Y(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n._getClassName=function(){return"InfoWindow"},n.addTo=function(e){return e instanceof _e&&(e.getInfoWindow()&&e.getInfoWindow()!==this&&e.removeInfoWindow(),e._infoWindow=this),r.prototype.addTo.call(this,e)},n.setContent=function(e){var o=this.options.content;return this.options.content=e,this.fire("contentchange",{old:o,new:e}),this.isVisible()&&this.show(this._coordinate),this},n.getContent=function(){return this.options.content},n.setTitle=function(e){var o=e;return this.options.title=e,this.fire("contentchange",{old:o,new:e}),this.isVisible()&&this.show(this._coordinate),this},n.getTitle=function(){return this.options.title},n.buildOn=function(){if(this.options.custom)if(pe(this.options.content)){var e=le("div");return e.innerHTML=this.options.content,this._replaceTemplate(e),e}else return this._replaceTemplate(this.options.content),this.options.content;var o=le("div");this.options.containerClass&&(o.className=this.options.containerClass);var a=this._getWindowWidth();o.style.width=se(a)?a+"px":"auto",o.style.bottom="0px";var s='<em class="maptalks-ico"></em>';this.options.title&&(s+="<h2>"+this.options.title+"</h2>"),s+='<a href="javascript:void(0);" class="maptalks-close"></a><div class="maptalks-msgContent"></div>',o.innerHTML=s,this._replaceTemplate(o);var l=o.querySelector(".maptalks-msgContent");pe(this.options.content)?l.innerHTML=this.options.content:l.appendChild(this.options.content),this._onCloseBtnClick=this.hide.bind(this);var u=o.querySelector(".maptalks-close");return Sn(u,"click touchend",this._onCloseBtnClick),this._replaceTemplate(l),o},n._replaceTemplate=function(e){if(this.options.enableTemplate&&this._owner&&this._owner.getProperties&&e&&e.innerHTML){var o=this._owner.getProperties()||{};if(mr(o)){var a=e.innerHTML;e.innerHTML=a.replace(eO,function(s,l){return o[l]})}}return this},n.getTransformOrigin=function(){var e=this.getSize();return e.width/2+"px bottom"},n.getOffset=function(){var e=this.getSize(),o=new N(-e.width/2,0);this.options.custom?o._sub(0,e.height):o._sub(4,12);var a=this.getOwner();if(a instanceof Ge||a instanceof wu){var s,l;if(a instanceof Ge)s=a._getPainter(),l=a.getSize();else{var u=a.getGeometries();if(!u||!u.length)return o;s=u[0]._getPainter(),l=u[0].getSize()}if(l||(l=tO),s){var h=s.getFixedExtent();o._add(h.xmax-l.width/2,h.ymin)}else o._add(0,-l.height)}return o},n.show=function(e){return this.getMap()?this.getMap().options.enableInfoWindow?r.prototype.show.call(this,e):this:this},n.getEvents=function(){if(!this.options.autoCloseOn)return null;var e={};return e[this.options.autoCloseOn]=this.hide,e},n.getOwnerEvents=function(){var e=this.getOwner();if(!this.options.autoOpenOn||!e)return null;var o={};return o[this.options.autoOpenOn]=this._onAutoOpen,o},n.onRemove=function(){this.onDomRemove()},n.onDomRemove=function(){if(this._onCloseBtnClick){var e=this.getDOM(),o=e.childNodes[2];si(o,"click touchend",this._onCloseBtnClick),delete this._onCloseBtnClick}},n._onAutoOpen=function(e){var o=this,a=this.getOwner();setTimeout(function(){a instanceof Ge||a instanceof ii?o.show(a.getCoordinates()):a instanceof wu?o.show(a.findClosest(e.coordinate)):((a instanceof Ve||a instanceof Cu)&&o.getMap().getScale()>=8&&(e.coordinate=o._rectifyMouseCoordinte(a,e.coordinate)),o.show(e.coordinate))},1)},n._rectifyMouseCoordinte=function(e,o){var a=this;return e instanceof Ve?this._rectifyLineStringMouseCoordinate(e,o).coordinate:e instanceof Cu?e.getGeometries().map(function(s){return a._rectifyLineStringMouseCoordinate(s,o)}).sort(function(s,l){return s.dis-l.dis})[0].coordinate:o},n._rectifyLineStringMouseCoordinate=function(e,o){for(var a=this,s=e.getCoordinates().map(function(F){return a.getMap().coordToContainerPoint(F)}),l=this.getMap().coordToContainerPoint(o),u=1/0,h=-1,c=0,f=s.length;c<f;c++){var d=s[c],g=l.distanceTo(d);g<u&&(u=g,h=c)}var v=[];h===0?v.push(s[0],s[1]):h===s.length-1?v.push(s[h-1],s[h]):v.push(s[h-1],s[h],s[h+1]);for(var y=[],p=this.getMap().getSize(),m=p.width,_=p.height,x=0,C=v.length-1;x<C;x++){var w=v[x],P=v[x+1];if(w.x===P.x)for(var S=Math.max(0,Math.min(w.y,P.y)),M=Math.min(_,Math.max(w.y,P.y)),R=S;R<=M;R++)y.push(new N(w.x,R));else for(var j=(P.y-w.y)/(P.x-w.x),A=Math.max(0,Math.min(w.x,P.x)),z=Math.min(m,Math.max(w.x,P.x)),D=A;D<=z;D++){var I=j*(D-w.x)+w.y;y.push(new N(D,I))}}for(var B=1/0,W=-1,E=0,T=y.length;E<T;E++){var L=y[E],V=l.distanceTo(L);V<B&&(B=V,W=E)}return{dis:B,coordinate:W<0?o:this.getMap().containerPointToCoord(y[W])}},n._getWindowWidth=function(){var e=hC.width,o=this.options.width;return o||(o=e),o},t}(ii);bd.mergeOptions(hC);var Ay="remove hide shapechange positionchange dragend animatestart",rO={width:0,height:0,animation:"fade",containerClass:"maptalks-tooltip",showTimeout:400},nO=function(r){Y(n,r);var t=n.prototype;t._getClassName=function(){return"ToolTip"};function n(i,e){var o;return e===void 0&&(e={}),o=r.call(this,e)||this,o._content=i,o}return t.addTo=function(e){if(n.isSupport(e))return e.on("mousemove",this.onMouseMove,this),e.on("mouseout",this.onMouseOut,this),e.on(Ay,this.hideDom,this),r.prototype.addTo.call(this,e);throw new Error("Invalid geometry or UIMarker the tooltip is added to.")},t.setStyle=function(e){return this.options.containerClass=e,this},t.getStyle=function(){return this.options.containerClass},t.getContent=function(){return this._content},t.buildOn=function(){var e=le("div"),o=this.options||{};o.height&&(e.style.height=o.height+"px"),o.width&&(e.style.width=o.width+"px");var a=o.containerClass||o.cssName;return!a&&o.height&&(e.style.lineHeight=o.height+"px"),e.innerHTML='<div class="'+a+'">'+this._content+"</div>",e},t.onMouseOut=function(){clearTimeout(this._timeout),this.isVisible()&&this._removePrevDOM(),this._switchMapEvents("off")},t.onMouseMove=function(e){var o=this;clearTimeout(this._timeout);var a=this.getMap();if(!!a){var s=a.locateByPoint(e.coordinate,-5,25);this.options.showTimeout===0?this.show(s):this._timeout=setTimeout(function(){a&&o.show(s)},this.options.showTimeout)}},t.onRemove=function(){clearTimeout(this._timeout),this._owner&&(this._owner.off("mouseover",this.onMouseOver,this),this._owner.off("mouseout",this.onMouseOut,this),this._owner.off(Ay,this.hideDom,this))},t.hideDom=function(){return this.hide()},t.onEvent=function(){return r.prototype.onEvent.call(this),this.hideDom(),this},t._getViewPoint=function(){return this.getMap().coordToViewPoint(this._coordinate,void 0,0)._add(this.options.dx,this.options.dy)},n}(ii);nO.mergeOptions(rO);var iO={containerClass:"maptalks-menu",animation:null,animationDelay:10,animationOnHide:!1,autoPan:!1,width:160,maxHeight:0,custom:!1,items:[]},cC=function(r){Y(t,r);function t(i){return r.call(this,i)||this}var n=t.prototype;return n._getClassName=function(){return"Menu"},n.addTo=function(e){return e._menu&&e._menu!==this&&e.removeMenu(),e._menu=this,this._owner=e,ii.prototype.addTo.apply(this,arguments)},n.setItems=function(e){return this.options.items=e,this},n.getItems=function(){return this.options.items||[]},n.buildOn=function(){if(this.options.custom)if(pe(this.options.items)){var e=le("div");return e.innerHTML=this.options.items,e}else return this.options.items;else{var o=le("div");this.options.containerClass&&Ui(o,this.options.containerClass),o.style.width=this._getMenuWidth()+"px";var a=this._createMenuItemDom();return o.appendChild(a),Be(o,"contextmenu",ar),o}},n.getOffset=function(){if(!this.getMap())return null;var e=this.getMap().getSize(),o=this.getMap().viewPointToContainerPoint(this._getViewPoint()),a=this.getSize(),s=0,l=0;return o.x+a.width>e.width&&(s=-a.width),o.y+a.height>e.height&&(l=-a.height),new N(s,l)},n.getTransformOrigin=function(){var e=this.getOffset()._multi(-1);return e.x+"px "+e.y+"px"},n.getEvents=function(){return{"_zoomstart _zoomend _movestart _dblclick _click":this._removePrevDOM}},n._createMenuItemDom=function(){var e=this,o=this.getMap(),a=le("ul");Ui(a,"maptalks-menu-items");var s=this.getItems();function l(v){return function(y){var p=o._parseEvent(y,"click");p.target=e,p.owner=e._owner,p.index=v;var m=this._callback(p);m!==!1&&(e.hide(),e._owner&&e._owner.fire("closemenu"))}}for(var u,h,c=0,f=s.length;c<f;c++){if(u=s[c],u==="-"||u==="_")h=le("li"),Ui(h,"maptalks-menu-splitter");else{h=le("li");var d=u.item;Re(d)&&(d=d({owner:this._owner,index:c})),h.innerHTML=d,h._callback=u.click,Be(h,"click",l(c))}a.appendChild(h)}var g=this.options.maxHeight||0;return g>0&&ev(a,"max-height: "+g+"px; overflow-y: auto;"),a},n._getMenuWidth=function(){var e=160,o=this.options.width||e;return o},t}(ii);cC.mergeOptions(iO);var fC={setMenu:function(t){return this._menuOptions=t,this._menu?this._menu.setOptions(t):this.on("contextmenu",this._defaultOpenMenu,this),this},getMenu:function(){return this._menu},openMenu:function(t){var n=this instanceof fe?this:this.getMap();return t||(t=this.getCenter()),this._menu?this._menu.show(t):this._menuOptions&&n&&(this._bindMenu(),this._menu.show(t)),this.fire("openmenu",{coordinate:t}),this},setMenuItems:function(t){return this._menuOptions||(this._menuOptions={}),Array.isArray(t)&&(this._menuOptions.custom=!1),this._menuOptions.items=t,this.setMenu(this._menuOptions),this},getMenuItems:function(){return this._menu?this._menu.getItems():this._menuOptions?this._menuOptions.items||[]:[]},closeMenu:function(){return this._menu&&this._menu.hide(),this.fire("closemenu",{}),this},removeMenu:function(){return this.off("contextmenu",this._defaultOpenMenu,this),this._unbindMenu(),delete this._menuOptions,this.fire("removemenu",{}),this},_bindMenu:function(){return this._menuOptions?(this._menu=new cC(this._menuOptions),this._menu.addTo(this),this):this},_unbindMenu:function(){return this._menu&&(this.closeMenu(),this._menu.remove(),delete this._menu),this},_defaultOpenMenu:function(t){return this.openMenu(t.coordinate),!1}};fe.include(fC);_e.include(fC);var Kr=function(r){Y(t,r);function t(i){return i&&i.position&&!pe(i.position)&&(i.position=K({},i.position)),r.call(this,i)||this}var n=t.prototype;return n.addTo=function(e){if(this.remove(),!e.options.control)return this;this._map=e;var o=e._panels.control;return this.__ctrlContainer=le("div"),ev(this.__ctrlContainer,"position:absolute;overflow:visible;"),this.update(),o.appendChild(this.__ctrlContainer),this.onAdd&&this.onAdd(),this.fire("add",{dom:o}),this},n.update=function(){return this.__ctrlContainer.innerHTML="",this._controlDom=this.buildOn(this.getMap()),this._controlDom&&(this._updatePosition(),this.__ctrlContainer.appendChild(this._controlDom)),this},n.getMap=function(){return this._map},n.getPosition=function(){return K({},this._parse(this.options.position))},n.setPosition=function(e){return pe(e)?this.options.position=e:this.options.position=K({},e),this._updatePosition(),this},n.getContainerPoint=function(){var e=this.getPosition(),o=this.getMap().getSize(),a,s;return O(e.left)?O(e.right)||(a=o.width-parseInt(e.right)):a=parseInt(e.left),O(e.top)?O(e.bottom)||(s=o.height-parseInt(e.bottom)):s=parseInt(e.top),new N(a,s)},n.getContainer=function(){return this.__ctrlContainer},n.getDOM=function(){return this._controlDom},n.show=function(){return this.__ctrlContainer.style.display="",this},n.hide=function(){return this.__ctrlContainer.style.display="none",this},n.isVisible=function(){return this.__ctrlContainer&&this.__ctrlContainer.style.display===""},n.remove=function(){return this._map?(po(this.__ctrlContainer),this.onRemove&&this.onRemove(),delete this._map,delete this.__ctrlContainer,delete this._controlDom,this.fire("remove"),this):this},n._parse=function(e){var o=e;return pe(e)&&(o=t.positions[o]),o},n._updatePosition=function(){var e=this.getPosition();e||(e={top:20,left:20});for(var o in e)e.hasOwnProperty(o)&&(e[o]=parseInt(e[o]),this.__ctrlContainer.style[o]=e[o]+"px");this.fire("positionchange",{position:K({},e)})},t}(en(fr));Kr.positions={"top-left":{top:20,left:20},"top-right":{top:20,right:20},"bottom-left":{bottom:20,left:20},"bottom-right":{bottom:20,right:20}};fe.mergeOptions({control:!0});fe.include({addControl:function(t){return this._containerDOM.getContext?this:(t.addTo(this),this)},removeControl:function(t){return!t||t.getMap()!==this?this:(t.remove(),this)}});var oO={position:{bottom:0,left:0},content:'<a href="http://maptalks.org" target="_blank">maptalks</a>'},Oy="addlayer removelayer setbaselayer baselayerremove",dC=function(r){Y(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n.buildOn=function(){return this._attributionContainer=le("div"),this._attributionContainer.className="maptalks-attribution",this._update(),this._attributionContainer},n.onAdd=function(){this.getMap().on(Oy,this._update,this)},n.onRemove=function(){this.getMap().off(Oy,this._update,this)},n._update=function(){var e=this.getMap();if(!!e){var o=e._getLayers(function(s){return s.options.attribution}).reverse().map(function(s){return s.options.attribution}),a=this.options.content+(o.length>0?" - "+o.join(", "):"");this._attributionContainer.innerHTML='<span style="padding:0px 4px">'+a+"</span>"}},t}(Kr);dC.mergeOptions(oO);fe.mergeOptions({attribution:!0});fe.addOnLoadHook(function(){var r=this.options.attribution||this.options.attributionControl;r&&(this.attributionControl=new dC(r),this.addControl(this.attributionControl))});var aO={position:"top-right",baseTitle:"Base Layers",overlayTitle:"Layers",excludeLayers:[],containerClass:"maptalks-layer-switcher"},gC=function(r){Y(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n.buildOn=function(){var e=this.container=le("div",this.options.containerClass),o=this.panel=le("div","panel"),a=this.button=le("button");return e.appendChild(a),e.appendChild(o),e},n.onAdd=function(){Be(this.button,"mouseover",this._show,this),Be(this.panel,"mouseleave",this._hide,this),Be(this.getMap(),"click",this._hide,this)},n.onRemove=function(){this.panel&&(Ke(this.button,"mouseover",this._show),Ke(this.panel,"mouseleave",this._hide),Ke(this.getMap(),"click",this._hide),po(this.panel),po(this.button),delete this.panel,delete this.button,delete this.container)},n._show=function(){dw(this.container,"shown")||(Ui(this.container,"shown"),this._createPanel())},n._hide=function(e){this.panel.contains(e.toElement||e.relatedTarget)||tv(this.container,this.options.containerClass)},n._createPanel=function(){this.panel.innerHTML="";var e=le("ul");this.panel.appendChild(e),this._renderLayers(this.getMap(),e)},n._renderLayers=function(e,o){var a=e.getBaseLayer(),s=e.getLayers(),l=s.length;if(a){var u=a.layers||[a],h=le("li","group"),c=le("ul"),f=le("label");f.innerHTML=this.options.baseTitle,h.appendChild(f);for(var d=0,g=u.length;d<g;d++){var v=u[d];this._isExcluded(v)&&(c.appendChild(this._renderLayer(u[d],!0)),h.appendChild(c),o.appendChild(h))}}if(l){var y=le("li","group"),p=le("ul"),m=le("label");m.innerHTML=this.options.overlayTitle,y.appendChild(m);for(var _=0;_<l;_++){var x=s[_];this._isExcluded(x)&&p.appendChild(this._renderLayer(x))}y.appendChild(p),o.appendChild(y)}},n._isExcluded=function(e){var o=e.getId(),a=this.options.excludeLayers;return!(a.length&&a.indexOf(o)>=0)},n._renderLayer=function(e,o){var a=this,s=le("li","layer"),l=le("label"),u=le("input"),h=this.getMap(),c=e.options.visible;e.options.visible=!0;var f=e.isVisible();return e.options.visible=c,s.className="layer",o?(u.type="radio",u.name="base"):u.type="checkbox",u.checked=c&&f,f||u.setAttribute("disabled","disabled"),u.onchange=function(d){if(d.target.type==="radio"){var g=h.getBaseLayer(),v=g.layers;if(v)for(var y=0,p=v.length;y<p;y++){var m=v[y];m[m===e?"show":"hide"]()}else g.isVisible()||g.show();h._fireEvent("setbaselayer")}else e[d.target.checked?"show":"hide"]();a.fire("layerchange",{target:e})},s.appendChild(u),l.innerHTML=e.getId(),s.appendChild(l),s},t}(Kr);gC.mergeOptions(aO);fe.mergeOptions({layerSwitcherControl:!1});fe.addOnLoadHook(function(){this.options.layerSwitcherControl&&(this.layerSwitcherControl=new gC(this.options.layerSwitcherControl),this.addControl(this.layerSwitcherControl))});var sO={level:4,position:{right:1,bottom:1},size:[300,200],maximize:!0,symbol:{lineWidth:3,lineColor:"#1bbc9b",polygonFill:"#1bbc9b",polygonOpacity:.4},containerClass:"maptalks-overview",buttonClass:"maptalks-overview-button"},vC=function(r){Y(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n.buildOn=function(){var e=this.options.size;this.options.maximize||(e=[0,0]);var o=le("div"),a=this.mapContainer=le("div");a.style.width=e[0]+"px",a.style.height=e[1]+"px",a.className=this.options.containerClass;var s=this.button=le("div");return s.className=this.options.buttonClass,o.appendChild(a),o.appendChild(s),o},n.onAdd=function(){this.options.maximize&&this._createOverview(),this.getMap().on("resize moving zooming rotate dragrotating viewchange",this._update,this).on("setbaselayer",this._updateBaseLayer,this).on("spatialreferencechange",this._updateSpatialReference,this),Be(this.button,"click",this._onButtonClick,this),this._updateButtonText()},n.onRemove=function(){this.getMap().off("resize moving zooming rotate dragrotating viewchange",this._update,this).off("setbaselayer",this._updateBaseLayer,this).off("spatialreferencechange",this._updateSpatialReference,this),this._overview&&(this._overview.remove(),delete this._overview,delete this._perspective),Ke(this.button,"click",this._onButtonClick)},n.maxmize=function(){var e=this.options.size,o=this.mapContainer;return o.style.width=e[0]+"px",o.style.height=e[1]+"px",this._createOverview(),this},n.minimize=function(){this._overview&&this._overview.remove(),delete this._overview,delete this._perspective;var e=this.mapContainer;return e.style.width=0+"px",e.style.height=0+"px",this},n.getOverviewMap=function(){return this._overview},n._onButtonClick=function(){this._overview?this.minimize():this.maxmize(),this._updateButtonText()},n._updateButtonText=function(){this._overview?this.button.innerHTML="-":this.button.innerHTML="+"},n._createOverview=function(){var e=this.getMap(),o=this.mapContainer,a=e.config();K(a,{center:e.getCenter(),zoom:this._getOverviewZoom(),zoomAnimationDuration:150,pitch:0,bearing:0,scrollWheelZoom:!1,checkSize:!1,doubleClickZoom:!1,touchZoom:!1,control:!1,draggable:!1,maxExtent:null}),this._overview=new fe(o,a),this._updateBaseLayer(),this._perspective=new We(this._getPerspectiveCoords(),{draggable:!0,cursor:"move",symbol:this.options.symbol}).on("dragend",this._onDragEnd,this),new Xr("perspective_layer",this._perspective).addTo(this._overview),this.fire("load")},n._getOverviewZoom=function(){var e=this.getMap(),o=e.getZoom(),a=e.getMinZoom(),s=this.options.level;if(s>0){for(var l=s;l>0;l--)if(o-l>=a)return o-l}else for(var u=s;u<0;u++)if(o-u>=a)return o-u;return o},n._onDragEnd=function(){var e=this._perspective.getCenter();this._overview.setCenter(e),this.getMap().panTo(e)},n._getPerspectiveCoords=function(){var e=this.getMap();return e.getContainerExtent().toArray().map(function(o){return e.containerPointToCoordinate(o)})},n._update=function(){if(!!this._overview){ch(this._overview._containerDOM);var e=this._getPerspectiveCoords();this._perspective.setCoordinates(e),this._overview.setCenterAndZoom(this.getMap().getCenter(),this._getOverviewZoom())}},n._updateSpatialReference=function(){if(!!this._overview){var e=this.getMap(),o=e.options.spatialReference;this._overview.setSpatialReference(o)}},n._updateBaseLayer=function(){if(!!this._overview){var e=this.getMap(),o=e.getBaseLayer();if(!o){this._overview.setBaseLayer(null);return}var a=o.layers,s=0;if(a)for(var l=0,u=a.length;l<u;l++){var h=a[l];if(h.isVisible()){s=l;break}}var c=o.toJSON(),f=null;a?(f=c.layers[s].options,f.visible=!0):f=c.options,this._overview.setMinZoom(f.minZoom||null).setMaxZoom(f.maxZoom||null),delete f.minZoom,delete f.maxZoom,delete c.options.canvas,c.options.visible=!0,c.options.renderer="canvas";var d=St.fromJSON(c);for(var g in o)Re(o[g])&&o.hasOwnProperty(g)&&o[g]!==o.constructor.prototype[g]&&(d[g]=o[g]);this._overview.setBaseLayer(d)}},t}(Kr);vC.mergeOptions(sO);fe.mergeOptions({overviewControl:!1});fe.addOnLoadHook(function(){this.options.overviewControl&&(this.overviewControl=new vC(this.options.overviewControl),this.addControl(this.overviewControl))});var lO={position:"top-right",draggable:!0,custom:!1,content:"",closeButton:!0},uO=function(r){Y(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n.buildOn=function(){var e;if(this.options.custom)pe(this.options.content)?(e=le("div"),e.innerHTML=this.options.content):e=this.options.content;else{if(e=le("div","maptalks-panel"),this.options.closeButton){var o=le("a","maptalks-close");o.href="javascript:;",o.onclick=function(){e.style.display="none"},e.appendChild(o)}var a=le("div","maptalks-panel-content");a.innerHTML=this.options.content,e.appendChild(a)}return this.draggable=new So(e,{cancelOn:this._cancelOn.bind(this),ignoreMouseleave:!0}),this.draggable.on("dragstart",this._onDragStart,this).on("dragging",this._onDragging,this).on("dragend",this._onDragEnd,this),this.options.draggable&&this.draggable.enable(),e},n.update=function(){return this.draggable&&(this.draggable.disable(),delete this.draggable),Kr.prototype.update.call(this)},n.setContent=function(e){var o=this.options.content;return this.options.content=e,this.fire("contentchange",{old:o,new:e}),this.isVisible()&&this.update(),this},n.getContent=function(){return this.options.content},n._cancelOn=function(e){var o=e.srcElement||e.target,a=o.tagName.toLowerCase();return a==="button"||a==="input"||a==="select"||a==="option"||a==="textarea"},n._onDragStart=function(e){this._startPos=e.mousePos,this._startPosition=K({},this.getPosition()),this.fire("dragstart",e)},n._onDragging=function(e){var o=e.mousePos,a=o.sub(this._startPos),s=this._startPosition,l=this.getPosition();O(l.top)||(l.top=parseInt(s.top)+a.y),O(l.bottom)||(l.bottom=parseInt(s.bottom)-a.y),O(l.left)||(l.left=parseInt(s.left)+a.x),O(l.right)||(l.right=parseInt(s.right)-a.x),this.setPosition(l),this.fire("dragging",e)},n._onDragEnd=function(e){delete this._startPos,delete this._startPosition,this.fire("dragend",e)},n._getConnectPoints=function(){var e=this.getMap(),o=this.getContainerPoint(),a=this.getDOM(),s=parseInt(a.clientWidth),l=parseInt(a.clientHeight),u=[e.containerPointToCoordinate(o.add(s/2,0)),e.containerPointToCoordinate(o.add(s,l/2)),e.containerPointToCoordinate(o.add(s/2,l)),e.containerPointToCoordinate(o.add(0,l/2))];return u},t}(Kr);uO.mergeOptions(lO);var hO={position:"bottom-left",maxWidth:100,metric:!0,imperial:!1,containerClass:null},pC=function(r){Y(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n.buildOn=function(e){return this._map=e,this._scaleContainer=le("div",this.options.containerClass),this._addScales(),e.on("zoomend",this._update,this),this._map._loaded&&this._update(),this._scaleContainer},n.onRemove=function(){this.getMap().off("zoomend",this._update,this)},n._addScales=function(){var e="border: 2px solid #000000;border-top: none;line-height: 1.1;padding: 0px;color: #000000;font-size: 11px;text-align:center;white-space: nowrap;overflow: hidden;-moz-box-sizing: content-box;box-sizing: content-box;background: #fff; background: rgba(255, 255, 255, 0);";this.options.metric&&(this._mScale=Ym("div",this.options.containerClass?null:e,this._scaleContainer)),this.options.imperial&&(this._iScale=Ym("div",this.options.containerClass?null:e,this._scaleContainer))},n._update=function(){var e=this._map,o=e.pixelToDistance(this.options.maxWidth,0);this._updateScales(o)},n._updateScales=function(e){this.options.metric&&e&&this._updateMetric(e),this.options.imperial&&e&&this._updateImperial(e)},n._updateMetric=function(e){var o=this._getRoundNum(e),a=o<1e3?o+" m":o/1e3+" km";this._updateScale(this._mScale,a,o/e)},n._updateImperial=function(e){var o=e*3.2808399,a,s,l;o>5280?(a=o/5280,s=this._getRoundNum(a),this._updateScale(this._iScale,s+" mile",s/a)):(l=this._getRoundNum(o),this._updateScale(this._iScale,l+" feet",l/o))},n._updateScale=function(e,o,a){e.style.width=Math.round(this.options.maxWidth*a)+"px",e.innerHTML=o},n._getRoundNum=function(e){var o=Math.pow(10,(Math.floor(e)+"").length-1),a=e/o;return a=a>=10?10:a>=5?5:a>=3?3:a>=2?2:1,o*a},t}(Kr);pC.mergeOptions(hO);fe.mergeOptions({scaleControl:!1});fe.addOnLoadHook(function(){this.options.scaleControl&&(this.scaleControl=new pC(this.options.scaleControl),this.addControl(this.scaleControl))});var cO={height:28,vertical:!1,position:"top-right",reverseMenu:!1,items:{}},fO=function(r){Y(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n.buildOn=function(e){this._map=e;var o=le("div"),a=le("ul","maptalks-toolbar-hx");o.appendChild(a),this.options.vertical?Ui(o,"maptalks-toolbar-vertical"):Ui(o,"maptalks-toolbar-horizonal");var s=this;function l(y,p,m,_){var x=s._getItems()[p];return function(C){return qt(C),y({target:x,index:p,childIndex:m,dom:_})}}var u=this.options.items;if(Me(u))for(var h=0,c=u.length;h<c;h++){var f=u[h],d=le("li");if(this.options.height!==28&&(d.style.lineHeight=this.options.height+"px"),d.style.height=this.options.height+"px",d.style.cursor="pointer",Yb(f.item)){d.style.textAlign="center";var g=Jb("div",f.item);d.innerHTML='<div style="margin-top:'+(this.options.height-g.height)/2+'px;">'+f.item+"</div>"}else d.innerHTML=f.item;if(f.click&&Be(d,"click",l(f.click,h,null,d)),Me(f.children)){var v=this._createDropMenu(h);d.appendChild(v),d._menu=v,Be(d,"mouseover",function(){this._menu.style.display=""}),Be(d,"mouseout",function(){this._menu.style.display="none"})}a.appendChild(d)}return o},n._createDropMenu=function(e){var o=this;function a(C,w,P){var S=o._getItems()[w].children[P];return function(M){return qt(M),C({target:S,index:w,childIndex:P})}}var s=le("div","maptalks-dropMenu"),l=this._getItems(),u=l.length,h=le("ul"),c=l[e].children;e===u-1&&c&&(s.style.cssText="right: 0px;",h.style.cssText="right: 0px;position: absolute;",this.options.reverseMenu&&(h.style.bottom=0)),s.appendChild(le("em","maptalks-ico"));for(var f=0,d=0,g=c.length;d<g;d++){var v=aw(c[d].item,"12px");v.width>f&&(f=v.width)}for(var y=0,p=c.length;y<p;y++){var m=c[y],_=le("li");_.innerHTML='<a href="javascript:;">'+m.item+"</a>",_.style.cursor="pointer",_.style.width=f+24+"px",Be(_.childNodes[0],"click",a(m.click,e,y)),h.appendChild(_)}if(this.options.vertical){var x=f<95?95:f;this.options.reverseMenu?s.style.right=-(x+10*2)+"px":s.style.left=-(x+10*2)+"px"}else this.options.reverseMenu?s.style.bottom="28px":s.style.top="28px";return s.appendChild(h),s.style.display="none",s},n._getItems=function(){return this.options.items||[]},t}(Kr);fO.mergeOptions(cO);var dO={position:"top-left",slider:!0,zoomLevel:!0,seamless:!1},jn=10,mC=function(r){Y(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n.buildOn=function(e){var o=this.options,a=le("div","maptalks-zoom");if(o.zoomLevel){var s=le("span","maptalks-zoom-zoomlevel");a.appendChild(s),this._levelDOM=s}var l=le("div","maptalks-zoom-slider"),u=le("a","maptalks-zoom-zoomin");if(u.href="javascript:;",u.innerHTML="+",l.appendChild(u),this._zoomInButton=u,o.slider){var h=le("div","maptalks-zoom-slider-box"),c=le("div","maptalks-zoom-slider-ruler"),f=le("span","maptalks-zoom-slider-reading"),d=le("span","maptalks-zoom-slider-dot");c.appendChild(f),h.appendChild(c),h.appendChild(d),l.appendChild(h),this._sliderBox=h,this._sliderRuler=c,this._sliderReading=f,this._sliderDot=d}var g=le("a","maptalks-zoom-zoomout");return g.href="javascript:;",g.innerHTML="-",l.appendChild(g),this._zoomOutButton=g,a.appendChild(l),e.on("_zoomend _zooming _zoomstart _spatialreferencechange",this._update,this),this._update(),this._registerDomEvents(),a},n.onRemove=function(){this.getMap().off("_zoomend _zooming _zoomstart _spatialreferencechange",this._update,this),this._zoomInButton&&Ke(this._zoomInButton,"click",this._onZoomInClick),this._zoomOutButton&&Ke(this._zoomOutButton,"click",this._onZoomOutClick),this._sliderRuler&&(Ke(this._sliderRuler,"click",this._onClickRuler),this.dotDragger.disable(),delete this.dotDragger)},n._update=function(){var e=this.getMap();if(this._sliderBox){var o=(e.getMaxZoom()-e.getMinZoom())*jn;this._sliderBox.style.height=o+16+"px",this._sliderRuler.style.height=o+8+"px",this._sliderRuler.style.cursor="pointer";var a=(e.getMaxZoom()-e.getZoom())*jn;this._sliderReading.style.height=(e.getZoom()-e.getMinZoom()+1)*jn+"px",this._sliderDot.style.top=a+"px"}this._updateText()},n._updateText=function(){if(this._levelDOM){var e=this.getMap(),o=e.getZoom();un(o)||(o=Math.floor(o*10)/10),this._levelDOM.innerHTML=o}},n._registerDomEvents=function(){this._zoomInButton&&Be(this._zoomInButton,"click",this._onZoomInClick,this),this._zoomOutButton&&Be(this._zoomOutButton,"click",this._onZoomOutClick,this),this._sliderRuler&&(Be(this._sliderRuler,"click",this._onClickRuler,this),this.dotDragger=new So(this._sliderDot,{ignoreMouseleave:!0}),this.dotDragger.on("dragstart",this._onDotDragstart,this).on("dragging dragend",this._onDotDrag,this).enable())},n._onZoomInClick=function(e){ar(e),this.getMap().zoomIn()},n._onZoomOutClick=function(e){ar(e),this.getMap().zoomOut()},n._onClickRuler=function(e){ar(e);var o=this.getMap(),a=kt(e,this._sliderRuler),s=a.y,l=o.getMaxZoom(),u=Math.floor(l-s/jn);o.setZoom(u)},n._onDotDragstart=function(e){ar(e.domEvent);var o=this.getMap(),a=o.getSize().toPoint()._multi(1/2);o.onZoomStart(o.getZoom(),a)},n._onDotDrag=function(e){ar(e.domEvent);var o=this.getMap(),a=o.getSize().toPoint()._multi(1/2),s=kt(e.domEvent,this._sliderRuler),l=o.getMaxZoom(),u=o.getMinZoom(),h=s.y,c=l-h/jn;l<c?(c=l,h=0):u>c&&(c=u,h=(l-u)*jn),e.type==="dragging"?o.onZooming(c,a,1):e.type==="dragend"&&(this.options.seamless?o.onZoomEnd(c,a):o.onZoomEnd(Math.round(c),a)),this._sliderDot.style.top=h+"px",this._sliderReading.style.height=(o.getZoom()-u+1)*jn+"px",this._updateText()},t}(Kr);mC.mergeOptions(dO);fe.mergeOptions({zoomControl:!1});fe.addOnLoadHook(function(){this.options.zoomControl&&(this.zoomControl=new mC(this.options.zoomControl),this.addControl(this.zoomControl))});var dn=function(){function r(t,n,i,e){Array.isArray(t)?(this.scale={x:t[0],y:t[1]},this.origin={x:t[2],y:t[3]}):(this.scale={x:t,y:n},this.origin={x:i,y:e})}return r.getDefault=function(n){return n.code.toLowerCase()==="baidu"?"baidu":n.code.toLowerCase()==="EPSG:4326".toLowerCase()?"tms-global-geodetic":n.code.toLowerCase()==="identity"?[1,-1,0,0]:"web-mercator"},r}(),ll=6378137*Math.PI;K(dn,{"web-mercator":new dn([1,-1,-ll,ll]),"tms-global-mercator":new dn([1,1,-ll,-ll]),"tms-global-geodetic":new dn([1,1,-180,-90]),baidu:new dn([1,1,0,0])});var Ly=function(){function r(n,i,e,o){this.map=n,this.tileSize=o,this.fullExtent=e,this.prepareTileInfo(i,e),this._xScale=e.right>=e.left?1:-1,this._yScale=e.top>=e.bottom?1:-1;var a=n.getGLRes();this._pointOrigin=n._prjToPointAtRes(new N(this.tileSystem.origin),a),this._glRes=a}var t=r.prototype;return t.prepareTileInfo=function(i,e){if(pe(i)?i=dn[i.toLowerCase()]:Array.isArray(i)&&(i=new dn(i)),!i)throw new Error("Invalid TileSystem");this.tileSystem=i;var o=e.right>e.left?1:-1,a=e.top>e.bottom?-1:1,s=i.origin.x,l=i.origin.y;this.transformation=new _w([o,a,s,l])},t._getTileNum=function(i,e){var o=this.tileSystem,a=this.tileSize,s=1e-7,l=Math.floor(s*o.scale.x+i.x/(a.width*e)),u=Math.ceil(s*o.scale.y+i.y/(a.height*e));return{x:o.scale.x*l,y:o.scale.y*u}},t.getTileIndex=function(i,e,o){var a=this.tileSystem,s=this.transformation.transform(i,1),l=this._getTileNum(s,e);return a.scale.x<0&&(l.x-=1),a.scale.y>0&&(l.y-=1),this.getNeighorTileIndex(l.x,l.y,0,0,e,o)},t.getNeighorTileIndex=function(i,e,o,a,s,l){var u=this.tileSystem,h=i+u.scale.x*o,c=e-u.scale.y*a,f=!1,d=h,g=c,v=this._getTileFullIndex(s);return l&&((l===!0||l==="x")&&(v.xmax===v.xmin?h=v.xmin:h<v.xmin?(h=v.xmax-(v.xmin-h)%(v.xmax-v.xmin),h===v.xmax&&(h=v.xmin)):h>=v.xmax&&(h=v.xmin+(h-v.xmin)%(v.xmax-v.xmin))),(l===!0||l==="y")&&(v.ymax===v.ymin?c=v.ymin:c>=v.ymax?c=v.ymin+(c-v.ymin)%(v.ymax-v.ymin):c<v.ymin&&(c=v.ymax-(v.ymin-c)%(v.ymax-v.ymin),c===v.ymax&&(c=v.ymin)))),(h<v.xmin||h>v.xmax||c>v.ymax||c<v.ymin)&&(f=!0),{x:h,y:c,idx:d,idy:g,out:f}},t._getTileFullIndex=function(i){if(this._tileFullIndex||(this._tileFullIndex={}),this._tileFullIndex[i])return this._tileFullIndex[i];var e=this.fullExtent,o=this.transformation,a=this._getTileNum(o.transform(new U(e.left,e.top),1),i),s=this._getTileNum(o.transform(new U(e.right,e.bottom),1),i),l=this.tileSystem;return l.scale.x<0&&(a.x-=1,s.x-=1),l.scale.y>0&&(a.y-=1,s.y-=1),this._tileFullIndex[i]=new be(a,s),this._tileFullIndex[i]},t.getTilePrjNW=function(i,e,o){var a=this.tileSystem,s=this.tileSize,l=a.origin.y+this._yScale*a.scale.y*(e+(a.scale.y===1?1:0))*o*s.height,u=a.origin.x+this._xScale*a.scale.x*(i+(a.scale.x===1?0:1))*o*s.width;return new U(u,l)},t.getTilePointNW=function(i,e,o){var a=this._glRes/o,s=this.tileSystem,l=this.tileSize,u=this._pointOrigin.y*a+this._yScale*s.scale.y*(e+(s.scale.y===1?1:0))*l.height,h=this._pointOrigin.x*a+this._xScale*s.scale.x*(i+(s.scale.x===1?0:1))*l.width;return new N(h,u)},t.getTilePrjSE=function(i,e,o){var a=this.tileSystem,s=this.tileSize,l=a.origin.y+this._yScale*a.scale.y*(e+(a.scale.y===1?0:1))*o*s.height,u=a.origin.x+this._xScale*a.scale.x*(i+(a.scale.x===1?1:0))*o*s.width;return new U(u,l)},t.getTilePointSE=function(i,e,o){var a=this._glRes/o,s=this.tileSystem,l=this.tileSize,u=this._pointOrigin.y*a+this._yScale*s.scale.y*(e+(s.scale.y===1?0:1))*l.height,h=this._pointOrigin.x*a+this._xScale*s.scale.x*(i+(s.scale.x===1?1:0))*l.width;return new N(h,u)},t.getTilePrjExtent=function(i,e,o){var a=this.getTilePrjNW(i,e,o),s=this.getTilePrjSE(i,e,o);return new be(a,s)},r}(),gO=1,Wo=new N(0,0),vO=32,ul=typeof Set!="undefined",Dy=function(){function r(){this._table=ul?new Set:{}}var t=r.prototype;return t.add=function(i){ul?this._table.add(i):this._table[i]=!0},t.has=function(i){return ul?this._table.has(i):this._table[i]},t.reset=function(){ul?this._table.clear():this._table={}},r}(),pO={urlTemplate:null,subdomains:null,errorUrl:null,repeatWorld:!0,background:!0,backgroundZoomDiff:6,loadingLimitOnInteracting:3,tileRetryCount:0,placeholder:!1,crossOrigin:null,tileSize:[256,256],offset:[0,0],tileSystem:null,fadeAnimation:!it,debug:!1,spatialReference:null,maxCacheSize:256,renderer:function(){return ye.webgl?"gl":"canvas"}(),clipByPitch:!0,maxAvailableZoom:null,cascadeTiles:!0,zoomOffset:0,pyramidMode:1},mO=/\{ *([\w_]+) *\}/g,yO=new N(0,0),hl=new N(0,0),Zo=new N(0,0),on=new N(0,0),_O=new N(0,0),xO=new N(0,0),Et=[[0,0,0],[0,0,0]],Ic=[0,0,0],Fc=[0,0,0],Nc=[],li=function(r){Y(t,r);function t(){return r.apply(this,arguments)||this}t.fromJSON=function(e){return!e||e.type!=="TileLayer"?null:new t(e.id,e.options)};var n=t.prototype;return n.getTileSize=function(){if(this._tileSize)return this._tileSize;var e=this.options.tileSize;return se(e)&&(e=[e,e]),this._tileSize=new Xe(e),this._tileSize},n.getTiles=function(e,o){this._coordCache={};var a=this.getSpatialReference();return!this._disablePyramid&&!this._hasOwnSR&&this.options.pyramidMode&&a&&a.isPyramid()?this._getPyramidTiles(e,o):this._getCascadeTiles(e,o)},n._getTileFullExtent=function(){if(this._tileFullExtent)return this._tileFullExtent;var e=this.getSpatialReference(),o=e.getFullExtent(),a=e.getResolution(0),s=this.getMap();return this._tileFullExtent=o.convertTo(function(l){return s._prjToPointAtRes(l,a,Wo)}),this._tileFullExtent},n._getRootNodes=function(e){var o=this.getMap();if(this._rootNodes){var a=this._rootNodes,s=a.tiles,l=a.mapWidth,u=a.mapHeight;if(o.width!==l||o.height!==u){for(var h=this._getRootError(),c=0;c<s.length;c++)s[c].error=h;this._rootNodes.mapWidth=o.width,this._rootNodes.mapHeight=o.height}for(var f=0;f<s.length;f++)s[f].offset[0]=e[0],s[f].offset[1]=e[1];return this._rootNodes}var d=this.getSpatialReference(),g=d.getResolution(0),v=this._getTileConfig(),y=d.getFullExtent(),p=v.tileSystem,m=p.origin,_=p.scale,x=v.getTilePrjExtent(0,0,g),C=x.getWidth(),w=x.getHeight(),P=1e-5,S=Math.abs((m.x-y.left)/C);S=Math.ceil(S-P);var M=Math.abs((y.right-m.x)/C);M=Math.ceil(M-P);var R=Math.ceil(Math.abs(y.top-m.y)/w);R=Math.ceil(R-P);var j=Math.ceil(Math.abs(y.bottom-m.y)/w);if(j=Math.ceil(j-P),(M+S)*(j+R)>vO)return{status:0,error:"Too many root nodes"};for(var A=this._getRootError(),z=[],D=0,I=-S;I<M;I++)for(var B=-R;B<j;B++){var W=_.y<0?B:-(B+1);z.push({x:I,y:W,z:D,idx:I,idy:W,extent2d:v.getTilePrjExtent(I,W,g).convertTo(function(E){return o._prjToPointAtRes(E,g,Wo)}),id:this._getTileId(I,W,D),url:this.getTileUrl(I,W,D+this.options.zoomOffset),offset:[0,0],error:A})}return this._rootNodes={status:1,tiles:z,mapWidth:o.width,mapHeight:o.height},this._getRootNodes(e)},n._getRootError=function(){var e=this.getMap(),o=ct(e.getFov()),a=e.width/e.height,s=e.cameraPosition[2],l=s*Math.tan(.5*o),u=l*a,h=Math.sqrt(s*s+l*l+u*u),c=e._getFovZ(0),f=c*(h/s),d=this.getSpatialReference(),g=d.getResolution(0);return f*g/e.getResolution(0)},n._getPyramidTiles=function(e,o){var a=this.getMap();isNaN(+e)&&(e=this._getTileZoom(a.getZoom()));var s=this.getSpatialReference(),l=Math.min(e,this.getMaxZoom()),u=a.projViewMatrix,h=this._getTileFullExtent(),c=this._getTileOffset(0),f;if(this.options.repeatWorld){var d=a.getContainerExtent(),g=this._convertToExtent2d(d),v=s.getResolution(0)/a.getResolution();if(g.within(h.copy()._scale(v))){var w=this._getRootNodes(c);if(w.status!==1)return console.warn(w.error),this._disablePyramid=!0,this.getTiles(e,o);f=w.tiles.concat()}else{var y=a.getPitch(),p=a.options.cascadePitches[1],m=Math.floor(a._getVisualHeight(p)),_=y<=p?d:new de(0,a.height-m,a.width,a.height);this._visitedTiles=new Dy;var x=this._getTiles(0,_,2,o&&o.getRenderer(),!0),C=this._getRootError();x.tiles.forEach(function(z){z.error=C}),f=x.tiles}}else{var P=this._getRootNodes(c);if(P.status!==1)return console.warn(P.error),this._disablePyramid=!0,this.getTiles(e,o);f=P.tiles.concat()}for(var S=a.getGLRes(),M={0:c},R=new de,j=[];f.length>0;){var A=f.pop();if(A.z===l){R._combine(A.extent2d),j.push(A);continue}M[A.z+1]||(M[A.z+1]=this._getTileOffset(A.z+1)),this._splitNode(A,u,f,j,R,l,M[A.z+1],o&&o.getRenderer(),S)}return{tileGrids:[{extent:R,count:j.length,tiles:j,offset:[0,0],zoom:e}],count:j.length}},n._splitNode=function(e,o,a,s,l,u,h,c,f){for(var d=this._getTileConfig().tileSystem,g=d.scale.y,v=e.z+1,y=this.getSpatialReference(),p=e.x,m=e.y,_=e.extent2d,x=e.idx,C=e.idy,w=2,P=_.getWidth()/2*w,S=_.getHeight()/2*w,M=_.xmin*w,R=_.ymax*w,j=_.ymin*w,A=c||this.getRenderer(),z=!1,D=[],I=y.getResolution(v)/f,B=0;B<4;B++){var W=B%2,E=B>>1,T=(p<<1)+W,L=(m<<1)+E,V=(x<<1)+W,F=(C<<1)+E,H=this._getTileId(V,F,v),$=A.isTileCachedOrLoading(H),G=void 0;if(!$)if(g<0){var b=M+W*P,ee=R-E*S;G=new de(b,ee-S,b+P,ee)}else{var q=M+W*P,te=j+E*S;G=new de(q,te,q+P,te+S)}var ie=$&&$.info;ie||(ie={x:T,y:L,idx:V,idy:F,z:v,extent2d:G,error:e.error/2,id:H,url:this.getTileUrl(T,L,v+this.options.zoomOffset),offset:h},c&&(ie.layer=this.getId())),ie.error=e.error/2,ie.offset[0]=h[0],ie.offset[1]=h[1];var ue=this._isTileVisible(ie,o,I,u,h);if(ue===1)z=!0;else{if(ue===-1)continue;if(ue===0&&v!==u){s.push(e),l._combine(e.extent2d);return}}D.push(ie)}v===u?z?a.push.apply(a,D):(s.push(e),l._combine(e.extent2d)):a.push.apply(a,D)},n._isTileVisible=function(e,o,a,s,l){if(e.z===0)return 1;if(!this._isTileInFrustum(e,o,a,l))return-1;var u=this.options.maxError;O(u)&&(u=gO);var h=this._getScreenSpaceError(e,a,s,l);return h>=u?1:0},n._isTileInFrustum=function(e,o,a,s){var l=e.extent2d,u=l.xmin,h=l.ymin,c=l.xmax,f=l.ymax;return Et[0][0]=(u-s[0])*a,Et[0][1]=(h-s[1])*a,Et[1][0]=(c-s[0])*a,Et[1][1]=(f-s[1])*a,ac(o,Et)},n._getScreenSpaceError=function(e,o,a,s){var l=e.error,u=this.getMap(),h=e.extent2d,c=h.xmin,f=h.ymin,d=h.xmax,g=h.ymax;Ic[0]=(c-s[0])*o,Ic[1]=(f-s[1])*o,Fc[0]=(d-s[0])*o,Fc[1]=(g-s[1])*o;var v=wO(Ic,Fc,u.cameraPosition),y=Math.max(Math.abs(v),1e-7),p=Math.abs(e.z-a),m;u.height<1e3?m=1:m=p<=1?1:p<=2?.7:.605;var _=l*m/y;return _},n._getCascadeTiles=function(e,o){var a=this.getMap(),s=a.getPitch(),l=o&&o.getRenderer(),u=a.getContainerExtent(),h=[],c=0,f=this.getMinZoom(),d=a.options.cascadePitches[0],g=a.options.cascadePitches[1],v=Math.floor(a._getVisualHeight(g)),y=O(e)?this._getTileZoom(a.getZoom()):e;if(this._visitedTiles=new Dy,!O(e)||!this.options.cascadeTiles||s<=d||!O(f)&&y<=f){var p=s<=g?u:new de(0,a.height-v,a.width,a.height),m=this._getTiles(y,p,2,l);return m&&(c+=m.tiles.length,h.push(m)),{tileGrids:h,count:c}}var _=Math.floor(a._getVisualHeight(d)),x=new de(0,a.height-_,a.width,a.height),C=this._getTiles(y,x,0,l);c+=C?C.tiles.length:0,h.push(C);var w=x.ymin,P=a.getSpatialReference().getZoomDirection(),S=P,M;if(s>g){y-S<=f&&(S=0);var R=new de(0,a.height-v,a.width,w);M=this._getTiles(y-S,R,1,l),c+=M?M.tiles.length:0,w=R.ymin,S+=4*P}var j;if(y-S>=f){var A=new de(0,u.ymin,a.width,w);j=this._getTiles(y-S,A,2,l),c+=j?j.tiles.length:0,h.push(j)}return M&&j&&(h[1]=j,h[2]=M),{tileGrids:h,count:c}},n.getTileUrl=function(e,o,a){var s=this.options.urlTemplate,l="";if(this.options.subdomains){var u=this.options.subdomains;if(Me(u)){var h=u.length,c=(e+o)%h;c<0&&(c=0),l=u[c]}}if(Re(s))return s(e,o,a,l);var f={x:e,y:o,z:a,s:l};return this.options.token&&(f.token=this.options.token),s.replace(mO,function(d,g){var v=f[g];if(v===void 0)throw new Error("No value provided for variable "+d);return typeof v=="function"&&(v=v(f)),v})},n.clear=function(){return this._renderer&&this._renderer.clear(),this.fire("clear"),this},n.toJSON=function(){var e={type:this.getJSONType(),id:this.getId(),options:this.config()};return e},n.getSpatialReference=function(){var e=this.getMap();if(e&&(!this.options.spatialReference||Tr.equals(this.options.spatialReference,e.options.spatialReference)))return e.getSpatialReference();if(this._sr)return this._sr;var o=this.options.spatialReference;if(pe(o)&&(o=Tr.getPreset(o),!o))throw new Error("Unsupported spatial reference: "+this.options.spatialReference+", possible values: "+Tr.getAllPresets().join());return this._sr=new Tr(o),this._srMinZoom=this._sr.getMinZoom(),this._srMaxZoom=this._sr.getMaxZoom(),this._hasOwnSR=this._sr.toJSON().projection!==e.getSpatialReference().toJSON().projection,this._sr},n.getMinZoom=function(){var e=this.getSpatialReference();return e!==this.getMap().getSpatialReference()?Math.max(r.prototype.getMinZoom.call(this),this._srMinZoom):r.prototype.getMinZoom.call(this)},n.getMaxZoom=function(){var e=this.getSpatialReference();return e!==this.getMap().getSpatialReference()?Math.min(r.prototype.getMaxZoom.call(this),this._srMaxZoom):r.prototype.getMaxZoom.call(this)},n._getTileZoom=function(e){if(!this._hasOwnSR){var o=this.getMap().getResolution(e),a=this.getSpatialReference().getResolution(e),s=Math.log(a/o)*Math.LOG2E;e+=s}var l=this.options.maxAvailableZoom;return!O(l)&&e>l&&(e=l),un(e)||(e=Math.round(e)),e=Math.max(0,e),e},n._getTiles=function(e,o,a,s,l){var u=this.getMap(),h=e,c=u.projViewMatrix;a<2&&(a===0&&(h-=1),c=a===0?u.cascadeFrustumMatrix0:a===1?u.cascadeFrustumMatrix1:u.projViewMatrix);var f=h+this.options.zoomOffset,d=this._getTileOffset(f),g=d[0]||d[1],v={zoom:h,extent:null,offset:d,tiles:[]};if(f<0||!u||!this.isVisible()||!u.width||!u.height)return v;if(!l){var y=this.getMinZoom(),p=this.getMaxZoom();if(!O(y)&&h<y||!O(p)&&h>p)return v}var m=this._getTileConfig();if(!m)return v;var _={zoom:d},x=this.getSpatialReference(),C=x.getResolution(f),w;this._hasOwnSR?w=u.getGLScale(h):w=C/u.getGLRes();var P=!this._hasOwnSR&&this.options.repeatWorld,S=this._convertToExtent2d(o),M=this._getMask2DExtent();if(M){var R=M.intersection(S);if(!R)return v;o=R.convertTo(function(hi){return u._pointToContainerPoint(hi,void 0,0,Wo)})}var j=u._containerPointToPrj(o.getCenter(),yO),A=u._prjToPoint(j,f,hl),z;g?z=this._project(u._pointToPrj(A._add(d),f,hl),hl):z=this._project(j,hl);var D=u.getGLScale()/u.getGLScale(f);Zo.x=S.xmin*D,Zo.y=S.ymax*D,on.x=S.xmax*D,on.y=S.ymin*D;for(var I=this._project(u._pointToPrj(Zo._add(d),f,Zo),Zo),B=this._project(u._pointToPrj(on._add(d),f,on),on),W=m.getTileIndex(z,C,P),E=m.getTileIndex(I,C,P),T=m.getTileIndex(B,C,P),L=Math.ceil(Math.abs(W.idy-E.idy)),V=Math.ceil(Math.abs(W.idx-E.idx)),F=Math.ceil(Math.abs(W.idy-T.idy)),H=Math.ceil(Math.abs(W.idx-T.idx)),$=(L+F+1)*(V+H+1),G=this.getTileSize(),b=this.getRenderer()||s,ee=this._getTileConfig().tileSystem.scale,q=[],te=new de,ie=new N(0,0),ue=-L;ue<=F;ue++)for(var re=-V,xe=-1/0,Ce=!1;re>=xe&&re<=H;){var ae=m.getNeighorTileIndex(W.idx,W.idy,re,ue,C,P);xe===-1/0?re++:re--;var me=this._getTileId(ae.idx,ae.idy,h);if(!(ae.out||this._visitedTiles&&this._visitedTiles.has(me))){var Q=b&&b.isTileCachedOrLoading(me);Q&&(Q=Q.info);var he=void 0;if(Q){var Fe=Q,Qe=Fe.extent2d;ie.set(Qe.xmin,Qe.ymax),he=ie}else if(!this._hasOwnSR)he=m.getTilePointNW(ae.x,ae.y,C);else{var ui=m.getTilePrjNW(ae.x,ae.y,C);he=u._prjToPoint(this._unproject(ui,on),h)}var Cr=void 0,mt=void 0;if(!this._hasOwnSR)Cr=G.width,mt=G.height;else{var ce=void 0;if(!this._hasOwnSR)ce=m.getTilePointSE(ae.x,ae.y,C);else{var ze=m.getTilePrjSE(ae.x,ae.y,C);ce=u._prjToPoint(this._unproject(ze,on),h,on)}Cr=Math.ceil(Math.abs(ce.x-he.x)),mt=Math.ceil(Math.abs(ce.y-he.y))}var Fn=ee.x*(ae.idx-ae.x)*Cr,Nn=ee.y*(ae.idy-ae.y)*mt;!Q&&(Fn||Nn)&&he._add(Fn,Nn);var Ot=Q&&Q.extent2d||new de(he.x,he.y-mt,he.x+Cr,he.y);($<=4||Ce||this._isTileInExtent(c,Ot,d,w))&&(this._visitedTiles&&a===0&&this._visitedTiles.add(me),a===0?(this._splitTiles(c,q,b,ae,h+1,Ot,Fn,Nn,_,s),te._combine(Ot)):(Q?(Q.offset[0]=d[0],Q.offset[1]=d[1]):(Q={z:h,x:ae.x,y:ae.y,idx:ae.idx,idy:ae.idy,extent2d:Ot,offset:d,id:me,url:this.getTileUrl(ae.x,ae.y,h)},s&&(Q.layer=this.getId())),q.push(Q),te._combine(Ot)),xe===-1/0?(xe=re,re=H):Ce||(Ce=!0))}}if(q.length){var xv=u._containerPointToPoint(o.getCenter(),h,Wo)._add(d),wv=new N(0,0),Cv=new N(0,0);q.sort(function(hi,vs){return wv.set((hi.extent2d.xmin+hi.extent2d.xmax)/2,(hi.extent2d.ymin+hi.extent2d.ymax)/2),Cv.set((vs.extent2d.xmin+vs.extent2d.xmax)/2,(vs.extent2d.ymin+vs.extent2d.ymax)/2),wv.distanceTo(xv)-Cv.distanceTo(xv)})}return{offset:d,zoom:e,extent:te,tiles:q}},n._convertToExtent2d=function(e){var o=this,a=this.getMap();return e.convertTo(function(s){var l;if(s.y>0&&s.y<a.height){var u=(s.x===0?0:1)+s.y;o._coordCache[u]||(o._coordCache[u]=a._containerPointToPoint(s)),l=o._coordCache[u]}return l=a._containerPointToPoint(s,void 0,Wo),l})},n._splitTiles=function(e,o,a,s,l,u,h,c,f,d){var g=this._getTileConfig().tileSystem.scale.y,v=this.getMap().getGLScale(l),y=_O.set(u.xmin*2,g<0?u.ymax*2:u.ymin*2),p=u.getWidth(),m=u.getHeight(),_=s.idx*2,x=s.idy*2,C=s.x*2,w=s.y*2,P=this._checkAndAddTile(e,a,_,x,C,w,l,0,0,p,m,y,v,f,d);P&&o.push(P),P=this._checkAndAddTile(e,a,_,x,C,w,l,0,1,p,m,y,v,f,d),P&&o.push(P),P=this._checkAndAddTile(e,a,_,x,C,w,l,1,0,p,m,y,v,f,d),P&&o.push(P),P=this._checkAndAddTile(e,a,_,x,C,w,l,1,1,p,m,y,v,f,d),P&&o.push(P)},n._checkAndAddTile=function(e,o,a,s,l,u,h,c,f,d,g,v,y,p,m){var _=this._getTileId(a+c,s+f,h);if(this._visitedTiles&&this._visitedTiles.has(_))return null;var x=p[h];x||(x=p[h]=this._getTileOffset(h));var C=this._getTileConfig().tileSystem.scale.y,w=new de(v.x+c*d,v.y+C*f*g,v.x+(c+1)*d,v.y+C*(f+1)*g);if(!this._isSplittedTileInExtent(e,w,x,y))return null;var P=o&&o.isTileCachedOrLoading(_);return P?P=P.info:(P={z:h,x:l+c,y:u+f,extent2d:w,id:_,offset:x,url:this.getTileUrl(l+c,u+f,h+this.options.zoomOffset)},m&&(P.layer=this.getId())),P},n._getTileOffset=function(e){var o=this.options.offset;return Re(o)&&(o=o(e)),o},n._getTileId=function(e,o,a,s){return(s||this.getId())+"_"+o+"_"+e+"_"+a},n._project=function(e,o){if(this._hasOwnSR){var a=this.getMap(),s=a.getProjection(),l=this.getSpatialReference().getProjection();return l.project(s.unproject(e,o),o)}else return e},n._unproject=function(e,o){if(this._hasOwnSR){var a=this.getMap(),s=this.getSpatialReference(),l=a.getProjection(),u=s.getProjection();return l.project(u.unproject(e,o),o)}else return e},n._initTileConfig=function(){var e=this.getMap(),o=this.getTileSize(),a=this.getSpatialReference(),s=a.getProjection(),l=a.getFullExtent();this._defaultTileConfig=new Ly(e,dn.getDefault(s),l,o),this.options.hasOwnProperty("tileSystem")&&(this._tileConfig=new Ly(e,this.options.tileSystem,l,o)),delete this._rootNodes,delete this._tileFullExtent,delete this._disablePyramid},n._getTileConfig=function(){return this._defaultTileConfig||this._initTileConfig(),this._tileConfig||this._defaultTileConfig},n._bindMap=function(e){var o=e.getBaseLayer();return o===this&&(o.options.hasOwnProperty("forceRenderOnMoving")||this.config({forceRenderOnMoving:!0})),this._onSpatialReferenceChange(),r.prototype._bindMap.apply(this,arguments)},n._isTileInExtent=function(e,o,a,s){var l=this.getMap(),u;if(e!==l.projViewMatrix){var h=o.getCenter(xO)._sub(a[0],a[1])._multi(s);rr(Nc,h.x,h.y,0);var c=IA(Nc,Nc,l.projViewMatrix);u=c[1]<0?l.projViewMatrix:e}else u=l.projViewMatrix;return Et[0][0]=(o.xmin-a[0])*s,Et[0][1]=(o.ymin-a[1])*s,Et[1][0]=(o.xmax-a[0])*s,Et[1][1]=(o.ymax-a[1])*s,ac(u,Et)},n._isSplittedTileInExtent=function(e,o,a,s){var l=this.getMap();return Et[0][0]=(o.xmin-a[0])*s,Et[0][1]=(o.ymin-a[1])*s,Et[1][0]=(o.xmax-a[0])*s,Et[1][1]=(o.ymax-a[1])*s,ac(l.projViewMatrix,Et)},n.getEvents=function(){return{spatialreferencechange:this._onSpatialReferenceChange}},n._onSpatialReferenceChange=function(){delete this._tileConfig,delete this._defaultTileConfig,delete this._sr,delete this._srMinZoom,delete this._hasOwnSR;var e=this.getRenderer();e&&e.clear()},t}(St);li.registerJSONType("TileLayer");li.mergeOptions(pO);function wO(r,t,n){var i=Math.max(r[0]-n[0],0,n[0]-t[0]),e=Math.max(r[1]-n[1],0,n[1]-t[1]),o=Math.max(r[2]-n[2],0,n[2]-t[2]);return Math.sqrt(i*i+e*e+o*o)}var CO=`
function (exports) {
    exports.onmessage = function (msg, postResponse) {
        var url = msg.data.url;
        var fetchOptions = msg.data.fetchOptions;
        requestImageOffscreen(url, function (err, data) {
            var buffers = [];
            if (data && data.data && data.data.buffer) {
                buffers.push(data.data.buffer);
            }
            postResponse(err, data, buffers);
        }, fetchOptions);
    };

    var offCanvas, offCtx;
    function requestImageOffscreen(url, cb, fetchOptions) {
        if (!offCanvas) {
            offCanvas = new OffscreenCanvas(2, 2);
            offCtx = offCanvas.getContext('2d');
        }
        fetch(url, fetchOptions ? fetchOptions : {})
            .then(response => response.blob())
            .then(blob => createImageBitmap(blob))
            .then(bitmap => {
                var { width, height } = bitmap;
                offCanvas.width = width;
                offCanvas.height = height;
                offCtx.drawImage(bitmap, 0, 0);
                bitmap.close();
                var imgData = offCtx.getImageData(0, 0, width, height);
                // debugger
                cb(null, { width, height, data: new Uint8Array(imgData.data) });
            }).catch(err => {
                console.warn('error when loading tile:', url);
                console.warn(err);
                cb(err);
            });
    }
}`;function PO(){!ye.decodeImageInWorker||gR(ov,function(){return CO})}PO();var SO={maxCacheSize:1024},EO=new Xe(256,256),yC=function(r){Y(t,r),t.fromJSON=function(e){if(!e||e.type!=="GroupTileLayer")return null;var o=e.layers.map(function(a){return St.fromJSON(a)});return new t(e.id,o,e.options)};function t(i,e,o){var a;return a=r.call(this,i,o)||this,a.layers=e||[],a._checkChildren(),a.layerMap={},a._groupChildren=[],a}var n=t.prototype;return n.getLayers=function(){return this.layers},n.toJSON=function(){var e={type:this.getJSONType(),id:this.getId(),layers:this.layers.map(function(o){return o.toJSON()}),options:this.config()};return e},n.getTileSize=function(e){var o=this.getLayer(e);return o?o.getTileSize():EO},n.getTiles=function(e,o){for(var a=this.layers,s=[],l=0,u=0,h=a.length;u<h;u++){var c=a[u];if(!!c.options.visible){var f=c.getTiles(e,o||this);!f||f.count===0||(l+=f.count,Po(s,f.tileGrids))}}return{count:l,tileGrids:s}},n.onAdd=function(){var e=this,o=this.getMap();this.layers.forEach(function(a){e.layerMap[a.getId()]=a,a.getChildLayer&&e._groupChildren.push(a),a._bindMap(o),a.on("show hide",e._onLayerShowHide,e)}),r.prototype.onAdd.call(this)},n.onRemove=function(){var e=this;this.layers.forEach(function(o){o._doRemove(),o.off("show hide",e._onLayerShowHide,e)}),this.layerMap={},this._groupChildren=[],r.prototype.onRemove.call(this)},n.getLayer=function(e){return this.getChildLayer(e)},n.getChildLayer=function(e){var o=this.layerMap[e];if(o)return o;for(var a=0;a<this._groupChildren.length;a++){var s=this._groupChildren[a].getChildLayer(e);if(s)return s}return null},n._onLayerShowHide=function(){var e=this.getRenderer();e&&e.setToRedraw()},n.isVisible=function(){if(!r.prototype.isVisible.call(this))return!1;for(var e=this.layers,o=0,a=e.length;o<a;o++)if(e[o].isVisible())return!0;return!1},n._checkChildren=function(){var e=this,o={};this.layers.forEach(function(a){var s=a.getId();if(o[s])throw new Error("Duplicate child layer id ("+s+") in the GroupTileLayer ("+e.getId()+")");o[s]=1})},t}(li);yC.registerJSONType("GroupTileLayer");yC.mergeOptions(SO);var _C={crs:null,uppercase:!1,detectRetina:!1},MO={service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},xC=function(r){Y(t,r);function t(i,e){var o;o=r.call(this,i)||this;var a=K({},MO);for(var s in e)s in o.options||(a[s]=e[s]);o.setOptions(e),o.setZIndex(e.zIndex);var l=o.getTileSize();return a.width=l.width,a.height=l.height,o.wmsParams=a,o._wmsVersion=parseFloat(a.version),o}var n=t.prototype;return n.onAdd=function(){var e=this.getMap().getDevicePixelRatio(),o=_C.detectRetina?e:1;this.wmsParams.width*=o,this.wmsParams.height*=o;var a=this.options.crs||this.getMap().getProjection().code,s=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[s]=a,r.prototype.onAdd.call(this)},n.getTileUrl=function(e,o,a){var s=this.getSpatialReference().getResolution(a),l=this._getTileConfig(),u=l.getTilePrjExtent(e,o,s),h=u.getMax(),c=u.getMin(),f=(this._wmsVersion>=1.3&&this.wmsParams.crs==="EPSG:4326"?[c.y,c.x,h.y,h.x]:[c.x,c.y,h.x,h.y]).join(","),d=r.prototype.getTileUrl.call(this,e,o,a);return d+TO(this.wmsParams,d,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+f},n.toJSON=function(){return{type:"WMSTileLayer",id:this.getId(),options:this.config()}},t.fromJSON=function(e){return!e||e.type!=="WMSTileLayer"?null:new t(e.id,e.options)},t}(li);xC.registerJSONType("WMSTileLayer");xC.mergeOptions(_C);function TO(r,t,n){var i=[];for(var e in r)i.push(encodeURIComponent(n?e.toUpperCase():e)+"="+encodeURIComponent(r[e]));return(!t||t.indexOf("?")===-1?"?":"&")+i.join("&")}var vv=function(r){Y(t,r);function t(i,e){var o;return o=r.call(this,i,e)||this,o.options.hasOwnProperty("forceRenderOnMoving")||(o.options.forceRenderOnMoving=!1),o}var n=t.prototype;return n.drawTile=function(){},n.toJSON=function(){return{type:"CanvasTileLayer",id:this.getId(),options:this.config()}},t.fromJSON=function(e){return!e||e.type!=="CanvasTileLayer"?null:new t(e.id,e.options)},t}(li);vv.registerJSONType("CanvasTileLayer");function kO(r,t){for(var n={alpha:!0,stencil:!0,preserveDrawingBuffer:!0,antialias:!1},i=["webgl","experimental-webgl"],e=null,o=0;o<i.length;++o){try{e=r.getContext(i[o],t||n)}catch{}if(e)break}return e}function Iy(r,t,n){var i=r.createShader(t);r.shaderSource(i,n),r.compileShader(i);var e=r.getShaderParameter(i,r.COMPILE_STATUS);if(!e){var o=r.getShaderInfoLog(i);throw r.deleteShader(i),new Error("Failed to compile shader: "+o)}return i}function wC(r,t,n){var i=Iy(r,r.VERTEX_SHADER,t),e=Iy(r,r.FRAGMENT_SHADER,n);if(!i||!e)return null;var o=r.createProgram();return o?(r.attachShader(o,i),r.attachShader(o,e),r.linkProgram(o),{program:o,vertexShader:i,fragmentShader:e}):null}function CC(r,t,n){if(Array.isArray(n[0])){for(var i=Float32Array.BYTES_PER_ELEMENT,e=0,o=0;o<n.length;o++)e+=n[o][1]||0;for(var a=0,s=0;s<n.length;s++){var l=r.getAttribLocation(t,n[s][0]);if(l<0)throw new Error("Failed to get the storage location of "+n[s][0]);r.vertexAttribPointer(l,n[s][1],r[n[s][2]||"FLOAT"],!1,i*e,i*a),a+=n[s][1]||0,r.enableVertexAttribArray(l)}}else{var u=r.getAttribLocation(t,n[0]);r.vertexAttribPointer(u,n[1],r[n[2]||"FLOAT"],!1,0,0),r.enableVertexAttribArray(u)}}var Fy={vertexShader:`
        attribute vec2 a_position;

        attribute vec2 a_texCoord;

        uniform mat4 u_matrix;

        varying vec2 v_texCoord;

        void main() {
            gl_Position = u_matrix * vec4(a_position, 0., 1.);

            v_texCoord = a_texCoord;
        }
    `,fragmentShader:`
        precision mediump float;

        uniform sampler2D u_image;

        uniform float u_opacity;
        uniform float u_debug_line;

        varying vec2 v_texCoord;

        void main() {
            if (u_debug_line == 1.) {
                gl_FragColor = vec4(0., 1., 0., 1.);
            } else {
                gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;
            }
        }
    `},Uo=[0,0],zc=[0,0,0],bO=new Array(16),RO=new N(20,20),PC=function(t){var n=function(i){Y(e,i);function e(){return i.apply(this,arguments)||this}var o=e.prototype;return o.drawGLImage=function(s,l,u,h,c,f,d,g){this.gl.program!==this.program&&this.useProgram(this.program);var v=this.gl;this.loadTexture(s),zc[0]=l||0,zc[1]=u||0;var y=dv(bO);nC(y,y,zc),kd(y,y,[f,f,1]),aa(y,this.getMap().projViewMatrix,y),v.uniformMatrix4fv(this.program.u_matrix,!1,y),v.uniform1f(this.program.u_opacity,d),v.uniform1f(this.program.u_debug_line,0);var p=s.glBuffer;p&&(p.width!==h||p.height!==c)&&(this.saveImageBuffer(p),delete s.glBuffer),s.glBuffer?v.bindBuffer(v.ARRAY_BUFFER,p):s.glBuffer=this.bufferTileData(0,0,h,c),Uo[0]="a_position",Uo[1]=2,Uo[2]=s.glBuffer.type,this.enableVertexAttrib(Uo),v.drawArrays(v.TRIANGLE_STRIP,0,4),g&&this.drawDebug(y,Uo,0,0,h,c,g)},o.drawDebug=function(s,l,u,h,c,f,d){var g=this.gl;g.bindBuffer(g.ARRAY_BUFFER,this._debugBuffer),this.enableVertexAttrib(["a_position",2,"FLOAT"]),g.bufferData(g.ARRAY_BUFFER,new Float32Array([u,h,u+c,h,u+c,h-f,u,h-f,u,h]),g.DYNAMIC_DRAW),g.uniformMatrix4fv(this.program.u_matrix,!1,s),g.uniform1f(this.program.u_debug_line,1),g.drawArrays(g.LINE_STRIP,0,5);var v=this._debugInfoCanvas;if(!v){var y=this.getMap().getDevicePixelRatio()>1?2:1;v=this._debugInfoCanvas=document.createElement("canvas"),v.width=256*y,v.height=32*y;var p=v.getContext("2d");p.font="20px monospace",p.scale(y,y)}var m=v.getContext("2d");m.clearRect(0,0,v.width,v.height);var _=this.layer.options.debugOutline;Z.fillText(m,d,RO,_),this.loadTexture(v),g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,v),c=256,f=32;var x=u,C=u+c,w=h,P=h-f;g.bufferData(g.ARRAY_BUFFER,this.set8(x,w,x,P,C,w,C,P),g.DYNAMIC_DRAW),g.uniform1f(this.program.u_debug_line,0),g.drawArrays(g.TRIANGLE_STRIP,0,4)},o.bufferTileData=function(s,l,u,h,c){var f=s,d=s+u,g=l,v=l-h,y;un(f)&&un(d)&&un(g)&&un(v)?y=this.set8Int(f,g,f,v,d,g,d,v):y=this.set8(f,g,f,v,d,g,d,v);var p=this.loadImageBuffer(y,c);return p.width=u,p.height=h,p.type=y instanceof Int16Array?"SHORT":"FLOAT",p},o.drawTinImage=function(s,l,u,h,c){var f=this.gl;this.loadTexture(s),f.uniformMatrix4fv(this.program.u_matrix,!1,this.getMap().projViewMatrix),f.uniform1f(this.program.u_opacity,c),f.bindBuffer(f.ARRAY_BUFFER,this.posBuffer),this.enableVertexAttrib(["a_position",3]),f.bufferData(f.ARRAY_BUFFER,new Float32Array(l),f.DYNAMIC_DRAW),f.bindBuffer(f.ARRAY_BUFFER,this.texBuffer),this.enableVertexAttrib(["a_texCoord",2]),f.bufferData(f.ARRAY_BUFFER,new Float32Array(u),f.DYNAMIC_DRAW),f.bufferData(f.ELEMENT_ARRAY_BUFFER,new Uint16Array(h),f.DYNAMIC_DRAW),f.drawElements(f.TRIANGLES,h.length,f.UNSIGNED_SHORT,0)},o.createCanvas2=function(){this.canvas2=Z.createCanvas(this.canvas.width,this.canvas.height)},o.createGLContext=function(){this.canvas.gl&&this.canvas.gl.wrap?this.gl=this.canvas.gl.wrap():this.gl=kO(this.canvas2||this.canvas,this.layer.options.glOptions);var s=this.gl;s.clearColor(0,0,0,0),s.disable(s.DEPTH_TEST),s.enable(s.STENCIL_TEST),s.enable(s.BLEND),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA),this.program=this.createProgram(Fy.vertexShader,this.layer.options.fragmentShader||Fy.fragmentShader),this._debugBuffer=this.createBuffer(),this.useProgram(this.program),this.texBuffer=this.createBuffer(),s.bindBuffer(s.ARRAY_BUFFER,this.texBuffer),this.enableVertexAttrib(["a_texCoord",2,"UNSIGNED_BYTE"]),s.bufferData(s.ARRAY_BUFFER,new Uint8Array([0,0,0,1,1,0,1,1]),s.STATIC_DRAW),this.enableSampler("u_image"),s.activeTexture(s.TEXTURE0),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0)},o.resizeGLCanvas=function(){this.gl&&this.gl.viewport(0,0,this.canvas.width,this.canvas.height),!!this.canvas2&&(this.canvas2.width!==this.canvas.width||this.canvas2.height!==this.canvas.height)&&(this.canvas2.width=this.canvas.width,this.canvas2.height=this.canvas.height)},o.clearGLCanvas=function(){this.gl&&this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.STENCIL_BUFFER_BIT)},o.disposeImage=function(s){!s||(s.texture&&this.saveTexture(s.texture),s.glBuffer&&this.saveImageBuffer(s.glBuffer),delete s.texture,delete s.glBuffer)},o._createTexture=function(s){var l=this.gl,u=this.getTexture()||l.createTexture();return l.bindTexture(l.TEXTURE_2D,u),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.LINEAR),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.LINEAR),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.CLAMP_TO_EDGE),l.texImage2D(l.TEXTURE_2D,0,l.RGBA,l.RGBA,l.UNSIGNED_BYTE,s),un(Hm(s.width))&&un(Hm(s.width))&&l.generateMipmap(l.TEXTURE_2D),u},o.getTexture=function(){this._textures||(this._textures=[]);var s=this._textures;return s&&s.length>0?s.pop():null},o.saveTexture=function(s){this._textures.push(s)},o.loadTexture=function(s){var l=this.gl,u=s.texture;return u||(u=this._createTexture(s),s.texture=u),l.bindTexture(l.TEXTURE_2D,u),u},o.getImageBuffer=function(){this._imageBuffers||(this._imageBuffers=[]);var s=this._imageBuffers;return s&&s.length>0?s.pop():null},o.saveImageBuffer=function(s){this._imageBuffers||(this._imageBuffers=[]),this._imageBuffers.push(s)},o.loadImageBuffer=function(s,l){var u=this.gl,h=l||this.createImageBuffer();return u.bindBuffer(u.ARRAY_BUFFER,h),u.bufferData(u.ARRAY_BUFFER,s,u.STATIC_DRAW),h},o.createImageBuffer=function(){return this.getImageBuffer()||this.createBuffer()},o.removeGLCanvas=function(){var s=this.gl;if(!!s){if(this._debugBuffer&&(s.deleteBuffer(this._debugBuffer),delete this._debugBuffer),this._buffers&&(this._buffers.forEach(function(h){s.deleteBuffer(h)}),delete this._buffers),this._textures&&(this._textures.forEach(function(h){return s.deleteTexture(h)}),delete this._textures),this._debugInfoCanvas){var l=this._debugInfoCanvas.texture;l&&s.deleteTexture(l),delete this._debugInfoCanvas.texture,delete this._debugInfoCanvas}var u=s.program;s.deleteShader(u.fragmentShader),s.deleteShader(u.vertexShader),s.deleteProgram(u),delete this.gl,delete this.canvas2}},o.createBuffer=function(){var s=this.gl,l=s.createBuffer();if(!l)throw new Error("Failed to create the buffer object");return this._buffers||(this._buffers=[]),this._buffers.push(l),l},o.enableVertexAttrib=function(s){CC(this.gl,this.gl.program,s)},o.createProgram=function(s,l){for(var u=this.gl,h=wC(u,s,l),c=h.program,f=h.vertexShader,d=h.fragmentShader,g=u.getProgramParameter(c,35718),v=[],y=0;y<g;++y){var p=u.getActiveUniform(c,y);v.push(p.name)}return c.vertexShader=f,c.fragmentShader=d,this._initUniforms(c,v),c},o.useProgram=function(s){var l=this.gl;return l.useProgram(s),l.program=s,this},o.enableSampler=function(s,l){var u=this.gl,h=this._getUniform(u.program,s);return l||(l=0),u.uniform1i(h,l),h},o._initUniforms=function(s,l){for(var u=0;u<l.length;u++){var h=l[u],c=l[u],f=h.indexOf("[");f>=0&&(h=h.substring(0,f),it||(c=c.substring(0,f))),s[h]=this._getUniform(s,c)}},o._getUniform=function(s,l){var u=this.gl,h=u.getUniformLocation(s,l);if(!h)throw new Error("Failed to get the storage location of "+l);return h},e}(t);return K(n.prototype,{set8:function(){var i=ye.ie9?null:new Float32Array(8);return function(e,o,a,s,l,u,h,c){return i[0]=e,i[1]=o,i[2]=a,i[3]=s,i[4]=l,i[5]=u,i[6]=h,i[7]=c,i}}(),set8Int:function(){var i=ye.ie9?null:new Int16Array(8);return function(e,o,a,s,l,u,h,c){return i[0]=e,i[1]=o,i[2]=a,i[3]=s,i[4]=l,i[5]=u,i[6]=h,i[7]=c,i}}()}),n},AO={renderer:ye.webgl?"gl":"canvas",crossOrigin:null},OO=new N(0,0),pv=function(r){Y(t,r);function t(i,e,o){var a;return e&&!Array.isArray(e)&&!e.url&&(o=e,e=null),a=r.call(this,i,o)||this,a._images=e,a}var n=t.prototype;return n.onAdd=function(){this._prepareImages(this._images)},n.setImages=function(e){return this._images=e,this._prepareImages(e),this},n.getImages=function(){return this._images},n._prepareImages=function(e){e=e||[],Array.isArray(e)||(e=[e]);var o=this.getMap(),a=o.getGLRes();this._imageData=e.map(function(l){var u=new be(l.extent);return K({},l,{extent:u,extent2d:u.convertTo(function(h){return o.coordToPointAtRes(h,a)})})}),this._images=e;var s=this.getRenderer();s&&s.refreshImages()},t}(St);pv.mergeOptions(AO);var LO=[],SC=function(r){Y(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n.isDrawable=function(){return this.getMap().getPitch()?(console&&console.warn("ImageLayer with canvas renderer can't be pitched, use gl renderer ('renderer' : 'gl') instead."),!1):!0},n.checkResources=function(){var e=this;if(this._imageLoaded)return LO;var o=this.layer,a=o._imageData.map(function(u){return[u.url,null,null]});if(this.resources){var s=[],l=new mo;a.forEach(function(u){if(e.resources.isResourceLoaded(u)){var h=e.resources.getImage(u);l.addResource(u,h)}else s.push(u)}),this.resources.forEach(function(u,h){l.isResourceLoaded(u)||e.retireImage(h.image)}),this.resources=l,a=s}return this._imageLoaded=!0,a},n.retireImage=function(e){e.close&&e.close()},n.refreshImages=function(){this._imageLoaded=!1,this.setToRedraw()},n.draw=function(){!this.isDrawable()||(this.prepareCanvas(),this._painted=!1,this._drawImages(),this.completeRender())},n._drawImages=function(){var e=this.layer._imageData,o=this.getMap(),a=o._get2DExtentAtRes(o.getGLRes());if(e&&e.length)for(var s=0;s<e.length;s++){var l=e[s].extent2d,u=this.resources&&this.resources.getImage(e[s].url);u&&a.intersects(l)&&(this._painted=!0,this._drawImage(u,l,e[s].opacity||1))}},n._drawImage=function(e,o,a){var s=0,l=this.context;a<1&&(s=l.globalAlpha,l.globalAlpha=a);var u=this.getMap(),h=OO.set(o.xmin,o.ymax),c=u._pointAtResToContainerPoint(h,u.getGLRes()),f=c.x,d=c.y,g=u.getBearing();g&&(l.save(),l.translate(f,d),g&&l.rotate(-g*Math.PI/180),f=d=0);var v=u.getGLScale();l.drawImage(e,f,d,o.getWidth()/v,o.getHeight()/v),g&&l.restore(),s&&(l.globalAlpha=s)},n.drawOnInteracting=function(){this.draw()},t}(fs),DO=function(r){Y(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n.isDrawable=function(){return!0},n._drawImage=function(e,o,a){this.drawGLImage(e,o.xmin,o.ymax,o.getWidth(),o.getHeight(),1,a)},n.createContext=function(){this.createGLContext()},n.resizeCanvas=function(e){!this.canvas||(r.prototype.resizeCanvas.call(this,e),this.resizeGLCanvas())},n.clearCanvas=function(){!this.canvas||(r.prototype.clearCanvas.call(this),this.clearGLCanvas())},n.retireImage=function(e){e.close&&e.close(),this.disposeImage(e)},n.onRemove=function(){this.removeGLCanvas(),r.prototype.onRemove.call(this)},t}(PC(SC));pv.registerRenderer("canvas",SC);pv.registerRenderer("gl",DO);var EC=function(r){Y(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n.getPrepareParams=function(){return[]},n.getDrawParams=function(){return[]},n.onCanvasCreate=function(){this.canvas&&this.layer.options.doubleBuffer&&(this.buffer=Z.createCanvas(this.canvas.width,this.canvas.height,this.getMap().CanvasClass))},n.needToRedraw=function(){if(this.layer.options.animation)return!0;var e=this.getMap();return e.isInteracting()&&!this.layer.drawOnInteracting?!1:r.prototype.needToRedraw.call(this)},n.draw=function(){this.prepareCanvas(),this.prepareDrawContext(),this._drawLayer.apply(this,arguments)},n.drawOnInteracting=function(){this._drawLayerOnInteracting.apply(this,arguments)},n.getCanvasImage=function(){var e=r.prototype.getCanvasImage.call(this);if(e&&e.image&&this.layer.options.doubleBuffer){var o=e.image;(this.buffer.width!==o.width||this.buffer.height!==o.height)&&(this.buffer.width=o.width,this.buffer.height=o.height);var a=this.buffer.getContext("2d"),s=this.layer.doubleBuffer(a,this.context);(s===void 0||s)&&(Z.image(a,o,0,0),e.image=this.buffer)}return e},n.remove=function(){return delete this._drawContext,r.prototype.remove.call(this)},n.onZoomStart=function(e){this.layer.onZoomStart(e),r.prototype.onZoomStart.call(this,e)},n.onZooming=function(e){this.layer.onZooming(e),r.prototype.onZooming.call(this,e)},n.onZoomEnd=function(e){this.layer.onZoomEnd(e),r.prototype.onZoomEnd.call(this,e)},n.onMoveStart=function(e){this.layer.onMoveStart(e),r.prototype.onMoveStart.call(this,e)},n.onMoving=function(e){this.layer.onMoving(e),r.prototype.onMoving.call(this,e)},n.onMoveEnd=function(e){this.layer.onMoveEnd(e),r.prototype.onMoveEnd.call(this,e)},n.onResize=function(e){this.layer.onResize(e),r.prototype.onResize.call(this,e)},n.prepareDrawContext=function(){if(!this._predrawed){var e=Ny(this.getPrepareParams());this._drawContext=this.layer.prepareToDraw.apply(this.layer,[this.context].concat(e)),this._drawContext||(this._drawContext=[]),Array.isArray(this._drawContext)||(this._drawContext=[this._drawContext]),this._predrawed=!0}},n._prepareDrawParams=function(){if(!this.getMap())return null;var e=this.getViewExtent();if(e.maskExtent&&!e.extent.intersects(e.maskExtent))return this.completeRender(),null;var o=[this.context,e],a=Ny(this.getDrawParams());return o.push.apply(o,a),o.push.apply(o,this._drawContext),o},n._drawLayer=function(){var e=this._prepareDrawParams();if(!!e){for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];this.layer.draw.apply(this.layer,e.concat(a)),this.completeRender()}},n._drawLayerOnInteracting=function(){if(!!this.layer.drawOnInteracting){var e=this._prepareDrawParams();if(!!e){for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];this.layer.drawOnInteracting.apply(this.layer,e.concat(a)),this.completeRender()}}},t}(fs);function Ny(r){return r||(r=[]),Array.isArray(r)||(r=[r]),r}var IO={doubleBuffer:!1,animation:!1},mv=function(r){Y(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n.isCanvasRender=function(){return!0},n.prepareToDraw=function(){},n.draw=function(){},n.redraw=function(){return this._getRenderer()&&this._getRenderer().setToRedraw(),this},n.play=function(){return this.config("animation",!0),this},n.pause=function(){return this.config("animation",!1),this},n.isPlaying=function(){return this.options.animation},n.clearCanvas=function(){return this._getRenderer()&&this._getRenderer().clearCanvas(),this},n.requestMapToRender=function(){return this._getRenderer()&&this._getRenderer().requestMapToRender(),this},n.completeRender=function(){return this._getRenderer()&&this._getRenderer().completeRender(),this},n.onCanvasCreate=function(){return this},n.onZoomStart=function(){},n.onZooming=function(){},n.onZoomEnd=function(){},n.onMoveStart=function(){},n.onMoving=function(){},n.onMoveEnd=function(){},n.onResize=function(){},n.doubleBuffer=function(e){return e.clearRect(0,0,e.canvas.width,e.canvas.height),this},t}(St);mv.mergeOptions(IO);mv.registerRenderer("canvas",EC);var FO=new N(0,0),NO={animation:!0},MC=function(r){Y(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n.getParticles=function(){},n.draw=function(e,o){var a=this.getParticles($e());if(!a||a.length===0){var s=this._getRenderer();s&&(this._getRenderer()._shouldClear=!0);return}var l=this.getMap(),u=o.extent;o.maskExtent&&(u=o.extent.intersection(o.maskExtent)),u=u.convertTo(function(y){return l._pointToContainerPoint(y,void 0,0,FO)});for(var h=2*Math.PI,c=0,f=a.length;c<f;c++){var d=a[c].point;if(u.contains(d)){var g=a[c].color||this.options.lineColor||"#fff",v=a[c].r;e.fillStyle!==g&&(e.fillStyle=g),v<=2?e.fillRect(d.x-v/2,d.y-v/2,v,v):(e.beginPath(),e.arc(d.x,d.y,v/2,0,h),e.fill())}}this._fillCanvas(e)},n._fillCanvas=function(e){var o=e.globalCompositeOperation;e.globalCompositeOperation="destination-out";var a=this.options.trail||30;e.fillStyle="rgba(0, 0, 0, "+1/a+")",e.fillRect(0,0,e.canvas.width,e.canvas.height),e.globalCompositeOperation=o},t}(mv);MC.mergeOptions(NO);MC.registerRenderer("canvas",function(r){Y(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n.draw=function(){(!this.canvas||!this.layer.options.animation||this._shouldClear)&&(this.prepareCanvas(),this._shouldClear=!1),this.prepareDrawContext(),this._drawLayer()},n.drawOnInteracting=function(){this.draw(),this._shouldClear=!1},n.onSkipDrawOnInteracting=function(){this._shouldClear=!0},t}(EC));var qo=new mo,Yo,Jo,zO=function(r){Y(t,r);function t(i,e,o){var a;a=r.call(this,o)||this,a.target=i,i.once("remove",a.delete,Ye(Ye(a)));var s=a.options.symbol,l=s.markerLineWidth||1;return a.w=s.markerWidth+l,a.h=s.markerHeight+l,a.dx=s.markerDx||0,a.dy=s.markerDy||0,a.opacity=s.opacity||1,a.map=e,a.events=o.events,a._fetchImage(),a.addTo(e),a}var n=t.prototype;return n.getCursor=function(){return this.options.cursor||"default"},n._fetchImage=function(){var e=this.map,o=this.options.symbol,a=o.markerFile;this.url=a||Qg(o);var s=qo.getImage(this.url);if(!s){var l=this.w,u=this.h;if(a)s=new Image,s.onload=function(){var f=e.getRenderer();f&&f.setToRedraw()},s.src=this.url;else{var h=document.createElement("canvas");h.width=l,h.height=u;var c=h.getContext("2d");s=zw(c,{x:l/2,y:u/2},o,qo)}qo.addResource([this.url,l,u],s)}qo.login(this.url),this._img=s},n.setContainerPoint=function(e){this._point=e,this._point._sub(this.w/2,this.h/2)},n.getContainerPoint=function(){return this._point.add(this.w/2,this.h/2)},n.offset=function(e){this._point._add(e)},n.render=function(e){if(!this._img)return!1;var o=this.map,a=this._point,s=a.x,l=a.y,u=this.w,h=this.h;if(s+u>0&&s<o.width&&l+h>0&&l<o.height){var c=o.getDevicePixelRatio();return e.globalAlpha=this.opacity,e.drawImage(this._img,Math.round((s+this.dx)*c)+this.dx,Math.round((l+this.dy)*c),Math.round(u*c),Math.round(h*c)),!0}return!1},n.delete=function(){if(this.map){var e=this.map.getRenderer();e&&e.removeTopElement(this)}qo.logout(this.url),this._dragger&&(this._dragger.disable(),delete this._dragger),delete this.map},n.hitTest=function(e){var o=this.w,a=this.h,s=this._point.x+this.dx,l=this._point.y+this.dy;return e.x>=s&&e.x<=s+o&&e.y>=l&&e.y<=l+a},n.addTo=function(e){this.map=e;var o=e.getRenderer();o.addTopElement(this)},n.onEvent=function(e){this.fire(e.type,e)},n.mousedown=function(e){var o=e.target,a=this.options.cursor;a&&o.setCursor(a),this.onDragstart(e)},n.onDragstart=function(e){var o=e.containerPoint,a=e.target,s=a._panels.mapWrapper||a._containerDOM,l=this._dragger=new So(s);l.on("dragging",this.onDragging,this).on("mouseup",this.onDragend,this).enable(),l.type="handle",l.onMouseDown(e.domEvent),Yo=o.x,Jo=o.y,this.fire("dragstart",{containerPoint:o})},n.onDragging=function(e){if(!!this._dragger){var o=this.map,a=kt(e.domEvent,o._containerDOM),s={x:a.x-Yo,y:a.y-Jo},l=o.containerPointToCoord(new N(Yo,Jo)),u=o.containerPointToCoord(a);Yo=a.x,Jo=a.y,this.offset(s),this.fire("dragging",{containerPoint:a,coordOffset:u._sub(l)})}},n.onDragend=function(e){if(!!this._dragger){var o=this.map;o.resetCursor();var a=kt(e.domEvent,o._containerDOM),s={x:a.x-Yo,y:a.y-Jo};this.offset(s),this._dragger.disable(),delete this._dragger,this.fire("dragend",{containerPoint:a})}},t}(en(fr)),jO=function(){function r(n,i){this.target=n,n.once("remove",this.delete,this),this.map=i,this.addTo(i)}var t=r.prototype;return t.setPoints=function(i){this.points=i;var e=i.map(function(a){return a.x}),o=i.map(function(a){return a.y});this.xmin=Math.min.apply(Math,e),this.xmax=Math.max.apply(Math,e),this.ymin=Math.min.apply(Math,o),this.ymax=Math.max.apply(Math,o)},t.hitTest=function(){return!1},t.render=function(i){var e=this.map;if(this.xmax<=0||this.xmin>=e.width||this.ymax<=0||this.ymin>=e.height)return;var o=e.getDevicePixelRatio(),a=.5;function s(h){return Math.round(h)*o+a}i.lineWidth=1,i.strokeStyle="#000",i.globalAlpha=1,i.beginPath();var l=this.points;i.moveTo(s(l[0].x),s(l[0].y));for(var u=1;u<this.points.length;u++)i.lineTo(s(l[u].x),s(l[u].y));i.closePath(),i.stroke()},t.addTo=function(i){this.map=i;var e=i.getRenderer();e.addTopElement(this)},t.delete=function(){if(this.map){var i=this.map.getRenderer();i&&i.removeTopElement(this)}},r}(),HO=hs+"_edit_stage_";function jc(r,t){return{markerType:r,markerFill:"#fff",markerLineColor:"#000",markerLineWidth:2,markerWidth:10,markerHeight:10,opacity:t}}var VO={fixAspectRatio:!1,symbol:null,removeVertexOn:"contextmenu",centerHandleSymbol:jc("ellipse",1),vertexHandleSymbol:jc("square",1),newVertexHandleSymbol:jc("square",.4)},TC=function(r){Y(t,r);function t(i,e){var o;return o=r.call(this,e)||this,o._geometry=i,o._geometry?o:Ye(o)}var n=t.prototype;return n.getMap=function(){return this._geometry.getMap()},n.prepare=function(){var e=this.getMap();!e||(e.on("drawtopstart",this._refresh,this),this.options.symbol&&(this._originalSymbol=this._geometry.getSymbol(),this._geometry.setSymbol(this.options.symbol)),this._prepareEditStageLayer())},n._prepareEditStageLayer=function(){var e=this._geometry.getLayer();if(e.options.renderer==="canvas"){var o=this.getMap(),a=Co(),s=HO+a+"_shadow";if(this._shadowLayer=o.getLayer(s),!this._shadowLayer){var l=e.constructor;this._shadowLayer=new l(s),o.addLayer(this._shadowLayer)}}},n.start=function(){if(!(!this._geometry||!this._geometry.getMap()||this._geometry.editing)){this.editing=!0,this.prepare();var e=this._geometry,o,a=this._geometry.getLayer(),s=a.options.renderer==="canvas";this._geometryDraggble=e.options.draggable,s?(e.config("draggable",!1),o=e.copy(),o.setSymbol(e._getInternalSymbol()),o.copyEventListeners(e),e._getParent()&&o.copyEventListeners(e._getParent()),o._setEventTarget(e),o.setId(null).config({draggable:!1}),this._shadow=o,e.hide()):e instanceof Ge&&e.config("draggable",!0),this._switchGeometryEvents("on"),(e instanceof Ge||e instanceof Or||e instanceof Ki||e instanceof Jr)&&this._createOrRefreshOutline(),this._shadowLayer&&this._shadowLayer.bringToFront().addGeometry(o),e instanceof Ge?o&&(o.config("draggable",!0),o.on("dragend",this._onMarkerDragEnd,this)):this._createCenterHandle(),e instanceof Ge&&this.options.resize!==!1?this.createMarkerEditor():e instanceof Or?this.createCircleEditor():e instanceof Ki?this.createEllipseOrRectEditor():e instanceof Jr?this.createEllipseOrRectEditor():e instanceof To||(e instanceof We||e instanceof Ve)&&this.createPolygonEditor()}},n.stop=function(){delete this._history,delete this._historyPointer,delete this._editOutline,this._switchGeometryEvents("off");var e=this.getMap();if(!e){this.fire("remove");return}this._geometry.config("draggable",this._geometryDraggble),this._shadow&&(delete this._shadow,delete this._geometryDraggble,this._geometry.show()),this._shadowLayer&&(this._shadowLayer.remove(),delete this._shadowLayer),this._refreshHooks=[],this.options.symbol&&(this._geometry.setSymbol(this._originalSymbol),delete this._originalSymbol),this.editing=!1,this.fire("remove")},n.isEditing=function(){return O(this.editing)?!1:this.editing},n._getGeometryEvents=function(){return{symbolchange:this._onGeoSymbolChange,dragstart:this._onDragStart,dragend:this._onDragEnd,"positionchange shapechange":this._exeAndReset}},n._switchGeometryEvents=function(e){if(this._geometry){var o=this._getGeometryEvents();for(var a in o)this._geometry[e](a,o[a],this)}},n._onGeoSymbolChange=function(e){this._shadow&&this._shadow.setSymbol(e.target._getInternalSymbol())},n._onMarkerDragEnd=function(){this._update("setCoordinates",this._shadow.getCoordinates().toArray())},n._createOrRefreshOutline=function(){var e=this._geometry,o=this._editOutline;o||(this._editOutline=new jO(this,this.getMap()),this._addRefreshHook(this._createOrRefreshOutline));var a=this._editOutline.points;if(e instanceof Ge)this._editOutline.setPoints(e.getContainerExtent().toArray(a));else{var s=this.getMap(),l=e._getPrjExtent();a=l.toArray(a),a.forEach(function(u){return s._prjToContainerPoint(u,null,u)}),this._editOutline.setPoints(a)}return o},n._createCenterHandle=function(){var e=this,o=this.getMap(),a=this.options.centerHandleSymbol;this._geometry instanceof Ve&&(a.markerDx=5);var s,l=o.coordToContainerPoint(this._geometry.getCenter()),u=this.createHandle(l,{symbol:a,cursor:"move",onDown:function(){if(e._shadow){s=e._shadow.copy();var c=Cd(s._getInternalSymbol(),.5);s.setSymbol(c).addTo(e._geometry.getLayer())}},onMove:function(c){var f=c.coordOffset;s?s.translate(f):e._geometry.translate(f)},onUp:function(){var c=s||e._geometry;e._update("setCoordinates",U.toNumberArrays(c.getCoordinates())),s&&s.remove()}});this._addRefreshHook(function(){var h=e._geometry.getCenter();u.setContainerPoint(o.coordToContainerPoint(h))})},n._createHandleInstance=function(e,o){var a=this.getMap(),s=Yg(o.symbol,function(){return[a.getZoom(),{"{bearing}":a.getBearing(),"{pitch}":a.getPitch(),"{zoom}":a.getZoom()}]}),l=this.options.removeVertexOn,u=new zO(this,a,{symbol:s,cursor:o.cursor,events:l});return u.setContainerPoint(e),u},n.createHandle=function(e,o){o||(o={});var a=this._createHandleInstance(e,o),s=this;function l(c){return this._updating=!0,o.onDown&&(this._geometry.fire("handledragstart"),o.onDown.call(s,c.containerPoint,c)),!1}function u(c){return s._hideContext(),o.onMove&&(this._geometry.fire("handledragging"),o.onMove.call(s,c)),!1}function h(c){return o.onUp&&(this._geometry.fire("handledragend"),o.onUp.call(s,c)),this._updating=!1,!1}return a.on("dragstart",l,this),a.on("dragging",u,this),a.on("dragend",h,this),o.onRefresh&&(a.refresh=o.onRefresh),a},n._createResizeHandles=function(e,o,a){var s=this,l=["nw-resize","n-resize","ne-resize","w-resize","e-resize","sw-resize","s-resize","se-resize"],u=[null,"y",null,"x","x",null,"y",null],h=this._geometry,c=h instanceof Ge;function f(){if(c){var _=h.getContainerExtent();return[new N(_.xmin,_.ymin),new N((_.xmax+_.xmin)/2,_.ymin),new N(_.xmax,_.ymin),new N(_.xmin,(_.ymin+_.ymax)/2),new N(_.xmax,(_.ymin+_.ymax)/2),new N(_.xmin,_.ymax),new N((_.xmax+_.xmin)/2,_.ymax),new N(_.xmax,_.ymax)]}var x=h._getPrjExtent();return[new N(x.xmin,x.ymax),new N((x.xmax+x.xmin)/2,x.ymax),new N(x.xmax,x.ymax),new N(x.xmin,(x.ymax+x.ymin)/2),new N(x.xmax,(x.ymax+x.ymin)/2),new N(x.xmin,x.ymin),new N((x.xmax+x.xmin)/2,x.ymin),new N(x.xmax,x.ymin)]}e||(e=[]);var d=this,g=[],v={},y=this.getMap(),p=this.options.vertexHandleSymbol,m=function(){for(var x=f(),C=function(M){if(Array.isArray(e)){var R=e.some(function(D){return D===M});if(R)return"continue"}var j=x[M],A=c?j:y._prjToContainerPoint(j);if(g.length<x.length-e.length){var z=s.createHandle(A,{symbol:p,cursor:l[M],axis:u[M],onMove:function(D){return function(I){d._updating=!0,o(I.containerPoint,D),h.fire("resizing")}}(M),onUp:function(){d._updating=!1,a()}});v[M]=g.length,g.push(z)}else g[v[M]].setContainerPoint(A)},w=0;w<x.length;w++)var P=C(w)};return m(),this._addRefreshHook(m),g},n.createMarkerEditor=function(){var e=this,o=this._shadow||this._geometry,a=this.getMap();if(!o._canEdit()){console&&console.warn("A marker can't be resized with symbol:",o.getSymbol());return}this._history||this._recordHistory(p());var s=o._getInternalSymbol(),l=new N(0,0);se(s.markerDx)&&(l.x=s.markerDx),se(s.markerDy)&&(l.y=s.markerDy);var u=null,h="middle",c="middle";if($w.test(s)){var f=s.markerType;f==="pin"||f==="pie"||f==="bar"?(u=[5,6,7],h="bottom"):f==="rectangle"&&(u=[0,1,2,3,5],h="top",c="left")}else(uv.test(s)||Gw.test(s))&&(h="bottom",u=[5,6,7]);var d=[2,1,2,0,0,2,1,2],g;if(this.options.fixAspectRatio){var v=o.getSize();g=v.width/v.height}var y=this._createResizeHandles(u,function(m,_){if(u&&u.indexOf(_)>=0){var x=a.containerPointToCoordinate(m.sub(l)),C=o.getCoordinates();x.x=C.x,o.setCoordinates(x),e._updateCoordFromShadow(!0);var w=y[y.length-1-_],P=w.getContainerPoint();m=P}var S=a.coordToContainerPoint(o.getCoordinates()).add(l),M=o._getInternalSymbol(),R=m.sub(S);h==="bottom"&&m.y>S.y&&(R.y=0);var j=h==="middle"?2:1,A=c==="left"?1:2,z=Math.abs(R.x)*A,D=Math.abs(R.y)*j;g&&(z=Math.max(z,D*g),D=z/g);var I=d[_];o instanceof Pu?((g||I===0||I===2)&&(o.setWidth(z),o!==e._geometry&&e._geometry.setWidth(z)),(g||I===1||I===2)&&(o.setHeight(D),o!==e._geometry&&e._geometry.setHeight(D))):((g||I===0||I===2)&&(M.markerWidth=Math.min(z,e._geometry.options.maxMarkerWidth||1/0)),(g||I===1||I===2)&&(M.markerHeight=Math.min(D,e._geometry.options.maxMarkerHeight||1/0)),o.setSymbol(M),o!==e._geometry&&e._geometry.setSymbol(M))},function(){e._update(p())});function p(){var m=[["setCoordinates",o.getCoordinates().toArray()]];return o instanceof Pu?(m.push(["setWidth",o.getWidth()]),m.push(["setHeight",o.getHeight()])):m.push(["setSymbol",o.getSymbol()]),m}},n.createCircleEditor=function(){var e=this,o=this._shadow||this._geometry,a=this.getMap();this._history||this._recordHistory([["setCoordinates",o.getCoordinates().toArray()],["setRadius",o.getRadius()]]),this._createResizeHandles(null,function(s){var l=o.getCenter(),u=a.containerPointToCoord(s),h=new Ve([[l.x,l.y],[u.x,l.y]]),c=new Ve([[l.x,l.y],[l.x,u.y]]),f=Math.max(a.computeGeometryLength(h),a.computeGeometryLength(c));o.setRadius(f),o!==e._geometry&&e._geometry.setRadius(f)},function(){e._update("setRadius",o.getRadius())})},n.createEllipseOrRectEditor=function(){var e=this,o=[2,1,2,0,0,2,1,2],a=this._shadow||this._geometry;this._history||this._recordHistory(c());var s=this.getMap(),l=this._geometry instanceof Ki,u;this.options.fixAspectRatio&&(u=a.getWidth()/a.getHeight());var h=this._createResizeHandles(null,function(f,d){var g=l?1:2,v,y,p,m=h[d],_=m.getContainerPoint(),x=o[d];if(l){var C=h[7-d],w=C.getContainerPoint();v=_.sub(w);var P=v.abs();y=s.pixelToDistance(P.x,0),p=s.pixelToDistance(0,P.y);var S=a.getSize(),M=a.getCoordinates(),R=a.getWidth(),j=a.getHeight(),A=s.containerPointToCoord(f),z=s.containerPointToCoord(w),D=new Ve([[z.x,z.y],[A.x,z.y]]),I=new Ve([[z.x,z.y],[z.x,A.y]]);if(y=s.computeGeometryLength(D),p=s.computeGeometryLength(I),x===0)if(u&&(P.y=P.x/u,S.height=Math.abs(P.y),p=y/u),_.y=w.y-S.height/2,A.y=M.y,d===4)A.x=Math.min(A.x,M.x);else{var B=s.locate(M,R,0);A.x=s.locate(new U(B.x,A.y),-y,0).x}else if(x===1)u&&(P.x=P.y*u,S.width=Math.abs(P.x),y=p*u),_.x=w.x-S.width/2,A.x=M.x,A.y=Math.max(A.y,z.y);else{if(u&&(y>p*u?(p=y/u,_.y=w.y+P.x*ot(v.y)/u):(y=p*u,_.x=w.x+P.y*ot(v.x)*u)),d===0||d===5){var W=d===0?s.locate(M,R,0):s.locate(M,R,-j);A.x=s.locate(new U(W.x,A.y),-y,0).x}else A.x=Math.min(A.x,z.x);A.y=Math.max(A.y,z.y)}a.setCoordinates(A),e._updateCoordFromShadow(!0)}else{var E=a.getCenter(),T=s.containerPointToCoord(_),L=new Ve([[E.x,E.y],[T.x,E.y]]),V=new Ve([[E.x,E.y],[E.x,T.y]]);y=s.computeGeometryLength(L),p=s.computeGeometryLength(V),u&&(y=Math.max(y,p*u),p=y/u)}(u||x===0||x===2)&&(a.setWidth(y*g),a!==e._geometry&&e._geometry.setWidth(y*g)),(u||x===1||x===2)&&(a.setHeight(p*g),a!==e._geometry&&e._geometry.setHeight(p*g))},function(){e._update(c())});function c(){return[["setCoordinates",a.getCoordinates().toArray()],["setWidth",a.getWidth()],["setHeight",a.getHeight()]]}},n.createPolygonEditor=function(){var e=this.getMap(),o=this._shadow||this._geometry,a=this;this._history||this._recordHistory("setCoordinates",U.toNumberArrays(o.getCoordinates()));var s=o instanceof We?3:2,l="maptalks--editor-vertex-index",u={0:[]},h={0:[]};function c(D){if(D===void 0&&(D=0),o instanceof We){var I=o.getCoordinates()[D]||[];return I.slice(0,I.length-1)}else return o.getCoordinates()}function f(D){return D===void 0&&(D=0),D===0?o._getPrjCoordinates():o._getPrjHoles()[D-1]}function d(){for(var D in u){for(var I=u[D].length-1;I>=0;I--)u[D][I][l]=I;for(var B=h[D].length-1;B>=0;B--)h[D][B][l]=B}a._updateCoordFromShadow()}function g(D){a._updating=!0;var I=D.target,B=I[l],W=se(I._ringIndex)?I._ringIndex:0,E=f(W);if(!(E.length<=s)){var T=o instanceof Ve&&(B===0||B===E.length-1);E.splice(B,1),W>0?o._prjHoles[W-1]=E:o._setPrjCoordinates(E),o._updateCache(),u[W].splice(B,1)[0].delete(),B<h[W].length&&h[W].splice(B,1)[0].delete();var L;B===0?L=h[W].length-1:L=B-1,h[W].splice(L,1)[0].delete(),T||h[W].splice(L,0,x.call(a,L,W)),d(),a._updating=!1}}function v(D,I,B){B===void 0&&(B=0);var W=f(B),E=e._containerPointToPrj(D.sub(p())),T=W[I];T.x=E.x,T.y=E.y,o._updateCache(),o.onShapeChanged(),a._updateCoordFromShadow(!0);var L;I===0?L=h[B].length-1:L=I-1,h[B][I]&&h[B][I].refresh(),h[B][L]&&h[B][L].refresh()}var y=new N(0,0);function p(){var D=o._getCompiledSymbol();return y.x=D.lineDx||0,y.y=D.lineDy||0,y}function m(D,I){I===void 0&&(I=0);var B=c(I)[D],W=a.createHandle(e.coordToContainerPoint(B)._add(p()),{symbol:a.options.vertexHandleSymbol,cursor:"pointer",axis:null,onMove:function(){v(W.getContainerPoint(),W[l],I)},onRefresh:function(){B=c(I)[W[l]];var T=e.coordToContainerPoint(B);W.setContainerPoint(T._add(p()))},onUp:function(){a._updateCoordFromShadow()},onDown:function(T,L){L&&L.domEvent&&L.domEvent.button}});return W[l]=D,W._ringIndex=I,W.on(a.options.removeVertexOn,g),W}var _=!1;function x(D,I){I===void 0&&(I=0);var B=c(I),W;D+1>=B.length?W=B[0]:W=B[D+1];var E=B[D].add(W).multi(1/2),T=a.createHandle(E,{symbol:a.options.newVertexHandleSymbol,cursor:"pointer",axis:null,onDown:function(V,F){if(!(F&&F.domEvent&&F.domEvent.button===2)){var H=f(I),$=T[l],G=T.getContainerPoint(),b=e._containerPointToPrj(G);H.splice($+1,0,b),I>0?o._prjHoles[I-1]=H:o._setPrjCoordinates(H),o._updateCache(),T.opacity=1,h[I].splice($,0,x.call(a,$,I),x.call(a,$+1,I)),_=!0}},onMove:function(){v(T.getContainerPoint(),T[l]+1,I)},onUp:function(V){if(V&&V.domEvent&&V.domEvent.button===2){_=!1;return}var F=T[l];dd(T,h[I]),T.delete(),u[I].splice(F+1,0,m.call(a,F+1,I)),d(),a._updateCoordFromShadow(),_=!1},onRefresh:function(V){B=c(V);var F=T[l],H;F===B.length-1?H=0:H=F+1;var $=B[F].add(B[H]).multi(1/2),G=e.coordToContainerPoint($);T.setContainerPoint(G._add(p()))}});return T[l]=D,T}if(o instanceof We)for(var C=o.getHoles().length+1,w=0;w<C;w++){u[w]=[],h[w]=[];for(var P=c(w),S=0,M=P.length;S<M;S++)u[w].push(m.call(this,S,w)),S<M-1&&h[w].push(x.call(this,S,w));h[w].push(x.call(this,P.length-1,w))}else for(var R=0,j=c(R),A=0,z=j.length;A<z;A++)u[R].push(m.call(this,A,R)),A<z-1&&h[R].push(x.call(this,A,R));this._addRefreshHook(function(){if(!_){for(var D in h)for(var I=h[D].length-1;I>=0;I--)h[D][I].refresh(D);for(var B in u)for(var W=u[B].length-1;W>=0;W--)u[B][W].refresh(B)}})},n._refresh=function(){if(this._refreshHooks)for(var e=this._refreshHooks.length-1;e>=0;e--)this._refreshHooks[e].call(this)},n._hideContext=function(){this._geometry&&(this._geometry.closeMenu(),this._geometry.closeInfoWindow())},n._addRefreshHook=function(e){!e||(this._refreshHooks||(this._refreshHooks=[]),this._refreshHooks.push(e))},n._update=function(e){for(var o=arguments.length,a=new Array(o>1?o-1:0),s=1;s<o;s++)a[s-1]=arguments[s];this._exeHistory([e,a]),this._recordHistory.apply(this,[e].concat(a))},n._updateCoordFromShadow=function(e){var o=this._shadow||this._geometry,a=o.getCoordinates(),s=this._geometry,l=this._updating;this._updating=!0,s.setCoordinates(a),e||this._recordHistory("setCoordinates",U.toNumberArrays(s.getCoordinates())),this._updating=l},n._recordHistory=function(e){this._history||(this._history=[],this._historyPointer=0);for(var o=arguments.length,a=new Array(o>1?o-1:0),s=1;s<o;s++)a[s-1]=arguments[s];if(this._history.length){var l=this._history[this._history.length-1];if(l[0]===e&&JSON.stringify(l[1])===JSON.stringify(a))return}this._historyPointer<this._history.length-1&&this._history.splice(this._historyPointer+1),this._history.push([e,a]),this._historyPointer=this._history.length-1,this._geometry.fire("editrecord")},n.cancel=function(){if(!this._history||this._historyPointer===0)return this;this._historyPointer=0;var e=this._history[0];return this._exeAndReset(e),this},n.undo=function(){if(!this._history||this._historyPointer===0)return this;var e=this._history[--this._historyPointer];return this._exeAndReset(e),this},n.redo=function(){if(!this._history||this._historyPointer===this._history.length-1)return this;var e=this._history[++this._historyPointer];return this._exeAndReset(e),this},n._exeAndReset=function(e){if(!this._updating){this._exeHistory(e);var o=this._history,a=this._historyPointer;this.stop(),this._history=o,this._historyPointer=a,this.start()}},n._onDragStart=function(){this._updating=!0},n._onDragEnd=function(){this._updating=!1},n._exeHistory=function(e){if(!!Array.isArray(e)){var o=this._updating;this._updating=!0;var a=this._shadow||this._geometry,s=this._geometry;Array.isArray(e[0])?e[0].forEach(function(l){var u=l[0],h=l.slice(1);a[u].apply(a,h),a!==s&&s[u].apply(s,h)}):(a[e[0]].apply(a,e[1]),a!==s&&s[e[0]].apply(s,e[1])),this._updating=o}},t}(en(fr));TC.mergeOptions(VO);var $O={startEditText:function(){return this.getMap()?(this.hide(),this.endEditText(),this._prepareEditor(),this._fireEvent("edittextstart"),this):this},endEditText:function(){if(this._textEditor){var t=this._textEditor.innerHTML;t=t.replace(/<p>/ig,"").replace(/<\/p>/ig,"<br/>"),this._textEditor.innerHTML=t;var n=this._textEditor.innerText.replace(/[\r\n]+$/gi,"");this.setContent(n),Ke(this._textEditor,"mousedown dblclick",qt),this.getMap().off("mousedown",this.endEditText,this),this._editUIMarker.remove(),delete this._editUIMarker,this._textEditor.onkeyup=null,delete this._textEditor,this.show(),this._fireEvent("edittextend")}return this},isEditingText:function(){return!!this._textEditor},getTextEditor:function(){return this._editUIMarker},_prepareEditor:function(){var t=this.getMap(),n=this._createEditor();this._textEditor=n,t.on("mousedown",this.endEditText,this);var i=this._getEditorOffset();this._editUIMarker=new gv(this.getCoordinates(),{animation:null,content:n,dx:i.dx,dy:i.dy}).addTo(t),this._setCursorToLast(this._textEditor)},_getEditorOffset:function(){var t=this._getInternalSymbol()||{},n=0,i=0,e=t.textHorizontalAlignment;return e==="middle"||O(e)?(n=(t.textDx||0)-2,i=(t.textDy||0)-2):(n=(t.markerDx||0)-2,i=(t.markerDy||0)-2),{dx:n,dy:i}},_createEditor:function(){var t=this.getContent(),n=this.getSize(),i=this._getInternalSymbol()||{},e=n.width,o=i.textFill||"#000000",a=i.textSize||12,s=n.height,l=i.markerLineColor||"#000",u=i.markerFill||"#3398CC",h=i.textLineSpacing||0,c=le("div");return c.contentEditable=!0,c.style.cssText="background:"+u+"; border:1px solid "+l+`;
            color:`+o+";font-size:"+a+"px;width:"+(e-2)+"px;height:"+(s-2)+`px;margin: auto;
            line-height:`+(a+h)+`px;outline: 0; padding:0; margin:0;word-wrap: break-word;
            overflow: hidden;-webkit-user-modify: read-write-plaintext-only;`,c.innerText=t,Be(c,"mousedown dblclick",qt),c.onkeyup=function(f){var d=c.style.height||0;f.keyCode===13&&(c.style.height=parseInt(d)+a/2+"px")},c},_setCursorToLast:function(t){var n;window.getSelection?(t.focus(),n=window.getSelection(),n.selectAllChildren(t),n.collapseToEnd()):document.selection&&(n=document.selection.createRange(),n.moveToElementText(t),n.collapse(!1),n.select())}};fv.include($O);_e.include({animate:function(t,n,i){var e=this;this._animPlayer&&this._animPlayer.finish(),Re(n)&&(i=n),n||(n={});var o=this.getMap(),a=this._getProjection(),s=this._prepareAnimationStyles(t),l,u=n.focus;if(delete this._animationStarted,o){var h=o._getRenderer(),c=function(g){h.callInNextFrame(g)};n.framer=c}var f=ft.animate(s,n,function(d){if(o&&o.isRemoved()){f.finish();return}o&&!e._animationStarted&&u&&o.onMoveStart();var g=d.styles;for(var v in g)if(v!=="symbol"&&v!=="translate"&&g.hasOwnProperty(v)){var y="set"+v[0].toUpperCase()+v.slice(1);e[y](g[v])}var p=g.translate;if(p){var m=p;l&&(m=p.sub(l)),l=p,e.translate(m)}var _=g.symbol;if(_){var x=e.getSymbol()||{};e.setSymbol(Mr(x,_))}if(o&&u){var C=a.project(e.getCenter());o._setPrjCenter(C);var w=o._parseEventFromCoord(a.unproject(C));f.playState!=="running"?o.onMoveEnd(w):o.onMoving(w)}e._fireAnimateEvent(f.playState),i&&i(d)},this);return this._animPlayer=f,this._animPlayer.play()},_prepareAnimationStyles:function(t){var n=this._getInternalSymbol(),i={};for(var e in t)if(t.hasOwnProperty(e)){var o=t[e];if(e!=="translate"&&e!=="symbol"){var a="get"+e[0].toUpperCase()+e.substring(1),s=this[a]();i[e]=[s,o]}else if(e==="symbol"){var l=void 0;if(Array.isArray(t.symbol)){if(!Array.isArray(n))throw new Error("geometry'symbol isn't a composite symbol, while the symbol in styles is.");l=[];for(var u=t.symbol,h=0;h<u.length;h++){if(!u[h]){l.push(null);continue}var c={};for(var f in u[h])u[h].hasOwnProperty(f)&&(c[f]=[n[h][f],u[h][f]]);l.push(c)}}else{if(Array.isArray(n))throw new Error("geometry'symbol is a composite symbol, while the symbol in styles isn't.");l={};for(var d in o)o.hasOwnProperty(d)&&(l[d]=[n[d],o[d]])}i.symbol=l}else e==="translate"&&(i.translate=new U(o))}return i},_fireAnimateEvent:function(t){t==="finished"?(delete this._animationStarted,this._fireEvent("animateend")):t==="running"&&(this._animationStarted?this._fireEvent("animating"):(this._fireEvent("animatestart"),this._animationStarted=!0))}});var Hc=hs+"_drag_stage",zy=ye.touch?"touchstart mousedown":"mousedown",GO=function(r){Y(t,r);function t(i){return r.call(this,i)||this}var n=t.prototype;return n.addHooks=function(){this.target.on(zy,this._startDrag,this)},n.removeHooks=function(){this._endDrag(),this.target.off(zy,this._startDrag,this),delete this.container},n._prepareDragHandler=function(){this._dragHandler=new So(this.container),this._dragHandler.on("dragging",this._dragging,this).on("mouseup",this._endDrag,this).enable()},n._prepareShadow=function(){var e=this,o=this.target,a=o.getLayer().options.renderer==="canvas";if(!!a){this._prepareDragStageLayer(),this._shadow&&this._shadow.remove();var s=this._shadow=o.copy();if(s.getGeometries){var l=s.getGeometries(),u=o.getGeometries();l.forEach(function(h,c){e._updateShadowSymbol(h,u[c])})}else this._updateShadowSymbol(s,o);s.setId(null),this._prepareShadowConnectors()}},n._updateShadowSymbol=function(e,o){if(e.setSymbol(o._getInternalSymbol()),o.options.dragShadow){var a=Cd(e._getInternalSymbol(),.5);e.setSymbol(a)}},n._prepareShadowConnectors=function(){var e=this.target,o=this._shadow,a=this._dragStageLayer._getRenderer().resources,s=[];if(Su._hasConnectors(e))for(var l=Su._getConnectors(e),u=0,h=l.length;u<h;u++){var c=l[u],f=c.config(),d=c._getInternalSymbol();f.symbol=Cd(d,.5);var g=void 0;c.getConnectSource()===e?g=new c.constructor(o,c.getConnectTarget(),f):g=new c.constructor(c.getConnectSource(),o,f),s.push(g),c.getLayer()&&c.getLayer()._getRenderer()&&a.merge(c.getLayer()._getRenderer().resources)}this._shadowConnectors=s,s.push(o),this._dragStageLayer.bringToFront().addGeometry(s)},n._onTargetUpdated=function(){this._shadow&&this._shadow.setSymbol(this.target._getSymbol())},n._prepareDragStageLayer=function(){var e=this.target.getMap(),o=this.target.getLayer();this._dragStageLayer=e.getLayer(Hc),this._dragStageLayer||(this._dragStageLayer=new Xr(Hc,{enableAltitude:o.options.enableAltitude,altitudeProperty:o.options.altitudeProperty}),e.addLayer(this._dragStageLayer));var a=new mo;a.merge(o._getRenderer().resources),this._dragStageLayer._getRenderer().resources=a},n._startDrag=function(e){var o=this.target.getMap();if(!!o){var a=this.target._getParent();if(!a&&!this.isDragging()){var s=e.domEvent;s.touches&&s.touches.length>1||s.button===2||(this.container=o._panels.mapWrapper||o._containerDOM,this.target.on("click",this._endDrag,this),this._lastCoord=this._correctCoord(e.coordinate),this._lastPoint=e.containerPoint,this._prepareDragHandler(),this._dragHandler.onMouseDown(e.domEvent),Be(this.container,"mouseleave",this._endDrag,this),this._startParam=e,this._moved=!1)}}},n._dragging=function(e){var o=this.target,a=o.getMap(),s=a._parseEvent(e.domEvent),l=s.domEvent;if(!(l.touches&&l.touches.length>1)){if(!this._moved){this._moved=!0,o.on("symbolchange",this._onTargetUpdated,this),this._isDragging=!0,this._prepareShadow(),this._shadow&&(o.options.dragShadow||o.hide(),this._shadow._fireEvent("dragstart",s)),this.target._fireEvent("dragstart",this._startParam||s),delete this._startParam;return}var u=this._shadow||o,h=u.options.dragOnAxis,c=u.options.dragOnScreenAxis,f=s.containerPoint,d=s.coordinate;this._lastPoint=this._lastPoint||f,this._lastCoord=this._lastCoord||d,c?(h==="x"?f.y=this._lastPoint.y:h==="y"&&(f.x=this._lastPoint.x),d=a.containerPointToCoord(f)):d=this._correctCoord(d);var g=f.sub(this._lastPoint),v=d.sub(this._lastCoord);c||(h==="x"?g.y=v.y=0:h==="y"&&(g.x=v.x=0)),this._lastPoint=f,this._lastCoord=d,u.translate(v),u!==o&&!o.options.dragShadow&&o.translate(v),s.coordOffset=v,s.pointOffset=g,u._fireEvent("dragging",s),u!==o&&o._fireEvent("dragging",s)}},n._endDrag=function(e){if(this._dragHandler&&(this._dragHandler.disable(),delete this._dragHandler),this.container&&Ke(this.container,"mouseleave",this._endDrag),!!this.target){var o=this.target;o.off("click",this._endDrag,this),o.off("symbolchange",this._onTargetUpdated,this),delete this._lastCoord,delete this._lastPoint,this._isDragging=!1;var a=o.getMap();if(this.enabled()&&a){var s=a._parseEvent(e?e.domEvent:null);this._updateTargetAndRemoveShadow(s),this._moved&&o._fireEvent("dragend",s)}}},n.isDragging=function(){return!!this._isDragging},n._updateTargetAndRemoveShadow=function(e){if(!!this._shadow){var o=this.target,a=o.getMap();o.options.dragShadow||o.show();var s=this._shadow;if(s){if(o.options.dragShadow)if(o.getGeometries){var l=s.getGeometries(),u=o.getGeometries();l.forEach(function(h,c){u[c].setCoordinates(l[c].getCoordinates())})}else o.setCoordinates(s.getCoordinates());s._fireEvent("dragend",e),s.remove(),delete this._shadow}this._shadowConnectors&&(a.getLayer(Hc).removeGeometry(this._shadowConnectors),delete this._shadowConnectors),this._dragStageLayer&&(this._dragStageLayer._getRenderer().resources=new mo,this._dragStageLayer.remove())}},n._correctCoord=function(e){var o=this.target.getMap();if(!o.getPitch())return e;var a=this.target;if(!a.getMinAltitude())return e;var s=(a.getMinAltitude()+a.getMaxAltitude())/2;return o.locateByPoint(e,0,-s)},t}(wr);_e.mergeOptions({draggable:!1,dragShadow:!0,dragOnAxis:null,dragOnScreenAxis:!1});_e.addInitHook("addHandler","draggable",GO);_e.include({isDragging:function(){return this._getParent()?this._getParent().isDragging():this.draggable?this.draggable.isDragging():!1}});_e.include({startEdit:function(t){return!this.getMap()||!this.options.editable?this:(this.endEdit(),this._editor=new TC(this,t),this._editor.start(),this.fire("editstart"),this)},endEdit:function(){return this._editor&&(this._editor.stop(),delete this._editor,this.fire("editend")),this},redoEdit:function(){return this.isEditing()?(this._editor.redo(),this.fire("redoedit"),this):this},undoEdit:function(){return this.isEditing()?(this._editor.undo(),this.fire("undoedit"),this):this},cancelEdit:function(){return this.isEditing()?(this._editor.cancel(),this.fire("canceledit"),this):this},isEditing:function(){return this._editor?this._editor.isEditing():!1}});_e.include({_onEvent:function(t,n){if(!!this.getMap()){var i=n||this._getEventTypeToFire(t);i==="contextmenu"&&this.listens("contextmenu")&&(qt(t),ar(t));var e=this._getEventParams(t);this._fireEvent(i,e)}},_getEventTypeToFire:function(t){return t.type},_getEventParams:function(t){var n=this.getMap(),i={domEvent:t},e=t.touches&&t.touches.length>0?t.touches[0]:t.changedTouches&&t.changedTouches.length>0?t.changedTouches[0]:t;if(e){var o=kt(e,n._containerDOM);i.coordinate=n.containerPointToCoordinate(o),i.containerPoint=o,i.viewPoint=n.containerPointToViewPoint(o),i.pont2d=n._containerPointToPoint(o)}return i}});_e.include({setInfoWindow:function(t){return this.removeInfoWindow(),t instanceof bd?(this._infoWindow=t,this._infoWinOptions=K({},this._infoWindow.options),this._infoWindow.addTo(this),this):(this._infoWinOptions=K({},t),this._infoWindow?this._infoWindow.setOptions(t):this.getMap()&&this._bindInfoWindow(),this)},getInfoWindow:function(){return this._infoWindow?this._infoWindow:null},openInfoWindow:function(t){return this.getMap()?(t||(t=this.getCenter()),this._infoWindow?this._infoWindow.show(t):this._infoWinOptions&&this.getMap()&&(this._bindInfoWindow(),this._infoWindow.show(t)),this):this},closeInfoWindow:function(){return this._infoWindow&&this._infoWindow.hide(),this},removeInfoWindow:function(){return this._unbindInfoWindow(),delete this._infoWinOptions,delete this._infoWindow,this},_bindInfoWindow:function(){var t=this._infoWinOptions;return t?(this._infoWindow=new bd(t),this._infoWindow.addTo(this),this):this},_unbindInfoWindow:function(){return this._infoWindow&&(this.closeInfoWindow(),this._infoWindow.remove(),delete this._infoWindow),this}});var BO=new N(0,0),WO=new N(0,0),jy=new N(0,0),Hy=new N(0,0),ZO=[],UO=function(r){Y(t,r);function t(){return r.call(this,ov)||this}var n=t.prototype;return n.checkUrl=function(e){return!e||!pe(e)?e:U1(e)},n.fetchImage=function(e,o,a,s){e=this.checkUrl(e);var l={url:e,fetchOptions:s};this.send(l,ZO,a,o)},t}(kw),qO=new Image,yv=function(r){Y(t,r);function t(i){var e;return e=r.call(this,i)||this,e.tilesInView={},e.tilesLoading={},e._parentTiles=[],e._childTiles=[],e.tileCache=new Qb(i.options.maxCacheSize,e.deleteTile.bind(Ye(Ye(e)))),ye.decodeImageInWorker&&(e._tileImageWorkerConn=new UO),e}var n=t.prototype;return n.getCurrentTileZoom=function(){return this._tileZoom},n.draw=function(){var e=this.getMap();if(!!this.isDrawable()){var o=this.prepareCanvas();if(o&&!o.intersects(this.canvasExtent2D)){this.completeRender();return}var a=this.layer,s=a.getTiles().tileGrids;if(!s||!s.length){this.completeRender();return}var l=s.reduce(function(F,H){return F+(H&&H.tiles&&H.tiles.length||0)},0);l>=this.tileCache.max/2&&this.tileCache.setMaxSize(l*2+1);var u=0,h=!1,c={},f=[],d=[],g={},v=[],y={},p=[],m={},_={},x=this._markTiles(),C=this._getLoadLimit(),w=s.length;this._tileZoom=s[0].zoom;for(var P=0;P<w;P++)for(var S=s[P],M=S.tiles,R=this._generatePlaceHolder(S.zoom),j=0,A=M.length;j<A;j++){var z=M[j],D=z.id,I=!1;if(this._isLoadingTile(D))I=h=!0,this.tilesLoading[D].current=!0;else{var B=this._getCachedTile(D);if(B)B.image&&this.getTileOpacity(B.image)<1&&(I=h=!0),f.push(B);else{I=h=!0;var W=C&&u+x[0]>C;if(!W&&(!e.isInteracting()||e.isMoving()||e.isRotating())){u++;var E=D;_[E]=z}}}if(!!I&&!c[D]){c[D]=1,R&&!m[D]&&(z.cache=!1,p.push({image:R,info:z}),m[D]=1);var T=this._findParentTile(z);if(T){var L=T.info.id;g[L]===void 0&&(g[L]=d.length,d.push(T))}else if(!d.length){var V=this._findChildTiles(z);V.length&&V.forEach(function(F){y[F.info.id]||(v.push(F),y[F.info.id]=1)})}}}d.length&&(v.length=0,this._childTiles.length=0),this._drawTiles(f,d,v,p),u?this.loadTileQueue(_):h||(!e.isAnimating()&&(this._parentTiles.length||this._childTiles.length)&&(this._parentTiles=[],this._childTiles=[],this.setToRedraw()),this.completeRender()),this._retireTiles()}},n.isTileCachedOrLoading=function(e){return this.tileCache.get(e)||this.tilesInView[e]||this.tilesLoading[e]},n._drawTiles=function(e,o,a,s){var l=this;o.length&&(o.sort(function(v,y){return Math.abs(y.info.z-l._tileZoom)-Math.abs(v.info.z-l._tileZoom)}),this._parentTiles=o),a.length&&(this._childTiles=a);var u={tiles:e,parentTiles:this._parentTiles,childTiles:this._childTiles};this.onDrawTileStart(u),this._parentTiles.forEach(function(v){return l._drawTileAndCache(v)}),this._childTiles.forEach(function(v){return l._drawTile(v.info,v.image)}),s.forEach(function(v){return l._drawTile(v.info,v.image)});var h=this.layer,c=this.getMap();if(!h.options.cascadeTiles||c.getPitch()<=c.options.cascadePitches[0])e.forEach(function(v){return l._drawTileAndCache(v)});else{this.writeZoomStencil();for(var f=!1,d=0,g=e.length;d<g;d++)e[d].info.z!==this._tileZoom?f?this.resumeZoomStencilTest():(this.startZoomStencilTest(),f=!0):f&&this.pauseZoomStencilTest(),this._drawTileAndCache(e[d]);this.endZoomStencilTest()}this.onDrawTileEnd(u)},n.writeZoomStencil=function(){},n.startZoomStencilTest=function(){},n.endZoomStencilTest=function(){},n.pauseZoomStencilTest=function(){},n.resumeZoomStencilTest=function(){},n.onDrawTileStart=function(){},n.onDrawTileEnd=function(){},n._drawTile=function(e,o){o&&this.drawTile(e,o)},n._drawTileAndCache=function(e){e.current=!0,this.tilesInView[e.info.id]=e,this._drawTile(e.info,e.image),this.tileCache.add(e.info.id,e)},n.drawOnInteracting=function(){this.draw()},n.needToRedraw=function(){var e=this.getMap();return e.getPitch()?r.prototype.needToRedraw.call(this):e.isRotating()||e.isZooming()?!0:e.isMoving()?!!this.layer.options.forceRenderOnMoving:r.prototype.needToRedraw.call(this)},n.hitDetect=function(){return!1},n._getLoadLimit=function(){return this.getMap().isInteracting()?this.layer.options.loadingLimitOnInteracting:0},n.isDrawable=function(){return this.getMap().getPitch()?(console&&console.warn("TileLayer with canvas renderer can't be pitched, use gl renderer ('renderer' : 'gl') instead."),this.clear(),!1):!0},n.clear=function(){this._retireTiles(!0),this.tileCache.reset(),this.tilesInView={},this.tilesLoading={},this._parentTiles=[],this._childTiles=[],r.prototype.clear.call(this)},n._isLoadingTile=function(e){return!!this.tilesLoading[e]},n.clipCanvas=function(e){return r.prototype.clipCanvas.call(this,e)},n._clipByPitch=function(e){var o=this.getMap();if(o.getPitch()<=o.options.maxVisualPitch||!this.layer.options.clipByPitch)return!1;var a=o.getContainerExtent(),s=o.getDevicePixelRatio();return e.save(),e.strokeStyle="rgba(0, 0, 0, 0)",e.beginPath(),e.rect(0,Math.ceil(a.ymin)*s,Math.ceil(a.getWidth())*s,Math.ceil(a.getHeight())*s),e.stroke(),e.clip(),!0},n.loadTileQueue=function(e){for(var o in e)if(e.hasOwnProperty(o)){var a=e[o],s=this.loadTile(a);s.loadTime===void 0&&(this.tilesLoading[a.id]={image:s,current:!0,info:a})}},n.loadTile=function(e){var o;if(this._tileImageWorkerConn&&this.loadTileImage===this.constructor.prototype.loadTileImage)o={},this._fetchImage(o,e);else{var a=this.layer.getTileSize(e.layer);o=new Image,o.width=a.width,o.height=a.height,o.onload=this.onTileLoad.bind(this,o,e),o.onerror=this.onTileError.bind(this,o,e),this.loadTileImage(o,e.url)}return o},n._fetchImage=function(e,o){var a=this;if(e instanceof Image)e.src=o.url;else{var s=o.x,l=o.y,u=Math.abs(s+l)%this._tileImageWorkerConn.workers.length;this._tileImageWorkerConn.fetchImage(o.url,u,function(h,c){h?a.onTileError(e,o,h):Z1(c,function(f){a.onTileLoad(f,o)})},this.layer.options.fetchOptions||{headers:{accept:"image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8"}})}},n.loadTileImage=function(e,o){var a=this.layer.options.crossOrigin;return O(a)||(e.crossOrigin=a),du(e,[o])},n.abortTileLoading=function(e){!e||(e.onload=Vy,e.onerror=Vy,e.src=G1)},n.onTileLoad=function(e,o){if(!!this.layer){var a=o.id;if(!!this.tilesInView){var s={tile:o,tileImage:e};this.layer.fire("tileload",s),e=s.tileImage,e.loadTime=$e(),delete this.tilesLoading[a],this._addTileToCache(o,e),this.setToRedraw()}}},n.onTileError=function(e,o){if(!!this.layer){e.onerrorTick=e.onerrorTick||0;var a=this.layer.options.tileRetryCount;if(a>e.onerrorTick){e.onerrorTick++,this._fetchImage(e,o);return}var s=this.layer.options.errorUrl;if(s)if(e instanceof Image&&e.src!==s){e.src=s;return}else e=new Image,e.src=s;e=e instanceof Image?e:qO,this.abortTileLoading(e,o),e.loadTime=0,delete this.tilesLoading[o.id],this._addTileToCache(o,e),this.setToRedraw(),this.layer.fire("tileerror",{tile:o})}},n.drawTile=function(e,o){if(!(!o||!this.getMap())){var a=e.extent2d,s=e.offset,l=BO.set(a.xmin-s[0],a.ymax-s[1]),u=e.z,h=e.id,c=this.getMap(),f=c.getZoom(),d=this.context,g=c._pointToContainerPoint(l,u,0,WO),v=c.getBearing(),y=v||f!==u,p=this.getTileOpacity(o),m=d.globalAlpha;p<1&&(d.globalAlpha=p,this.setToRedraw()),y||g._round();var _=g.x,x=g.y,C=e.extent2d.xmax-e.extent2d.xmin,w=e.extent2d.ymax-e.extent2d.ymin;if(y){if(d.save(),d.translate(_,x),v&&(d.rotate(-v*Math.PI/180),C+=.1,w+=.1),f!==u){var P=c._getResolution(u)/c._getResolution();d.scale(P,P)}_=x=0}if(Z.image(d,o,_,x,C,w),this.layer.options.debug){var S=this.layer.options.debugOutline;d.save(),d.strokeStyle=S,d.fillStyle=S,d.strokeWidth=10,d.font="20px monospace";var M=new N(_,x);Z.rectangle(d,M,{width:C,height:w},1,0),Z.fillText(d,this.getDebugInfo(h),M._add(10,20),S),Z.drawCross(d,_+C/2,x+w/2,2,S),d.restore()}y&&d.restore(),d.globalAlpha!==m&&(d.globalAlpha=m),this.setCanvasUpdated()}},n.getDebugInfo=function(e){var o=e.split("_"),a=o.length;return"x:"+o[a-2]+", y:"+o[a-3]+", z:"+o[a-1]},n._findChildTiles=function(e){var o=this._getLayerOfTile(e.layer);if(!o.options.background)return[];for(var a=this.getMap(),s=[],l=o.getSpatialReference(),u=l.getResolution(e.z),h=e.extent2d.getMin(),c=e.extent2d.getMax(),f=o._project(a._pointToPrjAtRes(h,u,jy),jy),d=o._project(a._pointToPrjAtRes(c,u,Hy),Hy),g=2,v=1;v<g;v++)this._findChildTilesAt(s,f,d,o,e.z+v);return s},n._findChildTilesAt=function(e,o,a,s,l){var u=s.options.zoomOffset,h=s.getId(),c=s.getSpatialReference().getResolution(l+u);if(!!c)for(var f=s._getTileConfig().getTileIndex(o,c),d=s._getTileConfig().getTileIndex(a,c),g=Math.min(f.idx,d.idx),v=Math.max(f.idx,d.idx),y=Math.min(f.idy,d.idy),p=Math.max(f.idy,d.idy),m,_,x=g;x<v;x++)for(var C=y;C<p;C++)m=s._getTileId(x,C,l+u,h),this.tileCache.has(m)&&(_=this.tileCache.getAndRemove(m),e.push(_),this.tileCache.add(m,_))},n._findParentTile=function(e){var o=this.getMap(),a=this._getLayerOfTile(e.layer);if(!a.options.background)return null;for(var s=a.getSpatialReference(),l=s.getZoomDirection(),u=a.options.zoomOffset,h=a.options.backgroundZoomDiff,c=s.getResolution(e.z),f=e.extent2d.getCenter(),d=a._project(o._pointToPrjAtRes(f,c)),g=1;g<=h;g++){var v=e.z-l*g,y=s.getResolution(v+u);if(!!y){var p=a._getTileConfig().getTileIndex(d,y),m=a._getTileId(p.x,p.y,v+u,e.layer);if(this.tileCache.has(m)){var _=this.tileCache.getAndRemove(m);return this.tileCache.add(m,_),_}}}return null},n._getLayerOfTile=function(e){return this.layer.getChildLayer?this.layer.getChildLayer(e):this.layer},n._getCachedTile=function(e){var o=this.tilesInView,a=this.tileCache.getAndRemove(e);if(a){o[e]=a;var s=this.tilesLoading;if(s&&s[e]){s[e].current=!1;var l=s[e],u=l.image,h=l.info;this.abortTileLoading(u,h),delete s[e]}}else a=o[e];return a},n._addTileToCache=function(e,o){this.tilesInView[e.id]={image:o,current:!0,info:e}},n.getTileOpacity=function(e){return!this.layer.options.fadeAnimation||!e.loadTime?1:Math.min(1,($e()-e.loadTime)/(1e3/60*10))},n.onRemove=function(){this.clear(),delete this.tileCache,delete this._tilePlaceHolder,r.prototype.onRemove.call(this)},n._markTiles=function(){var e=0,o=0;if(this.tilesLoading)for(var a in this.tilesLoading)this.tilesLoading[a].current=!1,e++;if(this.tilesInView)for(var s in this.tilesInView)this.tilesInView[s].current=!1,o++;return[e,o]},n._retireTiles=function(e){for(var o in this.tilesLoading){var a=this.tilesLoading[o];(e||!a.current)&&(a.image&&this.abortTileLoading(a.image,a.info),this.deleteTile(a),delete this.tilesLoading[o])}for(var s in this.tilesInView){var l=this.tilesInView[s];l.current||(delete this.tilesInView[s],this.tileCache.has(s)||this.deleteTile(l))}},n.deleteTile=function(e){!e||!e.image||(e.image.close&&e.image.close(),e.image.onload=null,e.image.onerror=null)},n._generatePlaceHolder=function(e){var o=this.getMap(),a=this.layer.options.placeholder;if(!a||o.getPitch())return null;var s=this.layer.getTileSize(),l=o._getResolution(e)/o._getResolution(),u=this._tilePlaceHolder=this._tilePlaceHolder||Z.createCanvas(1,1,o.CanvasClass);return u.width=s.width*l,u.height=s.height*l,Re(a)?a(u):YO(u),u},t}(fs);li.registerRenderer("canvas",yv);function Vy(){return!1}function YO(r){var t=r.getContext("2d"),n=r.width,i=r.height,e=n/16,o=i/16;t.beginPath();for(var a=0;a<16;a++)t.moveTo(0,a*o),t.lineTo(n,a*o),t.moveTo(a*e,0),t.lineTo(a*e,i);t.strokeStyle="rgba(180, 180, 180, 0.1)",t.lineWidth=1,t.stroke(),t.beginPath();for(var s=[[0,0],[n,0],[0,i],[n,i],[0,0],[0,i],[n,0],[n,i],[0,i/2],[n,i/2],[n/2,0],[n/2,i]],l=1;l<s.length;l+=2)t.moveTo(s[l-1][0],s[l-1][1]),t.lineTo(s[l][0],s[l][1]);t.lineWidth=1*4,t.stroke()}var JO=new N(0,0),kC=function(r){Y(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n.isDrawable=function(){return!0},n.needToRedraw=function(){var e=this.getMap();return this._gl()&&!e.getPitch()&&e.isZooming()&&!e.isMoving()&&!e.isRotating()?!0:r.prototype.needToRedraw.call(this)},n.drawTile=function(e,o){var a=this.getMap();if(!(!e||!a||!o)){var s=e._glScale=e._glScale||a.getGLScale(e.z),l=e.extent2d.xmax-e.extent2d.xmin,u=e.extent2d.ymax-e.extent2d.ymin;if(e.cache!==!1&&this._bindGLBuffer(o,l,u),!this._gl()){r.prototype.drawTile.call(this,e,o);return}var h=e.extent2d,c=e.offset,f=JO.set(h.xmin-c[0],e.extent2d.ymax-c[1]),d=f.x*s,g=f.y*s,v=this.getTileOpacity(o),y=null;this.layer.options.debug&&(y=this.getDebugInfo(e.id)),this.drawGLImage(o,d,g,l,u,s,v,y),v<1?this.setToRedraw():this.setCanvasUpdated()}},n.writeZoomStencil=function(){var e=this.gl;e.stencilFunc(e.ALWAYS,1,255),e.stencilOp(e.KEEP,e.KEEP,e.REPLACE)},n.startZoomStencilTest=function(){var e=this.gl;e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.stencilFunc(e.EQUAL,0,255)},n.endZoomStencilTest=function(){this.pauseZoomStencilTest()},n.pauseZoomStencilTest=function(){var e=this.gl;e.stencilFunc(e.ALWAYS,1,255)},n.resumeZoomStencilTest=function(){var e=this.gl;e.stencilFunc(e.EQUAL,0,255)},n._bindGLBuffer=function(e,o,a){e.glBuffer||(e.glBuffer=this.bufferTileData(0,0,o,a))},n.loadTileImage=function(e,o){var a=this.layer.options.crossOrigin;e.crossOrigin=a!==null?a:"",e.src=o},n.onCanvasCreate=function(){(!this.canvas.gl||!this.canvas.gl.wrap)&&this.createCanvas2()},n.createContext=function(){r.prototype.createContext.call(this),this.createGLContext()},n.resizeCanvas=function(e){!this.canvas||(r.prototype.resizeCanvas.call(this,e),this.resizeGLCanvas())},n.clearCanvas=function(){!this.canvas||(r.prototype.clearCanvas.call(this),this.clearGLCanvas())},n.getCanvasImage=function(){if(!this._gl()||!this.canvas2)return r.prototype.getCanvasImage.call(this);var e=r.prototype.getCanvasImage.call(this);return e&&(e.image=this.canvas2),e},n._gl=function(){if(this.canvas.gl&&this.canvas.gl.wrap)return!0;var e=this.getMap();return e&&(e.getPitch()||e.getBearing())||this.layer&&!!this.layer.options.fragmentShader},n.deleteTile=function(e){r.prototype.deleteTile.call(this,e),e&&e.image&&this.disposeImage(e.image),delete e.image},n.onRemove=function(){r.prototype.onRemove.call(this),this.removeGLCanvas()},t}(PC(yv));li.registerRenderer("gl",kC);function bC(r){var t=this.layer.getTileSize(),n=this.canvas.constructor,i=this.getMap(),e=i.getDevicePixelRatio(),o=Z.createCanvas(t.width*e,t.height*e,n);o.layer=this.layer;var a=this,s=new N(r.extent2d.xmin,r.extent2d.ymax),l=new be(i.pointToCoordinate(s),i.pointToCoordinate(s.add(t.width,t.height)),i.getProjection());return this.layer.drawTile(o,{url:r.url,point:s,center:i.pointToCoordinate(s.add(t.width/2,t.height/2)),extent:l,z:r.z,x:r.x,y:r.y},function(u){if(u){a.onTileError(o,r);return}a.onTileLoad(o,r)}),o}var XO=function(r){Y(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n.loadTile=function(){return bC.apply(this,arguments)},t}(yv),KO=function(r){Y(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n.loadTile=function(){return bC.apply(this,arguments)},t}(kC);vv.registerRenderer("canvas",XO);vv.registerRenderer("gl",KO);var QO=typeof Int8Array!="undefined"?new Int8Array([-1,1,0,-1,-1,0,1,1,0,1,-1,0]):[],eL=`
    attribute vec3 a_position;
    uniform mat4 transform;

    void main()
    {
        gl_Position = transform * vec4(a_position, 1.0);
    }
`,tL=`
    precision mediump float;
    uniform vec3 color;
    void main()
    {
        gl_FragColor = vec4(color, 1.0);
    }
`;(function(){function r(n,i,e){this.gl=n,this.quadVertices=i||QO,this.attributes=["a_position",3,rL(i)],this.debug=e}var t=r.prototype;return t.start=function(){var i=this.gl;i.enable(i.STENCIL_TEST),i.stencilMask(255),i.stencilOp(i.KEEP,i.REPLACE,i.REPLACE),i.depthMask(!1),this._save(),this.buffer||(this._createBuffer(),this._createProgram()),i.useProgram(this.program),i.bindBuffer(i.ARRAY_BUFFER,this.buffer),CC(i,this.program,this.attributes),this.transformLoc||(this.transformLoc=i.getUniformLocation(this.program,"transform")),this.colorLoc||(this.colorLoc=i.getUniformLocation(this.program,"color")),!this.debug&&i.colorMask(!1,!1,!1,!1)},t.end=function(){var i=this.gl;i.depthMask(!0),this._restore(),!this.debug&&i.colorMask(!0,!0,!0,!0)},t.draw=function(i){var e=this.gl;e.uniformMatrix4fv(this.transformLoc,!1,i),e.uniform3fv(this.colorLoc,[Math.random(),Math.random(),Math.random()]),e.drawArrays(e.TRIANGLE_STRIP,0,4)},t.remove=function(){var i=this.gl;return this.buffer&&i.deleteBuffer(this.buffer),this.program&&(i.deleteShader(this.program.fragmentShader),i.deleteShader(this.program.vertexShader),i.deleteProgram(this.program)),delete this.transformLoc,delete this.gl,this},t.stencilMask=function(i){return this.gl.stencilMask(i),this},t.stencilFunc=function(i,e,o){return this.ref=e,this.gl.stencilFunc(i,e,o),this},t.stencilOp=function(i,e,o){return this.gl.stencilOp(i,e,o),this},t.resetFunc=function(){return this.ref=1,this.gl.stencilFunc(this.gl.ALWAYS,1,255),this},t._save=function(){var i=this.gl;this._savedProgram=i.program},t._restore=function(){var i=this.gl;i.program=this._savedProgram,i.program&&i.useProgram(i.program)},t._createBuffer=function(){var i=this.gl;if(this.buffer=i.createBuffer(),!this.buffer)throw new Error("Failed to create the buffer object");i.bindBuffer(i.ARRAY_BUFFER,this.buffer),i.bufferData(i.ARRAY_BUFFER,this.quadVertices,i.STATIC_DRAW)},t._createProgram=function(){var i=wC(this.gl,eL,tL),e=i.program,o=i.vertexShader,a=i.fragmentShader;e.vertexShader=o,e.fragmentShader=a,this.program=e},r})();function rL(r){return r instanceof Float32Array?"FLOAT":r instanceof Int16Array?"SHORT":r instanceof Uint16Array?"UNSIGNED_SHORT":r instanceof Int8Array?"BYTE":r instanceof Uint8Array||r instanceof Uint8ClampedArray?"UNSIGNED_BYTE":"FLOAT"}var nL=function(r){Y(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n.checkResources=function(){var e=this._geosToCheck;if(!this._resourceChecked&&!e&&(e=this.layer._geoList),!Me(e))return[];for(var o=[],a={},s=e.length-1;s>=0;s--){var l=e[s],u=l._getExternalResources();if(!!u.length)if(!this.resources)o.push.apply(o,u);else for(var h=0;h<u.length;h++){var c=u[h][0];!this.resources.isResourceLoaded(u[h])&&!a[c]&&(o.push(u[h]),a[c]=1)}}return this._resourceChecked=!0,delete this._geosToCheck,o},n.render=function(){return this.layer._sortGeometries(),r.prototype.render.apply(this,arguments)},n._addGeoToCheckRes=function(e){!e||(Array.isArray(e)||(e=[e]),this._geosToCheck||(this._geosToCheck=[]),Po(this._geosToCheck,e))},n.onGeometryAdd=function(e){this._addGeoToCheckRes(e),zr(this)},n.onGeometryRemove=function(){zr(this)},n.onGeometrySymbolChange=function(e){this._addGeoToCheckRes(e.target),zr(this)},n.onGeometryShapeChange=function(){zr(this)},n.onGeometryPositionChange=function(){zr(this)},n.onGeometryZIndexChange=function(){zr(this)},n.onGeometryShow=function(){zr(this)},n.onGeometryHide=function(){zr(this)},n.onGeometryPropertiesChange=function(){zr(this)},t}(fs);function zr(r){r.layer.options.drawImmediate&&r.render(),r.setToRedraw()}var iL=new de,cl=[],Vc=new de,oL="center",aL=function(r){Y(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n.getImageData=function(){if(!this.layer.options.geometryEvents||!this._lastRenderTime||$e()-this._lastRenderTime<32)return null;if(!this._imageData){var e=this.context.canvas,o=e.width,a=e.height;try{this._imageData=this.context.getImageData(0,0,o,a)}catch(s){console.warn(`hit detect failed with tainted canvas, some geometries have external resources in another domain:
`,s)}}return this._imageData},n.clearImageData=function(){this._imageData=null,delete this._imageData,this._lastRenderTime=$e()},n.checkResources=function(){var e=this,o=r.prototype.checkResources.apply(this,arguments),a=this.layer.getStyle();return a&&(Array.isArray(a)||(a=[a]),a.forEach(function(s){for(var l=uh(s.symbol,!0),u=0,h=l.length;u<h;u++)e.resources.isResourceLoaded(l[u])||o.push(l[u])})),o},n.needToRedraw=function(){var e=this.getMap();return e.isInteracting()&&this.layer.options.enableAltitude?!0:e.isZooming()&&!e.isRotating()&&!e.getPitch()&&!this._hasPoint&&this.layer.constructor===Xr?!1:r.prototype.needToRedraw.call(this)},n.draw=function(){if(!!this.getMap()){if(!this.layer.isVisible()||this.layer.isEmpty()){this.clearCanvas(),this.completeRender();return}this.prepareCanvas(),this.drawGeos(),this.completeRender()}},n.isBlank=function(){return this.context?!this.context.canvas._drawn:!1},n.drawOnInteracting=function(){if(!!this._geosToDraw){this._updateMapStateCache(),this._updateDisplayExtent();var e=this.getMap(),o=this.layer.getCount(),a=this.mapStateCache.resolution;(e.isZooming()&&e.options.seamlessZoom&&this._drawnRes!==void 0&&a>this._drawnRes*1.5&&this._geosToDraw.length<o||e.isMoving()||e.isInteracting())&&(this.prepareToDraw(),this._batchConversionMarkers(this.mapStateCache.glRes),this._onlyHasPoint||this.forEachGeo(this.checkGeo,this),this._drawnRes=a),this._sortByDistanceToCamera(e.cameraPosition);for(var s=0,l=this._geosToDraw.length;s<l;s++){var u=this._geosToDraw[s];if(!u._isCheck&&!u.isVisible()){delete u._cPoint,delete u._inCurrentView;continue}u._paint(this._displayExtent),this._geosToDraw[s]._cPoint=void 0,this._geosToDraw[s]._inCurrentView=void 0}this.clearImageData()}},n.show=function(){this.layer.forEach(function(e){e._repaint()}),r.prototype.show.apply(this,arguments)},n.forEachGeo=function(e,o){this.layer.forEach(e,o)},n.drawGeos=function(){this._updateMapStateCache(),this._drawnRes=this.mapStateCache.resolution,this._updateDisplayExtent(),this.prepareToDraw(),this._batchConversionMarkers(this.mapStateCache.glRes),this._onlyHasPoint||this.forEachGeo(this.checkGeo,this),this._sortByDistanceToCamera(this.getMap().cameraPosition);for(var e=0,o=this._geosToDraw.length;e<o;e++)this._geosToDraw[e]._paint(),this._geosToDraw[e]._cPoint=void 0,this._geosToDraw[e]._inCurrentView=void 0;this.clearImageData()},n.prepareToDraw=function(){this._hasPoint=!1,this._geosToDraw=[]},n.checkGeo=function(e){if(e.type==="Point"&&this._onlyHasPoint!==void 0){e._inCurrentView&&(this._hasPoint=!0,e._isCheck=!0,this._geosToDraw.push(e));return}if(e._isCheck=!1,!(!e||!e.isVisible()||!e.getMap()||!e.getLayer()||!e.getLayer().isCanvasRender())){var o=e._getPainter(),a=!0;if(e._inCurrentView)a=!0;else if(e._inCurrentView===!1)a=!1;else{var s=o.get2DExtent(this.resources,iL);(!s||!s.intersects(this._displayExtent))&&(a=!1)}!a||(o.hasPoint()&&(this._hasPoint=!0),e._isCheck=!0,this._geosToDraw.push(e))}},n.onZoomEnd=function(){delete this.canvasExtent2D,r.prototype.onZoomEnd.apply(this,arguments)},n.onRemove=function(){this.forEachGeo(function(e){e.onHide()}),delete this._geosToDraw},n.onGeometryPropertiesChange=function(e){e&&this.layer._styleGeometry(e.target),r.prototype.onGeometryPropertiesChange.call(this,e)},n._updateDisplayExtent=function(){var e=this.canvasExtent2D;if(this._maskExtent){if(!this._maskExtent.intersects(e)){this.completeRender();return}e=e.intersection(this._maskExtent)}this._displayExtent=e},n.identifyAtPoint=function(e,o){o===void 0&&(o={});var a=this._geosToDraw;return a?this.layer._hitGeos(a,e,o):[]},n._updateMapStateCache=function(){var e=this.getMap(),o=e._pointToContainerPoint(this.southWest)._add(0,-e.height),a=e.getResolution(),s=e.getPitch(),l=e.getBearing(),u=e.getGLScale(),h=e.getGLRes(),c=e.getContainerExtent(),f=e._get2DExtent(),d=e._get2DExtentAtRes(h);return this.mapStateCache={resolution:a,pitch:s,bearing:l,glScale:u,glRes:h,_2DExtent:f,glExtent:d,containerExtent:c,offset:o},this},n._batchConversionMarkers=function(e){if(this._onlyHasPoint=void 0,!this._constructorIsThis())return[];var o=[],a=[],s=[],l={},u=this.layer,h=u.options,c=u.getAltitude?u.getAltitude():0,f=u.isCanvasRender();this._onlyHasPoint=!0;for(var d=0,g=0,v=this.layer._geoList.length;g<v;g++){var y=this.layer._geoList[g],p=y.getType();if(p==="Point"){var m=y._painter;m||(m=y._getPainter());var _=m.getRenderPoints(oL)[0][0],x=h.enableAltitude?y.getAltitude():c;l[x]===void 0&&(l[x]=m.getAltitude()),o[d]=_,s[d]=l[x],a[d]=y,d++}else this._onlyHasPoint=!1}if(d===0)return[];var C=this.getMap(),w=gu(o,"_pt");w=C._pointsAtResToContainerPoints(o,e,s,w);for(var P=C.getContainerExtent(),S=P.xmax,M=P.ymax,R=P.xmin,j=P.ymin,A={},z=0,D=a.length;z<D;z++){var I=a[z];if(I._cPoint=w[z],!I._cPoint){I._inCurrentView=!1;continue}var B=w[z],W=B.x,E=B.y;if(I._inCurrentView=W>=R&&E>=j&&W<=S&&E<=M,!I._inCurrentView){var T=I.getSymbolHash(),L=void 0;T?L=A[T]=A[T]||I._painter.getFixedExtent():L=I._painter.getFixedExtent(),Vc.set(L.xmin,L.ymin,L.xmax,L.ymax),Vc._add(w[z]),I._inCurrentView=Vc.intersects(P)}I._inCurrentView&&((!I.isVisible()||!f)&&(I._inCurrentView=!1),this._onlyHasPoint&&I._inCurrentView&&(this._hasPoint=!0,I._isCheck=!0,this._geosToDraw.push(I)))}return w},n._sortByDistanceToCamera=function(e){if(!!this.layer.options.sortByDistanceToCamera&&!!this._geosToDraw.length){var o=this.getMap(),a=o.distanceToPoint(1e3,0,o.getGLScale()).x,s=a/1e3,l="center";this._geosToDraw.sort(function(u,h){var c=u.getType(),f=h.getType();if(c!=="Point"||f!=="Point")return 0;var d=u._painter,g=h._painter;if(!d||!g)return 0;var v=d.getRenderPoints(l)[0][0],y=g.getRenderPoints(l)[0][0],p=d.getAltitude()*s,m=g.getAltitude()*s;rr(cl,v.x,v.y,p);var _=Eu(cl,e);rr(cl,y.x,y.y,m);var x=Eu(cl,e);return x-_})}},n._constructorIsThis=function(){return this.constructor===t},t}(nL);Xr.registerRenderer("canvas",aL);var sL=function(r){Y(t,r);function t(i){var e;return e=r.call(this)||this,e.map=i,e._handlerQueue=[],e}var n=t.prototype;return n.callInNextFrame=function(e){this._handlerQueue.push(e)},n.executeFrameCallbacks=function(){var e=this._handlerQueue;this._handlerQueue=[];for(var o=0,a=e.length;o<a;o++)e[o]()},n.offsetPlatform=function(e,o){if(!this.map._panels.front)return this;if(!o&&e.x===0&&e.y===0)return this;var a=this.map._panels,s=this._frontCount=a.back.layerDOM.childElementCount,l=this._backCount=a.front.layerDOM.childElementCount,u=this._uiCount=a.front.uiDOM.childElementCount;if(s||l||u){var h=this.map.offsetPlatform();e?h=h.add(e)._round():h=h.round(),l&&el(a.back,h),(s||u)&&el(a.front,h)}return this},n.domChanged=function(){var e=this.map._panels;if(!e.front)return!1;var o=e.back.layerDOM.childElementCount;if(this._frontCount===void 0||this._frontCount!==o)return!0;var a=e.front.layerDOM.childElementCount;if(this._backCount===void 0||this._backCount!==a)return!0;var s=e.front.uiDOM.childElementCount;return this._uiCount===void 0||this._uiCount!==s},n.resetContainer=function(){if(!!this.map&&(this.map._resetMapViewPoint(),this.map._panels.front)){var e=new N(0,0);el(this.map._panels.back,e),el(this.map._panels.front,e)}},n.onZoomEnd=function(){this.resetContainer()},n.onLoad=function(){this._frameLoop()},t}(fr),lL=function(r){Y(t,r);function t(i){var e;return e=r.call(this,i)||this,e._containerIsCanvas=!!i._containerDOM.getContext,e._thisVisibilitychange=e._onVisibilitychange.bind(Ye(Ye(e))),e._registerEvents(),e._loopTime=0,e}var n=t.prototype;return n.load=function(){this.initContainer()},n.renderFrame=function(e){if(!this.map||!this.map.options.renderable)return!1;this._updateDomPosition(e),delete this._isViewChanged;var o=this.map;o._fireEvent("framestart"),this.updateMapDOM(),o.clearCollisionIndex();var a=this._getAllLayerToRender();this.drawLayers(a,e);var s=this.drawLayerCanvas(a);return s&&(this.drawTops(),this._drawCenterCross()),o._fireEvent("frameend"),this._recordView(),this._mapview=this._getMapView(),delete this._spatialRefChanged,this._fireLayerLoadEvents(),this.executeFrameCallbacks(),this._canvasUpdated=!1,!0},n.updateMapDOM=function(){var e=this.map;if(!e.isZooming()){var o=e._getViewPointFrameOffset();o?e.offsetPlatform(o):this.domChanged()&&this.offsetPlatform(null,!0)}},n.drawLayers=function(e,o){for(var a=this.map,s=a.isInteracting(),l=[],u=[],h=a.options.fpsOnInteracting||0,c=h===0?0:1e3/h,f=this.map.options.layerCanvasLimitOnInteracting,d=e.length,g=a.getBaseLayer(),v=0,y=0;y<d;y++){var p=e[y];if(!!p.isVisible()){var m=p.isCanvasRender();m&&l.push(p.getId());var _=p._getRenderer();if(!!_){var x=this._checkLayerRedraw(p);m&&_.isCanvasUpdated()&&(x||u.push(p.getId()),this.setLayerCanvasUpdated());var C=_.__zoomTransformMatrix;if(delete _.__zoomTransformMatrix,!x){m&&s&&(a.isZooming()&&!a.getPitch()?(_.prepareRender(),_.__zoomTransformMatrix=this._zoomMatrix):(a.getPitch()||a.isRotating())&&_.clearCanvas());continue}if(s&&m){if(f>0&&d-1-y>f&&p!==g){p._getRenderer().clearCanvas();continue}v+=this._drawCanvasLayerOnInteracting(p,v,c,o)}else s&&_.drawOnInteracting?(_.prepareRender&&_.prepareRender(),_.checkAndDraw?_.checkAndDraw(_.drawOnInteracting,this._eventParam,o):_.drawOnInteracting(this._eventParam,o)):(_.render(o),m&&C&&_.isLoadingResource()&&(_.__zoomTransformMatrix=C));m&&(u.push(p.getId()),this.setLayerCanvasUpdated())}}}var w=this._canvasIds||[],P=this._updatedIds||[];if(this._canvasIds=l,this._updatedIds=u,!this.isLayerCanvasUpdated()){var S="---";(w.join(S)!==l.join(S)||P.join(S)!==u.join(S))&&this.setLayerCanvasUpdated()}},n._checkLayerRedraw=function(e){if(this.isSpatialReferenceChanged())return!0;var o=this.map,a=e._getRenderer();return e.isCanvasRender()?a.testIfNeedRedraw():a.needToRedraw&&a.needToRedraw()?!0:o.isInteracting()||this.isViewChanged()},n._drawCanvasLayerOnInteracting=function(e,o,a,s){var l=this.map,u=e._getRenderer(),h=u.getDrawTime(),c=a===0||a>0&&o+h<=a;if(u.mustRenderOnInteracting&&u.mustRenderOnInteracting())u.render(s);else{if(u.drawOnInteracting&&(e===l.getBaseLayer()||c||l.isZooming()&&e.options.forceRenderOnZooming||l.isMoving()&&e.options.forceRenderOnMoving||l.isRotating()&&e.options.forceRenderOnRotating))return u.prepareRender(),u.prepareCanvas(),u.checkAndDraw?u.checkAndDraw(u.drawOnInteracting,this._eventParam,s):u.drawOnInteracting(this._eventParam,s),h;l.isZooming()&&!l.getPitch()&&!l.isRotating()?(u.prepareRender(),u.__zoomTransformMatrix=this._zoomMatrix):(l.getPitch()||l.isRotating())&&u.clearCanvas()}return u.drawOnInteracting&&!c&&u.onSkipDrawOnInteracting(this._eventParam,s),0},n._fireLayerLoadEvents=function(){if(this._updatedIds&&this._updatedIds.length>0){var e=this.map;this._updatedIds.reverse().forEach(function(o){var a=e.getLayer(o);if(!!a){var s=a._getRenderer();!s||!s.isRenderComplete()||a.fire("layerload")}})}},n.isLayerCanvasUpdated=function(){return this._canvasUpdated},n.setLayerCanvasUpdated=function(){this._canvasUpdated=!0},n.drawLayerCanvas=function(e){var o=this.map;if(!o||!this.isLayerCanvasUpdated()&&!this.isViewChanged())return!1;this.canvas||this.createCanvas(),o._fireEvent("renderstart",{context:this.context}),this._updateCanvasSize()||this.clearCanvas();for(var a=o.isInteracting(),s=o.options.layerCanvasLimitOnInteracting,l=e.length,u,h=[],c=0;c<l;c++)if(!(!e[c].isVisible()||!e[c].isCanvasRender())){var f=e[c]._getRenderer();if(!!f){var d=this._getLayerImage(e[c]);d&&d.image&&(e[c]===o.getBaseLayer()?u=[e[c],d]:h.push([e[c],d]))}}var g=this.canvas.width,v=this.canvas.height;u&&(this._drawLayerCanvasImage(u[0],u[1],g,v),this._drawFog()),l=h.length;for(var y=a&&s>=0&&l>s?l-s:0,p=y;p<l;p++)this._drawLayerCanvasImage(h[p][0],h[p][1],g,v);return o._fireEvent("renderend",{context:this.context}),!0},n.setToRedraw=function(){for(var e=this._getAllLayerToRender(),o=0,a=e.length;o<a;o++){var s=e[o].getRenderer();s&&s.canvas&&s.setToRedraw&&s.setToRedraw()}},n.updateMapSize=function(e){if(!(!e||this._containerIsCanvas)){var o=e.width+"px",a=e.height+"px",s=this.map._panels;s.mapWrapper.style.width=o,s.mapWrapper.style.height=a,this._updateCanvasSize()}},n.getMainPanel=function(){return this.map?this._containerIsCanvas?this.map._containerDOM:this.map._panels?this.map._panels.mapWrapper:null:null},n.toDataURL=function(e,o){return this.canvas?this.canvas.toDataURL(e,o):null},n.remove=function(){ye.webgl&&typeof document!="undefined"&&si(document,"visibilitychange",this._thisVisibilitychange),this._resizeInterval&&clearInterval(this._resizeInterval),delete this.context,delete this.canvas,delete this.map,delete this._spatialRefChanged,this._cancelFrameLoop()},n.hitDetect=function(e){var o=this.map;if(!(!o||!o.options.hitDetect||o.isInteracting())){for(var a=o._getLayers(),s="default",l=o.options.hitDetectLimit||0,u=0,h=a.length-1;h>=0;h--){var c=a[h];if(!(!c.options.hitDetect||c.isEmpty&&c.isEmpty())){var f=c._getRenderer();if(!(!f||!f.hitDetect)&&!(f.isBlank&&f.isBlank())){if(c.options.cursor!=="default"&&f.hitDetect(e)){s=c.options.cursor||"pointer";break}if(u++,l>0&&u>l)break}}}o._trySetCursor(s)}},n._getLayerImage=function(e){var o=e._getRenderer();return o.getCanvasImage?o.getCanvasImage():null},n.initContainer=function(){var e=this.map._panels;function o(x,C,w,P){var S=le("div",C);return w&&(S.style.cssText=w),e[x]=S,P||Zb(S),S}var a=this.map._containerDOM;if(!this._containerIsCanvas){a.innerHTML="";var s="position:absolute;top:0px;left:0px;",l=o("mapWrapper","maptalks-wrapper","position:absolute;overflow:hidden;",!0),u=o("allLayers","maptalks-all-layers",s+"padding:0px;margin:0px;z-index:0;overflow:visible;",!0),h=o("backStatic","maptalks-back-static",s+"z-index:0;",!0),c=o("back","maptalks-back",s+"z-index:1;"),f=o("backLayer","maptalks-back-layer",s),d=o("canvasContainer","maptalks-canvas-layer",s+"border:none;z-index:2;"),g=o("frontStatic","maptalks-front-static",s+"z-index:3;",!0),v=o("front","maptalks-front",s+"z-index:4;",!0),y=o("frontLayer","maptalks-front-layer",s+"z-index:0;"),p=o("ui","maptalks-ui",s+"border:none;z-index:1;",!0),m=o("control","maptalks-control","z-index:1",!0);a.appendChild(l),u.appendChild(h),c.appendChild(f),c.layerDOM=f,u.appendChild(c),u.appendChild(d),v.appendChild(y),v.layerDOM=y,v.uiDOM=p,u.appendChild(g),u.appendChild(v),v.appendChild(p),l.appendChild(u),l.appendChild(m),this.createCanvas(),this.resetContainer();var _=this.map._getContainerDomSize();this.updateMapSize(_)}},n.isViewChanged=function(){if(this._isViewChanged!==void 0)return this._isViewChanged;var e=this._mapview,o=this._getMapView();return this._isViewChanged=!e||!md(e,o),this._isViewChanged},n._recordView=function(){var e=this.map;!e._onViewChange||e.isInteracting()||e.isAnimating()||md(e.getView(),e._getCurrentView())||e._onViewChange(e.getView())},n.isSpatialReferenceChanged=function(){return this._spatialRefChanged},n._getMapView=function(){var e=this.map,o=e._getPrjCenter();return{x:o.x,y:o.y,zoom:e.getZoom(),pitch:e.getPitch(),bearing:e.getBearing(),width:e.width,height:e.height}},n._frameLoop=function(e){var o=this;if(!this.map){this._cancelFrameLoop();return}e=e||0,this._frameTimestamp=e,this._resizeCount=0,this.renderFrame(e),Tw().commit(),this._animationFrame=go(function(a){o._frameLoop(a)})},n._cancelFrameLoop=function(){this._animationFrame&&fu(this._animationFrame)},n._drawLayerCanvasImage=function(e,o,a,s){var l=this.context,u=o.point.round(),h=this.map.getDevicePixelRatio();h!==1&&u._multi(h);var c=o.image,f=c.width,d=c.height;if(!(u.x+f<=0||u.y+d<=0)){var g=e.options.opacity;if(se(g)||(g=1),!(g<=0)){var v=o.opacity;if(se(v)||(v=1),!(v<=0)){var y=l.globalAlpha;g<1&&(l.globalAlpha*=g),v<1&&(l.globalAlpha*=v),e.options.cssFilter&&(l.filter=e.options.cssFilter);var p=e.getRenderer(),m=p.__zoomTransformMatrix,_=p.clipCanvas(this.context);m&&(l.save(),l.setTransform.apply(l,m)),l.drawImage(c,0,0,f,d,u.x,u.y,a,s),m&&l.restore(),_&&l.restore(),l.filter!=="none"&&(l.filter="none"),l.globalAlpha=y}}}},n._drawCenterCross=function(){var e=this.map.options.centerCross;if(e){var o=this.context,a=new N(this.canvas.width/2,this.canvas.height/2);Re(e)?e(o,a):Z.drawCross(this.context,a.x,a.y,2,"#f00")}},n._drawContainerExtent=function(){var e=this.map.options.cascadePitches,o=this.map.height-this.map._getVisualHeight(e[0]),a=this.map.height-this.map._getVisualHeight(e[1]),s=this.map.getContainerExtent(),l=this.context;l.beginPath(),l.moveTo(0,s.ymin),l.lineTo(s.xmax,s.ymin),l.stroke(),l.beginPath(),l.moveTo(0,o),l.lineTo(s.xmax,o),l.stroke(),l.beginPath(),l.moveTo(0,a),l.lineTo(s.xmax,a),l.stroke()},n._drawFog=function(){var e=this.map;if(!(e.getPitch()<=e.options.maxVisualPitch||!e.options.fog)){var o=30,a=e.getDevicePixelRatio(),s=this.context,l=e.getContainerExtent(),u=(e.height-e._getVisualHeight(75))*a;u<0&&(u=0);var h=l.ymin*a,c=Math.ceil(h-u),f=e.options.fogColor.join(),d=s.createLinearGradient(0,u,0,h+o),g=1-o/(c+o);d.addColorStop(0,"rgba("+f+", 0)"),d.addColorStop(.3,"rgba("+f+", 0.3)"),d.addColorStop(g,"rgba("+f+", 1)"),d.addColorStop(1,"rgba("+f+", 0)"),s.beginPath(),s.fillStyle=d,s.fillRect(0,u,Math.ceil(l.getWidth())*a,Math.ceil(c+o))}},n._getAllLayerToRender=function(){return this.map._getLayers()},n.clearCanvas=function(){!this.canvas||Z.clearRect(this.context,0,0,this.canvas.width,this.canvas.height)},n._updateCanvasSize=function(){if(!this.canvas||this._containerIsCanvas)return!1;var e=this.map,o=e.getSize(),a=this.canvas,s=e.getDevicePixelRatio(),l=q1(o,s),u=l.width,h=l.height,c=l.cssWidth,f=l.cssHeight;return a.style&&(a.style.width!==c||a.style.height!==f)&&(a.style.width=c,a.style.height=f),u===a.width&&h===a.height?!1:(a.height=h,a.width=u,this.topLayer.width=a.width,this.topLayer.height=a.height,!0)},n.createCanvas=function(){this.topLayer=le("canvas"),this.topCtx=this.topLayer.getContext("2d"),this._containerIsCanvas?this.canvas=this.map._containerDOM:(this.canvas=le("canvas"),this._updateCanvasSize(),this.map._panels.canvasContainer.appendChild(this.canvas)),this.context=this.canvas.getContext("2d")},n._updateDomPosition=function(e){this._checkPositionTime===void 0&&(this._checkPositionTime=-1/0);var o=Math.abs(e-this._checkPositionTime);return o>=500&&(ch(this.map._containerDOM),this._checkPositionTime=Math.min(e,this._checkPositionTime)),this},n._checkSize=function(){!this.map||this.map.checkSize()},n._setCheckSizeInterval=function(e){var o=this;ye.resizeObserver?(this._resizeObserver&&this._resizeObserver.disconnect(),this.map&&(this._resizeObserver=new ResizeObserver(function(a){!o.map||o.map.isRemoved()?o._resizeObserver.disconnect():a.length&&(o.map._containerDomContentRect=a[0].contentRect,o._checkSize(a[0].contentRect),o._resizeCount=o._resizeCount||0,o.renderFrame((o._frameTimestamp||0)+ ++o._resizeCount/100))}),this._resizeObserver.observe(this.map._containerDOM))):(clearInterval(this._resizeInterval),this._checkSizeInterval=e,this._resizeInterval=setInterval(function(){!o.map||o.map.isRemoved()?clearInterval(o._resizeInterval):o._checkSize()},this._checkSizeInterval))},n._registerEvents=function(){var e=this,o=this.map;o.options.checkSize&&!it&&typeof window!="undefined"&&this._setCheckSizeInterval(o.options.checkSizeInterval),ye.mobile||o.on("_mousemove",this._onMapMouseMove,this),o.on("_dragrotatestart _dragrotating _dragrotateend _movestart _moving _moveend _zoomstart",function(a){e._eventParam=a}),o.on("_zooming",function(a){o.getPitch()||(e._zoomMatrix=a.matrix.container),e._eventParam=a}),o.on("_zoomend",function(a){e._eventParam=a,delete e._zoomMatrix}),o.on("_spatialreferencechange",function(){e._spatialRefChanged=!0}),ye.webgl&&typeof document!="undefined"&&Sn(document,"visibilitychange",this._thisVisibilitychange,this),ye.addDPRListening&&ye.addDPRListening(this.map)},n._onMapMouseMove=function(e){var o=this,a=this.map;a.isInteracting()||!a.options.hitDetect||(this._hitDetectFrame&&fu(this._hitDetectFrame),this._hitDetectFrame=go(function(){o.hitDetect(e.containerPoint)}))},n._getCanvasLayers=function(){return this.map._getLayers(function(e){return e.isCanvasRender()})},n._onVisibilitychange=function(){document.visibilityState==="visible"&&this.setToRedraw()},n.addTopElement=function(e){this._tops||(this._tops=[]),this._tops.push(e)},n.removeTopElement=function(e){if(!!this._tops){var o=this._tops.indexOf(e);o>=0&&this._tops.splice(o,1)}},n.getTopElements=function(){return this._tops||[]},n.drawTops=function(){this.topCtx.clearRect(0,0,this.topLayer.width,this.topLayer.height),this.map.fire("drawtopstart"),this.map.fire("drawtops");for(var e=this.getTopElements(),o=!1,a=0;a<e.length;a++)e[a].render(this.topCtx)&&(o=!0);o&&this.context.drawImage(this.topLayer,0,0),this.map.fire("drawtopsend")},t}(sL);fe.registerRenderer("canvas",lL);fe.mergeOptions({fog:!1,fogColor:[233,233,233]});var ph={_getRenderPoints:function(){return[[this._getCenter2DPoint(this.getMap().getGLRes())],null]}};Ge.include(ph);Jr.include(ph);Or.include(ph);To.include(ph);Ki.include({_getRenderPoints:function(t){var n=this.getMap(),i=n.getGLRes();if(t==="vertex"){for(var e=this._trimRing(this.getShell()),o=[],a=0,s=e.length;a<s;a++)o.push(n.coordToPointAtRes(e[a],i));return[o,null]}else{var l=n.coordToPointAtRes(this.getCenter(),i);return[[l],null]}}});var RC={_getRenderPoints:function(t){var n=this.getMap(),i=n.getGLRes(),e,o=null;if(t==="point")e=this._getPath2DPoints(this._getPrjCoordinates(),!1,i),e&&e.length>0&&Array.isArray(e[0])&&(e=e[0].concat(e[1]));else if(t==="vertex")if(e=this._getPath2DPoints(this._getPrjCoordinates(),!1,i),o=[],e&&e.length>0&&Array.isArray(e[0])){for(var a=0,s=e.length;a<s;a++)for(var l=0,u=e[a].length;l<u;l++)l===0?o.push([e[a][l],e[a][l+1]]):o.push([e[a][l-1],e[a][l]]);e=e[0].concat(e[1])}else for(var h=0,c=e.length;h<c;h++)h===0?o.push([e[h],e[h+1]]):o.push([e[h-1],e[h]]);else if(t==="line"){e=[],o=[];var f=this._getPath2DPoints(this._getPrjCoordinates(),!1,i),d=f.length>0&&Array.isArray(f[0]);if(d)for(var g,v=1,y=f.length;v<y;v++){g=f[v],this instanceof We&&g.length>0&&!g[0].equals(g[g.length-1])&&g.push(g[0]);for(var p=1,m=g.length;p<m;p++)e.push(g[p].add(g[p-1])._multi(.5)),o.push([g[p-1],g[p]])}else{this instanceof We&&f.length>0&&!f[0].equals(f[f.length-1])&&f.push(f[0]);for(var _=1,x=f.length;_<x;_++)e.push(f[_].add(f[_-1])._multi(.5)),o.push([f[_-1],f[_]])}}else if(t==="vertex-first"){var C=this._getPrjCoordinates(),w=C.length,P=w?n._prjToPointAtRes(C[0],i):null;e=w?[P]:[],o=w?[[P,C[1]?n._prjToPointAtRes(C[1],i):P]]:[]}else if(t==="vertex-last"){var S=this._getPrjCoordinates(),M=S.length,R=M?n._prjToPointAtRes(S[M-1],i):null;e=M?[R]:[];var j=M>1?M-2:M-1;o=M?[[S[j]?n._prjToPointAtRes(S[j],i):R,R]]:[]}else{var A=this._getProjection().project(this.getCenter());e=[n._prjToPointAtRes(A,i)]}return[e,o]}};Ve.include(RC);We.include(RC);var yi={within:!1,center:[0,0]};function AC(r){if(!r||!r._containerBbox)yi.within=!1;else{yi.within=!1;var t=r._containerBbox,n=t.minx,i=t.miny,e=t.maxx,o=t.maxy,a=Math.abs(e-n),s=Math.abs(o-i);a<=1&&s<=1&&(yi.within=!0,yi.center[0]=(n+e)/2,yi.center[1]=(i+o)/2),delete r._containerBbox}return yi}_e.include({_redrawWhenPitch:function(){return!1},_redrawWhenRotate:function(){return!1}});var _v={_redrawWhenPitch:function(){return!0},_redrawWhenRotate:function(){return this instanceof Jr||this instanceof To},_paintAsPath:function(){var t=this.getMap(),n=this.getAltitude();return n>0||t.getPitch()||this instanceof Jr&&t.getBearing()},_getPaintParams:function(){var t=this.getMap();if(this._paintAsPath())return We.prototype._getPaintParams.call(this,!0);var n=this._getPrjCoordinates(),i=t._prjToPointAtRes(n,t.getGLRes()),e=this._getRenderSize(i);return[i].concat(e)},_paintOn:function(){return this._paintAsPath()?Z.polygon.apply(Z,arguments):Z.ellipse.apply(Z,arguments)},_getRenderSize:function(t){var n=this.getMap(),i=n.getGLRes(),e=this._getPrjExtent(),o=n._prjToPointAtRes(e.getMin(),i),a=n._prjToPointAtRes(e.getMax(),i);return[Math.abs(a.x-o.x)/2,Math.abs(a.y-t.y),Math.abs(t.y-o.y)]}};Jr.include(_v);Or.include(_v);Ki.include({_getPaintParams:function(){var t=this.getMap(),n=this._getPrjShell(),i=this._getPath2DPoints(n,!1,t.getGLRes());return[i]},_paintOn:Z.polygon});To.include(_v,{_redrawWhenPitch:function(){return!0},_getPaintParams:function(){if(this._paintAsPath())return We.prototype._getPaintParams.call(this,!0);var t=this.getMap(),n=t._prjToPointAtRes(this._getPrjCoordinates(),t.getGLRes()),i=this._getRenderSize(n);return[n,i[0],[this.getStartAngle(),this.getEndAngle()]]},_paintOn:function(){if(this._paintAsPath())return Z.polygon.apply(Z,arguments);var t=this.getMap().getBearing(),n=arguments;return t&&(n[3]=n[3].slice(0),n[3][0]+=t,n[3][1]+=t),Z.sector.apply(Z,n)}});gh.include({_paintAsPath:function(){return!0}});Ve.include({arrowStyles:{classic:[3,4]},_getArrowShape:function(t,n,i,e,o){if(!t||!n||t.equals(n))return null;o||(o=0);var a=i*e[0],s=i*e[1]+o,l=a/2+o,u;n.nextCtrlPoint||n.prevCtrlPoint?n.prevCtrlPoint?u=n.sub(new N(n.prevCtrlPoint)):u=n.sub(new N(n.nextCtrlPoint)):u=n.sub(t),u._unit();var h=n.sub(u.multi(s));u._perp();var c=h.add(u.multi(l));u._multi(-1);var f=h.add(u.multi(l));return[c,n,f,c]},_getPaintParams:function(){var t=this._getPrjCoordinates(),n=this._getPath2DPoints(t,!1,this.getMap().getGLRes());return[n]},_paintOn:function(t,n,i,e,o){var a=AC(this._painter);a.within?Z.pixelRect(t,a.center,i,e):this.options.smoothness?Z.paintSmoothLine(t,n,i,this.options.smoothness,!1,this._animIdx,this._animTailRatio):Z.path(t,n,i,null,o),this._paintArrow(t,n,i)},_getArrowPlacement:function(){return this.options.arrowPlacement},_getArrowStyle:function(){var t=this.options.arrowStyle;return t?Array.isArray(t)?t:this.arrowStyles[t]:null},_getArrows:function(t,n,i){var e=this._getArrowStyle();if(!e||t.length<2)return[];for(var o=t.length>0&&Array.isArray(t[0]),a=o?t:[t],s=this._getArrowPlacement(),l=[],u=this.getMap(),h=u.coordToContainerPoint(this.getFirstCoordinate()),c=u.coordToContainerPoint(this.getLastCoordinate()),f=a.length-1;f>=0;f--){if(s==="vertex-first"||s==="vertex-firstlast"&&a[f][0].closeTo(h,.01)){var d=this._getArrowShape(a[f][1],a[f][0],n,e,i);d&&l.push(d)}if(s==="vertex-last"||s==="vertex-firstlast"&&a[f][a[f].length-1].closeTo(c,.01)){var g=this._getArrowShape(a[f][a[f].length-2],a[f][a[f].length-1],n,e,i);g&&l.push(g)}else s==="point"&&this._getArrowPoints(l,a[f],n,e,i)}return l},_getArrowPoints:function(t,n,i,e,o){for(var a=0,s=n.length-1;a<s;a++){var l=this._getArrowShape(n[a],n[a+1],i,e,o);l&&t.push(l)}},_paintArrow:function(t,n,i){var e=this._getInternalSymbol().lineWidth;(!se(e)||e<3)&&(e=3);var o=this._getArrows(n,e);if(!!o.length){t.setLineDash&&t.setLineDash([]);for(var a=o.length-1;a>=0;a--)t.fillStyle=t.strokeStyle,Z.polygon(t,o[a],i,i)}}});We.include({_getPaintParams:function(t){var n=this.getMap().getGLRes(),i=this._getPrjShell(),e=this._getPath2DPoints(i,t,n),o=e.length>0&&Array.isArray(e[0]);o&&(e=[[e[0]],[e[1]]]);var a=this._getPrjHoles(),s=[];if(a&&a.length>0){for(var l=this._simplified,u=0;u<a.length;u++){var h=this._getPath2DPoints(a[u],t,n);Array.isArray(h)&&o?Array.isArray(h[0])?(e[0].push(h[0]),e[1].push(h[1])):e[0].push(h):s.push(h)}l&&(this._simplified=l)}return o||(e=[e],Po(e,s)),[e]},_paintOn:function(t,n,i,e,o){var a=AC(this._painter);a.within?Z.pixelRect(t,a.center,i,e):Z.polygon(t,n,i,e,o,this.options.smoothness)}});fe.VERSION=ob;export{uL as B,fL as F,fe as M,or as R,li as T,cL as a,dL as b,YS as c,hL as j,HT as m,k as r,gL as s};
